"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@babylonjs";
exports.ids = ["vendor-chunks/@babylonjs"];
exports.modules = {

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/glTFBinaryExtension.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/glTFBinaryExtension.js ***!
  \*************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFBinaryExtension: () => (/* binding */ GLTFBinaryExtension)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js\");\n/* harmony import */ var _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glTFLoaderUtils.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js\");\n/* harmony import */ var _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./glTFLoaderInterfaces.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst BinaryExtensionBufferName = \"binary_glTF\";\n/**\n * @internal\n * @deprecated\n */\nclass GLTFBinaryExtension extends _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoaderExtension {\n    constructor() {\n        super(\"KHR_binary_glTF\");\n    }\n    loadRuntimeAsync(scene, data, rootUrl, onSuccess) {\n        const extensionsUsed = data.json.extensionsUsed;\n        if (!extensionsUsed || extensionsUsed.indexOf(this.name) === -1 || !data.bin) {\n            return false;\n        }\n        this._bin = data.bin;\n        onSuccess(_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoaderBase.CreateRuntime(data.json, scene, rootUrl));\n        return true;\n    }\n    loadBufferAsync(gltfRuntime, id, onSuccess, onError) {\n        if (gltfRuntime.extensionsUsed.indexOf(this.name) === -1) {\n            return false;\n        }\n        if (id !== BinaryExtensionBufferName) {\n            return false;\n        }\n        this._bin.readAsync(0, this._bin.byteLength).then(onSuccess, (error) => onError(error.message));\n        return true;\n    }\n    loadTextureBufferAsync(gltfRuntime, id, onSuccess) {\n        const texture = gltfRuntime.textures[id];\n        const source = gltfRuntime.images[texture.source];\n        if (!source.extensions || !(this.name in source.extensions)) {\n            return false;\n        }\n        const sourceExt = source.extensions[this.name];\n        const bufferView = gltfRuntime.bufferViews[sourceExt.bufferView];\n        const buffer = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__.GLTFUtils.GetBufferFromBufferView(gltfRuntime, bufferView, 0, bufferView.byteLength, _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__.EComponentType.UNSIGNED_BYTE);\n        onSuccess(buffer);\n        return true;\n    }\n    loadShaderStringAsync(gltfRuntime, id, onSuccess) {\n        const shader = gltfRuntime.shaders[id];\n        if (!shader.extensions || !(this.name in shader.extensions)) {\n            return false;\n        }\n        const binaryExtensionShader = shader.extensions[this.name];\n        const bufferView = gltfRuntime.bufferViews[binaryExtensionShader.bufferView];\n        const shaderBytes = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__.GLTFUtils.GetBufferFromBufferView(gltfRuntime, bufferView, 0, bufferView.byteLength, _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__.EComponentType.UNSIGNED_BYTE);\n        setTimeout(() => {\n            const shaderString = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_1__.GLTFUtils.DecodeBufferToText(shaderBytes);\n            onSuccess(shaderString);\n        });\n        return true;\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(new GLTFBinaryExtension());\n//# sourceMappingURL=glTFBinaryExtension.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZCaW5hcnlFeHRlbnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFrRjtBQUNqQztBQUNVO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxrQ0FBa0MsK0RBQW1CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwREFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBEQUFTLDRFQUE0RSxvRUFBYztBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwREFBUyw0RUFBNEUsb0VBQWM7QUFDL0g7QUFDQSxpQ0FBaUMsMERBQVM7QUFDMUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0RBQVU7QUFDViwrQyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZCaW5hcnlFeHRlbnNpb24uanM/OWE0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyRXh0ZW5zaW9uLCBHTFRGTG9hZGVyLCBHTFRGTG9hZGVyQmFzZSB9IGZyb20gXCIuL2dsVEZMb2FkZXIuanNcIjtcbmltcG9ydCB7IEdMVEZVdGlscyB9IGZyb20gXCIuL2dsVEZMb2FkZXJVdGlscy5qc1wiO1xuaW1wb3J0IHsgRUNvbXBvbmVudFR5cGUgfSBmcm9tIFwiLi9nbFRGTG9hZGVySW50ZXJmYWNlcy5qc1wiO1xuY29uc3QgQmluYXJ5RXh0ZW5zaW9uQnVmZmVyTmFtZSA9IFwiYmluYXJ5X2dsVEZcIjtcbi8qKlxuICogQGludGVybmFsXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgY2xhc3MgR0xURkJpbmFyeUV4dGVuc2lvbiBleHRlbmRzIEdMVEZMb2FkZXJFeHRlbnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIktIUl9iaW5hcnlfZ2xURlwiKTtcbiAgICB9XG4gICAgbG9hZFJ1bnRpbWVBc3luYyhzY2VuZSwgZGF0YSwgcm9vdFVybCwgb25TdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbnNVc2VkID0gZGF0YS5qc29uLmV4dGVuc2lvbnNVc2VkO1xuICAgICAgICBpZiAoIWV4dGVuc2lvbnNVc2VkIHx8IGV4dGVuc2lvbnNVc2VkLmluZGV4T2YodGhpcy5uYW1lKSA9PT0gLTEgfHwgIWRhdGEuYmluKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYmluID0gZGF0YS5iaW47XG4gICAgICAgIG9uU3VjY2VzcyhHTFRGTG9hZGVyQmFzZS5DcmVhdGVSdW50aW1lKGRhdGEuanNvbiwgc2NlbmUsIHJvb3RVcmwpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxvYWRCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBpZiAoZ2x0ZlJ1bnRpbWUuZXh0ZW5zaW9uc1VzZWQuaW5kZXhPZih0aGlzLm5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCAhPT0gQmluYXJ5RXh0ZW5zaW9uQnVmZmVyTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Jpbi5yZWFkQXN5bmMoMCwgdGhpcy5fYmluLmJ5dGVMZW5ndGgpLnRoZW4ob25TdWNjZXNzLCAoZXJyb3IpID0+IG9uRXJyb3IoZXJyb3IubWVzc2FnZSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbG9hZFRleHR1cmVCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcykge1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gZ2x0ZlJ1bnRpbWUudGV4dHVyZXNbaWRdO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBnbHRmUnVudGltZS5pbWFnZXNbdGV4dHVyZS5zb3VyY2VdO1xuICAgICAgICBpZiAoIXNvdXJjZS5leHRlbnNpb25zIHx8ICEodGhpcy5uYW1lIGluIHNvdXJjZS5leHRlbnNpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvdXJjZUV4dCA9IHNvdXJjZS5leHRlbnNpb25zW3RoaXMubmFtZV07XG4gICAgICAgIGNvbnN0IGJ1ZmZlclZpZXcgPSBnbHRmUnVudGltZS5idWZmZXJWaWV3c1tzb3VyY2VFeHQuYnVmZmVyVmlld107XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEdMVEZVdGlscy5HZXRCdWZmZXJGcm9tQnVmZmVyVmlldyhnbHRmUnVudGltZSwgYnVmZmVyVmlldywgMCwgYnVmZmVyVmlldy5ieXRlTGVuZ3RoLCBFQ29tcG9uZW50VHlwZS5VTlNJR05FRF9CWVRFKTtcbiAgICAgICAgb25TdWNjZXNzKGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsb2FkU2hhZGVyU3RyaW5nQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gZ2x0ZlJ1bnRpbWUuc2hhZGVyc1tpZF07XG4gICAgICAgIGlmICghc2hhZGVyLmV4dGVuc2lvbnMgfHwgISh0aGlzLm5hbWUgaW4gc2hhZGVyLmV4dGVuc2lvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmluYXJ5RXh0ZW5zaW9uU2hhZGVyID0gc2hhZGVyLmV4dGVuc2lvbnNbdGhpcy5uYW1lXTtcbiAgICAgICAgY29uc3QgYnVmZmVyVmlldyA9IGdsdGZSdW50aW1lLmJ1ZmZlclZpZXdzW2JpbmFyeUV4dGVuc2lvblNoYWRlci5idWZmZXJWaWV3XTtcbiAgICAgICAgY29uc3Qgc2hhZGVyQnl0ZXMgPSBHTFRGVXRpbHMuR2V0QnVmZmVyRnJvbUJ1ZmZlclZpZXcoZ2x0ZlJ1bnRpbWUsIGJ1ZmZlclZpZXcsIDAsIGJ1ZmZlclZpZXcuYnl0ZUxlbmd0aCwgRUNvbXBvbmVudFR5cGUuVU5TSUdORURfQllURSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2hhZGVyU3RyaW5nID0gR0xURlV0aWxzLkRlY29kZUJ1ZmZlclRvVGV4dChzaGFkZXJCeXRlcyk7XG4gICAgICAgICAgICBvblN1Y2Nlc3Moc2hhZGVyU3RyaW5nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24obmV3IEdMVEZCaW5hcnlFeHRlbnNpb24oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbFRGQmluYXJ5RXh0ZW5zaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/glTFBinaryExtension.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js ***!
  \****************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFLoader: () => (/* binding */ GLTFLoader),\n/* harmony export */   GLTFLoaderBase: () => (/* binding */ GLTFLoaderBase),\n/* harmony export */   GLTFLoaderExtension: () => (/* binding */ GLTFLoaderExtension)\n/* harmony export */ });\n/* harmony import */ var _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFLoaderInterfaces.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\n/* harmony import */ var _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Cameras/camera.js */ \"@babylonjs/core/Cameras/camera.js\");\n/* harmony import */ var _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Cameras/freeCamera.js */ \"@babylonjs/core/Cameras/freeCamera.js\");\n/* harmony import */ var _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core/Animations/animation.js */ \"@babylonjs/core/Animations/animation.js\");\n/* harmony import */ var _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/Bones/bone.js */ \"@babylonjs/core/Bones/bone.js\");\n/* harmony import */ var _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Bones/skeleton.js */ \"@babylonjs/core/Bones/skeleton.js\");\n/* harmony import */ var _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Materials/effect.js */ \"@babylonjs/core/Materials/effect.js\");\n/* harmony import */ var _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babylonjs/core/Materials/material.js */ \"@babylonjs/core/Materials/material.js\");\n/* harmony import */ var _babylonjs_core_Materials_multiMaterial_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babylonjs/core/Materials/multiMaterial.js */ \"@babylonjs/core/Materials/multiMaterial.js\");\n/* harmony import */ var _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core/Materials/standardMaterial.js */ \"@babylonjs/core/Materials/standardMaterial.js\");\n/* harmony import */ var _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core/Materials/shaderMaterial.js */ \"@babylonjs/core/Materials/shaderMaterial.js\");\n/* harmony import */ var _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/texture.js */ \"@babylonjs/core/Materials/Textures/texture.js\");\n/* harmony import */ var _babylonjs_core_Meshes_mesh_vertexData_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core/Meshes/mesh.vertexData.js */ \"@babylonjs/core/Meshes/mesh.vertexData.js\");\n/* harmony import */ var _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babylonjs/core/Buffers/buffer.js */ \"@babylonjs/core/Buffers/buffer.js\");\n/* harmony import */ var _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babylonjs/core/Meshes/geometry.js */ \"@babylonjs/core/Meshes/geometry.js\");\n/* harmony import */ var _babylonjs_core_Meshes_subMesh_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babylonjs/core/Meshes/subMesh.js */ \"@babylonjs/core/Meshes/subMesh.js\");\n/* harmony import */ var _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babylonjs/core/Meshes/abstractMesh.js */ \"@babylonjs/core/Meshes/abstractMesh.js\");\n/* harmony import */ var _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @babylonjs/core/Meshes/mesh.js */ \"@babylonjs/core/Meshes/mesh.js\");\n/* harmony import */ var _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @babylonjs/core/Lights/hemisphericLight.js */ \"@babylonjs/core/Lights/hemisphericLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @babylonjs/core/Lights/directionalLight.js */ \"@babylonjs/core/Lights/directionalLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @babylonjs/core/Lights/pointLight.js */ \"@babylonjs/core/Lights/pointLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @babylonjs/core/Lights/spotLight.js */ \"@babylonjs/core/Lights/spotLight.js\");\n/* harmony import */ var _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./glTFLoaderUtils.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js\");\n/* harmony import */ var _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../glTFFileLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js\");\n/* harmony import */ var _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @babylonjs/core/Engines/constants.js */ \"@babylonjs/core/Engines/constants.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_Materials_multiMaterial_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_13__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_14__, _babylonjs_core_Meshes_mesh_vertexData_js__WEBPACK_IMPORTED_MODULE_15__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_16__, _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_17__, _babylonjs_core_Meshes_subMesh_js__WEBPACK_IMPORTED_MODULE_18__, _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_19__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__, _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_21__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_22__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_23__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_24__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__, _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__, _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__]);\n([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_Materials_multiMaterial_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_13__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_14__, _babylonjs_core_Meshes_mesh_vertexData_js__WEBPACK_IMPORTED_MODULE_15__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_16__, _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_17__, _babylonjs_core_Meshes_subMesh_js__WEBPACK_IMPORTED_MODULE_18__, _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_19__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__, _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_21__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_22__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_23__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_24__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__, _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__, _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Tokenizer. Used for shaders compatibility\n * Automatically map world, view, projection, worldViewProjection, attributes and so on\n */\nvar ETokenType;\n(function (ETokenType) {\n    ETokenType[ETokenType[\"IDENTIFIER\"] = 1] = \"IDENTIFIER\";\n    ETokenType[ETokenType[\"UNKNOWN\"] = 2] = \"UNKNOWN\";\n    ETokenType[ETokenType[\"END_OF_INPUT\"] = 3] = \"END_OF_INPUT\";\n})(ETokenType || (ETokenType = {}));\nclass Tokenizer {\n    constructor(toParse) {\n        this._pos = 0;\n        this.currentToken = ETokenType.UNKNOWN;\n        this.currentIdentifier = \"\";\n        this.currentString = \"\";\n        this.isLetterOrDigitPattern = /^[a-zA-Z0-9]+$/;\n        this._toParse = toParse;\n        this._maxPos = toParse.length;\n    }\n    getNextToken() {\n        if (this.isEnd()) {\n            return ETokenType.END_OF_INPUT;\n        }\n        this.currentString = this.read();\n        this.currentToken = ETokenType.UNKNOWN;\n        if (this.currentString === \"_\" || this.isLetterOrDigitPattern.test(this.currentString)) {\n            this.currentToken = ETokenType.IDENTIFIER;\n            this.currentIdentifier = this.currentString;\n            while (!this.isEnd() && (this.isLetterOrDigitPattern.test((this.currentString = this.peek())) || this.currentString === \"_\")) {\n                this.currentIdentifier += this.currentString;\n                this.forward();\n            }\n        }\n        return this.currentToken;\n    }\n    peek() {\n        return this._toParse[this._pos];\n    }\n    read() {\n        return this._toParse[this._pos++];\n    }\n    forward() {\n        this._pos++;\n    }\n    isEnd() {\n        return this._pos >= this._maxPos;\n    }\n}\n/**\n * Values\n */\nconst glTFTransforms = [\"MODEL\", \"VIEW\", \"PROJECTION\", \"MODELVIEW\", \"MODELVIEWPROJECTION\", \"JOINTMATRIX\"];\nconst babylonTransforms = [\"world\", \"view\", \"projection\", \"worldView\", \"worldViewProjection\", \"mBones\"];\nconst glTFAnimationPaths = [\"translation\", \"rotation\", \"scale\"];\nconst babylonAnimationPaths = [\"position\", \"rotationQuaternion\", \"scaling\"];\n/**\n * Parse\n * @param parsedBuffers\n * @param gltfRuntime\n */\nconst parseBuffers = (parsedBuffers, gltfRuntime) => {\n    for (const buf in parsedBuffers) {\n        const parsedBuffer = parsedBuffers[buf];\n        gltfRuntime.buffers[buf] = parsedBuffer;\n        gltfRuntime.buffersCount++;\n    }\n};\nconst parseShaders = (parsedShaders, gltfRuntime) => {\n    for (const sha in parsedShaders) {\n        const parsedShader = parsedShaders[sha];\n        gltfRuntime.shaders[sha] = parsedShader;\n        gltfRuntime.shaderscount++;\n    }\n};\nconst parseObject = (parsedObjects, runtimeProperty, gltfRuntime) => {\n    for (const object in parsedObjects) {\n        const parsedObject = parsedObjects[object];\n        gltfRuntime[runtimeProperty][object] = parsedObject;\n    }\n};\n/**\n * Utils\n * @param buffer\n */\nconst normalizeUVs = (buffer) => {\n    if (!buffer) {\n        return;\n    }\n    for (let i = 0; i < buffer.length / 2; i++) {\n        buffer[i * 2 + 1] = 1.0 - buffer[i * 2 + 1];\n    }\n};\nconst getAttribute = (attributeParameter) => {\n    if (attributeParameter.semantic === \"NORMAL\") {\n        return \"normal\";\n    }\n    else if (attributeParameter.semantic === \"POSITION\") {\n        return \"position\";\n    }\n    else if (attributeParameter.semantic === \"JOINT\") {\n        return \"matricesIndices\";\n    }\n    else if (attributeParameter.semantic === \"WEIGHT\") {\n        return \"matricesWeights\";\n    }\n    else if (attributeParameter.semantic === \"COLOR\") {\n        return \"color\";\n    }\n    else if (attributeParameter.semantic && attributeParameter.semantic.indexOf(\"TEXCOORD_\") !== -1) {\n        const channel = Number(attributeParameter.semantic.split(\"_\")[1]);\n        return \"uv\" + (channel === 0 ? \"\" : channel + 1);\n    }\n    return null;\n};\n/**\n * Loads and creates animations\n * @param gltfRuntime\n */\nconst loadAnimations = (gltfRuntime) => {\n    for (const anim in gltfRuntime.animations) {\n        const animation = gltfRuntime.animations[anim];\n        if (!animation.channels || !animation.samplers) {\n            continue;\n        }\n        let lastAnimation = null;\n        for (let i = 0; i < animation.channels.length; i++) {\n            // Get parameters and load buffers\n            const channel = animation.channels[i];\n            const sampler = animation.samplers[channel.sampler];\n            if (!sampler) {\n                continue;\n            }\n            let inputData = null;\n            let outputData = null;\n            if (animation.parameters) {\n                inputData = animation.parameters[sampler.input];\n                outputData = animation.parameters[sampler.output];\n            }\n            else {\n                inputData = sampler.input;\n                outputData = sampler.output;\n            }\n            const bufferInput = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetBufferFromAccessor(gltfRuntime, gltfRuntime.accessors[inputData]);\n            const bufferOutput = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetBufferFromAccessor(gltfRuntime, gltfRuntime.accessors[outputData]);\n            const targetId = channel.target.id;\n            let targetNode = gltfRuntime.scene.getNodeById(targetId);\n            if (targetNode === null) {\n                targetNode = gltfRuntime.scene.getNodeByName(targetId);\n            }\n            if (targetNode === null) {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Warn(\"Creating animation named \" + anim + \". But cannot find node named \" + targetId + \" to attach to\");\n                continue;\n            }\n            const isBone = targetNode instanceof _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__.Bone;\n            // Get target path (position, rotation or scaling)\n            let targetPath = channel.target.path;\n            const targetPathIndex = glTFAnimationPaths.indexOf(targetPath);\n            if (targetPathIndex !== -1) {\n                targetPath = babylonAnimationPaths[targetPathIndex];\n            }\n            // Determine animation type\n            let animationType = _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__.Animation.ANIMATIONTYPE_MATRIX;\n            if (!isBone) {\n                if (targetPath === \"rotationQuaternion\") {\n                    animationType = _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__.Animation.ANIMATIONTYPE_QUATERNION;\n                    targetNode.rotationQuaternion = new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion();\n                }\n                else {\n                    animationType = _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__.Animation.ANIMATIONTYPE_VECTOR3;\n                }\n            }\n            // Create animation and key frames\n            let babylonAnimation = null;\n            const keys = [];\n            let arrayOffset = 0;\n            let modifyKey = false;\n            if (isBone && lastAnimation && lastAnimation.getKeys().length === bufferInput.length) {\n                babylonAnimation = lastAnimation;\n                modifyKey = true;\n            }\n            if (!modifyKey) {\n                gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n                babylonAnimation = new _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__.Animation(anim, isBone ? \"_matrix\" : targetPath, 1, animationType, _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_6__.Animation.ANIMATIONLOOPMODE_CYCLE);\n                gltfRuntime.scene._blockEntityCollection = false;\n            }\n            // For each frame\n            for (let j = 0; j < bufferInput.length; j++) {\n                let value = null;\n                if (targetPath === \"rotationQuaternion\") {\n                    // VEC4\n                    value = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray([bufferOutput[arrayOffset], bufferOutput[arrayOffset + 1], bufferOutput[arrayOffset + 2], bufferOutput[arrayOffset + 3]]);\n                    arrayOffset += 4;\n                }\n                else {\n                    // Position and scaling are VEC3\n                    value = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray([bufferOutput[arrayOffset], bufferOutput[arrayOffset + 1], bufferOutput[arrayOffset + 2]]);\n                    arrayOffset += 3;\n                }\n                if (isBone) {\n                    const bone = targetNode;\n                    let translation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();\n                    let rotationQuaternion = new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion();\n                    let scaling = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();\n                    // Warning on decompose\n                    let mat = bone.getBaseMatrix();\n                    if (modifyKey && lastAnimation) {\n                        mat = lastAnimation.getKeys()[j].value;\n                    }\n                    mat.decompose(scaling, rotationQuaternion, translation);\n                    if (targetPath === \"position\") {\n                        translation = value;\n                    }\n                    else if (targetPath === \"rotationQuaternion\") {\n                        rotationQuaternion = value;\n                    }\n                    else {\n                        scaling = value;\n                    }\n                    value = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Compose(scaling, rotationQuaternion, translation);\n                }\n                if (!modifyKey) {\n                    keys.push({\n                        frame: bufferInput[j],\n                        value: value,\n                    });\n                }\n                else if (lastAnimation) {\n                    lastAnimation.getKeys()[j].value = value;\n                }\n            }\n            // Finish\n            if (!modifyKey && babylonAnimation) {\n                babylonAnimation.setKeys(keys);\n                targetNode.animations.push(babylonAnimation);\n            }\n            lastAnimation = babylonAnimation;\n            gltfRuntime.scene.stopAnimation(targetNode);\n            gltfRuntime.scene.beginAnimation(targetNode, 0, bufferInput[bufferInput.length - 1], true, 1.0);\n        }\n    }\n};\n/**\n * @returns the bones transformation matrix\n * @param node\n */\nconst configureBoneTransformation = (node) => {\n    let mat = null;\n    if (node.translation || node.rotation || node.scale) {\n        const scale = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.scale || [1, 1, 1]);\n        const rotation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(node.rotation || [0, 0, 0, 1]);\n        const position = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.translation || [0, 0, 0]);\n        mat = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Compose(scale, rotation, position);\n    }\n    else {\n        mat = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.FromArray(node.matrix);\n    }\n    return mat;\n};\n/**\n * Returns the parent bone\n * @param gltfRuntime\n * @param skins\n * @param jointName\n * @param newSkeleton\n * @returns the parent bone\n */\nconst getParentBone = (gltfRuntime, skins, jointName, newSkeleton) => {\n    // Try to find\n    for (let i = 0; i < newSkeleton.bones.length; i++) {\n        if (newSkeleton.bones[i].name === jointName) {\n            return newSkeleton.bones[i];\n        }\n    }\n    // Not found, search in gltf nodes\n    const nodes = gltfRuntime.nodes;\n    for (const nde in nodes) {\n        const node = nodes[nde];\n        if (!node.jointName) {\n            continue;\n        }\n        const children = node.children;\n        for (let i = 0; i < children.length; i++) {\n            const child = gltfRuntime.nodes[children[i]];\n            if (!child.jointName) {\n                continue;\n            }\n            if (child.jointName === jointName) {\n                const mat = configureBoneTransformation(node);\n                const bone = new _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__.Bone(node.name || \"\", newSkeleton, getParentBone(gltfRuntime, skins, node.jointName, newSkeleton), mat);\n                bone.id = nde;\n                return bone;\n            }\n        }\n    }\n    return null;\n};\n/**\n * Returns the appropriate root node\n * @param nodesToRoot\n * @param id\n * @returns the root node\n */\nconst getNodeToRoot = (nodesToRoot, id) => {\n    for (let i = 0; i < nodesToRoot.length; i++) {\n        const nodeToRoot = nodesToRoot[i];\n        for (let j = 0; j < nodeToRoot.node.children.length; j++) {\n            const child = nodeToRoot.node.children[j];\n            if (child === id) {\n                return nodeToRoot.bone;\n            }\n        }\n    }\n    return null;\n};\n/**\n * Returns the node with the joint name\n * @param gltfRuntime\n * @param jointName\n * @returns the node with the joint name\n */\nconst getJointNode = (gltfRuntime, jointName) => {\n    const nodes = gltfRuntime.nodes;\n    let node = nodes[jointName];\n    if (node) {\n        return {\n            node: node,\n            id: jointName,\n        };\n    }\n    for (const nde in nodes) {\n        node = nodes[nde];\n        if (node.jointName === jointName) {\n            return {\n                node: node,\n                id: nde,\n            };\n        }\n    }\n    return null;\n};\n/**\n * Checks if a nodes is in joints\n * @param skins\n * @param id\n * @returns true if the node is in joints, else false\n */\nconst nodeIsInJoints = (skins, id) => {\n    for (let i = 0; i < skins.jointNames.length; i++) {\n        if (skins.jointNames[i] === id) {\n            return true;\n        }\n    }\n    return false;\n};\n/**\n * Fills the nodes to root for bones and builds hierarchy\n * @param gltfRuntime\n * @param newSkeleton\n * @param skins\n * @param nodesToRoot\n */\nconst getNodesToRoot = (gltfRuntime, newSkeleton, skins, nodesToRoot) => {\n    // Creates nodes for root\n    for (const nde in gltfRuntime.nodes) {\n        const node = gltfRuntime.nodes[nde];\n        const id = nde;\n        if (!node.jointName || nodeIsInJoints(skins, node.jointName)) {\n            continue;\n        }\n        // Create node to root bone\n        const mat = configureBoneTransformation(node);\n        const bone = new _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__.Bone(node.name || \"\", newSkeleton, null, mat);\n        bone.id = id;\n        nodesToRoot.push({ bone: bone, node: node, id: id });\n    }\n    // Parenting\n    for (let i = 0; i < nodesToRoot.length; i++) {\n        const nodeToRoot = nodesToRoot[i];\n        const children = nodeToRoot.node.children;\n        for (let j = 0; j < children.length; j++) {\n            let child = null;\n            for (let k = 0; k < nodesToRoot.length; k++) {\n                if (nodesToRoot[k].id === children[j]) {\n                    child = nodesToRoot[k];\n                    break;\n                }\n            }\n            if (child) {\n                child.bone._parent = nodeToRoot.bone;\n                nodeToRoot.bone.children.push(child.bone);\n            }\n        }\n    }\n};\n/**\n * Imports a skeleton\n * @param gltfRuntime\n * @param skins\n * @param mesh\n * @param newSkeleton\n * @returns the bone name\n */\nconst importSkeleton = (gltfRuntime, skins, mesh, newSkeleton) => {\n    if (!newSkeleton) {\n        newSkeleton = new _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_8__.Skeleton(skins.name || \"\", \"\", gltfRuntime.scene);\n    }\n    if (!skins.babylonSkeleton) {\n        return newSkeleton;\n    }\n    // Find the root bones\n    const nodesToRoot = [];\n    const nodesToRootToAdd = [];\n    getNodesToRoot(gltfRuntime, newSkeleton, skins, nodesToRoot);\n    newSkeleton.bones = [];\n    // Joints\n    for (let i = 0; i < skins.jointNames.length; i++) {\n        const jointNode = getJointNode(gltfRuntime, skins.jointNames[i]);\n        if (!jointNode) {\n            continue;\n        }\n        const node = jointNode.node;\n        if (!node) {\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Warn(\"Joint named \" + skins.jointNames[i] + \" does not exist\");\n            continue;\n        }\n        const id = jointNode.id;\n        // Optimize, if the bone already exists...\n        const existingBone = gltfRuntime.scene.getBoneById(id);\n        if (existingBone) {\n            newSkeleton.bones.push(existingBone);\n            continue;\n        }\n        // Search for parent bone\n        let foundBone = false;\n        let parentBone = null;\n        for (let j = 0; j < i; j++) {\n            const jointNode = getJointNode(gltfRuntime, skins.jointNames[j]);\n            if (!jointNode) {\n                continue;\n            }\n            const joint = jointNode.node;\n            if (!joint) {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Warn(\"Joint named \" + skins.jointNames[j] + \" does not exist when looking for parent\");\n                continue;\n            }\n            const children = joint.children;\n            if (!children) {\n                continue;\n            }\n            foundBone = false;\n            for (let k = 0; k < children.length; k++) {\n                if (children[k] === id) {\n                    parentBone = getParentBone(gltfRuntime, skins, skins.jointNames[j], newSkeleton);\n                    foundBone = true;\n                    break;\n                }\n            }\n            if (foundBone) {\n                break;\n            }\n        }\n        // Create bone\n        const mat = configureBoneTransformation(node);\n        if (!parentBone && nodesToRoot.length > 0) {\n            parentBone = getNodeToRoot(nodesToRoot, id);\n            if (parentBone) {\n                if (nodesToRootToAdd.indexOf(parentBone) === -1) {\n                    nodesToRootToAdd.push(parentBone);\n                }\n            }\n        }\n        const bone = new _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_7__.Bone(node.jointName || \"\", newSkeleton, parentBone, mat);\n        bone.id = id;\n    }\n    // Polish\n    const bones = newSkeleton.bones;\n    newSkeleton.bones = [];\n    for (let i = 0; i < skins.jointNames.length; i++) {\n        const jointNode = getJointNode(gltfRuntime, skins.jointNames[i]);\n        if (!jointNode) {\n            continue;\n        }\n        for (let j = 0; j < bones.length; j++) {\n            if (bones[j].id === jointNode.id) {\n                newSkeleton.bones.push(bones[j]);\n                break;\n            }\n        }\n    }\n    newSkeleton.prepare();\n    // Finish\n    for (let i = 0; i < nodesToRootToAdd.length; i++) {\n        newSkeleton.bones.push(nodesToRootToAdd[i]);\n    }\n    return newSkeleton;\n};\n/**\n * Imports a mesh and its geometries\n * @param gltfRuntime\n * @param node\n * @param meshes\n * @param id\n * @param newMesh\n * @returns the new mesh\n */\nconst importMesh = (gltfRuntime, node, meshes, id, newMesh) => {\n    if (!newMesh) {\n        gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n        newMesh = new _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__.Mesh(node.name || \"\", gltfRuntime.scene);\n        newMesh._parentContainer = gltfRuntime.assetContainer;\n        gltfRuntime.scene._blockEntityCollection = false;\n        newMesh.id = id;\n    }\n    if (!node.babylonNode) {\n        return newMesh;\n    }\n    const subMaterials = [];\n    let vertexData = null;\n    const verticesStarts = [];\n    const verticesCounts = [];\n    const indexStarts = [];\n    const indexCounts = [];\n    for (let meshIndex = 0; meshIndex < meshes.length; meshIndex++) {\n        const meshId = meshes[meshIndex];\n        const mesh = gltfRuntime.meshes[meshId];\n        if (!mesh) {\n            continue;\n        }\n        // Positions, normals and UVs\n        for (let i = 0; i < mesh.primitives.length; i++) {\n            // Temporary vertex data\n            const tempVertexData = new _babylonjs_core_Meshes_mesh_vertexData_js__WEBPACK_IMPORTED_MODULE_15__.VertexData();\n            const primitive = mesh.primitives[i];\n            if (primitive.mode !== 4) {\n                // continue;\n            }\n            const attributes = primitive.attributes;\n            let accessor = null;\n            let buffer = null;\n            // Set positions, normal and uvs\n            for (const semantic in attributes) {\n                // Link accessor and buffer view\n                accessor = gltfRuntime.accessors[attributes[semantic]];\n                buffer = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetBufferFromAccessor(gltfRuntime, accessor);\n                if (semantic === \"NORMAL\") {\n                    tempVertexData.normals = new Float32Array(buffer.length);\n                    tempVertexData.normals.set(buffer);\n                }\n                else if (semantic === \"POSITION\") {\n                    if (_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader.HomogeneousCoordinates) {\n                        tempVertexData.positions = new Float32Array(buffer.length - buffer.length / 4);\n                        for (let j = 0; j < buffer.length; j += 4) {\n                            tempVertexData.positions[j] = buffer[j];\n                            tempVertexData.positions[j + 1] = buffer[j + 1];\n                            tempVertexData.positions[j + 2] = buffer[j + 2];\n                        }\n                    }\n                    else {\n                        tempVertexData.positions = new Float32Array(buffer.length);\n                        tempVertexData.positions.set(buffer);\n                    }\n                    verticesCounts.push(tempVertexData.positions.length);\n                }\n                else if (semantic.indexOf(\"TEXCOORD_\") !== -1) {\n                    const channel = Number(semantic.split(\"_\")[1]);\n                    const uvKind = _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_16__.VertexBuffer.UVKind + (channel === 0 ? \"\" : channel + 1);\n                    const uvs = new Float32Array(buffer.length);\n                    uvs.set(buffer);\n                    normalizeUVs(uvs);\n                    tempVertexData.set(uvs, uvKind);\n                }\n                else if (semantic === \"JOINT\") {\n                    tempVertexData.matricesIndices = new Float32Array(buffer.length);\n                    tempVertexData.matricesIndices.set(buffer);\n                }\n                else if (semantic === \"WEIGHT\") {\n                    tempVertexData.matricesWeights = new Float32Array(buffer.length);\n                    tempVertexData.matricesWeights.set(buffer);\n                }\n                else if (semantic === \"COLOR\") {\n                    tempVertexData.colors = new Float32Array(buffer.length);\n                    tempVertexData.colors.set(buffer);\n                }\n            }\n            // Indices\n            accessor = gltfRuntime.accessors[primitive.indices];\n            if (accessor) {\n                buffer = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetBufferFromAccessor(gltfRuntime, accessor);\n                tempVertexData.indices = new Int32Array(buffer.length);\n                tempVertexData.indices.set(buffer);\n                indexCounts.push(tempVertexData.indices.length);\n            }\n            else {\n                // Set indices on the fly\n                const indices = [];\n                for (let j = 0; j < tempVertexData.positions.length / 3; j++) {\n                    indices.push(j);\n                }\n                tempVertexData.indices = new Int32Array(indices);\n                indexCounts.push(tempVertexData.indices.length);\n            }\n            if (!vertexData) {\n                vertexData = tempVertexData;\n            }\n            else {\n                vertexData.merge(tempVertexData);\n            }\n            // Sub material\n            const material = gltfRuntime.scene.getMaterialById(primitive.material);\n            subMaterials.push(material === null ? _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetDefaultMaterial(gltfRuntime.scene) : material);\n            // Update vertices start and index start\n            verticesStarts.push(verticesStarts.length === 0 ? 0 : verticesStarts[verticesStarts.length - 1] + verticesCounts[verticesCounts.length - 2]);\n            indexStarts.push(indexStarts.length === 0 ? 0 : indexStarts[indexStarts.length - 1] + indexCounts[indexCounts.length - 2]);\n        }\n    }\n    let material;\n    gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n    if (subMaterials.length > 1) {\n        material = new _babylonjs_core_Materials_multiMaterial_js__WEBPACK_IMPORTED_MODULE_11__.MultiMaterial(\"multimat\" + id, gltfRuntime.scene);\n        material.subMaterials = subMaterials;\n    }\n    else {\n        material = new _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_12__.StandardMaterial(\"multimat\" + id, gltfRuntime.scene);\n    }\n    if (subMaterials.length === 1) {\n        material = subMaterials[0];\n    }\n    material._parentContainer = gltfRuntime.assetContainer;\n    if (!newMesh.material) {\n        newMesh.material = material;\n    }\n    // Apply geometry\n    new _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_17__.Geometry(id, gltfRuntime.scene, vertexData, false, newMesh);\n    newMesh.computeWorldMatrix(true);\n    gltfRuntime.scene._blockEntityCollection = false;\n    // Apply submeshes\n    newMesh.subMeshes = [];\n    let index = 0;\n    for (let meshIndex = 0; meshIndex < meshes.length; meshIndex++) {\n        const meshId = meshes[meshIndex];\n        const mesh = gltfRuntime.meshes[meshId];\n        if (!mesh) {\n            continue;\n        }\n        for (let i = 0; i < mesh.primitives.length; i++) {\n            if (mesh.primitives[i].mode !== 4) {\n                //continue;\n            }\n            _babylonjs_core_Meshes_subMesh_js__WEBPACK_IMPORTED_MODULE_18__.SubMesh.AddToMesh(index, verticesStarts[index], verticesCounts[index], indexStarts[index], indexCounts[index], newMesh, newMesh, true);\n            index++;\n        }\n    }\n    // Finish\n    return newMesh;\n};\n/**\n * Configure node transformation from position, rotation and scaling\n * @param newNode\n * @param position\n * @param rotation\n * @param scaling\n */\nconst configureNode = (newNode, position, rotation, scaling) => {\n    if (newNode.position) {\n        newNode.position = position;\n    }\n    if (newNode.rotationQuaternion || newNode.rotation) {\n        newNode.rotationQuaternion = rotation;\n    }\n    if (newNode.scaling) {\n        newNode.scaling = scaling;\n    }\n};\n/**\n * Configures node from transformation matrix\n * @param newNode\n * @param node\n */\nconst configureNodeFromMatrix = (newNode, node) => {\n    if (node.matrix) {\n        const position = new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, 0);\n        const rotation = new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion();\n        const scaling = new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 0, 0);\n        const mat = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.FromArray(node.matrix);\n        mat.decompose(scaling, rotation, position);\n        configureNode(newNode, position, rotation, scaling);\n    }\n    else if (node.translation && node.rotation && node.scale) {\n        configureNode(newNode, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.translation), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(node.rotation), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.scale));\n    }\n    newNode.computeWorldMatrix(true);\n};\n/**\n * Imports a node\n * @param gltfRuntime\n * @param node\n * @param id\n * @returns the newly imported node\n */\nconst importNode = (gltfRuntime, node, id) => {\n    let lastNode = null;\n    if (gltfRuntime.importOnlyMeshes && (node.skin || node.meshes)) {\n        if (gltfRuntime.importMeshesNames && gltfRuntime.importMeshesNames.length > 0 && gltfRuntime.importMeshesNames.indexOf(node.name || \"\") === -1) {\n            return null;\n        }\n    }\n    // Meshes\n    if (node.skin) {\n        if (node.meshes) {\n            const skin = gltfRuntime.skins[node.skin];\n            const newMesh = importMesh(gltfRuntime, node, node.meshes, id, node.babylonNode);\n            newMesh.skeleton = gltfRuntime.scene.getLastSkeletonById(node.skin);\n            if (newMesh.skeleton === null) {\n                newMesh.skeleton = importSkeleton(gltfRuntime, skin, newMesh, skin.babylonSkeleton);\n                if (!skin.babylonSkeleton) {\n                    skin.babylonSkeleton = newMesh.skeleton;\n                }\n            }\n            lastNode = newMesh;\n        }\n    }\n    else if (node.meshes) {\n        /**\n         * Improve meshes property\n         */\n        const newMesh = importMesh(gltfRuntime, node, node.mesh ? [node.mesh] : node.meshes, id, node.babylonNode);\n        lastNode = newMesh;\n    }\n    // Lights\n    else if (node.light && !node.babylonNode && !gltfRuntime.importOnlyMeshes) {\n        const light = gltfRuntime.lights[node.light];\n        if (light) {\n            if (light.type === \"ambient\") {\n                const ambienLight = light[light.type];\n                const hemiLight = new _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_21__.HemisphericLight(node.light, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), gltfRuntime.scene);\n                hemiLight.name = node.name || \"\";\n                if (ambienLight.color) {\n                    hemiLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(ambienLight.color);\n                }\n                lastNode = hemiLight;\n            }\n            else if (light.type === \"directional\") {\n                const directionalLight = light[light.type];\n                const dirLight = new _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_22__.DirectionalLight(node.light, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), gltfRuntime.scene);\n                dirLight.name = node.name || \"\";\n                if (directionalLight.color) {\n                    dirLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(directionalLight.color);\n                }\n                lastNode = dirLight;\n            }\n            else if (light.type === \"point\") {\n                const pointLight = light[light.type];\n                const ptLight = new _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_23__.PointLight(node.light, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), gltfRuntime.scene);\n                ptLight.name = node.name || \"\";\n                if (pointLight.color) {\n                    ptLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(pointLight.color);\n                }\n                lastNode = ptLight;\n            }\n            else if (light.type === \"spot\") {\n                const spotLight = light[light.type];\n                const spLight = new _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_24__.SpotLight(node.light, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), 0, 0, gltfRuntime.scene);\n                spLight.name = node.name || \"\";\n                if (spotLight.color) {\n                    spLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(spotLight.color);\n                }\n                if (spotLight.fallOfAngle) {\n                    spLight.angle = spotLight.fallOfAngle;\n                }\n                if (spotLight.fallOffExponent) {\n                    spLight.exponent = spotLight.fallOffExponent;\n                }\n                lastNode = spLight;\n            }\n        }\n    }\n    // Cameras\n    else if (node.camera && !node.babylonNode && !gltfRuntime.importOnlyMeshes) {\n        const camera = gltfRuntime.cameras[node.camera];\n        if (camera) {\n            gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n            if (camera.type === \"orthographic\") {\n                const orthoCamera = new _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__.FreeCamera(node.camera, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), gltfRuntime.scene, false);\n                orthoCamera.name = node.name || \"\";\n                orthoCamera.mode = _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__.Camera.ORTHOGRAPHIC_CAMERA;\n                orthoCamera.attachControl();\n                lastNode = orthoCamera;\n                orthoCamera._parentContainer = gltfRuntime.assetContainer;\n            }\n            else if (camera.type === \"perspective\") {\n                const perspectiveCamera = camera[camera.type];\n                const persCamera = new _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__.FreeCamera(node.camera, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), gltfRuntime.scene, false);\n                persCamera.name = node.name || \"\";\n                persCamera.attachControl();\n                if (!perspectiveCamera.aspectRatio) {\n                    perspectiveCamera.aspectRatio = gltfRuntime.scene.getEngine().getRenderWidth() / gltfRuntime.scene.getEngine().getRenderHeight();\n                }\n                if (perspectiveCamera.znear && perspectiveCamera.zfar) {\n                    persCamera.maxZ = perspectiveCamera.zfar;\n                    persCamera.minZ = perspectiveCamera.znear;\n                }\n                lastNode = persCamera;\n                persCamera._parentContainer = gltfRuntime.assetContainer;\n            }\n            gltfRuntime.scene._blockEntityCollection = false;\n        }\n    }\n    // Empty node\n    if (!node.jointName) {\n        if (node.babylonNode) {\n            return node.babylonNode;\n        }\n        else if (lastNode === null) {\n            gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n            const dummy = new _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__.Mesh(node.name || \"\", gltfRuntime.scene);\n            dummy._parentContainer = gltfRuntime.assetContainer;\n            gltfRuntime.scene._blockEntityCollection = false;\n            node.babylonNode = dummy;\n            lastNode = dummy;\n        }\n    }\n    if (lastNode !== null) {\n        if (node.matrix && lastNode instanceof _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_20__.Mesh) {\n            configureNodeFromMatrix(lastNode, node);\n        }\n        else {\n            const translation = node.translation || [0, 0, 0];\n            const rotation = node.rotation || [0, 0, 0, 1];\n            const scale = node.scale || [1, 1, 1];\n            configureNode(lastNode, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(translation), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(rotation), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(scale));\n        }\n        lastNode.updateCache(true);\n        node.babylonNode = lastNode;\n    }\n    return lastNode;\n};\n/**\n * Traverses nodes and creates them\n * @param gltfRuntime\n * @param id\n * @param parent\n * @param meshIncluded\n */\nconst traverseNodes = (gltfRuntime, id, parent, meshIncluded = false) => {\n    const node = gltfRuntime.nodes[id];\n    let newNode = null;\n    if (gltfRuntime.importOnlyMeshes && !meshIncluded && gltfRuntime.importMeshesNames) {\n        if (gltfRuntime.importMeshesNames.indexOf(node.name || \"\") !== -1 || gltfRuntime.importMeshesNames.length === 0) {\n            meshIncluded = true;\n        }\n        else {\n            meshIncluded = false;\n        }\n    }\n    else {\n        meshIncluded = true;\n    }\n    if (!node.jointName && meshIncluded) {\n        newNode = importNode(gltfRuntime, node, id);\n        if (newNode !== null) {\n            newNode.id = id;\n            newNode.parent = parent;\n        }\n    }\n    if (node.children) {\n        for (let i = 0; i < node.children.length; i++) {\n            traverseNodes(gltfRuntime, node.children[i], newNode, meshIncluded);\n        }\n    }\n};\n/**\n * do stuff after buffers, shaders are loaded (e.g. hook up materials, load animations, etc.)\n * @param gltfRuntime\n */\nconst postLoad = (gltfRuntime) => {\n    // Nodes\n    let currentScene = gltfRuntime.currentScene;\n    if (currentScene) {\n        for (let i = 0; i < currentScene.nodes.length; i++) {\n            traverseNodes(gltfRuntime, currentScene.nodes[i], null);\n        }\n    }\n    else {\n        for (const thing in gltfRuntime.scenes) {\n            currentScene = gltfRuntime.scenes[thing];\n            for (let i = 0; i < currentScene.nodes.length; i++) {\n                traverseNodes(gltfRuntime, currentScene.nodes[i], null);\n            }\n        }\n    }\n    // Set animations\n    loadAnimations(gltfRuntime);\n    for (let i = 0; i < gltfRuntime.scene.skeletons.length; i++) {\n        const skeleton = gltfRuntime.scene.skeletons[i];\n        gltfRuntime.scene.beginAnimation(skeleton, 0, Number.MAX_VALUE, true, 1.0);\n    }\n};\n/**\n * onBind shaderrs callback to set uniforms and matrices\n * @param mesh\n * @param gltfRuntime\n * @param unTreatedUniforms\n * @param shaderMaterial\n * @param technique\n * @param material\n * @param onSuccess\n */\nconst onBindShaderMaterial = (mesh, gltfRuntime, unTreatedUniforms, shaderMaterial, technique, material, onSuccess) => {\n    const materialValues = material.values || technique.parameters;\n    for (const unif in unTreatedUniforms) {\n        const uniform = unTreatedUniforms[unif];\n        const type = uniform.type;\n        if (type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT2 || type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT3 || type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT4) {\n            if (uniform.semantic && !uniform.source && !uniform.node) {\n                _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.SetMatrix(gltfRuntime.scene, mesh, uniform, unif, shaderMaterial.getEffect());\n            }\n            else if (uniform.semantic && (uniform.source || uniform.node)) {\n                let source = gltfRuntime.scene.getNodeByName(uniform.source || uniform.node || \"\");\n                if (source === null) {\n                    source = gltfRuntime.scene.getNodeById(uniform.source || uniform.node || \"\");\n                }\n                if (source === null) {\n                    continue;\n                }\n                _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.SetMatrix(gltfRuntime.scene, source, uniform, unif, shaderMaterial.getEffect());\n            }\n        }\n        else {\n            const value = materialValues[technique.uniforms[unif]];\n            if (!value) {\n                continue;\n            }\n            if (type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.SAMPLER_2D) {\n                const texture = gltfRuntime.textures[material.values ? value : uniform.value].babylonTexture;\n                if (texture === null || texture === undefined) {\n                    continue;\n                }\n                shaderMaterial.getEffect().setTexture(unif, texture);\n            }\n            else {\n                _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.SetUniform(shaderMaterial.getEffect(), unif, value, type);\n            }\n        }\n    }\n    onSuccess(shaderMaterial);\n};\n/**\n * Prepare uniforms to send the only one time\n * Loads the appropriate textures\n * @param gltfRuntime\n * @param shaderMaterial\n * @param technique\n * @param material\n */\nconst prepareShaderMaterialUniforms = (gltfRuntime, shaderMaterial, technique, material, unTreatedUniforms) => {\n    const materialValues = material.values || technique.parameters;\n    const techniqueUniforms = technique.uniforms;\n    /**\n     * Prepare values here (not matrices)\n     */\n    for (const unif in unTreatedUniforms) {\n        const uniform = unTreatedUniforms[unif];\n        const type = uniform.type;\n        let value = materialValues[techniqueUniforms[unif]];\n        if (value === undefined) {\n            // In case the value is the same for all materials\n            value = uniform.value;\n        }\n        if (!value) {\n            continue;\n        }\n        const onLoadTexture = (uniformName) => {\n            return (texture) => {\n                if (uniform.value && uniformName) {\n                    // Static uniform\n                    shaderMaterial.setTexture(uniformName, texture);\n                    delete unTreatedUniforms[uniformName];\n                }\n            };\n        };\n        // Texture (sampler2D)\n        if (type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.SAMPLER_2D) {\n            GLTFLoaderExtension.LoadTextureAsync(gltfRuntime, material.values ? value : uniform.value, onLoadTexture(unif), () => onLoadTexture(null));\n        }\n        // Others\n        else {\n            if (uniform.value && _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.SetUniform(shaderMaterial, unif, material.values ? value : uniform.value, type)) {\n                // Static uniform\n                delete unTreatedUniforms[unif];\n            }\n        }\n    }\n};\n/**\n * Shader compilation failed\n * @param program\n * @param shaderMaterial\n * @param onError\n * @returns callback when shader is compiled\n */\nconst onShaderCompileError = (program, shaderMaterial, onError) => {\n    return (effect, error) => {\n        shaderMaterial.dispose(true);\n        onError(\"Cannot compile program named \" + program.name + \". Error: \" + error + \". Default material will be applied\");\n    };\n};\n/**\n * Shader compilation success\n * @param gltfRuntime\n * @param shaderMaterial\n * @param technique\n * @param material\n * @param unTreatedUniforms\n * @param onSuccess\n * @returns callback when shader is compiled\n */\nconst onShaderCompileSuccess = (gltfRuntime, shaderMaterial, technique, material, unTreatedUniforms, onSuccess) => {\n    return (_) => {\n        prepareShaderMaterialUniforms(gltfRuntime, shaderMaterial, technique, material, unTreatedUniforms);\n        shaderMaterial.onBind = (mesh) => {\n            onBindShaderMaterial(mesh, gltfRuntime, unTreatedUniforms, shaderMaterial, technique, material, onSuccess);\n        };\n    };\n};\n/**\n * Returns the appropriate uniform if already handled by babylon\n * @param tokenizer\n * @param technique\n * @param unTreatedUniforms\n * @returns the name of the uniform handled by babylon\n */\nconst parseShaderUniforms = (tokenizer, technique, unTreatedUniforms) => {\n    for (const unif in technique.uniforms) {\n        const uniform = technique.uniforms[unif];\n        const uniformParameter = technique.parameters[uniform];\n        if (tokenizer.currentIdentifier === unif) {\n            if (uniformParameter.semantic && !uniformParameter.source && !uniformParameter.node) {\n                const transformIndex = glTFTransforms.indexOf(uniformParameter.semantic);\n                if (transformIndex !== -1) {\n                    delete unTreatedUniforms[unif];\n                    return babylonTransforms[transformIndex];\n                }\n            }\n        }\n    }\n    return tokenizer.currentIdentifier;\n};\n/**\n * All shaders loaded. Create materials one by one\n * @param gltfRuntime\n */\nconst importMaterials = (gltfRuntime) => {\n    // Create materials\n    for (const mat in gltfRuntime.materials) {\n        GLTFLoaderExtension.LoadMaterialAsync(gltfRuntime, mat, () => { }, () => { });\n    }\n};\n/**\n * Implementation of the base glTF spec\n * @internal\n */\nclass GLTFLoaderBase {\n    static CreateRuntime(parsedData, scene, rootUrl) {\n        const gltfRuntime = {\n            extensions: {},\n            accessors: {},\n            buffers: {},\n            bufferViews: {},\n            meshes: {},\n            lights: {},\n            cameras: {},\n            nodes: {},\n            images: {},\n            textures: {},\n            shaders: {},\n            programs: {},\n            samplers: {},\n            techniques: {},\n            materials: {},\n            animations: {},\n            skins: {},\n            extensionsUsed: [],\n            scenes: {},\n            buffersCount: 0,\n            shaderscount: 0,\n            scene: scene,\n            rootUrl: rootUrl,\n            loadedBufferCount: 0,\n            loadedBufferViews: {},\n            loadedShaderCount: 0,\n            importOnlyMeshes: false,\n            dummyNodes: [],\n            assetContainer: null,\n        };\n        // Parse\n        if (parsedData.extensions) {\n            parseObject(parsedData.extensions, \"extensions\", gltfRuntime);\n        }\n        if (parsedData.extensionsUsed) {\n            parseObject(parsedData.extensionsUsed, \"extensionsUsed\", gltfRuntime);\n        }\n        if (parsedData.buffers) {\n            parseBuffers(parsedData.buffers, gltfRuntime);\n        }\n        if (parsedData.bufferViews) {\n            parseObject(parsedData.bufferViews, \"bufferViews\", gltfRuntime);\n        }\n        if (parsedData.accessors) {\n            parseObject(parsedData.accessors, \"accessors\", gltfRuntime);\n        }\n        if (parsedData.meshes) {\n            parseObject(parsedData.meshes, \"meshes\", gltfRuntime);\n        }\n        if (parsedData.lights) {\n            parseObject(parsedData.lights, \"lights\", gltfRuntime);\n        }\n        if (parsedData.cameras) {\n            parseObject(parsedData.cameras, \"cameras\", gltfRuntime);\n        }\n        if (parsedData.nodes) {\n            parseObject(parsedData.nodes, \"nodes\", gltfRuntime);\n        }\n        if (parsedData.images) {\n            parseObject(parsedData.images, \"images\", gltfRuntime);\n        }\n        if (parsedData.textures) {\n            parseObject(parsedData.textures, \"textures\", gltfRuntime);\n        }\n        if (parsedData.shaders) {\n            parseShaders(parsedData.shaders, gltfRuntime);\n        }\n        if (parsedData.programs) {\n            parseObject(parsedData.programs, \"programs\", gltfRuntime);\n        }\n        if (parsedData.samplers) {\n            parseObject(parsedData.samplers, \"samplers\", gltfRuntime);\n        }\n        if (parsedData.techniques) {\n            parseObject(parsedData.techniques, \"techniques\", gltfRuntime);\n        }\n        if (parsedData.materials) {\n            parseObject(parsedData.materials, \"materials\", gltfRuntime);\n        }\n        if (parsedData.animations) {\n            parseObject(parsedData.animations, \"animations\", gltfRuntime);\n        }\n        if (parsedData.skins) {\n            parseObject(parsedData.skins, \"skins\", gltfRuntime);\n        }\n        if (parsedData.scenes) {\n            gltfRuntime.scenes = parsedData.scenes;\n        }\n        if (parsedData.scene && parsedData.scenes) {\n            gltfRuntime.currentScene = parsedData.scenes[parsedData.scene];\n        }\n        return gltfRuntime;\n    }\n    static LoadBufferAsync(gltfRuntime, id, onSuccess, onError, onProgress) {\n        const buffer = gltfRuntime.buffers[id];\n        if (_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.IsBase64(buffer.uri)) {\n            setTimeout(() => onSuccess(new Uint8Array(_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.DecodeBase64(buffer.uri))));\n        }\n        else {\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.LoadFile(gltfRuntime.rootUrl + buffer.uri, (data) => onSuccess(new Uint8Array(data)), onProgress, undefined, true, (request) => {\n                if (request) {\n                    onError(request.status + \" \" + request.statusText);\n                }\n            });\n        }\n    }\n    static LoadTextureBufferAsync(gltfRuntime, id, onSuccess, onError) {\n        const texture = gltfRuntime.textures[id];\n        if (!texture || !texture.source) {\n            onError(\"\");\n            return;\n        }\n        if (texture.babylonTexture) {\n            onSuccess(null);\n            return;\n        }\n        const source = gltfRuntime.images[texture.source];\n        if (_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.IsBase64(source.uri)) {\n            setTimeout(() => onSuccess(new Uint8Array(_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.DecodeBase64(source.uri))));\n        }\n        else {\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.LoadFile(gltfRuntime.rootUrl + source.uri, (data) => onSuccess(new Uint8Array(data)), undefined, undefined, true, (request) => {\n                if (request) {\n                    onError(request.status + \" \" + request.statusText);\n                }\n            });\n        }\n    }\n    static CreateTextureAsync(gltfRuntime, id, buffer, onSuccess) {\n        const texture = gltfRuntime.textures[id];\n        if (texture.babylonTexture) {\n            onSuccess(texture.babylonTexture);\n            return;\n        }\n        const sampler = gltfRuntime.samplers[texture.sampler];\n        const createMipMaps = sampler.minFilter === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.NEAREST_MIPMAP_NEAREST ||\n            sampler.minFilter === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.NEAREST_MIPMAP_LINEAR ||\n            sampler.minFilter === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.LINEAR_MIPMAP_NEAREST ||\n            sampler.minFilter === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.LINEAR_MIPMAP_LINEAR;\n        const samplingMode = _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_14__.Texture.BILINEAR_SAMPLINGMODE;\n        const blob = buffer == null ? new Blob() : new Blob([buffer]);\n        const blobURL = URL.createObjectURL(blob);\n        const revokeBlobURL = () => URL.revokeObjectURL(blobURL);\n        const newTexture = new _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_14__.Texture(blobURL, gltfRuntime.scene, !createMipMaps, true, samplingMode, revokeBlobURL, revokeBlobURL);\n        if (sampler.wrapS !== undefined) {\n            newTexture.wrapU = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetWrapMode(sampler.wrapS);\n        }\n        if (sampler.wrapT !== undefined) {\n            newTexture.wrapV = _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_25__.GLTFUtils.GetWrapMode(sampler.wrapT);\n        }\n        newTexture.name = id;\n        texture.babylonTexture = newTexture;\n        onSuccess(newTexture);\n    }\n    static LoadShaderStringAsync(gltfRuntime, id, onSuccess, onError) {\n        const shader = gltfRuntime.shaders[id];\n        if (_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.IsBase64(shader.uri)) {\n            const shaderString = atob(shader.uri.split(\",\")[1]);\n            if (onSuccess) {\n                onSuccess(shaderString);\n            }\n        }\n        else {\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.LoadFile(gltfRuntime.rootUrl + shader.uri, onSuccess, undefined, undefined, false, (request) => {\n                if (request && onError) {\n                    onError(request.status + \" \" + request.statusText);\n                }\n            });\n        }\n    }\n    static LoadMaterialAsync(gltfRuntime, id, onSuccess, onError) {\n        const material = gltfRuntime.materials[id];\n        if (!material.technique) {\n            if (onError) {\n                onError(\"No technique found.\");\n            }\n            return;\n        }\n        const technique = gltfRuntime.techniques[material.technique];\n        if (!technique) {\n            gltfRuntime.scene._blockEntityCollection = !!gltfRuntime.assetContainer;\n            const defaultMaterial = new _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_12__.StandardMaterial(id, gltfRuntime.scene);\n            defaultMaterial._parentContainer = gltfRuntime.assetContainer;\n            gltfRuntime.scene._blockEntityCollection = false;\n            defaultMaterial.diffuseColor = new _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3(0.5, 0.5, 0.5);\n            defaultMaterial.sideOrientation = _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.CounterClockWiseSideOrientation;\n            onSuccess(defaultMaterial);\n            return;\n        }\n        const program = gltfRuntime.programs[technique.program];\n        const states = technique.states;\n        const vertexShader = _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__.Effect.ShadersStore[program.vertexShader + \"VertexShader\"];\n        const pixelShader = _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__.Effect.ShadersStore[program.fragmentShader + \"PixelShader\"];\n        let newVertexShader = \"\";\n        let newPixelShader = \"\";\n        const vertexTokenizer = new Tokenizer(vertexShader);\n        const pixelTokenizer = new Tokenizer(pixelShader);\n        const unTreatedUniforms = {};\n        const uniforms = [];\n        const attributes = [];\n        const samplers = [];\n        // Fill uniform, sampler2D and attributes\n        for (const unif in technique.uniforms) {\n            const uniform = technique.uniforms[unif];\n            const uniformParameter = technique.parameters[uniform];\n            unTreatedUniforms[unif] = uniformParameter;\n            if (uniformParameter.semantic && !uniformParameter.node && !uniformParameter.source) {\n                const transformIndex = glTFTransforms.indexOf(uniformParameter.semantic);\n                if (transformIndex !== -1) {\n                    uniforms.push(babylonTransforms[transformIndex]);\n                    delete unTreatedUniforms[unif];\n                }\n                else {\n                    uniforms.push(unif);\n                }\n            }\n            else if (uniformParameter.type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.SAMPLER_2D) {\n                samplers.push(unif);\n            }\n            else {\n                uniforms.push(unif);\n            }\n        }\n        for (const attr in technique.attributes) {\n            const attribute = technique.attributes[attr];\n            const attributeParameter = technique.parameters[attribute];\n            if (attributeParameter.semantic) {\n                const name = getAttribute(attributeParameter);\n                if (name) {\n                    attributes.push(name);\n                }\n            }\n        }\n        // Configure vertex shader\n        while (!vertexTokenizer.isEnd() && vertexTokenizer.getNextToken()) {\n            const tokenType = vertexTokenizer.currentToken;\n            if (tokenType !== ETokenType.IDENTIFIER) {\n                newVertexShader += vertexTokenizer.currentString;\n                continue;\n            }\n            let foundAttribute = false;\n            for (const attr in technique.attributes) {\n                const attribute = technique.attributes[attr];\n                const attributeParameter = technique.parameters[attribute];\n                if (vertexTokenizer.currentIdentifier === attr && attributeParameter.semantic) {\n                    newVertexShader += getAttribute(attributeParameter);\n                    foundAttribute = true;\n                    break;\n                }\n            }\n            if (foundAttribute) {\n                continue;\n            }\n            newVertexShader += parseShaderUniforms(vertexTokenizer, technique, unTreatedUniforms);\n        }\n        // Configure pixel shader\n        while (!pixelTokenizer.isEnd() && pixelTokenizer.getNextToken()) {\n            const tokenType = pixelTokenizer.currentToken;\n            if (tokenType !== ETokenType.IDENTIFIER) {\n                newPixelShader += pixelTokenizer.currentString;\n                continue;\n            }\n            newPixelShader += parseShaderUniforms(pixelTokenizer, technique, unTreatedUniforms);\n        }\n        // Create shader material\n        const shaderPath = {\n            vertex: program.vertexShader + id,\n            fragment: program.fragmentShader + id,\n        };\n        const options = {\n            attributes: attributes,\n            uniforms: uniforms,\n            samplers: samplers,\n            needAlphaBlending: states && states.enable && states.enable.indexOf(3042) !== -1,\n        };\n        _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__.Effect.ShadersStore[program.vertexShader + id + \"VertexShader\"] = newVertexShader;\n        _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__.Effect.ShadersStore[program.fragmentShader + id + \"PixelShader\"] = newPixelShader;\n        const shaderMaterial = new _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_13__.ShaderMaterial(id, gltfRuntime.scene, shaderPath, options);\n        shaderMaterial.onError = onShaderCompileError(program, shaderMaterial, onError);\n        shaderMaterial.onCompiled = onShaderCompileSuccess(gltfRuntime, shaderMaterial, technique, material, unTreatedUniforms, onSuccess);\n        shaderMaterial.sideOrientation = _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.CounterClockWiseSideOrientation;\n        if (states && states.functions) {\n            const functions = states.functions;\n            if (functions.cullFace && functions.cullFace[0] !== _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ECullingType.BACK) {\n                shaderMaterial.backFaceCulling = false;\n            }\n            const blendFunc = functions.blendFuncSeparate;\n            if (blendFunc) {\n                if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.SRC_ALPHA &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE_MINUS_SRC_ALPHA &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_COMBINE;\n                }\n                else if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ZERO &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_ONEONE;\n                }\n                else if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.SRC_ALPHA &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ZERO &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_ADD;\n                }\n                else if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ZERO &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE_MINUS_SRC_COLOR &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_SUBTRACT;\n                }\n                else if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.DST_COLOR &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ZERO &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_MULTIPLY;\n                }\n                else if (blendFunc[0] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.SRC_ALPHA &&\n                    blendFunc[1] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE_MINUS_SRC_COLOR &&\n                    blendFunc[2] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE &&\n                    blendFunc[3] === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EBlendingFunction.ONE) {\n                    shaderMaterial.alphaMode = _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_27__.Constants.ALPHA_MAXIMIZED;\n                }\n            }\n        }\n    }\n}\n/**\n * glTF V1 Loader\n * @internal\n * @deprecated\n */\nclass GLTFLoader {\n    static RegisterExtension(extension) {\n        if (GLTFLoader.Extensions[extension.name]) {\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error('Tool with the same name \"' + extension.name + '\" already exists');\n            return;\n        }\n        GLTFLoader.Extensions[extension.name] = extension;\n    }\n    dispose() {\n        // do nothing\n    }\n    _importMeshAsync(meshesNames, scene, data, rootUrl, assetContainer, onSuccess, onProgress, onError) {\n        scene.useRightHandedSystem = true;\n        GLTFLoaderExtension.LoadRuntimeAsync(scene, data, rootUrl, (gltfRuntime) => {\n            gltfRuntime.assetContainer = assetContainer;\n            gltfRuntime.importOnlyMeshes = true;\n            if (meshesNames === \"\") {\n                gltfRuntime.importMeshesNames = [];\n            }\n            else if (typeof meshesNames === \"string\") {\n                gltfRuntime.importMeshesNames = [meshesNames];\n            }\n            else if (meshesNames && !(meshesNames instanceof Array)) {\n                gltfRuntime.importMeshesNames = [meshesNames];\n            }\n            else {\n                gltfRuntime.importMeshesNames = [];\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Warn(\"Argument meshesNames must be of type string or string[]\");\n            }\n            // Create nodes\n            this._createNodes(gltfRuntime);\n            const meshes = [];\n            const skeletons = [];\n            // Fill arrays of meshes and skeletons\n            for (const nde in gltfRuntime.nodes) {\n                const node = gltfRuntime.nodes[nde];\n                if (node.babylonNode instanceof _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_19__.AbstractMesh) {\n                    meshes.push(node.babylonNode);\n                }\n            }\n            for (const skl in gltfRuntime.skins) {\n                const skin = gltfRuntime.skins[skl];\n                if (skin.babylonSkeleton instanceof _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_8__.Skeleton) {\n                    skeletons.push(skin.babylonSkeleton);\n                }\n            }\n            // Load buffers, shaders, materials, etc.\n            this._loadBuffersAsync(gltfRuntime, () => {\n                this._loadShadersAsync(gltfRuntime, () => {\n                    importMaterials(gltfRuntime);\n                    postLoad(gltfRuntime);\n                    if (!_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader.IncrementalLoading && onSuccess) {\n                        onSuccess(meshes, skeletons);\n                    }\n                });\n            });\n            if (_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader.IncrementalLoading && onSuccess) {\n                onSuccess(meshes, skeletons);\n            }\n        }, onError);\n        return true;\n    }\n    /**\n     * Imports one or more meshes from a loaded gltf file and adds them to the scene\n     * @param meshesNames a string or array of strings of the mesh names that should be loaded from the file\n     * @param scene the scene the meshes should be added to\n     * @param assetContainer defines the asset container to use (can be null)\n     * @param data gltf data containing information of the meshes in a loaded file\n     * @param rootUrl root url to load from\n     * @param onProgress event that fires when loading progress has occured\n     * @returns a promise containg the loaded meshes, particles, skeletons and animations\n     */\n    importMeshAsync(meshesNames, scene, assetContainer, data, rootUrl, onProgress) {\n        return new Promise((resolve, reject) => {\n            this._importMeshAsync(meshesNames, scene, data, rootUrl, assetContainer, (meshes, skeletons) => {\n                resolve({\n                    meshes: meshes,\n                    particleSystems: [],\n                    skeletons: skeletons,\n                    animationGroups: [],\n                    lights: [],\n                    transformNodes: [],\n                    geometries: [],\n                    spriteManagers: [],\n                });\n            }, onProgress, (message) => {\n                reject(new Error(message));\n            });\n        });\n    }\n    _loadAsync(scene, data, rootUrl, onSuccess, onProgress, onError) {\n        scene.useRightHandedSystem = true;\n        GLTFLoaderExtension.LoadRuntimeAsync(scene, data, rootUrl, (gltfRuntime) => {\n            // Load runtime extensios\n            GLTFLoaderExtension.LoadRuntimeExtensionsAsync(gltfRuntime, () => {\n                // Create nodes\n                this._createNodes(gltfRuntime);\n                // Load buffers, shaders, materials, etc.\n                this._loadBuffersAsync(gltfRuntime, () => {\n                    this._loadShadersAsync(gltfRuntime, () => {\n                        importMaterials(gltfRuntime);\n                        postLoad(gltfRuntime);\n                        if (!_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader.IncrementalLoading) {\n                            onSuccess();\n                        }\n                    });\n                });\n                if (_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader.IncrementalLoading) {\n                    onSuccess();\n                }\n            }, onError);\n        }, onError);\n    }\n    /**\n     * Imports all objects from a loaded gltf file and adds them to the scene\n     * @param scene the scene the objects should be added to\n     * @param data gltf data containing information of the meshes in a loaded file\n     * @param rootUrl root url to load from\n     * @param onProgress event that fires when loading progress has occured\n     * @returns a promise which completes when objects have been loaded to the scene\n     */\n    loadAsync(scene, data, rootUrl, onProgress) {\n        return new Promise((resolve, reject) => {\n            this._loadAsync(scene, data, rootUrl, () => {\n                resolve();\n            }, onProgress, (message) => {\n                reject(new Error(message));\n            });\n        });\n    }\n    _loadShadersAsync(gltfRuntime, onload) {\n        let hasShaders = false;\n        const processShader = (sha, shader) => {\n            GLTFLoaderExtension.LoadShaderStringAsync(gltfRuntime, sha, (shaderString) => {\n                if (shaderString instanceof ArrayBuffer) {\n                    return;\n                }\n                gltfRuntime.loadedShaderCount++;\n                if (shaderString) {\n                    _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_9__.Effect.ShadersStore[sha + (shader.type === _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EShaderType.VERTEX ? \"VertexShader\" : \"PixelShader\")] = shaderString;\n                }\n                if (gltfRuntime.loadedShaderCount === gltfRuntime.shaderscount) {\n                    onload();\n                }\n            }, () => {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error(\"Error when loading shader program named \" + sha + \" located at \" + shader.uri);\n            });\n        };\n        for (const sha in gltfRuntime.shaders) {\n            hasShaders = true;\n            const shader = gltfRuntime.shaders[sha];\n            if (shader) {\n                processShader.bind(this, sha, shader)();\n            }\n            else {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error(\"No shader named: \" + sha);\n            }\n        }\n        if (!hasShaders) {\n            onload();\n        }\n    }\n    _loadBuffersAsync(gltfRuntime, onLoad) {\n        let hasBuffers = false;\n        const processBuffer = (buf, buffer) => {\n            GLTFLoaderExtension.LoadBufferAsync(gltfRuntime, buf, (bufferView) => {\n                gltfRuntime.loadedBufferCount++;\n                if (bufferView) {\n                    if (bufferView.byteLength != gltfRuntime.buffers[buf].byteLength) {\n                        _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error(\"Buffer named \" + buf + \" is length \" + bufferView.byteLength + \". Expected: \" + buffer.byteLength); // Improve error message\n                    }\n                    gltfRuntime.loadedBufferViews[buf] = bufferView;\n                }\n                if (gltfRuntime.loadedBufferCount === gltfRuntime.buffersCount) {\n                    onLoad();\n                }\n            }, () => {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error(\"Error when loading buffer named \" + buf + \" located at \" + buffer.uri);\n            });\n        };\n        for (const buf in gltfRuntime.buffers) {\n            hasBuffers = true;\n            const buffer = gltfRuntime.buffers[buf];\n            if (buffer) {\n                processBuffer.bind(this, buf, buffer)();\n            }\n            else {\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Error(\"No buffer named: \" + buf);\n            }\n        }\n        if (!hasBuffers) {\n            onLoad();\n        }\n    }\n    _createNodes(gltfRuntime) {\n        let currentScene = gltfRuntime.currentScene;\n        if (currentScene) {\n            // Only one scene even if multiple scenes are defined\n            for (let i = 0; i < currentScene.nodes.length; i++) {\n                traverseNodes(gltfRuntime, currentScene.nodes[i], null);\n            }\n        }\n        else {\n            // Load all scenes\n            for (const thing in gltfRuntime.scenes) {\n                currentScene = gltfRuntime.scenes[thing];\n                for (let i = 0; i < currentScene.nodes.length; i++) {\n                    traverseNodes(gltfRuntime, currentScene.nodes[i], null);\n                }\n            }\n        }\n    }\n}\nGLTFLoader.Extensions = {};\n/** @internal */\nclass GLTFLoaderExtension {\n    constructor(name) {\n        this._name = name;\n    }\n    get name() {\n        return this._name;\n    }\n    /**\n     * Defines an override for loading the runtime\n     * Return true to stop further extensions from loading the runtime\n     * @param scene\n     * @param data\n     * @param rootUrl\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from loading the runtime\n     */\n    loadRuntimeAsync(scene, data, rootUrl, onSuccess, onError) {\n        return false;\n    }\n    /**\n     * Defines an onverride for creating gltf runtime\n     * Return true to stop further extensions from creating the runtime\n     * @param gltfRuntime\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from creating the runtime\n     */\n    loadRuntimeExtensionsAsync(gltfRuntime, onSuccess, onError) {\n        return false;\n    }\n    /**\n     * Defines an override for loading buffers\n     * Return true to stop further extensions from loading this buffer\n     * @param gltfRuntime\n     * @param id\n     * @param onSuccess\n     * @param onError\n     * @param onProgress\n     * @returns true to stop further extensions from loading this buffer\n     */\n    loadBufferAsync(gltfRuntime, id, onSuccess, onError, onProgress) {\n        return false;\n    }\n    /**\n     * Defines an override for loading texture buffers\n     * Return true to stop further extensions from loading this texture data\n     * @param gltfRuntime\n     * @param id\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from loading this texture data\n     */\n    loadTextureBufferAsync(gltfRuntime, id, onSuccess, onError) {\n        return false;\n    }\n    /**\n     * Defines an override for creating textures\n     * Return true to stop further extensions from loading this texture\n     * @param gltfRuntime\n     * @param id\n     * @param buffer\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from loading this texture\n     */\n    createTextureAsync(gltfRuntime, id, buffer, onSuccess, onError) {\n        return false;\n    }\n    /**\n     * Defines an override for loading shader strings\n     * Return true to stop further extensions from loading this shader data\n     * @param gltfRuntime\n     * @param id\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from loading this shader data\n     */\n    loadShaderStringAsync(gltfRuntime, id, onSuccess, onError) {\n        return false;\n    }\n    /**\n     * Defines an override for loading materials\n     * Return true to stop further extensions from loading this material\n     * @param gltfRuntime\n     * @param id\n     * @param onSuccess\n     * @param onError\n     * @returns true to stop further extensions from loading this material\n     */\n    loadMaterialAsync(gltfRuntime, id, onSuccess, onError) {\n        return false;\n    }\n    // ---------\n    // Utilities\n    // ---------\n    static LoadRuntimeAsync(scene, data, rootUrl, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadRuntimeAsync(scene, data, rootUrl, onSuccess, onError);\n        }, () => {\n            setTimeout(() => {\n                if (!onSuccess) {\n                    return;\n                }\n                onSuccess(GLTFLoaderBase.CreateRuntime(data.json, scene, rootUrl));\n            });\n        });\n    }\n    static LoadRuntimeExtensionsAsync(gltfRuntime, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadRuntimeExtensionsAsync(gltfRuntime, onSuccess, onError);\n        }, () => {\n            setTimeout(() => {\n                onSuccess();\n            });\n        });\n    }\n    static LoadBufferAsync(gltfRuntime, id, onSuccess, onError, onProgress) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadBufferAsync(gltfRuntime, id, onSuccess, onError, onProgress);\n        }, () => {\n            GLTFLoaderBase.LoadBufferAsync(gltfRuntime, id, onSuccess, onError, onProgress);\n        });\n    }\n    static LoadTextureAsync(gltfRuntime, id, onSuccess, onError) {\n        GLTFLoaderExtension._LoadTextureBufferAsync(gltfRuntime, id, (buffer) => {\n            if (buffer) {\n                GLTFLoaderExtension._CreateTextureAsync(gltfRuntime, id, buffer, onSuccess, onError);\n            }\n        }, onError);\n    }\n    static LoadShaderStringAsync(gltfRuntime, id, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadShaderStringAsync(gltfRuntime, id, onSuccess, onError);\n        }, () => {\n            GLTFLoaderBase.LoadShaderStringAsync(gltfRuntime, id, onSuccess, onError);\n        });\n    }\n    static LoadMaterialAsync(gltfRuntime, id, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadMaterialAsync(gltfRuntime, id, onSuccess, onError);\n        }, () => {\n            GLTFLoaderBase.LoadMaterialAsync(gltfRuntime, id, onSuccess, onError);\n        });\n    }\n    static _LoadTextureBufferAsync(gltfRuntime, id, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.loadTextureBufferAsync(gltfRuntime, id, onSuccess, onError);\n        }, () => {\n            GLTFLoaderBase.LoadTextureBufferAsync(gltfRuntime, id, onSuccess, onError);\n        });\n    }\n    static _CreateTextureAsync(gltfRuntime, id, buffer, onSuccess, onError) {\n        GLTFLoaderExtension._ApplyExtensions((loaderExtension) => {\n            return loaderExtension.createTextureAsync(gltfRuntime, id, buffer, onSuccess, onError);\n        }, () => {\n            GLTFLoaderBase.CreateTextureAsync(gltfRuntime, id, buffer, onSuccess);\n        });\n    }\n    static _ApplyExtensions(func, defaultFunc) {\n        for (const extensionName in GLTFLoader.Extensions) {\n            const loaderExtension = GLTFLoader.Extensions[extensionName];\n            if (func(loaderExtension)) {\n                return;\n            }\n        }\n        defaultFunc();\n    }\n}\n_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_26__.GLTFFileLoader._CreateGLTF1Loader = () => new GLTFLoader();\n//# sourceMappingURL=glTFLoader.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZMb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2SDtBQUMxQztBQUN0QjtBQUNQO0FBQ0s7QUFDUTtBQUNDO0FBQ2Y7QUFDUTtBQUNBO0FBQ0k7QUFDVTtBQUNNO0FBQ0o7QUFDTDtBQUNEO0FBQ047QUFDSDtBQUNGO0FBQ1U7QUFDaEI7QUFDd0I7QUFDQTtBQUNaO0FBQ0Y7QUFDZjtBQUNLO0FBQ1c7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBK0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsMkRBQVM7QUFDekMsaUNBQWlDLDJEQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnRUFBSztBQUNyQjtBQUNBO0FBQ0EsaURBQWlELCtEQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhFQUFTO0FBQ3pDO0FBQ0E7QUFDQSxvQ0FBb0MsOEVBQVM7QUFDN0Msd0RBQXdELDRFQUFVO0FBQ2xFO0FBQ0E7QUFDQSxvQ0FBb0MsOEVBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsOEVBQVMsMERBQTBELDhFQUFTO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3QkFBd0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlFQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHlFQUFPO0FBQzdDLGlEQUFpRCw0RUFBVTtBQUMzRCxrQ0FBa0MseUVBQU87QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdFQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5RUFBTztBQUM3Qix5QkFBeUIsNEVBQVU7QUFDbkMseUJBQXlCLHlFQUFPO0FBQ2hDLGNBQWMsd0VBQU07QUFDcEI7QUFDQTtBQUNBLGNBQWMsd0VBQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLCtEQUFJO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0Esd0JBQXdCLHFDQUFxQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUFJO0FBQzdCO0FBQ0EsMkJBQTJCLGdDQUFnQztBQUMzRDtBQUNBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBLDRCQUE0Qix3QkFBd0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkJBQTZCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFLO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFCQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNkJBQTZCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZCQUE2QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpRUFBSTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRCQUE0QjtBQUNwRDtBQUNBLHVDQUF1QyxrRkFBVTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQWM7QUFDdEM7QUFDQSx3Q0FBd0MsbUJBQW1CO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRFQUFZO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx5Q0FBeUM7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsMkRBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzRkFBYTtBQUNwQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNEZBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseUVBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0QkFBNEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1RUFBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5RUFBTztBQUNwQyw2QkFBNkIsNEVBQVU7QUFDdkMsNEJBQTRCLHlFQUFPO0FBQ25DLG9CQUFvQix3RUFBTTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5RUFBTyw4QkFBOEIsNEVBQVUsMkJBQTJCLHlFQUFPO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx5RkFBZ0IsYUFBYSx5RUFBTztBQUMxRTtBQUNBO0FBQ0Esd0NBQXdDLHVFQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMseUZBQWdCLGFBQWEseUVBQU87QUFDekU7QUFDQTtBQUNBLHVDQUF1Qyx1RUFBTTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDZFQUFVLGFBQWEseUVBQU87QUFDbEU7QUFDQTtBQUNBLHNDQUFzQyx1RUFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDJFQUFTLGFBQWEseUVBQU8sU0FBUyx5RUFBTztBQUNqRjtBQUNBO0FBQ0Esc0NBQXNDLHVFQUFNO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsNkVBQVUsY0FBYyx5RUFBTztBQUN2RTtBQUNBLG1DQUFtQyxxRUFBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNkVBQVUsY0FBYyx5RUFBTztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpRUFBSTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpRUFBSTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUVBQU8seUJBQXlCLDRFQUFVLHNCQUFzQix5RUFBTztBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0JBQStCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrQkFBK0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdDQUF3QztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvRUFBYyx3QkFBd0Isb0VBQWMsd0JBQXdCLG9FQUFjO0FBQy9HO0FBQ0EsZ0JBQWdCLDJEQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyREFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvRUFBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyREFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvRUFBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywyREFBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxXQUFXO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQix5QkFBeUI7QUFDekIsdUJBQXVCO0FBQ3ZCLDJCQUEyQjtBQUMzQixzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCLHVCQUF1QjtBQUN2QixxQkFBcUI7QUFDckIsc0JBQXNCO0FBQ3RCLHdCQUF3QjtBQUN4Qix1QkFBdUI7QUFDdkIsd0JBQXdCO0FBQ3hCLHdCQUF3QjtBQUN4QiwwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLDBCQUEwQjtBQUMxQixxQkFBcUI7QUFDckI7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakIsc0RBQXNELGdFQUFLO0FBQzNEO0FBQ0E7QUFDQSxZQUFZLGdFQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakIsc0RBQXNELGdFQUFLO0FBQzNEO0FBQ0E7QUFDQSxZQUFZLGdFQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsd0VBQWtCO0FBQ3RFLGtDQUFrQyx3RUFBa0I7QUFDcEQsa0NBQWtDLHdFQUFrQjtBQUNwRCxrQ0FBa0Msd0VBQWtCO0FBQ3BELDZCQUE2QixtRkFBTztBQUNwQztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUZBQU87QUFDdEM7QUFDQSwrQkFBK0IsMkRBQVM7QUFDeEM7QUFDQTtBQUNBLCtCQUErQiwyREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnRUFBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsNEZBQWdCO0FBQ3hEO0FBQ0E7QUFDQSwrQ0FBK0MsdUVBQU07QUFDckQsOENBQThDLDRFQUFRO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUVBQU07QUFDbkMsNEJBQTRCLHVFQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msb0VBQWM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVFQUFNO0FBQ2QsUUFBUSx1RUFBTTtBQUNkLG1DQUFtQyx3RkFBYztBQUNqRDtBQUNBO0FBQ0EseUNBQXlDLDRFQUFRO0FBQ2pEO0FBQ0E7QUFDQSxnRUFBZ0Usa0VBQVk7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdUVBQWlCO0FBQ3RELHFDQUFxQyx1RUFBaUI7QUFDdEQscUNBQXFDLHVFQUFpQjtBQUN0RCxxQ0FBcUMsdUVBQWlCO0FBQ3RELCtDQUErQyw0RUFBUztBQUN4RDtBQUNBLDBDQUEwQyx1RUFBaUI7QUFDM0QscUNBQXFDLHVFQUFpQjtBQUN0RCxxQ0FBcUMsdUVBQWlCO0FBQ3RELHFDQUFxQyx1RUFBaUI7QUFDdEQsK0NBQStDLDRFQUFTO0FBQ3hEO0FBQ0EsMENBQTBDLHVFQUFpQjtBQUMzRCxxQ0FBcUMsdUVBQWlCO0FBQ3RELHFDQUFxQyx1RUFBaUI7QUFDdEQscUNBQXFDLHVFQUFpQjtBQUN0RCwrQ0FBK0MsNEVBQVM7QUFDeEQ7QUFDQSwwQ0FBMEMsdUVBQWlCO0FBQzNELHFDQUFxQyx1RUFBaUI7QUFDdEQscUNBQXFDLHVFQUFpQjtBQUN0RCxxQ0FBcUMsdUVBQWlCO0FBQ3RELCtDQUErQyw0RUFBUztBQUN4RDtBQUNBLDBDQUEwQyx1RUFBaUI7QUFDM0QscUNBQXFDLHVFQUFpQjtBQUN0RCxxQ0FBcUMsdUVBQWlCO0FBQ3RELHFDQUFxQyx1RUFBaUI7QUFDdEQsK0NBQStDLDRFQUFTO0FBQ3hEO0FBQ0EsMENBQTBDLHVFQUFpQjtBQUMzRCxxQ0FBcUMsdUVBQWlCO0FBQ3RELHFDQUFxQyx1RUFBaUI7QUFDdEQscUNBQXFDLHVFQUFpQjtBQUN0RCwrQ0FBK0MsNEVBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxZQUFZLGdFQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpRkFBWTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHVFQUFRO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsK0RBQWM7QUFDdkM7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsZ0JBQWdCLCtEQUFjO0FBQzlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQWM7QUFDM0M7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsb0JBQW9CLCtEQUFjO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix1RUFBTSxxQ0FBcUMsaUVBQVc7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsZ0JBQWdCLGdFQUFLO0FBQ3JCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFLO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFLLDRHQUE0RztBQUN6STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsZ0JBQWdCLGdFQUFLO0FBQ3JCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFLO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtCQUErQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrQkFBK0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUFjO0FBQ2Qsc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzEuMC9nbFRGTG9hZGVyLmpzPzc5ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVBhcmFtZXRlclR5cGUsIEVUZXh0dXJlRmlsdGVyVHlwZSwgRUN1bGxpbmdUeXBlLCBFQmxlbmRpbmdGdW5jdGlvbiwgRVNoYWRlclR5cGUgfSBmcm9tIFwiLi9nbFRGTG9hZGVySW50ZXJmYWNlcy5qc1wiO1xuaW1wb3J0IHsgUXVhdGVybmlvbiwgVmVjdG9yMywgTWF0cml4IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3Rvci5qc1wiO1xuaW1wb3J0IHsgQ29sb3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yLmpzXCI7XG5pbXBvcnQgeyBUb29scyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWlzYy90b29scy5qc1wiO1xuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9DYW1lcmFzL2NhbWVyYS5qc1wiO1xuaW1wb3J0IHsgRnJlZUNhbWVyYSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQ2FtZXJhcy9mcmVlQ2FtZXJhLmpzXCI7XG5pbXBvcnQgeyBBbmltYXRpb24gfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0FuaW1hdGlvbnMvYW5pbWF0aW9uLmpzXCI7XG5pbXBvcnQgeyBCb25lIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9Cb25lcy9ib25lLmpzXCI7XG5pbXBvcnQgeyBTa2VsZXRvbiB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQm9uZXMvc2tlbGV0b24uanNcIjtcbmltcG9ydCB7IEVmZmVjdCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL2VmZmVjdC5qc1wiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9tYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgTXVsdGlNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL211bHRpTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IFN0YW5kYXJkTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9zdGFuZGFyZE1hdGVyaWFsLmpzXCI7XG5pbXBvcnQgeyBTaGFkZXJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL3NoYWRlck1hdGVyaWFsLmpzXCI7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZS5qc1wiO1xuaW1wb3J0IHsgVmVydGV4RGF0YSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2gudmVydGV4RGF0YS5qc1wiO1xuaW1wb3J0IHsgVmVydGV4QnVmZmVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlci5qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01lc2hlcy9nZW9tZXRyeS5qc1wiO1xuaW1wb3J0IHsgU3ViTWVzaCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3N1Yk1lc2guanNcIjtcbmltcG9ydCB7IEFic3RyYWN0TWVzaCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL2Fic3RyYWN0TWVzaC5qc1wiO1xuaW1wb3J0IHsgTWVzaCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2guanNcIjtcbmltcG9ydCB7IEhlbWlzcGhlcmljTGlnaHQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9oZW1pc3BoZXJpY0xpZ2h0LmpzXCI7XG5pbXBvcnQgeyBEaXJlY3Rpb25hbExpZ2h0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvZGlyZWN0aW9uYWxMaWdodC5qc1wiO1xuaW1wb3J0IHsgUG9pbnRMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL3BvaW50TGlnaHQuanNcIjtcbmltcG9ydCB7IFNwb3RMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL3Nwb3RMaWdodC5qc1wiO1xuaW1wb3J0IHsgR0xURlV0aWxzIH0gZnJvbSBcIi4vZ2xURkxvYWRlclV0aWxzLmpzXCI7XG5pbXBvcnQgeyBHTFRGRmlsZUxvYWRlciB9IGZyb20gXCIuLi9nbFRGRmlsZUxvYWRlci5qc1wiO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9FbmdpbmVzL2NvbnN0YW50cy5qc1wiO1xuLyoqXG4gKiBUb2tlbml6ZXIuIFVzZWQgZm9yIHNoYWRlcnMgY29tcGF0aWJpbGl0eVxuICogQXV0b21hdGljYWxseSBtYXAgd29ybGQsIHZpZXcsIHByb2plY3Rpb24sIHdvcmxkVmlld1Byb2plY3Rpb24sIGF0dHJpYnV0ZXMgYW5kIHNvIG9uXG4gKi9cbnZhciBFVG9rZW5UeXBlO1xuKGZ1bmN0aW9uIChFVG9rZW5UeXBlKSB7XG4gICAgRVRva2VuVHlwZVtFVG9rZW5UeXBlW1wiSURFTlRJRklFUlwiXSA9IDFdID0gXCJJREVOVElGSUVSXCI7XG4gICAgRVRva2VuVHlwZVtFVG9rZW5UeXBlW1wiVU5LTk9XTlwiXSA9IDJdID0gXCJVTktOT1dOXCI7XG4gICAgRVRva2VuVHlwZVtFVG9rZW5UeXBlW1wiRU5EX09GX0lOUFVUXCJdID0gM10gPSBcIkVORF9PRl9JTlBVVFwiO1xufSkoRVRva2VuVHlwZSB8fCAoRVRva2VuVHlwZSA9IHt9KSk7XG5jbGFzcyBUb2tlbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRvUGFyc2UpIHtcbiAgICAgICAgdGhpcy5fcG9zID0gMDtcbiAgICAgICAgdGhpcy5jdXJyZW50VG9rZW4gPSBFVG9rZW5UeXBlLlVOS05PV047XG4gICAgICAgIHRoaXMuY3VycmVudElkZW50aWZpZXIgPSBcIlwiO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdHJpbmcgPSBcIlwiO1xuICAgICAgICB0aGlzLmlzTGV0dGVyT3JEaWdpdFBhdHRlcm4gPSAvXlthLXpBLVowLTldKyQvO1xuICAgICAgICB0aGlzLl90b1BhcnNlID0gdG9QYXJzZTtcbiAgICAgICAgdGhpcy5fbWF4UG9zID0gdG9QYXJzZS5sZW5ndGg7XG4gICAgfVxuICAgIGdldE5leHRUb2tlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbmQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIEVUb2tlblR5cGUuRU5EX09GX0lOUFVUO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFN0cmluZyA9IHRoaXMucmVhZCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRUb2tlbiA9IEVUb2tlblR5cGUuVU5LTk9XTjtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0cmluZyA9PT0gXCJfXCIgfHwgdGhpcy5pc0xldHRlck9yRGlnaXRQYXR0ZXJuLnRlc3QodGhpcy5jdXJyZW50U3RyaW5nKSkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VG9rZW4gPSBFVG9rZW5UeXBlLklERU5USUZJRVI7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJZGVudGlmaWVyID0gdGhpcy5jdXJyZW50U3RyaW5nO1xuICAgICAgICAgICAgd2hpbGUgKCF0aGlzLmlzRW5kKCkgJiYgKHRoaXMuaXNMZXR0ZXJPckRpZ2l0UGF0dGVybi50ZXN0KCh0aGlzLmN1cnJlbnRTdHJpbmcgPSB0aGlzLnBlZWsoKSkpIHx8IHRoaXMuY3VycmVudFN0cmluZyA9PT0gXCJfXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SWRlbnRpZmllciArPSB0aGlzLmN1cnJlbnRTdHJpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRva2VuO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9QYXJzZVt0aGlzLl9wb3NdO1xuICAgIH1cbiAgICByZWFkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9QYXJzZVt0aGlzLl9wb3MrK107XG4gICAgfVxuICAgIGZvcndhcmQoKSB7XG4gICAgICAgIHRoaXMuX3BvcysrO1xuICAgIH1cbiAgICBpc0VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcyA+PSB0aGlzLl9tYXhQb3M7XG4gICAgfVxufVxuLyoqXG4gKiBWYWx1ZXNcbiAqL1xuY29uc3QgZ2xURlRyYW5zZm9ybXMgPSBbXCJNT0RFTFwiLCBcIlZJRVdcIiwgXCJQUk9KRUNUSU9OXCIsIFwiTU9ERUxWSUVXXCIsIFwiTU9ERUxWSUVXUFJPSkVDVElPTlwiLCBcIkpPSU5UTUFUUklYXCJdO1xuY29uc3QgYmFieWxvblRyYW5zZm9ybXMgPSBbXCJ3b3JsZFwiLCBcInZpZXdcIiwgXCJwcm9qZWN0aW9uXCIsIFwid29ybGRWaWV3XCIsIFwid29ybGRWaWV3UHJvamVjdGlvblwiLCBcIm1Cb25lc1wiXTtcbmNvbnN0IGdsVEZBbmltYXRpb25QYXRocyA9IFtcInRyYW5zbGF0aW9uXCIsIFwicm90YXRpb25cIiwgXCJzY2FsZVwiXTtcbmNvbnN0IGJhYnlsb25BbmltYXRpb25QYXRocyA9IFtcInBvc2l0aW9uXCIsIFwicm90YXRpb25RdWF0ZXJuaW9uXCIsIFwic2NhbGluZ1wiXTtcbi8qKlxuICogUGFyc2VcbiAqIEBwYXJhbSBwYXJzZWRCdWZmZXJzXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqL1xuY29uc3QgcGFyc2VCdWZmZXJzID0gKHBhcnNlZEJ1ZmZlcnMsIGdsdGZSdW50aW1lKSA9PiB7XG4gICAgZm9yIChjb25zdCBidWYgaW4gcGFyc2VkQnVmZmVycykge1xuICAgICAgICBjb25zdCBwYXJzZWRCdWZmZXIgPSBwYXJzZWRCdWZmZXJzW2J1Zl07XG4gICAgICAgIGdsdGZSdW50aW1lLmJ1ZmZlcnNbYnVmXSA9IHBhcnNlZEJ1ZmZlcjtcbiAgICAgICAgZ2x0ZlJ1bnRpbWUuYnVmZmVyc0NvdW50Kys7XG4gICAgfVxufTtcbmNvbnN0IHBhcnNlU2hhZGVycyA9IChwYXJzZWRTaGFkZXJzLCBnbHRmUnVudGltZSkgPT4ge1xuICAgIGZvciAoY29uc3Qgc2hhIGluIHBhcnNlZFNoYWRlcnMpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkU2hhZGVyID0gcGFyc2VkU2hhZGVyc1tzaGFdO1xuICAgICAgICBnbHRmUnVudGltZS5zaGFkZXJzW3NoYV0gPSBwYXJzZWRTaGFkZXI7XG4gICAgICAgIGdsdGZSdW50aW1lLnNoYWRlcnNjb3VudCsrO1xuICAgIH1cbn07XG5jb25zdCBwYXJzZU9iamVjdCA9IChwYXJzZWRPYmplY3RzLCBydW50aW1lUHJvcGVydHksIGdsdGZSdW50aW1lKSA9PiB7XG4gICAgZm9yIChjb25zdCBvYmplY3QgaW4gcGFyc2VkT2JqZWN0cykge1xuICAgICAgICBjb25zdCBwYXJzZWRPYmplY3QgPSBwYXJzZWRPYmplY3RzW29iamVjdF07XG4gICAgICAgIGdsdGZSdW50aW1lW3J1bnRpbWVQcm9wZXJ0eV1bb2JqZWN0XSA9IHBhcnNlZE9iamVjdDtcbiAgICB9XG59O1xuLyoqXG4gKiBVdGlsc1xuICogQHBhcmFtIGJ1ZmZlclxuICovXG5jb25zdCBub3JtYWxpemVVVnMgPSAoYnVmZmVyKSA9PiB7XG4gICAgaWYgKCFidWZmZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGggLyAyOyBpKyspIHtcbiAgICAgICAgYnVmZmVyW2kgKiAyICsgMV0gPSAxLjAgLSBidWZmZXJbaSAqIDIgKyAxXTtcbiAgICB9XG59O1xuY29uc3QgZ2V0QXR0cmlidXRlID0gKGF0dHJpYnV0ZVBhcmFtZXRlcikgPT4ge1xuICAgIGlmIChhdHRyaWJ1dGVQYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiTk9STUFMXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibm9ybWFsXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJQT1NJVElPTlwiKSB7XG4gICAgICAgIHJldHVybiBcInBvc2l0aW9uXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJKT0lOVFwiKSB7XG4gICAgICAgIHJldHVybiBcIm1hdHJpY2VzSW5kaWNlc1wiO1xuICAgIH1cbiAgICBlbHNlIGlmIChhdHRyaWJ1dGVQYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiV0VJR0hUXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibWF0cmljZXNXZWlnaHRzXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJDT0xPUlwiKSB7XG4gICAgICAgIHJldHVybiBcImNvbG9yXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVBhcmFtZXRlci5zZW1hbnRpYyAmJiBhdHRyaWJ1dGVQYXJhbWV0ZXIuc2VtYW50aWMuaW5kZXhPZihcIlRFWENPT1JEX1wiKSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IE51bWJlcihhdHRyaWJ1dGVQYXJhbWV0ZXIuc2VtYW50aWMuc3BsaXQoXCJfXCIpWzFdKTtcbiAgICAgICAgcmV0dXJuIFwidXZcIiArIChjaGFubmVsID09PSAwID8gXCJcIiA6IGNoYW5uZWwgKyAxKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLyoqXG4gKiBMb2FkcyBhbmQgY3JlYXRlcyBhbmltYXRpb25zXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqL1xuY29uc3QgbG9hZEFuaW1hdGlvbnMgPSAoZ2x0ZlJ1bnRpbWUpID0+IHtcbiAgICBmb3IgKGNvbnN0IGFuaW0gaW4gZ2x0ZlJ1bnRpbWUuYW5pbWF0aW9ucykge1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSBnbHRmUnVudGltZS5hbmltYXRpb25zW2FuaW1dO1xuICAgICAgICBpZiAoIWFuaW1hdGlvbi5jaGFubmVscyB8fCAhYW5pbWF0aW9uLnNhbXBsZXJzKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGFzdEFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5pbWF0aW9uLmNoYW5uZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBHZXQgcGFyYW1ldGVycyBhbmQgbG9hZCBidWZmZXJzXG4gICAgICAgICAgICBjb25zdCBjaGFubmVsID0gYW5pbWF0aW9uLmNoYW5uZWxzW2ldO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlciA9IGFuaW1hdGlvbi5zYW1wbGVyc1tjaGFubmVsLnNhbXBsZXJdO1xuICAgICAgICAgICAgaWYgKCFzYW1wbGVyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaW5wdXREYXRhID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBvdXRwdXREYXRhID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb24ucGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGlucHV0RGF0YSA9IGFuaW1hdGlvbi5wYXJhbWV0ZXJzW3NhbXBsZXIuaW5wdXRdO1xuICAgICAgICAgICAgICAgIG91dHB1dERhdGEgPSBhbmltYXRpb24ucGFyYW1ldGVyc1tzYW1wbGVyLm91dHB1dF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dERhdGEgPSBzYW1wbGVyLmlucHV0O1xuICAgICAgICAgICAgICAgIG91dHB1dERhdGEgPSBzYW1wbGVyLm91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcklucHV0ID0gR0xURlV0aWxzLkdldEJ1ZmZlckZyb21BY2Nlc3NvcihnbHRmUnVudGltZSwgZ2x0ZlJ1bnRpbWUuYWNjZXNzb3JzW2lucHV0RGF0YV0pO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyT3V0cHV0ID0gR0xURlV0aWxzLkdldEJ1ZmZlckZyb21BY2Nlc3NvcihnbHRmUnVudGltZSwgZ2x0ZlJ1bnRpbWUuYWNjZXNzb3JzW291dHB1dERhdGFdKTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldElkID0gY2hhbm5lbC50YXJnZXQuaWQ7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0Tm9kZSA9IGdsdGZSdW50aW1lLnNjZW5lLmdldE5vZGVCeUlkKHRhcmdldElkKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXROb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IGdsdGZSdW50aW1lLnNjZW5lLmdldE5vZGVCeU5hbWUodGFyZ2V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBUb29scy5XYXJuKFwiQ3JlYXRpbmcgYW5pbWF0aW9uIG5hbWVkIFwiICsgYW5pbSArIFwiLiBCdXQgY2Fubm90IGZpbmQgbm9kZSBuYW1lZCBcIiArIHRhcmdldElkICsgXCIgdG8gYXR0YWNoIHRvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNCb25lID0gdGFyZ2V0Tm9kZSBpbnN0YW5jZW9mIEJvbmU7XG4gICAgICAgICAgICAvLyBHZXQgdGFyZ2V0IHBhdGggKHBvc2l0aW9uLCByb3RhdGlvbiBvciBzY2FsaW5nKVxuICAgICAgICAgICAgbGV0IHRhcmdldFBhdGggPSBjaGFubmVsLnRhcmdldC5wYXRoO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGF0aEluZGV4ID0gZ2xURkFuaW1hdGlvblBhdGhzLmluZGV4T2YodGFyZ2V0UGF0aCk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0UGF0aEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFBhdGggPSBiYWJ5bG9uQW5pbWF0aW9uUGF0aHNbdGFyZ2V0UGF0aEluZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERldGVybWluZSBhbmltYXRpb24gdHlwZVxuICAgICAgICAgICAgbGV0IGFuaW1hdGlvblR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9NQVRSSVg7XG4gICAgICAgICAgICBpZiAoIWlzQm9uZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRQYXRoID09PSBcInJvdGF0aW9uUXVhdGVybmlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvblR5cGUgPSBBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9RVUFURVJOSU9OO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXROb2RlLnJvdGF0aW9uUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25UeXBlID0gQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfVkVDVE9SMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5pbWF0aW9uIGFuZCBrZXkgZnJhbWVzXG4gICAgICAgICAgICBsZXQgYmFieWxvbkFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBsZXQgYXJyYXlPZmZzZXQgPSAwO1xuICAgICAgICAgICAgbGV0IG1vZGlmeUtleSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlzQm9uZSAmJiBsYXN0QW5pbWF0aW9uICYmIGxhc3RBbmltYXRpb24uZ2V0S2V5cygpLmxlbmd0aCA9PT0gYnVmZmVySW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYmFieWxvbkFuaW1hdGlvbiA9IGxhc3RBbmltYXRpb247XG4gICAgICAgICAgICAgICAgbW9kaWZ5S2V5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbW9kaWZ5S2V5KSB7XG4gICAgICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuc2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhZ2x0ZlJ1bnRpbWUuYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICAgICAgYmFieWxvbkFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24oYW5pbSwgaXNCb25lID8gXCJfbWF0cml4XCIgOiB0YXJnZXRQYXRoLCAxLCBhbmltYXRpb25UeXBlLCBBbmltYXRpb24uQU5JTUFUSU9OTE9PUE1PREVfQ1lDTEUpO1xuICAgICAgICAgICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvciBlYWNoIGZyYW1lXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJ1ZmZlcklucHV0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UGF0aCA9PT0gXCJyb3RhdGlvblF1YXRlcm5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBWRUM0XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gUXVhdGVybmlvbi5Gcm9tQXJyYXkoW2J1ZmZlck91dHB1dFthcnJheU9mZnNldF0sIGJ1ZmZlck91dHB1dFthcnJheU9mZnNldCArIDFdLCBidWZmZXJPdXRwdXRbYXJyYXlPZmZzZXQgKyAyXSwgYnVmZmVyT3V0cHV0W2FycmF5T2Zmc2V0ICsgM11dKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlPZmZzZXQgKz0gNDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBvc2l0aW9uIGFuZCBzY2FsaW5nIGFyZSBWRUMzXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gVmVjdG9yMy5Gcm9tQXJyYXkoW2J1ZmZlck91dHB1dFthcnJheU9mZnNldF0sIGJ1ZmZlck91dHB1dFthcnJheU9mZnNldCArIDFdLCBidWZmZXJPdXRwdXRbYXJyYXlPZmZzZXQgKyAyXV0pO1xuICAgICAgICAgICAgICAgICAgICBhcnJheU9mZnNldCArPSAzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNCb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvbmUgPSB0YXJnZXROb2RlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNsYXRpb24gPSBWZWN0b3IzLlplcm8oKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdGF0aW9uUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nID0gVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdhcm5pbmcgb24gZGVjb21wb3NlXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXQgPSBib25lLmdldEJhc2VNYXRyaXgoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmeUtleSAmJiBsYXN0QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXQgPSBsYXN0QW5pbWF0aW9uLmdldEtleXMoKVtqXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXQuZGVjb21wb3NlKHNjYWxpbmcsIHJvdGF0aW9uUXVhdGVybmlvbiwgdHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UGF0aCA9PT0gXCJwb3NpdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldFBhdGggPT09IFwicm90YXRpb25RdWF0ZXJuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uUXVhdGVybmlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGluZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gTWF0cml4LkNvbXBvc2Uoc2NhbGluZywgcm90YXRpb25RdWF0ZXJuaW9uLCB0cmFuc2xhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbW9kaWZ5S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZTogYnVmZmVySW5wdXRbal0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXN0QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RBbmltYXRpb24uZ2V0S2V5cygpW2pdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluaXNoXG4gICAgICAgICAgICBpZiAoIW1vZGlmeUtleSAmJiBiYWJ5bG9uQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFieWxvbkFuaW1hdGlvbi5zZXRLZXlzKGtleXMpO1xuICAgICAgICAgICAgICAgIHRhcmdldE5vZGUuYW5pbWF0aW9ucy5wdXNoKGJhYnlsb25BbmltYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEFuaW1hdGlvbiA9IGJhYnlsb25BbmltYXRpb247XG4gICAgICAgICAgICBnbHRmUnVudGltZS5zY2VuZS5zdG9wQW5pbWF0aW9uKHRhcmdldE5vZGUpO1xuICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuc2NlbmUuYmVnaW5BbmltYXRpb24odGFyZ2V0Tm9kZSwgMCwgYnVmZmVySW5wdXRbYnVmZmVySW5wdXQubGVuZ3RoIC0gMV0sIHRydWUsIDEuMCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuLyoqXG4gKiBAcmV0dXJucyB0aGUgYm9uZXMgdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gKiBAcGFyYW0gbm9kZVxuICovXG5jb25zdCBjb25maWd1cmVCb25lVHJhbnNmb3JtYXRpb24gPSAobm9kZSkgPT4ge1xuICAgIGxldCBtYXQgPSBudWxsO1xuICAgIGlmIChub2RlLnRyYW5zbGF0aW9uIHx8IG5vZGUucm90YXRpb24gfHwgbm9kZS5zY2FsZSkge1xuICAgICAgICBjb25zdCBzY2FsZSA9IFZlY3RvcjMuRnJvbUFycmF5KG5vZGUuc2NhbGUgfHwgWzEsIDEsIDFdKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBRdWF0ZXJuaW9uLkZyb21BcnJheShub2RlLnJvdGF0aW9uIHx8IFswLCAwLCAwLCAxXSk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gVmVjdG9yMy5Gcm9tQXJyYXkobm9kZS50cmFuc2xhdGlvbiB8fCBbMCwgMCwgMF0pO1xuICAgICAgICBtYXQgPSBNYXRyaXguQ29tcG9zZShzY2FsZSwgcm90YXRpb24sIHBvc2l0aW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hdCA9IE1hdHJpeC5Gcm9tQXJyYXkobm9kZS5tYXRyaXgpO1xuICAgIH1cbiAgICByZXR1cm4gbWF0O1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgcGFyZW50IGJvbmVcbiAqIEBwYXJhbSBnbHRmUnVudGltZVxuICogQHBhcmFtIHNraW5zXG4gKiBAcGFyYW0gam9pbnROYW1lXG4gKiBAcGFyYW0gbmV3U2tlbGV0b25cbiAqIEByZXR1cm5zIHRoZSBwYXJlbnQgYm9uZVxuICovXG5jb25zdCBnZXRQYXJlbnRCb25lID0gKGdsdGZSdW50aW1lLCBza2lucywgam9pbnROYW1lLCBuZXdTa2VsZXRvbikgPT4ge1xuICAgIC8vIFRyeSB0byBmaW5kXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTa2VsZXRvbi5ib25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobmV3U2tlbGV0b24uYm9uZXNbaV0ubmFtZSA9PT0gam9pbnROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3U2tlbGV0b24uYm9uZXNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTm90IGZvdW5kLCBzZWFyY2ggaW4gZ2x0ZiBub2Rlc1xuICAgIGNvbnN0IG5vZGVzID0gZ2x0ZlJ1bnRpbWUubm9kZXM7XG4gICAgZm9yIChjb25zdCBuZGUgaW4gbm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW25kZV07XG4gICAgICAgIGlmICghbm9kZS5qb2ludE5hbWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBnbHRmUnVudGltZS5ub2Rlc1tjaGlsZHJlbltpXV07XG4gICAgICAgICAgICBpZiAoIWNoaWxkLmpvaW50TmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkLmpvaW50TmFtZSA9PT0gam9pbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ID0gY29uZmlndXJlQm9uZVRyYW5zZm9ybWF0aW9uKG5vZGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvbmUgPSBuZXcgQm9uZShub2RlLm5hbWUgfHwgXCJcIiwgbmV3U2tlbGV0b24sIGdldFBhcmVudEJvbmUoZ2x0ZlJ1bnRpbWUsIHNraW5zLCBub2RlLmpvaW50TmFtZSwgbmV3U2tlbGV0b24pLCBtYXQpO1xuICAgICAgICAgICAgICAgIGJvbmUuaWQgPSBuZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSByb290IG5vZGVcbiAqIEBwYXJhbSBub2Rlc1RvUm9vdFxuICogQHBhcmFtIGlkXG4gKiBAcmV0dXJucyB0aGUgcm9vdCBub2RlXG4gKi9cbmNvbnN0IGdldE5vZGVUb1Jvb3QgPSAobm9kZXNUb1Jvb3QsIGlkKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1RvUm9vdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlVG9Sb290ID0gbm9kZXNUb1Jvb3RbaV07XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9kZVRvUm9vdC5ub2RlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGVUb1Jvb3Qubm9kZS5jaGlsZHJlbltqXTtcbiAgICAgICAgICAgIGlmIChjaGlsZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZVRvUm9vdC5ib25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbm9kZSB3aXRoIHRoZSBqb2ludCBuYW1lXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqIEBwYXJhbSBqb2ludE5hbWVcbiAqIEByZXR1cm5zIHRoZSBub2RlIHdpdGggdGhlIGpvaW50IG5hbWVcbiAqL1xuY29uc3QgZ2V0Sm9pbnROb2RlID0gKGdsdGZSdW50aW1lLCBqb2ludE5hbWUpID0+IHtcbiAgICBjb25zdCBub2RlcyA9IGdsdGZSdW50aW1lLm5vZGVzO1xuICAgIGxldCBub2RlID0gbm9kZXNbam9pbnROYW1lXTtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgIGlkOiBqb2ludE5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvciAoY29uc3QgbmRlIGluIG5vZGVzKSB7XG4gICAgICAgIG5vZGUgPSBub2Rlc1tuZGVdO1xuICAgICAgICBpZiAobm9kZS5qb2ludE5hbWUgPT09IGpvaW50TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgICAgIGlkOiBuZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbi8qKlxuICogQ2hlY2tzIGlmIGEgbm9kZXMgaXMgaW4gam9pbnRzXG4gKiBAcGFyYW0gc2tpbnNcbiAqIEBwYXJhbSBpZFxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbm9kZSBpcyBpbiBqb2ludHMsIGVsc2UgZmFsc2VcbiAqL1xuY29uc3Qgbm9kZUlzSW5Kb2ludHMgPSAoc2tpbnMsIGlkKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBza2lucy5qb2ludE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChza2lucy5qb2ludE5hbWVzW2ldID09PSBpZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbi8qKlxuICogRmlsbHMgdGhlIG5vZGVzIHRvIHJvb3QgZm9yIGJvbmVzIGFuZCBidWlsZHMgaGllcmFyY2h5XG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqIEBwYXJhbSBuZXdTa2VsZXRvblxuICogQHBhcmFtIHNraW5zXG4gKiBAcGFyYW0gbm9kZXNUb1Jvb3RcbiAqL1xuY29uc3QgZ2V0Tm9kZXNUb1Jvb3QgPSAoZ2x0ZlJ1bnRpbWUsIG5ld1NrZWxldG9uLCBza2lucywgbm9kZXNUb1Jvb3QpID0+IHtcbiAgICAvLyBDcmVhdGVzIG5vZGVzIGZvciByb290XG4gICAgZm9yIChjb25zdCBuZGUgaW4gZ2x0ZlJ1bnRpbWUubm9kZXMpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGdsdGZSdW50aW1lLm5vZGVzW25kZV07XG4gICAgICAgIGNvbnN0IGlkID0gbmRlO1xuICAgICAgICBpZiAoIW5vZGUuam9pbnROYW1lIHx8IG5vZGVJc0luSm9pbnRzKHNraW5zLCBub2RlLmpvaW50TmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBub2RlIHRvIHJvb3QgYm9uZVxuICAgICAgICBjb25zdCBtYXQgPSBjb25maWd1cmVCb25lVHJhbnNmb3JtYXRpb24obm9kZSk7XG4gICAgICAgIGNvbnN0IGJvbmUgPSBuZXcgQm9uZShub2RlLm5hbWUgfHwgXCJcIiwgbmV3U2tlbGV0b24sIG51bGwsIG1hdCk7XG4gICAgICAgIGJvbmUuaWQgPSBpZDtcbiAgICAgICAgbm9kZXNUb1Jvb3QucHVzaCh7IGJvbmU6IGJvbmUsIG5vZGU6IG5vZGUsIGlkOiBpZCB9KTtcbiAgICB9XG4gICAgLy8gUGFyZW50aW5nXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1RvUm9vdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlVG9Sb290ID0gbm9kZXNUb1Jvb3RbaV07XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gbm9kZVRvUm9vdC5ub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBub2Rlc1RvUm9vdC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmIChub2Rlc1RvUm9vdFtrXS5pZCA9PT0gY2hpbGRyZW5bal0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBub2Rlc1RvUm9vdFtrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuYm9uZS5fcGFyZW50ID0gbm9kZVRvUm9vdC5ib25lO1xuICAgICAgICAgICAgICAgIG5vZGVUb1Jvb3QuYm9uZS5jaGlsZHJlbi5wdXNoKGNoaWxkLmJvbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogSW1wb3J0cyBhIHNrZWxldG9uXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqIEBwYXJhbSBza2luc1xuICogQHBhcmFtIG1lc2hcbiAqIEBwYXJhbSBuZXdTa2VsZXRvblxuICogQHJldHVybnMgdGhlIGJvbmUgbmFtZVxuICovXG5jb25zdCBpbXBvcnRTa2VsZXRvbiA9IChnbHRmUnVudGltZSwgc2tpbnMsIG1lc2gsIG5ld1NrZWxldG9uKSA9PiB7XG4gICAgaWYgKCFuZXdTa2VsZXRvbikge1xuICAgICAgICBuZXdTa2VsZXRvbiA9IG5ldyBTa2VsZXRvbihza2lucy5uYW1lIHx8IFwiXCIsIFwiXCIsIGdsdGZSdW50aW1lLnNjZW5lKTtcbiAgICB9XG4gICAgaWYgKCFza2lucy5iYWJ5bG9uU2tlbGV0b24pIHtcbiAgICAgICAgcmV0dXJuIG5ld1NrZWxldG9uO1xuICAgIH1cbiAgICAvLyBGaW5kIHRoZSByb290IGJvbmVzXG4gICAgY29uc3Qgbm9kZXNUb1Jvb3QgPSBbXTtcbiAgICBjb25zdCBub2Rlc1RvUm9vdFRvQWRkID0gW107XG4gICAgZ2V0Tm9kZXNUb1Jvb3QoZ2x0ZlJ1bnRpbWUsIG5ld1NrZWxldG9uLCBza2lucywgbm9kZXNUb1Jvb3QpO1xuICAgIG5ld1NrZWxldG9uLmJvbmVzID0gW107XG4gICAgLy8gSm9pbnRzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBza2lucy5qb2ludE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGpvaW50Tm9kZSA9IGdldEpvaW50Tm9kZShnbHRmUnVudGltZSwgc2tpbnMuam9pbnROYW1lc1tpXSk7XG4gICAgICAgIGlmICgham9pbnROb2RlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlID0gam9pbnROb2RlLm5vZGU7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgVG9vbHMuV2FybihcIkpvaW50IG5hbWVkIFwiICsgc2tpbnMuam9pbnROYW1lc1tpXSArIFwiIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaWQgPSBqb2ludE5vZGUuaWQ7XG4gICAgICAgIC8vIE9wdGltaXplLCBpZiB0aGUgYm9uZSBhbHJlYWR5IGV4aXN0cy4uLlxuICAgICAgICBjb25zdCBleGlzdGluZ0JvbmUgPSBnbHRmUnVudGltZS5zY2VuZS5nZXRCb25lQnlJZChpZCk7XG4gICAgICAgIGlmIChleGlzdGluZ0JvbmUpIHtcbiAgICAgICAgICAgIG5ld1NrZWxldG9uLmJvbmVzLnB1c2goZXhpc3RpbmdCb25lKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNlYXJjaCBmb3IgcGFyZW50IGJvbmVcbiAgICAgICAgbGV0IGZvdW5kQm9uZSA9IGZhbHNlO1xuICAgICAgICBsZXQgcGFyZW50Qm9uZSA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBqb2ludE5vZGUgPSBnZXRKb2ludE5vZGUoZ2x0ZlJ1bnRpbWUsIHNraW5zLmpvaW50TmFtZXNbal0pO1xuICAgICAgICAgICAgaWYgKCFqb2ludE5vZGUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGpvaW50ID0gam9pbnROb2RlLm5vZGU7XG4gICAgICAgICAgICBpZiAoIWpvaW50KSB7XG4gICAgICAgICAgICAgICAgVG9vbHMuV2FybihcIkpvaW50IG5hbWVkIFwiICsgc2tpbnMuam9pbnROYW1lc1tqXSArIFwiIGRvZXMgbm90IGV4aXN0IHdoZW4gbG9va2luZyBmb3IgcGFyZW50XCIpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBqb2ludC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvdW5kQm9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjaGlsZHJlbi5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbltrXSA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Qm9uZSA9IGdldFBhcmVudEJvbmUoZ2x0ZlJ1bnRpbWUsIHNraW5zLCBza2lucy5qb2ludE5hbWVzW2pdLCBuZXdTa2VsZXRvbik7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kQm9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZEJvbmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgYm9uZVxuICAgICAgICBjb25zdCBtYXQgPSBjb25maWd1cmVCb25lVHJhbnNmb3JtYXRpb24obm9kZSk7XG4gICAgICAgIGlmICghcGFyZW50Qm9uZSAmJiBub2Rlc1RvUm9vdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwYXJlbnRCb25lID0gZ2V0Tm9kZVRvUm9vdChub2Rlc1RvUm9vdCwgaWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudEJvbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZXNUb1Jvb3RUb0FkZC5pbmRleE9mKHBhcmVudEJvbmUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1RvUm9vdFRvQWRkLnB1c2gocGFyZW50Qm9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvbmUgPSBuZXcgQm9uZShub2RlLmpvaW50TmFtZSB8fCBcIlwiLCBuZXdTa2VsZXRvbiwgcGFyZW50Qm9uZSwgbWF0KTtcbiAgICAgICAgYm9uZS5pZCA9IGlkO1xuICAgIH1cbiAgICAvLyBQb2xpc2hcbiAgICBjb25zdCBib25lcyA9IG5ld1NrZWxldG9uLmJvbmVzO1xuICAgIG5ld1NrZWxldG9uLmJvbmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBza2lucy5qb2ludE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGpvaW50Tm9kZSA9IGdldEpvaW50Tm9kZShnbHRmUnVudGltZSwgc2tpbnMuam9pbnROYW1lc1tpXSk7XG4gICAgICAgIGlmICgham9pbnROb2RlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoYm9uZXNbal0uaWQgPT09IGpvaW50Tm9kZS5pZCkge1xuICAgICAgICAgICAgICAgIG5ld1NrZWxldG9uLmJvbmVzLnB1c2goYm9uZXNbal0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5ld1NrZWxldG9uLnByZXBhcmUoKTtcbiAgICAvLyBGaW5pc2hcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzVG9Sb290VG9BZGQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbmV3U2tlbGV0b24uYm9uZXMucHVzaChub2Rlc1RvUm9vdFRvQWRkW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1NrZWxldG9uO1xufTtcbi8qKlxuICogSW1wb3J0cyBhIG1lc2ggYW5kIGl0cyBnZW9tZXRyaWVzXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqIEBwYXJhbSBub2RlXG4gKiBAcGFyYW0gbWVzaGVzXG4gKiBAcGFyYW0gaWRcbiAqIEBwYXJhbSBuZXdNZXNoXG4gKiBAcmV0dXJucyB0aGUgbmV3IG1lc2hcbiAqL1xuY29uc3QgaW1wb3J0TWVzaCA9IChnbHRmUnVudGltZSwgbm9kZSwgbWVzaGVzLCBpZCwgbmV3TWVzaCkgPT4ge1xuICAgIGlmICghbmV3TWVzaCkge1xuICAgICAgICBnbHRmUnVudGltZS5zY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISFnbHRmUnVudGltZS5hc3NldENvbnRhaW5lcjtcbiAgICAgICAgbmV3TWVzaCA9IG5ldyBNZXNoKG5vZGUubmFtZSB8fCBcIlwiLCBnbHRmUnVudGltZS5zY2VuZSk7XG4gICAgICAgIG5ld01lc2guX3BhcmVudENvbnRhaW5lciA9IGdsdGZSdW50aW1lLmFzc2V0Q29udGFpbmVyO1xuICAgICAgICBnbHRmUnVudGltZS5zY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIG5ld01lc2guaWQgPSBpZDtcbiAgICB9XG4gICAgaWYgKCFub2RlLmJhYnlsb25Ob2RlKSB7XG4gICAgICAgIHJldHVybiBuZXdNZXNoO1xuICAgIH1cbiAgICBjb25zdCBzdWJNYXRlcmlhbHMgPSBbXTtcbiAgICBsZXQgdmVydGV4RGF0YSA9IG51bGw7XG4gICAgY29uc3QgdmVydGljZXNTdGFydHMgPSBbXTtcbiAgICBjb25zdCB2ZXJ0aWNlc0NvdW50cyA9IFtdO1xuICAgIGNvbnN0IGluZGV4U3RhcnRzID0gW107XG4gICAgY29uc3QgaW5kZXhDb3VudHMgPSBbXTtcbiAgICBmb3IgKGxldCBtZXNoSW5kZXggPSAwOyBtZXNoSW5kZXggPCBtZXNoZXMubGVuZ3RoOyBtZXNoSW5kZXgrKykge1xuICAgICAgICBjb25zdCBtZXNoSWQgPSBtZXNoZXNbbWVzaEluZGV4XTtcbiAgICAgICAgY29uc3QgbWVzaCA9IGdsdGZSdW50aW1lLm1lc2hlc1ttZXNoSWRdO1xuICAgICAgICBpZiAoIW1lc2gpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBvc2l0aW9ucywgbm9ybWFscyBhbmQgVVZzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaC5wcmltaXRpdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBUZW1wb3JhcnkgdmVydGV4IGRhdGFcbiAgICAgICAgICAgIGNvbnN0IHRlbXBWZXJ0ZXhEYXRhID0gbmV3IFZlcnRleERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmltaXRpdmUubW9kZSAhPT0gNCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgbGV0IGFjY2Vzc29yID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBidWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgLy8gU2V0IHBvc2l0aW9ucywgbm9ybWFsIGFuZCB1dnNcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VtYW50aWMgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIC8vIExpbmsgYWNjZXNzb3IgYW5kIGJ1ZmZlciB2aWV3XG4gICAgICAgICAgICAgICAgYWNjZXNzb3IgPSBnbHRmUnVudGltZS5hY2Nlc3NvcnNbYXR0cmlidXRlc1tzZW1hbnRpY11dO1xuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IEdMVEZVdGlscy5HZXRCdWZmZXJGcm9tQWNjZXNzb3IoZ2x0ZlJ1bnRpbWUsIGFjY2Vzc29yKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWMgPT09IFwiTk9STUFMXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLm5vcm1hbHMuc2V0KGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbWFudGljID09PSBcIlBPU0lUSU9OXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEdMVEZGaWxlTG9hZGVyLkhvbW9nZW5lb3VzQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLnBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLmxlbmd0aCAtIGJ1ZmZlci5sZW5ndGggLyA0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYnVmZmVyLmxlbmd0aDsgaiArPSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEucG9zaXRpb25zW2pdID0gYnVmZmVyW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLnBvc2l0aW9uc1tqICsgMV0gPSBidWZmZXJbaiArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLnBvc2l0aW9uc1tqICsgMl0gPSBidWZmZXJbaiArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEucG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLnBvc2l0aW9ucy5zZXQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNlc0NvdW50cy5wdXNoKHRlbXBWZXJ0ZXhEYXRhLnBvc2l0aW9ucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzZW1hbnRpYy5pbmRleE9mKFwiVEVYQ09PUkRfXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsID0gTnVtYmVyKHNlbWFudGljLnNwbGl0KFwiX1wiKVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHV2S2luZCA9IFZlcnRleEJ1ZmZlci5VVktpbmQgKyAoY2hhbm5lbCA9PT0gMCA/IFwiXCIgOiBjaGFubmVsICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHV2cy5zZXQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplVVZzKHV2cyk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBWZXJ0ZXhEYXRhLnNldCh1dnMsIHV2S2luZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbWFudGljID09PSBcIkpPSU5UXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEubWF0cmljZXNJbmRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEubWF0cmljZXNJbmRpY2VzLnNldChidWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzZW1hbnRpYyA9PT0gXCJXRUlHSFRcIikge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wVmVydGV4RGF0YS5tYXRyaWNlc1dlaWdodHMgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wVmVydGV4RGF0YS5tYXRyaWNlc1dlaWdodHMuc2V0KGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbWFudGljID09PSBcIkNPTE9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEuY29sb3JzID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEuY29sb3JzLnNldChidWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluZGljZXNcbiAgICAgICAgICAgIGFjY2Vzc29yID0gZ2x0ZlJ1bnRpbWUuYWNjZXNzb3JzW3ByaW1pdGl2ZS5pbmRpY2VzXTtcbiAgICAgICAgICAgIGlmIChhY2Nlc3Nvcikge1xuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IEdMVEZVdGlscy5HZXRCdWZmZXJGcm9tQWNjZXNzb3IoZ2x0ZlJ1bnRpbWUsIGFjY2Vzc29yKTtcbiAgICAgICAgICAgICAgICB0ZW1wVmVydGV4RGF0YS5pbmRpY2VzID0gbmV3IEludDMyQXJyYXkoYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEuaW5kaWNlcy5zZXQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBpbmRleENvdW50cy5wdXNoKHRlbXBWZXJ0ZXhEYXRhLmluZGljZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNldCBpbmRpY2VzIG9uIHRoZSBmbHlcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2VzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0ZW1wVmVydGV4RGF0YS5wb3NpdGlvbnMubGVuZ3RoIC8gMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcFZlcnRleERhdGEuaW5kaWNlcyA9IG5ldyBJbnQzMkFycmF5KGluZGljZXMpO1xuICAgICAgICAgICAgICAgIGluZGV4Q291bnRzLnB1c2godGVtcFZlcnRleERhdGEuaW5kaWNlcy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhEYXRhKSB7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YSA9IHRlbXBWZXJ0ZXhEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS5tZXJnZSh0ZW1wVmVydGV4RGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTdWIgbWF0ZXJpYWxcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gZ2x0ZlJ1bnRpbWUuc2NlbmUuZ2V0TWF0ZXJpYWxCeUlkKHByaW1pdGl2ZS5tYXRlcmlhbCk7XG4gICAgICAgICAgICBzdWJNYXRlcmlhbHMucHVzaChtYXRlcmlhbCA9PT0gbnVsbCA/IEdMVEZVdGlscy5HZXREZWZhdWx0TWF0ZXJpYWwoZ2x0ZlJ1bnRpbWUuc2NlbmUpIDogbWF0ZXJpYWwpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHZlcnRpY2VzIHN0YXJ0IGFuZCBpbmRleCBzdGFydFxuICAgICAgICAgICAgdmVydGljZXNTdGFydHMucHVzaCh2ZXJ0aWNlc1N0YXJ0cy5sZW5ndGggPT09IDAgPyAwIDogdmVydGljZXNTdGFydHNbdmVydGljZXNTdGFydHMubGVuZ3RoIC0gMV0gKyB2ZXJ0aWNlc0NvdW50c1t2ZXJ0aWNlc0NvdW50cy5sZW5ndGggLSAyXSk7XG4gICAgICAgICAgICBpbmRleFN0YXJ0cy5wdXNoKGluZGV4U3RhcnRzLmxlbmd0aCA9PT0gMCA/IDAgOiBpbmRleFN0YXJ0c1tpbmRleFN0YXJ0cy5sZW5ndGggLSAxXSArIGluZGV4Q291bnRzW2luZGV4Q291bnRzLmxlbmd0aCAtIDJdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgbWF0ZXJpYWw7XG4gICAgZ2x0ZlJ1bnRpbWUuc2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhZ2x0ZlJ1bnRpbWUuYXNzZXRDb250YWluZXI7XG4gICAgaWYgKHN1Yk1hdGVyaWFscy5sZW5ndGggPiAxKSB7XG4gICAgICAgIG1hdGVyaWFsID0gbmV3IE11bHRpTWF0ZXJpYWwoXCJtdWx0aW1hdFwiICsgaWQsIGdsdGZSdW50aW1lLnNjZW5lKTtcbiAgICAgICAgbWF0ZXJpYWwuc3ViTWF0ZXJpYWxzID0gc3ViTWF0ZXJpYWxzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChcIm11bHRpbWF0XCIgKyBpZCwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgIH1cbiAgICBpZiAoc3ViTWF0ZXJpYWxzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBtYXRlcmlhbCA9IHN1Yk1hdGVyaWFsc1swXTtcbiAgICB9XG4gICAgbWF0ZXJpYWwuX3BhcmVudENvbnRhaW5lciA9IGdsdGZSdW50aW1lLmFzc2V0Q29udGFpbmVyO1xuICAgIGlmICghbmV3TWVzaC5tYXRlcmlhbCkge1xuICAgICAgICBuZXdNZXNoLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgfVxuICAgIC8vIEFwcGx5IGdlb21ldHJ5XG4gICAgbmV3IEdlb21ldHJ5KGlkLCBnbHRmUnVudGltZS5zY2VuZSwgdmVydGV4RGF0YSwgZmFsc2UsIG5ld01lc2gpO1xuICAgIG5ld01lc2guY29tcHV0ZVdvcmxkTWF0cml4KHRydWUpO1xuICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAvLyBBcHBseSBzdWJtZXNoZXNcbiAgICBuZXdNZXNoLnN1Yk1lc2hlcyA9IFtdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgZm9yIChsZXQgbWVzaEluZGV4ID0gMDsgbWVzaEluZGV4IDwgbWVzaGVzLmxlbmd0aDsgbWVzaEluZGV4KyspIHtcbiAgICAgICAgY29uc3QgbWVzaElkID0gbWVzaGVzW21lc2hJbmRleF07XG4gICAgICAgIGNvbnN0IG1lc2ggPSBnbHRmUnVudGltZS5tZXNoZXNbbWVzaElkXTtcbiAgICAgICAgaWYgKCFtZXNoKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc2gucHJpbWl0aXZlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG1lc2gucHJpbWl0aXZlc1tpXS5tb2RlICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgLy9jb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFN1Yk1lc2guQWRkVG9NZXNoKGluZGV4LCB2ZXJ0aWNlc1N0YXJ0c1tpbmRleF0sIHZlcnRpY2VzQ291bnRzW2luZGV4XSwgaW5kZXhTdGFydHNbaW5kZXhdLCBpbmRleENvdW50c1tpbmRleF0sIG5ld01lc2gsIG5ld01lc2gsIHRydWUpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGaW5pc2hcbiAgICByZXR1cm4gbmV3TWVzaDtcbn07XG4vKipcbiAqIENvbmZpZ3VyZSBub2RlIHRyYW5zZm9ybWF0aW9uIGZyb20gcG9zaXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nXG4gKiBAcGFyYW0gbmV3Tm9kZVxuICogQHBhcmFtIHBvc2l0aW9uXG4gKiBAcGFyYW0gcm90YXRpb25cbiAqIEBwYXJhbSBzY2FsaW5nXG4gKi9cbmNvbnN0IGNvbmZpZ3VyZU5vZGUgPSAobmV3Tm9kZSwgcG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsaW5nKSA9PiB7XG4gICAgaWYgKG5ld05vZGUucG9zaXRpb24pIHtcbiAgICAgICAgbmV3Tm9kZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cbiAgICBpZiAobmV3Tm9kZS5yb3RhdGlvblF1YXRlcm5pb24gfHwgbmV3Tm9kZS5yb3RhdGlvbikge1xuICAgICAgICBuZXdOb2RlLnJvdGF0aW9uUXVhdGVybmlvbiA9IHJvdGF0aW9uO1xuICAgIH1cbiAgICBpZiAobmV3Tm9kZS5zY2FsaW5nKSB7XG4gICAgICAgIG5ld05vZGUuc2NhbGluZyA9IHNjYWxpbmc7XG4gICAgfVxufTtcbi8qKlxuICogQ29uZmlndXJlcyBub2RlIGZyb20gdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gKiBAcGFyYW0gbmV3Tm9kZVxuICogQHBhcmFtIG5vZGVcbiAqL1xuY29uc3QgY29uZmlndXJlTm9kZUZyb21NYXRyaXggPSAobmV3Tm9kZSwgbm9kZSkgPT4ge1xuICAgIGlmIChub2RlLm1hdHJpeCkge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgICAgIGNvbnN0IHNjYWxpbmcgPSBuZXcgVmVjdG9yMygwLCAwLCAwKTtcbiAgICAgICAgY29uc3QgbWF0ID0gTWF0cml4LkZyb21BcnJheShub2RlLm1hdHJpeCk7XG4gICAgICAgIG1hdC5kZWNvbXBvc2Uoc2NhbGluZywgcm90YXRpb24sIHBvc2l0aW9uKTtcbiAgICAgICAgY29uZmlndXJlTm9kZShuZXdOb2RlLCBwb3NpdGlvbiwgcm90YXRpb24sIHNjYWxpbmcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnRyYW5zbGF0aW9uICYmIG5vZGUucm90YXRpb24gJiYgbm9kZS5zY2FsZSkge1xuICAgICAgICBjb25maWd1cmVOb2RlKG5ld05vZGUsIFZlY3RvcjMuRnJvbUFycmF5KG5vZGUudHJhbnNsYXRpb24pLCBRdWF0ZXJuaW9uLkZyb21BcnJheShub2RlLnJvdGF0aW9uKSwgVmVjdG9yMy5Gcm9tQXJyYXkobm9kZS5zY2FsZSkpO1xuICAgIH1cbiAgICBuZXdOb2RlLmNvbXB1dGVXb3JsZE1hdHJpeCh0cnVlKTtcbn07XG4vKipcbiAqIEltcG9ydHMgYSBub2RlXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqIEBwYXJhbSBub2RlXG4gKiBAcGFyYW0gaWRcbiAqIEByZXR1cm5zIHRoZSBuZXdseSBpbXBvcnRlZCBub2RlXG4gKi9cbmNvbnN0IGltcG9ydE5vZGUgPSAoZ2x0ZlJ1bnRpbWUsIG5vZGUsIGlkKSA9PiB7XG4gICAgbGV0IGxhc3ROb2RlID0gbnVsbDtcbiAgICBpZiAoZ2x0ZlJ1bnRpbWUuaW1wb3J0T25seU1lc2hlcyAmJiAobm9kZS5za2luIHx8IG5vZGUubWVzaGVzKSkge1xuICAgICAgICBpZiAoZ2x0ZlJ1bnRpbWUuaW1wb3J0TWVzaGVzTmFtZXMgJiYgZ2x0ZlJ1bnRpbWUuaW1wb3J0TWVzaGVzTmFtZXMubGVuZ3RoID4gMCAmJiBnbHRmUnVudGltZS5pbXBvcnRNZXNoZXNOYW1lcy5pbmRleE9mKG5vZGUubmFtZSB8fCBcIlwiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE1lc2hlc1xuICAgIGlmIChub2RlLnNraW4pIHtcbiAgICAgICAgaWYgKG5vZGUubWVzaGVzKSB7XG4gICAgICAgICAgICBjb25zdCBza2luID0gZ2x0ZlJ1bnRpbWUuc2tpbnNbbm9kZS5za2luXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld01lc2ggPSBpbXBvcnRNZXNoKGdsdGZSdW50aW1lLCBub2RlLCBub2RlLm1lc2hlcywgaWQsIG5vZGUuYmFieWxvbk5vZGUpO1xuICAgICAgICAgICAgbmV3TWVzaC5za2VsZXRvbiA9IGdsdGZSdW50aW1lLnNjZW5lLmdldExhc3RTa2VsZXRvbkJ5SWQobm9kZS5za2luKTtcbiAgICAgICAgICAgIGlmIChuZXdNZXNoLnNrZWxldG9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3TWVzaC5za2VsZXRvbiA9IGltcG9ydFNrZWxldG9uKGdsdGZSdW50aW1lLCBza2luLCBuZXdNZXNoLCBza2luLmJhYnlsb25Ta2VsZXRvbik7XG4gICAgICAgICAgICAgICAgaWYgKCFza2luLmJhYnlsb25Ta2VsZXRvbikge1xuICAgICAgICAgICAgICAgICAgICBza2luLmJhYnlsb25Ta2VsZXRvbiA9IG5ld01lc2guc2tlbGV0b247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdE5vZGUgPSBuZXdNZXNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUubWVzaGVzKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXByb3ZlIG1lc2hlcyBwcm9wZXJ0eVxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbmV3TWVzaCA9IGltcG9ydE1lc2goZ2x0ZlJ1bnRpbWUsIG5vZGUsIG5vZGUubWVzaCA/IFtub2RlLm1lc2hdIDogbm9kZS5tZXNoZXMsIGlkLCBub2RlLmJhYnlsb25Ob2RlKTtcbiAgICAgICAgbGFzdE5vZGUgPSBuZXdNZXNoO1xuICAgIH1cbiAgICAvLyBMaWdodHNcbiAgICBlbHNlIGlmIChub2RlLmxpZ2h0ICYmICFub2RlLmJhYnlsb25Ob2RlICYmICFnbHRmUnVudGltZS5pbXBvcnRPbmx5TWVzaGVzKSB7XG4gICAgICAgIGNvbnN0IGxpZ2h0ID0gZ2x0ZlJ1bnRpbWUubGlnaHRzW25vZGUubGlnaHRdO1xuICAgICAgICBpZiAobGlnaHQpIHtcbiAgICAgICAgICAgIGlmIChsaWdodC50eXBlID09PSBcImFtYmllbnRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFtYmllbkxpZ2h0ID0gbGlnaHRbbGlnaHQudHlwZV07XG4gICAgICAgICAgICAgICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IEhlbWlzcGhlcmljTGlnaHQobm9kZS5saWdodCwgVmVjdG9yMy5aZXJvKCksIGdsdGZSdW50aW1lLnNjZW5lKTtcbiAgICAgICAgICAgICAgICBoZW1pTGlnaHQubmFtZSA9IG5vZGUubmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChhbWJpZW5MaWdodC5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBoZW1pTGlnaHQuZGlmZnVzZSA9IENvbG9yMy5Gcm9tQXJyYXkoYW1iaWVuTGlnaHQuY29sb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0Tm9kZSA9IGhlbWlMaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpZ2h0LnR5cGUgPT09IFwiZGlyZWN0aW9uYWxcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSBsaWdodFtsaWdodC50eXBlXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KG5vZGUubGlnaHQsIFZlY3RvcjMuWmVybygpLCBnbHRmUnVudGltZS5zY2VuZSk7XG4gICAgICAgICAgICAgICAgZGlyTGlnaHQubmFtZSA9IG5vZGUubmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb25hbExpZ2h0LmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpckxpZ2h0LmRpZmZ1c2UgPSBDb2xvcjMuRnJvbUFycmF5KGRpcmVjdGlvbmFsTGlnaHQuY29sb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0Tm9kZSA9IGRpckxpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGlnaHQudHlwZSA9PT0gXCJwb2ludFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9pbnRMaWdodCA9IGxpZ2h0W2xpZ2h0LnR5cGVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB0TGlnaHQgPSBuZXcgUG9pbnRMaWdodChub2RlLmxpZ2h0LCBWZWN0b3IzLlplcm8oKSwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgICAgICAgICAgICAgIHB0TGlnaHQubmFtZSA9IG5vZGUubmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludExpZ2h0LmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHB0TGlnaHQuZGlmZnVzZSA9IENvbG9yMy5Gcm9tQXJyYXkocG9pbnRMaWdodC5jb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3ROb2RlID0gcHRMaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpZ2h0LnR5cGUgPT09IFwic3BvdFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BvdExpZ2h0ID0gbGlnaHRbbGlnaHQudHlwZV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BMaWdodCA9IG5ldyBTcG90TGlnaHQobm9kZS5saWdodCwgVmVjdG9yMy5aZXJvKCksIFZlY3RvcjMuWmVybygpLCAwLCAwLCBnbHRmUnVudGltZS5zY2VuZSk7XG4gICAgICAgICAgICAgICAgc3BMaWdodC5uYW1lID0gbm9kZS5uYW1lIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHNwb3RMaWdodC5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBzcExpZ2h0LmRpZmZ1c2UgPSBDb2xvcjMuRnJvbUFycmF5KHNwb3RMaWdodC5jb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzcG90TGlnaHQuZmFsbE9mQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3BMaWdodC5hbmdsZSA9IHNwb3RMaWdodC5mYWxsT2ZBbmdsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNwb3RMaWdodC5mYWxsT2ZmRXhwb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3BMaWdodC5leHBvbmVudCA9IHNwb3RMaWdodC5mYWxsT2ZmRXhwb25lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3ROb2RlID0gc3BMaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW1lcmFzXG4gICAgZWxzZSBpZiAobm9kZS5jYW1lcmEgJiYgIW5vZGUuYmFieWxvbk5vZGUgJiYgIWdsdGZSdW50aW1lLmltcG9ydE9ubHlNZXNoZXMpIHtcbiAgICAgICAgY29uc3QgY2FtZXJhID0gZ2x0ZlJ1bnRpbWUuY2FtZXJhc1tub2RlLmNhbWVyYV07XG4gICAgICAgIGlmIChjYW1lcmEpIHtcbiAgICAgICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSAhIWdsdGZSdW50aW1lLmFzc2V0Q29udGFpbmVyO1xuICAgICAgICAgICAgaWYgKGNhbWVyYS50eXBlID09PSBcIm9ydGhvZ3JhcGhpY1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3J0aG9DYW1lcmEgPSBuZXcgRnJlZUNhbWVyYShub2RlLmNhbWVyYSwgVmVjdG9yMy5aZXJvKCksIGdsdGZSdW50aW1lLnNjZW5lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgb3J0aG9DYW1lcmEubmFtZSA9IG5vZGUubmFtZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIG9ydGhvQ2FtZXJhLm1vZGUgPSBDYW1lcmEuT1JUSE9HUkFQSElDX0NBTUVSQTtcbiAgICAgICAgICAgICAgICBvcnRob0NhbWVyYS5hdHRhY2hDb250cm9sKCk7XG4gICAgICAgICAgICAgICAgbGFzdE5vZGUgPSBvcnRob0NhbWVyYTtcbiAgICAgICAgICAgICAgICBvcnRob0NhbWVyYS5fcGFyZW50Q29udGFpbmVyID0gZ2x0ZlJ1bnRpbWUuYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjYW1lcmEudHlwZSA9PT0gXCJwZXJzcGVjdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVyc3BlY3RpdmVDYW1lcmEgPSBjYW1lcmFbY2FtZXJhLnR5cGVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNDYW1lcmEgPSBuZXcgRnJlZUNhbWVyYShub2RlLmNhbWVyYSwgVmVjdG9yMy5aZXJvKCksIGdsdGZSdW50aW1lLnNjZW5lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcGVyc0NhbWVyYS5uYW1lID0gbm9kZS5uYW1lIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgcGVyc0NhbWVyYS5hdHRhY2hDb250cm9sKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFwZXJzcGVjdGl2ZUNhbWVyYS5hc3BlY3RSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICBwZXJzcGVjdGl2ZUNhbWVyYS5hc3BlY3RSYXRpbyA9IGdsdGZSdW50aW1lLnNjZW5lLmdldEVuZ2luZSgpLmdldFJlbmRlcldpZHRoKCkgLyBnbHRmUnVudGltZS5zY2VuZS5nZXRFbmdpbmUoKS5nZXRSZW5kZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBlcnNwZWN0aXZlQ2FtZXJhLnpuZWFyICYmIHBlcnNwZWN0aXZlQ2FtZXJhLnpmYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVyc0NhbWVyYS5tYXhaID0gcGVyc3BlY3RpdmVDYW1lcmEuemZhcjtcbiAgICAgICAgICAgICAgICAgICAgcGVyc0NhbWVyYS5taW5aID0gcGVyc3BlY3RpdmVDYW1lcmEuem5lYXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3ROb2RlID0gcGVyc0NhbWVyYTtcbiAgICAgICAgICAgICAgICBwZXJzQ2FtZXJhLl9wYXJlbnRDb250YWluZXIgPSBnbHRmUnVudGltZS5hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBFbXB0eSBub2RlXG4gICAgaWYgKCFub2RlLmpvaW50TmFtZSkge1xuICAgICAgICBpZiAobm9kZS5iYWJ5bG9uTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuYmFieWxvbk5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFzdE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSAhIWdsdGZSdW50aW1lLmFzc2V0Q29udGFpbmVyO1xuICAgICAgICAgICAgY29uc3QgZHVtbXkgPSBuZXcgTWVzaChub2RlLm5hbWUgfHwgXCJcIiwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgICAgICAgICAgZHVtbXkuX3BhcmVudENvbnRhaW5lciA9IGdsdGZSdW50aW1lLmFzc2V0Q29udGFpbmVyO1xuICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuc2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgbm9kZS5iYWJ5bG9uTm9kZSA9IGR1bW15O1xuICAgICAgICAgICAgbGFzdE5vZGUgPSBkdW1teTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKG5vZGUubWF0cml4ICYmIGxhc3ROb2RlIGluc3RhbmNlb2YgTWVzaCkge1xuICAgICAgICAgICAgY29uZmlndXJlTm9kZUZyb21NYXRyaXgobGFzdE5vZGUsIG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb24gPSBub2RlLnRyYW5zbGF0aW9uIHx8IFswLCAwLCAwXTtcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbm9kZS5yb3RhdGlvbiB8fCBbMCwgMCwgMCwgMV07XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5vZGUuc2NhbGUgfHwgWzEsIDEsIDFdO1xuICAgICAgICAgICAgY29uZmlndXJlTm9kZShsYXN0Tm9kZSwgVmVjdG9yMy5Gcm9tQXJyYXkodHJhbnNsYXRpb24pLCBRdWF0ZXJuaW9uLkZyb21BcnJheShyb3RhdGlvbiksIFZlY3RvcjMuRnJvbUFycmF5KHNjYWxlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdE5vZGUudXBkYXRlQ2FjaGUodHJ1ZSk7XG4gICAgICAgIG5vZGUuYmFieWxvbk5vZGUgPSBsYXN0Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3ROb2RlO1xufTtcbi8qKlxuICogVHJhdmVyc2VzIG5vZGVzIGFuZCBjcmVhdGVzIHRoZW1cbiAqIEBwYXJhbSBnbHRmUnVudGltZVxuICogQHBhcmFtIGlkXG4gKiBAcGFyYW0gcGFyZW50XG4gKiBAcGFyYW0gbWVzaEluY2x1ZGVkXG4gKi9cbmNvbnN0IHRyYXZlcnNlTm9kZXMgPSAoZ2x0ZlJ1bnRpbWUsIGlkLCBwYXJlbnQsIG1lc2hJbmNsdWRlZCA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3Qgbm9kZSA9IGdsdGZSdW50aW1lLm5vZGVzW2lkXTtcbiAgICBsZXQgbmV3Tm9kZSA9IG51bGw7XG4gICAgaWYgKGdsdGZSdW50aW1lLmltcG9ydE9ubHlNZXNoZXMgJiYgIW1lc2hJbmNsdWRlZCAmJiBnbHRmUnVudGltZS5pbXBvcnRNZXNoZXNOYW1lcykge1xuICAgICAgICBpZiAoZ2x0ZlJ1bnRpbWUuaW1wb3J0TWVzaGVzTmFtZXMuaW5kZXhPZihub2RlLm5hbWUgfHwgXCJcIikgIT09IC0xIHx8IGdsdGZSdW50aW1lLmltcG9ydE1lc2hlc05hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbWVzaEluY2x1ZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc2hJbmNsdWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNoSW5jbHVkZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIW5vZGUuam9pbnROYW1lICYmIG1lc2hJbmNsdWRlZCkge1xuICAgICAgICBuZXdOb2RlID0gaW1wb3J0Tm9kZShnbHRmUnVudGltZSwgbm9kZSwgaWQpO1xuICAgICAgICBpZiAobmV3Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3Tm9kZS5pZCA9IGlkO1xuICAgICAgICAgICAgbmV3Tm9kZS5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0cmF2ZXJzZU5vZGVzKGdsdGZSdW50aW1lLCBub2RlLmNoaWxkcmVuW2ldLCBuZXdOb2RlLCBtZXNoSW5jbHVkZWQpO1xuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogZG8gc3R1ZmYgYWZ0ZXIgYnVmZmVycywgc2hhZGVycyBhcmUgbG9hZGVkIChlLmcuIGhvb2sgdXAgbWF0ZXJpYWxzLCBsb2FkIGFuaW1hdGlvbnMsIGV0Yy4pXG4gKiBAcGFyYW0gZ2x0ZlJ1bnRpbWVcbiAqL1xuY29uc3QgcG9zdExvYWQgPSAoZ2x0ZlJ1bnRpbWUpID0+IHtcbiAgICAvLyBOb2Rlc1xuICAgIGxldCBjdXJyZW50U2NlbmUgPSBnbHRmUnVudGltZS5jdXJyZW50U2NlbmU7XG4gICAgaWYgKGN1cnJlbnRTY2VuZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTY2VuZS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdHJhdmVyc2VOb2RlcyhnbHRmUnVudGltZSwgY3VycmVudFNjZW5lLm5vZGVzW2ldLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCB0aGluZyBpbiBnbHRmUnVudGltZS5zY2VuZXMpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY2VuZSA9IGdsdGZSdW50aW1lLnNjZW5lc1t0aGluZ107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTY2VuZS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlTm9kZXMoZ2x0ZlJ1bnRpbWUsIGN1cnJlbnRTY2VuZS5ub2Rlc1tpXSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2V0IGFuaW1hdGlvbnNcbiAgICBsb2FkQW5pbWF0aW9ucyhnbHRmUnVudGltZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbHRmUnVudGltZS5zY2VuZS5za2VsZXRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2tlbGV0b24gPSBnbHRmUnVudGltZS5zY2VuZS5za2VsZXRvbnNbaV07XG4gICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLmJlZ2luQW5pbWF0aW9uKHNrZWxldG9uLCAwLCBOdW1iZXIuTUFYX1ZBTFVFLCB0cnVlLCAxLjApO1xuICAgIH1cbn07XG4vKipcbiAqIG9uQmluZCBzaGFkZXJycyBjYWxsYmFjayB0byBzZXQgdW5pZm9ybXMgYW5kIG1hdHJpY2VzXG4gKiBAcGFyYW0gbWVzaFxuICogQHBhcmFtIGdsdGZSdW50aW1lXG4gKiBAcGFyYW0gdW5UcmVhdGVkVW5pZm9ybXNcbiAqIEBwYXJhbSBzaGFkZXJNYXRlcmlhbFxuICogQHBhcmFtIHRlY2huaXF1ZVxuICogQHBhcmFtIG1hdGVyaWFsXG4gKiBAcGFyYW0gb25TdWNjZXNzXG4gKi9cbmNvbnN0IG9uQmluZFNoYWRlck1hdGVyaWFsID0gKG1lc2gsIGdsdGZSdW50aW1lLCB1blRyZWF0ZWRVbmlmb3Jtcywgc2hhZGVyTWF0ZXJpYWwsIHRlY2huaXF1ZSwgbWF0ZXJpYWwsIG9uU3VjY2VzcykgPT4ge1xuICAgIGNvbnN0IG1hdGVyaWFsVmFsdWVzID0gbWF0ZXJpYWwudmFsdWVzIHx8IHRlY2huaXF1ZS5wYXJhbWV0ZXJzO1xuICAgIGZvciAoY29uc3QgdW5pZiBpbiB1blRyZWF0ZWRVbmlmb3Jtcykge1xuICAgICAgICBjb25zdCB1bmlmb3JtID0gdW5UcmVhdGVkVW5pZm9ybXNbdW5pZl07XG4gICAgICAgIGNvbnN0IHR5cGUgPSB1bmlmb3JtLnR5cGU7XG4gICAgICAgIGlmICh0eXBlID09PSBFUGFyYW1ldGVyVHlwZS5GTE9BVF9NQVQyIHx8IHR5cGUgPT09IEVQYXJhbWV0ZXJUeXBlLkZMT0FUX01BVDMgfHwgdHlwZSA9PT0gRVBhcmFtZXRlclR5cGUuRkxPQVRfTUFUNCkge1xuICAgICAgICAgICAgaWYgKHVuaWZvcm0uc2VtYW50aWMgJiYgIXVuaWZvcm0uc291cmNlICYmICF1bmlmb3JtLm5vZGUpIHtcbiAgICAgICAgICAgICAgICBHTFRGVXRpbHMuU2V0TWF0cml4KGdsdGZSdW50aW1lLnNjZW5lLCBtZXNoLCB1bmlmb3JtLCB1bmlmLCBzaGFkZXJNYXRlcmlhbC5nZXRFZmZlY3QoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmlmb3JtLnNlbWFudGljICYmICh1bmlmb3JtLnNvdXJjZSB8fCB1bmlmb3JtLm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9IGdsdGZSdW50aW1lLnNjZW5lLmdldE5vZGVCeU5hbWUodW5pZm9ybS5zb3VyY2UgfHwgdW5pZm9ybS5ub2RlIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gZ2x0ZlJ1bnRpbWUuc2NlbmUuZ2V0Tm9kZUJ5SWQodW5pZm9ybS5zb3VyY2UgfHwgdW5pZm9ybS5ub2RlIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBHTFRGVXRpbHMuU2V0TWF0cml4KGdsdGZSdW50aW1lLnNjZW5lLCBzb3VyY2UsIHVuaWZvcm0sIHVuaWYsIHNoYWRlck1hdGVyaWFsLmdldEVmZmVjdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWF0ZXJpYWxWYWx1ZXNbdGVjaG5pcXVlLnVuaWZvcm1zW3VuaWZdXTtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlID09PSBFUGFyYW1ldGVyVHlwZS5TQU1QTEVSXzJEKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IGdsdGZSdW50aW1lLnRleHR1cmVzW21hdGVyaWFsLnZhbHVlcyA/IHZhbHVlIDogdW5pZm9ybS52YWx1ZV0uYmFieWxvblRleHR1cmU7XG4gICAgICAgICAgICAgICAgaWYgKHRleHR1cmUgPT09IG51bGwgfHwgdGV4dHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzaGFkZXJNYXRlcmlhbC5nZXRFZmZlY3QoKS5zZXRUZXh0dXJlKHVuaWYsIHRleHR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgR0xURlV0aWxzLlNldFVuaWZvcm0oc2hhZGVyTWF0ZXJpYWwuZ2V0RWZmZWN0KCksIHVuaWYsIHZhbHVlLCB0eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvblN1Y2Nlc3Moc2hhZGVyTWF0ZXJpYWwpO1xufTtcbi8qKlxuICogUHJlcGFyZSB1bmlmb3JtcyB0byBzZW5kIHRoZSBvbmx5IG9uZSB0aW1lXG4gKiBMb2FkcyB0aGUgYXBwcm9wcmlhdGUgdGV4dHVyZXNcbiAqIEBwYXJhbSBnbHRmUnVudGltZVxuICogQHBhcmFtIHNoYWRlck1hdGVyaWFsXG4gKiBAcGFyYW0gdGVjaG5pcXVlXG4gKiBAcGFyYW0gbWF0ZXJpYWxcbiAqL1xuY29uc3QgcHJlcGFyZVNoYWRlck1hdGVyaWFsVW5pZm9ybXMgPSAoZ2x0ZlJ1bnRpbWUsIHNoYWRlck1hdGVyaWFsLCB0ZWNobmlxdWUsIG1hdGVyaWFsLCB1blRyZWF0ZWRVbmlmb3JtcykgPT4ge1xuICAgIGNvbnN0IG1hdGVyaWFsVmFsdWVzID0gbWF0ZXJpYWwudmFsdWVzIHx8IHRlY2huaXF1ZS5wYXJhbWV0ZXJzO1xuICAgIGNvbnN0IHRlY2huaXF1ZVVuaWZvcm1zID0gdGVjaG5pcXVlLnVuaWZvcm1zO1xuICAgIC8qKlxuICAgICAqIFByZXBhcmUgdmFsdWVzIGhlcmUgKG5vdCBtYXRyaWNlcylcbiAgICAgKi9cbiAgICBmb3IgKGNvbnN0IHVuaWYgaW4gdW5UcmVhdGVkVW5pZm9ybXMpIHtcbiAgICAgICAgY29uc3QgdW5pZm9ybSA9IHVuVHJlYXRlZFVuaWZvcm1zW3VuaWZdO1xuICAgICAgICBjb25zdCB0eXBlID0gdW5pZm9ybS50eXBlO1xuICAgICAgICBsZXQgdmFsdWUgPSBtYXRlcmlhbFZhbHVlc1t0ZWNobmlxdWVVbmlmb3Jtc1t1bmlmXV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBJbiBjYXNlIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSBmb3IgYWxsIG1hdGVyaWFsc1xuICAgICAgICAgICAgdmFsdWUgPSB1bmlmb3JtLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9uTG9hZFRleHR1cmUgPSAodW5pZm9ybU5hbWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtLnZhbHVlICYmIHVuaWZvcm1OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YXRpYyB1bmlmb3JtXG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLnNldFRleHR1cmUodW5pZm9ybU5hbWUsIHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdW5UcmVhdGVkVW5pZm9ybXNbdW5pZm9ybU5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRleHR1cmUgKHNhbXBsZXIyRClcbiAgICAgICAgaWYgKHR5cGUgPT09IEVQYXJhbWV0ZXJUeXBlLlNBTVBMRVJfMkQpIHtcbiAgICAgICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uTG9hZFRleHR1cmVBc3luYyhnbHRmUnVudGltZSwgbWF0ZXJpYWwudmFsdWVzID8gdmFsdWUgOiB1bmlmb3JtLnZhbHVlLCBvbkxvYWRUZXh0dXJlKHVuaWYpLCAoKSA9PiBvbkxvYWRUZXh0dXJlKG51bGwpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcnNcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodW5pZm9ybS52YWx1ZSAmJiBHTFRGVXRpbHMuU2V0VW5pZm9ybShzaGFkZXJNYXRlcmlhbCwgdW5pZiwgbWF0ZXJpYWwudmFsdWVzID8gdmFsdWUgOiB1bmlmb3JtLnZhbHVlLCB0eXBlKSkge1xuICAgICAgICAgICAgICAgIC8vIFN0YXRpYyB1bmlmb3JtXG4gICAgICAgICAgICAgICAgZGVsZXRlIHVuVHJlYXRlZFVuaWZvcm1zW3VuaWZdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogU2hhZGVyIGNvbXBpbGF0aW9uIGZhaWxlZFxuICogQHBhcmFtIHByb2dyYW1cbiAqIEBwYXJhbSBzaGFkZXJNYXRlcmlhbFxuICogQHBhcmFtIG9uRXJyb3JcbiAqIEByZXR1cm5zIGNhbGxiYWNrIHdoZW4gc2hhZGVyIGlzIGNvbXBpbGVkXG4gKi9cbmNvbnN0IG9uU2hhZGVyQ29tcGlsZUVycm9yID0gKHByb2dyYW0sIHNoYWRlck1hdGVyaWFsLCBvbkVycm9yKSA9PiB7XG4gICAgcmV0dXJuIChlZmZlY3QsIGVycm9yKSA9PiB7XG4gICAgICAgIHNoYWRlck1hdGVyaWFsLmRpc3Bvc2UodHJ1ZSk7XG4gICAgICAgIG9uRXJyb3IoXCJDYW5ub3QgY29tcGlsZSBwcm9ncmFtIG5hbWVkIFwiICsgcHJvZ3JhbS5uYW1lICsgXCIuIEVycm9yOiBcIiArIGVycm9yICsgXCIuIERlZmF1bHQgbWF0ZXJpYWwgd2lsbCBiZSBhcHBsaWVkXCIpO1xuICAgIH07XG59O1xuLyoqXG4gKiBTaGFkZXIgY29tcGlsYXRpb24gc3VjY2Vzc1xuICogQHBhcmFtIGdsdGZSdW50aW1lXG4gKiBAcGFyYW0gc2hhZGVyTWF0ZXJpYWxcbiAqIEBwYXJhbSB0ZWNobmlxdWVcbiAqIEBwYXJhbSBtYXRlcmlhbFxuICogQHBhcmFtIHVuVHJlYXRlZFVuaWZvcm1zXG4gKiBAcGFyYW0gb25TdWNjZXNzXG4gKiBAcmV0dXJucyBjYWxsYmFjayB3aGVuIHNoYWRlciBpcyBjb21waWxlZFxuICovXG5jb25zdCBvblNoYWRlckNvbXBpbGVTdWNjZXNzID0gKGdsdGZSdW50aW1lLCBzaGFkZXJNYXRlcmlhbCwgdGVjaG5pcXVlLCBtYXRlcmlhbCwgdW5UcmVhdGVkVW5pZm9ybXMsIG9uU3VjY2VzcykgPT4ge1xuICAgIHJldHVybiAoXykgPT4ge1xuICAgICAgICBwcmVwYXJlU2hhZGVyTWF0ZXJpYWxVbmlmb3JtcyhnbHRmUnVudGltZSwgc2hhZGVyTWF0ZXJpYWwsIHRlY2huaXF1ZSwgbWF0ZXJpYWwsIHVuVHJlYXRlZFVuaWZvcm1zKTtcbiAgICAgICAgc2hhZGVyTWF0ZXJpYWwub25CaW5kID0gKG1lc2gpID0+IHtcbiAgICAgICAgICAgIG9uQmluZFNoYWRlck1hdGVyaWFsKG1lc2gsIGdsdGZSdW50aW1lLCB1blRyZWF0ZWRVbmlmb3Jtcywgc2hhZGVyTWF0ZXJpYWwsIHRlY2huaXF1ZSwgbWF0ZXJpYWwsIG9uU3VjY2Vzcyk7XG4gICAgICAgIH07XG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHVuaWZvcm0gaWYgYWxyZWFkeSBoYW5kbGVkIGJ5IGJhYnlsb25cbiAqIEBwYXJhbSB0b2tlbml6ZXJcbiAqIEBwYXJhbSB0ZWNobmlxdWVcbiAqIEBwYXJhbSB1blRyZWF0ZWRVbmlmb3Jtc1xuICogQHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIHVuaWZvcm0gaGFuZGxlZCBieSBiYWJ5bG9uXG4gKi9cbmNvbnN0IHBhcnNlU2hhZGVyVW5pZm9ybXMgPSAodG9rZW5pemVyLCB0ZWNobmlxdWUsIHVuVHJlYXRlZFVuaWZvcm1zKSA9PiB7XG4gICAgZm9yIChjb25zdCB1bmlmIGluIHRlY2huaXF1ZS51bmlmb3Jtcykge1xuICAgICAgICBjb25zdCB1bmlmb3JtID0gdGVjaG5pcXVlLnVuaWZvcm1zW3VuaWZdO1xuICAgICAgICBjb25zdCB1bmlmb3JtUGFyYW1ldGVyID0gdGVjaG5pcXVlLnBhcmFtZXRlcnNbdW5pZm9ybV07XG4gICAgICAgIGlmICh0b2tlbml6ZXIuY3VycmVudElkZW50aWZpZXIgPT09IHVuaWYpIHtcbiAgICAgICAgICAgIGlmICh1bmlmb3JtUGFyYW1ldGVyLnNlbWFudGljICYmICF1bmlmb3JtUGFyYW1ldGVyLnNvdXJjZSAmJiAhdW5pZm9ybVBhcmFtZXRlci5ub2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtSW5kZXggPSBnbFRGVHJhbnNmb3Jtcy5pbmRleE9mKHVuaWZvcm1QYXJhbWV0ZXIuc2VtYW50aWMpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm1JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuVHJlYXRlZFVuaWZvcm1zW3VuaWZdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFieWxvblRyYW5zZm9ybXNbdHJhbnNmb3JtSW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG9rZW5pemVyLmN1cnJlbnRJZGVudGlmaWVyO1xufTtcbi8qKlxuICogQWxsIHNoYWRlcnMgbG9hZGVkLiBDcmVhdGUgbWF0ZXJpYWxzIG9uZSBieSBvbmVcbiAqIEBwYXJhbSBnbHRmUnVudGltZVxuICovXG5jb25zdCBpbXBvcnRNYXRlcmlhbHMgPSAoZ2x0ZlJ1bnRpbWUpID0+IHtcbiAgICAvLyBDcmVhdGUgbWF0ZXJpYWxzXG4gICAgZm9yIChjb25zdCBtYXQgaW4gZ2x0ZlJ1bnRpbWUubWF0ZXJpYWxzKSB7XG4gICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uTG9hZE1hdGVyaWFsQXN5bmMoZ2x0ZlJ1bnRpbWUsIG1hdCwgKCkgPT4geyB9LCAoKSA9PiB7IH0pO1xuICAgIH1cbn07XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBiYXNlIGdsVEYgc3BlY1xuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRGTG9hZGVyQmFzZSB7XG4gICAgc3RhdGljIENyZWF0ZVJ1bnRpbWUocGFyc2VkRGF0YSwgc2NlbmUsIHJvb3RVcmwpIHtcbiAgICAgICAgY29uc3QgZ2x0ZlJ1bnRpbWUgPSB7XG4gICAgICAgICAgICBleHRlbnNpb25zOiB7fSxcbiAgICAgICAgICAgIGFjY2Vzc29yczoge30sXG4gICAgICAgICAgICBidWZmZXJzOiB7fSxcbiAgICAgICAgICAgIGJ1ZmZlclZpZXdzOiB7fSxcbiAgICAgICAgICAgIG1lc2hlczoge30sXG4gICAgICAgICAgICBsaWdodHM6IHt9LFxuICAgICAgICAgICAgY2FtZXJhczoge30sXG4gICAgICAgICAgICBub2Rlczoge30sXG4gICAgICAgICAgICBpbWFnZXM6IHt9LFxuICAgICAgICAgICAgdGV4dHVyZXM6IHt9LFxuICAgICAgICAgICAgc2hhZGVyczoge30sXG4gICAgICAgICAgICBwcm9ncmFtczoge30sXG4gICAgICAgICAgICBzYW1wbGVyczoge30sXG4gICAgICAgICAgICB0ZWNobmlxdWVzOiB7fSxcbiAgICAgICAgICAgIG1hdGVyaWFsczoge30sXG4gICAgICAgICAgICBhbmltYXRpb25zOiB7fSxcbiAgICAgICAgICAgIHNraW5zOiB7fSxcbiAgICAgICAgICAgIGV4dGVuc2lvbnNVc2VkOiBbXSxcbiAgICAgICAgICAgIHNjZW5lczoge30sXG4gICAgICAgICAgICBidWZmZXJzQ291bnQ6IDAsXG4gICAgICAgICAgICBzaGFkZXJzY291bnQ6IDAsXG4gICAgICAgICAgICBzY2VuZTogc2NlbmUsXG4gICAgICAgICAgICByb290VXJsOiByb290VXJsLFxuICAgICAgICAgICAgbG9hZGVkQnVmZmVyQ291bnQ6IDAsXG4gICAgICAgICAgICBsb2FkZWRCdWZmZXJWaWV3czoge30sXG4gICAgICAgICAgICBsb2FkZWRTaGFkZXJDb3VudDogMCxcbiAgICAgICAgICAgIGltcG9ydE9ubHlNZXNoZXM6IGZhbHNlLFxuICAgICAgICAgICAgZHVtbXlOb2RlczogW10sXG4gICAgICAgICAgICBhc3NldENvbnRhaW5lcjogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUGFyc2VcbiAgICAgICAgaWYgKHBhcnNlZERhdGEuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcGFyc2VPYmplY3QocGFyc2VkRGF0YS5leHRlbnNpb25zLCBcImV4dGVuc2lvbnNcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLmV4dGVuc2lvbnNVc2VkKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLmV4dGVuc2lvbnNVc2VkLCBcImV4dGVuc2lvbnNVc2VkXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5idWZmZXJzKSB7XG4gICAgICAgICAgICBwYXJzZUJ1ZmZlcnMocGFyc2VkRGF0YS5idWZmZXJzLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEuYnVmZmVyVmlld3MpIHtcbiAgICAgICAgICAgIHBhcnNlT2JqZWN0KHBhcnNlZERhdGEuYnVmZmVyVmlld3MsIFwiYnVmZmVyVmlld3NcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLmFjY2Vzc29ycykge1xuICAgICAgICAgICAgcGFyc2VPYmplY3QocGFyc2VkRGF0YS5hY2Nlc3NvcnMsIFwiYWNjZXNzb3JzXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5tZXNoZXMpIHtcbiAgICAgICAgICAgIHBhcnNlT2JqZWN0KHBhcnNlZERhdGEubWVzaGVzLCBcIm1lc2hlc1wiLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEubGlnaHRzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLmxpZ2h0cywgXCJsaWdodHNcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLmNhbWVyYXMpIHtcbiAgICAgICAgICAgIHBhcnNlT2JqZWN0KHBhcnNlZERhdGEuY2FtZXJhcywgXCJjYW1lcmFzXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5ub2Rlcykge1xuICAgICAgICAgICAgcGFyc2VPYmplY3QocGFyc2VkRGF0YS5ub2RlcywgXCJub2Rlc1wiLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEuaW1hZ2VzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLmltYWdlcywgXCJpbWFnZXNcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLnRleHR1cmVzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLnRleHR1cmVzLCBcInRleHR1cmVzXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5zaGFkZXJzKSB7XG4gICAgICAgICAgICBwYXJzZVNoYWRlcnMocGFyc2VkRGF0YS5zaGFkZXJzLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEucHJvZ3JhbXMpIHtcbiAgICAgICAgICAgIHBhcnNlT2JqZWN0KHBhcnNlZERhdGEucHJvZ3JhbXMsIFwicHJvZ3JhbXNcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLnNhbXBsZXJzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLnNhbXBsZXJzLCBcInNhbXBsZXJzXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS50ZWNobmlxdWVzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLnRlY2huaXF1ZXMsIFwidGVjaG5pcXVlc1wiLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEubWF0ZXJpYWxzKSB7XG4gICAgICAgICAgICBwYXJzZU9iamVjdChwYXJzZWREYXRhLm1hdGVyaWFscywgXCJtYXRlcmlhbHNcIiwgZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWREYXRhLmFuaW1hdGlvbnMpIHtcbiAgICAgICAgICAgIHBhcnNlT2JqZWN0KHBhcnNlZERhdGEuYW5pbWF0aW9ucywgXCJhbmltYXRpb25zXCIsIGdsdGZSdW50aW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5za2lucykge1xuICAgICAgICAgICAgcGFyc2VPYmplY3QocGFyc2VkRGF0YS5za2lucywgXCJza2luc1wiLCBnbHRmUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZERhdGEuc2NlbmVzKSB7XG4gICAgICAgICAgICBnbHRmUnVudGltZS5zY2VuZXMgPSBwYXJzZWREYXRhLnNjZW5lcztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkRGF0YS5zY2VuZSAmJiBwYXJzZWREYXRhLnNjZW5lcykge1xuICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuY3VycmVudFNjZW5lID0gcGFyc2VkRGF0YS5zY2VuZXNbcGFyc2VkRGF0YS5zY2VuZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsdGZSdW50aW1lO1xuICAgIH1cbiAgICBzdGF0aWMgTG9hZEJ1ZmZlckFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yLCBvblByb2dyZXNzKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGdsdGZSdW50aW1lLmJ1ZmZlcnNbaWRdO1xuICAgICAgICBpZiAoVG9vbHMuSXNCYXNlNjQoYnVmZmVyLnVyaSkpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gb25TdWNjZXNzKG5ldyBVaW50OEFycmF5KFRvb2xzLkRlY29kZUJhc2U2NChidWZmZXIudXJpKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFRvb2xzLkxvYWRGaWxlKGdsdGZSdW50aW1lLnJvb3RVcmwgKyBidWZmZXIudXJpLCAoZGF0YSkgPT4gb25TdWNjZXNzKG5ldyBVaW50OEFycmF5KGRhdGEpKSwgb25Qcm9ncmVzcywgdW5kZWZpbmVkLCB0cnVlLCAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IocmVxdWVzdC5zdGF0dXMgKyBcIiBcIiArIHJlcXVlc3Quc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIExvYWRUZXh0dXJlQnVmZmVyQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IGdsdGZSdW50aW1lLnRleHR1cmVzW2lkXTtcbiAgICAgICAgaWYgKCF0ZXh0dXJlIHx8ICF0ZXh0dXJlLnNvdXJjZSkge1xuICAgICAgICAgICAgb25FcnJvcihcIlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGV4dHVyZS5iYWJ5bG9uVGV4dHVyZSkge1xuICAgICAgICAgICAgb25TdWNjZXNzKG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGdsdGZSdW50aW1lLmltYWdlc1t0ZXh0dXJlLnNvdXJjZV07XG4gICAgICAgIGlmIChUb29scy5Jc0Jhc2U2NChzb3VyY2UudXJpKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvblN1Y2Nlc3MobmV3IFVpbnQ4QXJyYXkoVG9vbHMuRGVjb2RlQmFzZTY0KHNvdXJjZS51cmkpKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgVG9vbHMuTG9hZEZpbGUoZ2x0ZlJ1bnRpbWUucm9vdFVybCArIHNvdXJjZS51cmksIChkYXRhKSA9PiBvblN1Y2Nlc3MobmV3IFVpbnQ4QXJyYXkoZGF0YSkpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSwgKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKHJlcXVlc3Quc3RhdHVzICsgXCIgXCIgKyByZXF1ZXN0LnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBDcmVhdGVUZXh0dXJlQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBidWZmZXIsIG9uU3VjY2Vzcykge1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gZ2x0ZlJ1bnRpbWUudGV4dHVyZXNbaWRdO1xuICAgICAgICBpZiAodGV4dHVyZS5iYWJ5bG9uVGV4dHVyZSkge1xuICAgICAgICAgICAgb25TdWNjZXNzKHRleHR1cmUuYmFieWxvblRleHR1cmUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhbXBsZXIgPSBnbHRmUnVudGltZS5zYW1wbGVyc1t0ZXh0dXJlLnNhbXBsZXJdO1xuICAgICAgICBjb25zdCBjcmVhdGVNaXBNYXBzID0gc2FtcGxlci5taW5GaWx0ZXIgPT09IEVUZXh0dXJlRmlsdGVyVHlwZS5ORUFSRVNUX01JUE1BUF9ORUFSRVNUIHx8XG4gICAgICAgICAgICBzYW1wbGVyLm1pbkZpbHRlciA9PT0gRVRleHR1cmVGaWx0ZXJUeXBlLk5FQVJFU1RfTUlQTUFQX0xJTkVBUiB8fFxuICAgICAgICAgICAgc2FtcGxlci5taW5GaWx0ZXIgPT09IEVUZXh0dXJlRmlsdGVyVHlwZS5MSU5FQVJfTUlQTUFQX05FQVJFU1QgfHxcbiAgICAgICAgICAgIHNhbXBsZXIubWluRmlsdGVyID09PSBFVGV4dHVyZUZpbHRlclR5cGUuTElORUFSX01JUE1BUF9MSU5FQVI7XG4gICAgICAgIGNvbnN0IHNhbXBsaW5nTW9kZSA9IFRleHR1cmUuQklMSU5FQVJfU0FNUExJTkdNT0RFO1xuICAgICAgICBjb25zdCBibG9iID0gYnVmZmVyID09IG51bGwgPyBuZXcgQmxvYigpIDogbmV3IEJsb2IoW2J1ZmZlcl0pO1xuICAgICAgICBjb25zdCBibG9iVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgY29uc3QgcmV2b2tlQmxvYlVSTCA9ICgpID0+IFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7XG4gICAgICAgIGNvbnN0IG5ld1RleHR1cmUgPSBuZXcgVGV4dHVyZShibG9iVVJMLCBnbHRmUnVudGltZS5zY2VuZSwgIWNyZWF0ZU1pcE1hcHMsIHRydWUsIHNhbXBsaW5nTW9kZSwgcmV2b2tlQmxvYlVSTCwgcmV2b2tlQmxvYlVSTCk7XG4gICAgICAgIGlmIChzYW1wbGVyLndyYXBTICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ld1RleHR1cmUud3JhcFUgPSBHTFRGVXRpbHMuR2V0V3JhcE1vZGUoc2FtcGxlci53cmFwUyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhbXBsZXIud3JhcFQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3VGV4dHVyZS53cmFwViA9IEdMVEZVdGlscy5HZXRXcmFwTW9kZShzYW1wbGVyLndyYXBUKTtcbiAgICAgICAgfVxuICAgICAgICBuZXdUZXh0dXJlLm5hbWUgPSBpZDtcbiAgICAgICAgdGV4dHVyZS5iYWJ5bG9uVGV4dHVyZSA9IG5ld1RleHR1cmU7XG4gICAgICAgIG9uU3VjY2VzcyhuZXdUZXh0dXJlKTtcbiAgICB9XG4gICAgc3RhdGljIExvYWRTaGFkZXJTdHJpbmdBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBjb25zdCBzaGFkZXIgPSBnbHRmUnVudGltZS5zaGFkZXJzW2lkXTtcbiAgICAgICAgaWYgKFRvb2xzLklzQmFzZTY0KHNoYWRlci51cmkpKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFkZXJTdHJpbmcgPSBhdG9iKHNoYWRlci51cmkuc3BsaXQoXCIsXCIpWzFdKTtcbiAgICAgICAgICAgIGlmIChvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3Moc2hhZGVyU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFRvb2xzLkxvYWRGaWxlKGdsdGZSdW50aW1lLnJvb3RVcmwgKyBzaGFkZXIudXJpLCBvblN1Y2Nlc3MsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmYWxzZSwgKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdCAmJiBvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IocmVxdWVzdC5zdGF0dXMgKyBcIiBcIiArIHJlcXVlc3Quc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIExvYWRNYXRlcmlhbEFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gZ2x0ZlJ1bnRpbWUubWF0ZXJpYWxzW2lkXTtcbiAgICAgICAgaWYgKCFtYXRlcmlhbC50ZWNobmlxdWUpIHtcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgb25FcnJvcihcIk5vIHRlY2huaXF1ZSBmb3VuZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGVjaG5pcXVlID0gZ2x0ZlJ1bnRpbWUudGVjaG5pcXVlc1ttYXRlcmlhbC50ZWNobmlxdWVdO1xuICAgICAgICBpZiAoIXRlY2huaXF1ZSkge1xuICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuc2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhZ2x0ZlJ1bnRpbWUuYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0TWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChpZCwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgICAgICAgICAgZGVmYXVsdE1hdGVyaWFsLl9wYXJlbnRDb250YWluZXIgPSBnbHRmUnVudGltZS5hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIGdsdGZSdW50aW1lLnNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHRNYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBuZXcgQ29sb3IzKDAuNSwgMC41LCAwLjUpO1xuICAgICAgICAgICAgZGVmYXVsdE1hdGVyaWFsLnNpZGVPcmllbnRhdGlvbiA9IE1hdGVyaWFsLkNvdW50ZXJDbG9ja1dpc2VTaWRlT3JpZW50YXRpb247XG4gICAgICAgICAgICBvblN1Y2Nlc3MoZGVmYXVsdE1hdGVyaWFsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmFtID0gZ2x0ZlJ1bnRpbWUucHJvZ3JhbXNbdGVjaG5pcXVlLnByb2dyYW1dO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSB0ZWNobmlxdWUuc3RhdGVzO1xuICAgICAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBFZmZlY3QuU2hhZGVyc1N0b3JlW3Byb2dyYW0udmVydGV4U2hhZGVyICsgXCJWZXJ0ZXhTaGFkZXJcIl07XG4gICAgICAgIGNvbnN0IHBpeGVsU2hhZGVyID0gRWZmZWN0LlNoYWRlcnNTdG9yZVtwcm9ncmFtLmZyYWdtZW50U2hhZGVyICsgXCJQaXhlbFNoYWRlclwiXTtcbiAgICAgICAgbGV0IG5ld1ZlcnRleFNoYWRlciA9IFwiXCI7XG4gICAgICAgIGxldCBuZXdQaXhlbFNoYWRlciA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHZlcnRleFRva2VuaXplciA9IG5ldyBUb2tlbml6ZXIodmVydGV4U2hhZGVyKTtcbiAgICAgICAgY29uc3QgcGl4ZWxUb2tlbml6ZXIgPSBuZXcgVG9rZW5pemVyKHBpeGVsU2hhZGVyKTtcbiAgICAgICAgY29uc3QgdW5UcmVhdGVkVW5pZm9ybXMgPSB7fTtcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSBbXTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBjb25zdCBzYW1wbGVycyA9IFtdO1xuICAgICAgICAvLyBGaWxsIHVuaWZvcm0sIHNhbXBsZXIyRCBhbmQgYXR0cmlidXRlc1xuICAgICAgICBmb3IgKGNvbnN0IHVuaWYgaW4gdGVjaG5pcXVlLnVuaWZvcm1zKSB7XG4gICAgICAgICAgICBjb25zdCB1bmlmb3JtID0gdGVjaG5pcXVlLnVuaWZvcm1zW3VuaWZdO1xuICAgICAgICAgICAgY29uc3QgdW5pZm9ybVBhcmFtZXRlciA9IHRlY2huaXF1ZS5wYXJhbWV0ZXJzW3VuaWZvcm1dO1xuICAgICAgICAgICAgdW5UcmVhdGVkVW5pZm9ybXNbdW5pZl0gPSB1bmlmb3JtUGFyYW1ldGVyO1xuICAgICAgICAgICAgaWYgKHVuaWZvcm1QYXJhbWV0ZXIuc2VtYW50aWMgJiYgIXVuaWZvcm1QYXJhbWV0ZXIubm9kZSAmJiAhdW5pZm9ybVBhcmFtZXRlci5zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1JbmRleCA9IGdsVEZUcmFuc2Zvcm1zLmluZGV4T2YodW5pZm9ybVBhcmFtZXRlci5zZW1hbnRpYyk7XG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtcy5wdXNoKGJhYnlsb25UcmFuc2Zvcm1zW3RyYW5zZm9ybUluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1blRyZWF0ZWRVbmlmb3Jtc1t1bmlmXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zLnB1c2godW5pZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5pZm9ybVBhcmFtZXRlci50eXBlID09PSBFUGFyYW1ldGVyVHlwZS5TQU1QTEVSXzJEKSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlcnMucHVzaCh1bmlmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHVuaWZvcm1zLnB1c2godW5pZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBhdHRyIGluIHRlY2huaXF1ZS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSB0ZWNobmlxdWUuYXR0cmlidXRlc1thdHRyXTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVBhcmFtZXRlciA9IHRlY2huaXF1ZS5wYXJhbWV0ZXJzW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlUGFyYW1ldGVyLnNlbWFudGljKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29uZmlndXJlIHZlcnRleCBzaGFkZXJcbiAgICAgICAgd2hpbGUgKCF2ZXJ0ZXhUb2tlbml6ZXIuaXNFbmQoKSAmJiB2ZXJ0ZXhUb2tlbml6ZXIuZ2V0TmV4dFRva2VuKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuVHlwZSA9IHZlcnRleFRva2VuaXplci5jdXJyZW50VG9rZW47XG4gICAgICAgICAgICBpZiAodG9rZW5UeXBlICE9PSBFVG9rZW5UeXBlLklERU5USUZJRVIpIHtcbiAgICAgICAgICAgICAgICBuZXdWZXJ0ZXhTaGFkZXIgKz0gdmVydGV4VG9rZW5pemVyLmN1cnJlbnRTdHJpbmc7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZm91bmRBdHRyaWJ1dGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBpbiB0ZWNobmlxdWUuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRlY2huaXF1ZS5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVBhcmFtZXRlciA9IHRlY2huaXF1ZS5wYXJhbWV0ZXJzW2F0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgaWYgKHZlcnRleFRva2VuaXplci5jdXJyZW50SWRlbnRpZmllciA9PT0gYXR0ciAmJiBhdHRyaWJ1dGVQYXJhbWV0ZXIuc2VtYW50aWMpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmVydGV4U2hhZGVyICs9IGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZEF0dHJpYnV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3VmVydGV4U2hhZGVyICs9IHBhcnNlU2hhZGVyVW5pZm9ybXModmVydGV4VG9rZW5pemVyLCB0ZWNobmlxdWUsIHVuVHJlYXRlZFVuaWZvcm1zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb25maWd1cmUgcGl4ZWwgc2hhZGVyXG4gICAgICAgIHdoaWxlICghcGl4ZWxUb2tlbml6ZXIuaXNFbmQoKSAmJiBwaXhlbFRva2VuaXplci5nZXROZXh0VG9rZW4oKSkge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5UeXBlID0gcGl4ZWxUb2tlbml6ZXIuY3VycmVudFRva2VuO1xuICAgICAgICAgICAgaWYgKHRva2VuVHlwZSAhPT0gRVRva2VuVHlwZS5JREVOVElGSUVSKSB7XG4gICAgICAgICAgICAgICAgbmV3UGl4ZWxTaGFkZXIgKz0gcGl4ZWxUb2tlbml6ZXIuY3VycmVudFN0cmluZztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1BpeGVsU2hhZGVyICs9IHBhcnNlU2hhZGVyVW5pZm9ybXMocGl4ZWxUb2tlbml6ZXIsIHRlY2huaXF1ZSwgdW5UcmVhdGVkVW5pZm9ybXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBzaGFkZXIgbWF0ZXJpYWxcbiAgICAgICAgY29uc3Qgc2hhZGVyUGF0aCA9IHtcbiAgICAgICAgICAgIHZlcnRleDogcHJvZ3JhbS52ZXJ0ZXhTaGFkZXIgKyBpZCxcbiAgICAgICAgICAgIGZyYWdtZW50OiBwcm9ncmFtLmZyYWdtZW50U2hhZGVyICsgaWQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgICAgICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zLFxuICAgICAgICAgICAgc2FtcGxlcnM6IHNhbXBsZXJzLFxuICAgICAgICAgICAgbmVlZEFscGhhQmxlbmRpbmc6IHN0YXRlcyAmJiBzdGF0ZXMuZW5hYmxlICYmIHN0YXRlcy5lbmFibGUuaW5kZXhPZigzMDQyKSAhPT0gLTEsXG4gICAgICAgIH07XG4gICAgICAgIEVmZmVjdC5TaGFkZXJzU3RvcmVbcHJvZ3JhbS52ZXJ0ZXhTaGFkZXIgKyBpZCArIFwiVmVydGV4U2hhZGVyXCJdID0gbmV3VmVydGV4U2hhZGVyO1xuICAgICAgICBFZmZlY3QuU2hhZGVyc1N0b3JlW3Byb2dyYW0uZnJhZ21lbnRTaGFkZXIgKyBpZCArIFwiUGl4ZWxTaGFkZXJcIl0gPSBuZXdQaXhlbFNoYWRlcjtcbiAgICAgICAgY29uc3Qgc2hhZGVyTWF0ZXJpYWwgPSBuZXcgU2hhZGVyTWF0ZXJpYWwoaWQsIGdsdGZSdW50aW1lLnNjZW5lLCBzaGFkZXJQYXRoLCBvcHRpb25zKTtcbiAgICAgICAgc2hhZGVyTWF0ZXJpYWwub25FcnJvciA9IG9uU2hhZGVyQ29tcGlsZUVycm9yKHByb2dyYW0sIHNoYWRlck1hdGVyaWFsLCBvbkVycm9yKTtcbiAgICAgICAgc2hhZGVyTWF0ZXJpYWwub25Db21waWxlZCA9IG9uU2hhZGVyQ29tcGlsZVN1Y2Nlc3MoZ2x0ZlJ1bnRpbWUsIHNoYWRlck1hdGVyaWFsLCB0ZWNobmlxdWUsIG1hdGVyaWFsLCB1blRyZWF0ZWRVbmlmb3Jtcywgb25TdWNjZXNzKTtcbiAgICAgICAgc2hhZGVyTWF0ZXJpYWwuc2lkZU9yaWVudGF0aW9uID0gTWF0ZXJpYWwuQ291bnRlckNsb2NrV2lzZVNpZGVPcmllbnRhdGlvbjtcbiAgICAgICAgaWYgKHN0YXRlcyAmJiBzdGF0ZXMuZnVuY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbnMgPSBzdGF0ZXMuZnVuY3Rpb25zO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9ucy5jdWxsRmFjZSAmJiBmdW5jdGlvbnMuY3VsbEZhY2VbMF0gIT09IEVDdWxsaW5nVHlwZS5CQUNLKSB7XG4gICAgICAgICAgICAgICAgc2hhZGVyTWF0ZXJpYWwuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBibGVuZEZ1bmMgPSBmdW5jdGlvbnMuYmxlbmRGdW5jU2VwYXJhdGU7XG4gICAgICAgICAgICBpZiAoYmxlbmRGdW5jKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsZW5kRnVuY1swXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uU1JDX0FMUEhBICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1sxXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FX01JTlVTX1NSQ19BTFBIQSAmJlxuICAgICAgICAgICAgICAgICAgICBibGVuZEZ1bmNbMl0gPT09IEVCbGVuZGluZ0Z1bmN0aW9uLk9ORSAmJlxuICAgICAgICAgICAgICAgICAgICBibGVuZEZ1bmNbM10gPT09IEVCbGVuZGluZ0Z1bmN0aW9uLk9ORSkge1xuICAgICAgICAgICAgICAgICAgICBzaGFkZXJNYXRlcmlhbC5hbHBoYU1vZGUgPSBDb25zdGFudHMuQUxQSEFfQ09NQklORTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxlbmRGdW5jWzBdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5PTkUgJiZcbiAgICAgICAgICAgICAgICAgICAgYmxlbmRGdW5jWzFdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5PTkUgJiZcbiAgICAgICAgICAgICAgICAgICAgYmxlbmRGdW5jWzJdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5aRVJPICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1szXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLmFscGhhTW9kZSA9IENvbnN0YW50cy5BTFBIQV9PTkVPTkU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJsZW5kRnVuY1swXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uU1JDX0FMUEhBICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1sxXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1syXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uWkVSTyAmJlxuICAgICAgICAgICAgICAgICAgICBibGVuZEZ1bmNbM10gPT09IEVCbGVuZGluZ0Z1bmN0aW9uLk9ORSkge1xuICAgICAgICAgICAgICAgICAgICBzaGFkZXJNYXRlcmlhbC5hbHBoYU1vZGUgPSBDb25zdGFudHMuQUxQSEFfQUREO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChibGVuZEZ1bmNbMF0gPT09IEVCbGVuZGluZ0Z1bmN0aW9uLlpFUk8gJiZcbiAgICAgICAgICAgICAgICAgICAgYmxlbmRGdW5jWzFdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5PTkVfTUlOVVNfU1JDX0NPTE9SICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1syXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1szXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLmFscGhhTW9kZSA9IENvbnN0YW50cy5BTFBIQV9TVUJUUkFDVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxlbmRGdW5jWzBdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5EU1RfQ09MT1IgJiZcbiAgICAgICAgICAgICAgICAgICAgYmxlbmRGdW5jWzFdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5aRVJPICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1syXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1szXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLmFscGhhTW9kZSA9IENvbnN0YW50cy5BTFBIQV9NVUxUSVBMWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmxlbmRGdW5jWzBdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5TUkNfQUxQSEEgJiZcbiAgICAgICAgICAgICAgICAgICAgYmxlbmRGdW5jWzFdID09PSBFQmxlbmRpbmdGdW5jdGlvbi5PTkVfTUlOVVNfU1JDX0NPTE9SICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1syXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FICYmXG4gICAgICAgICAgICAgICAgICAgIGJsZW5kRnVuY1szXSA9PT0gRUJsZW5kaW5nRnVuY3Rpb24uT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLmFscGhhTW9kZSA9IENvbnN0YW50cy5BTFBIQV9NQVhJTUlaRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBnbFRGIFYxIExvYWRlclxuICogQGludGVybmFsXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgY2xhc3MgR0xURkxvYWRlciB7XG4gICAgc3RhdGljIFJlZ2lzdGVyRXh0ZW5zaW9uKGV4dGVuc2lvbikge1xuICAgICAgICBpZiAoR0xURkxvYWRlci5FeHRlbnNpb25zW2V4dGVuc2lvbi5uYW1lXSkge1xuICAgICAgICAgICAgVG9vbHMuRXJyb3IoJ1Rvb2wgd2l0aCB0aGUgc2FtZSBuYW1lIFwiJyArIGV4dGVuc2lvbi5uYW1lICsgJ1wiIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgR0xURkxvYWRlci5FeHRlbnNpb25zW2V4dGVuc2lvbi5uYW1lXSA9IGV4dGVuc2lvbjtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbiAgICBfaW1wb3J0TWVzaEFzeW5jKG1lc2hlc05hbWVzLCBzY2VuZSwgZGF0YSwgcm9vdFVybCwgYXNzZXRDb250YWluZXIsIG9uU3VjY2Vzcywgb25Qcm9ncmVzcywgb25FcnJvcikge1xuICAgICAgICBzY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSA9IHRydWU7XG4gICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uTG9hZFJ1bnRpbWVBc3luYyhzY2VuZSwgZGF0YSwgcm9vdFVybCwgKGdsdGZSdW50aW1lKSA9PiB7XG4gICAgICAgICAgICBnbHRmUnVudGltZS5hc3NldENvbnRhaW5lciA9IGFzc2V0Q29udGFpbmVyO1xuICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuaW1wb3J0T25seU1lc2hlcyA9IHRydWU7XG4gICAgICAgICAgICBpZiAobWVzaGVzTmFtZXMgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBnbHRmUnVudGltZS5pbXBvcnRNZXNoZXNOYW1lcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc2hlc05hbWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUuaW1wb3J0TWVzaGVzTmFtZXMgPSBbbWVzaGVzTmFtZXNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWVzaGVzTmFtZXMgJiYgIShtZXNoZXNOYW1lcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgICAgIGdsdGZSdW50aW1lLmltcG9ydE1lc2hlc05hbWVzID0gW21lc2hlc05hbWVzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdsdGZSdW50aW1lLmltcG9ydE1lc2hlc05hbWVzID0gW107XG4gICAgICAgICAgICAgICAgVG9vbHMuV2FybihcIkFyZ3VtZW50IG1lc2hlc05hbWVzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3Igc3RyaW5nW11cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDcmVhdGUgbm9kZXNcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZU5vZGVzKGdsdGZSdW50aW1lKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc2hlcyA9IFtdO1xuICAgICAgICAgICAgY29uc3Qgc2tlbGV0b25zID0gW107XG4gICAgICAgICAgICAvLyBGaWxsIGFycmF5cyBvZiBtZXNoZXMgYW5kIHNrZWxldG9uc1xuICAgICAgICAgICAgZm9yIChjb25zdCBuZGUgaW4gZ2x0ZlJ1bnRpbWUubm9kZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gZ2x0ZlJ1bnRpbWUubm9kZXNbbmRlXTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5iYWJ5bG9uTm9kZSBpbnN0YW5jZW9mIEFic3RyYWN0TWVzaCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNoZXMucHVzaChub2RlLmJhYnlsb25Ob2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNrbCBpbiBnbHRmUnVudGltZS5za2lucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraW4gPSBnbHRmUnVudGltZS5za2luc1tza2xdO1xuICAgICAgICAgICAgICAgIGlmIChza2luLmJhYnlsb25Ta2VsZXRvbiBpbnN0YW5jZW9mIFNrZWxldG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHNrZWxldG9ucy5wdXNoKHNraW4uYmFieWxvblNrZWxldG9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2FkIGJ1ZmZlcnMsIHNoYWRlcnMsIG1hdGVyaWFscywgZXRjLlxuICAgICAgICAgICAgdGhpcy5fbG9hZEJ1ZmZlcnNBc3luYyhnbHRmUnVudGltZSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRTaGFkZXJzQXN5bmMoZ2x0ZlJ1bnRpbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0TWF0ZXJpYWxzKGdsdGZSdW50aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zdExvYWQoZ2x0ZlJ1bnRpbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUdMVEZGaWxlTG9hZGVyLkluY3JlbWVudGFsTG9hZGluZyAmJiBvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzcyhtZXNoZXMsIHNrZWxldG9ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKEdMVEZGaWxlTG9hZGVyLkluY3JlbWVudGFsTG9hZGluZyAmJiBvblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3MobWVzaGVzLCBza2VsZXRvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBvbkVycm9yKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcG9ydHMgb25lIG9yIG1vcmUgbWVzaGVzIGZyb20gYSBsb2FkZWQgZ2x0ZiBmaWxlIGFuZCBhZGRzIHRoZW0gdG8gdGhlIHNjZW5lXG4gICAgICogQHBhcmFtIG1lc2hlc05hbWVzIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3Mgb2YgdGhlIG1lc2ggbmFtZXMgdGhhdCBzaG91bGQgYmUgbG9hZGVkIGZyb20gdGhlIGZpbGVcbiAgICAgKiBAcGFyYW0gc2NlbmUgdGhlIHNjZW5lIHRoZSBtZXNoZXMgc2hvdWxkIGJlIGFkZGVkIHRvXG4gICAgICogQHBhcmFtIGFzc2V0Q29udGFpbmVyIGRlZmluZXMgdGhlIGFzc2V0IGNvbnRhaW5lciB0byB1c2UgKGNhbiBiZSBudWxsKVxuICAgICAqIEBwYXJhbSBkYXRhIGdsdGYgZGF0YSBjb250YWluaW5nIGluZm9ybWF0aW9uIG9mIHRoZSBtZXNoZXMgaW4gYSBsb2FkZWQgZmlsZVxuICAgICAqIEBwYXJhbSByb290VXJsIHJvb3QgdXJsIHRvIGxvYWQgZnJvbVxuICAgICAqIEBwYXJhbSBvblByb2dyZXNzIGV2ZW50IHRoYXQgZmlyZXMgd2hlbiBsb2FkaW5nIHByb2dyZXNzIGhhcyBvY2N1cmVkXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIGNvbnRhaW5nIHRoZSBsb2FkZWQgbWVzaGVzLCBwYXJ0aWNsZXMsIHNrZWxldG9ucyBhbmQgYW5pbWF0aW9uc1xuICAgICAqL1xuICAgIGltcG9ydE1lc2hBc3luYyhtZXNoZXNOYW1lcywgc2NlbmUsIGFzc2V0Q29udGFpbmVyLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9pbXBvcnRNZXNoQXN5bmMobWVzaGVzTmFtZXMsIHNjZW5lLCBkYXRhLCByb290VXJsLCBhc3NldENvbnRhaW5lciwgKG1lc2hlcywgc2tlbGV0b25zKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc2hlczogbWVzaGVzLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZVN5c3RlbXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBza2VsZXRvbnM6IHNrZWxldG9ucyxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uR3JvdXBzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTm9kZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlTWFuYWdlcnM6IFtdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgb25Qcm9ncmVzcywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRBc3luYyhzY2VuZSwgZGF0YSwgcm9vdFVybCwgb25TdWNjZXNzLCBvblByb2dyZXNzLCBvbkVycm9yKSB7XG4gICAgICAgIHNjZW5lLnVzZVJpZ2h0SGFuZGVkU3lzdGVtID0gdHJ1ZTtcbiAgICAgICAgR0xURkxvYWRlckV4dGVuc2lvbi5Mb2FkUnVudGltZUFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCAoZ2x0ZlJ1bnRpbWUpID0+IHtcbiAgICAgICAgICAgIC8vIExvYWQgcnVudGltZSBleHRlbnNpb3NcbiAgICAgICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uTG9hZFJ1bnRpbWVFeHRlbnNpb25zQXN5bmMoZ2x0ZlJ1bnRpbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbm9kZXNcbiAgICAgICAgICAgICAgICB0aGlzLl9jcmVhdGVOb2RlcyhnbHRmUnVudGltZSk7XG4gICAgICAgICAgICAgICAgLy8gTG9hZCBidWZmZXJzLCBzaGFkZXJzLCBtYXRlcmlhbHMsIGV0Yy5cbiAgICAgICAgICAgICAgICB0aGlzLl9sb2FkQnVmZmVyc0FzeW5jKGdsdGZSdW50aW1lLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRTaGFkZXJzQXN5bmMoZ2x0ZlJ1bnRpbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydE1hdGVyaWFscyhnbHRmUnVudGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0TG9hZChnbHRmUnVudGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUdMVEZGaWxlTG9hZGVyLkluY3JlbWVudGFsTG9hZGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoR0xURkZpbGVMb2FkZXIuSW5jcmVtZW50YWxMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIG9uRXJyb3IpO1xuICAgICAgICB9LCBvbkVycm9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wb3J0cyBhbGwgb2JqZWN0cyBmcm9tIGEgbG9hZGVkIGdsdGYgZmlsZSBhbmQgYWRkcyB0aGVtIHRvIHRoZSBzY2VuZVxuICAgICAqIEBwYXJhbSBzY2VuZSB0aGUgc2NlbmUgdGhlIG9iamVjdHMgc2hvdWxkIGJlIGFkZGVkIHRvXG4gICAgICogQHBhcmFtIGRhdGEgZ2x0ZiBkYXRhIGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gb2YgdGhlIG1lc2hlcyBpbiBhIGxvYWRlZCBmaWxlXG4gICAgICogQHBhcmFtIHJvb3RVcmwgcm9vdCB1cmwgdG8gbG9hZCBmcm9tXG4gICAgICogQHBhcmFtIG9uUHJvZ3Jlc3MgZXZlbnQgdGhhdCBmaXJlcyB3aGVuIGxvYWRpbmcgcHJvZ3Jlc3MgaGFzIG9jY3VyZWRcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2Ugd2hpY2ggY29tcGxldGVzIHdoZW4gb2JqZWN0cyBoYXZlIGJlZW4gbG9hZGVkIHRvIHRoZSBzY2VuZVxuICAgICAqL1xuICAgIGxvYWRBc3luYyhzY2VuZSwgZGF0YSwgcm9vdFVybCwgb25Qcm9ncmVzcykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fbG9hZEFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSwgb25Qcm9ncmVzcywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRTaGFkZXJzQXN5bmMoZ2x0ZlJ1bnRpbWUsIG9ubG9hZCkge1xuICAgICAgICBsZXQgaGFzU2hhZGVycyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBwcm9jZXNzU2hhZGVyID0gKHNoYSwgc2hhZGVyKSA9PiB7XG4gICAgICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLkxvYWRTaGFkZXJTdHJpbmdBc3luYyhnbHRmUnVudGltZSwgc2hhLCAoc2hhZGVyU3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRlclN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2x0ZlJ1bnRpbWUubG9hZGVkU2hhZGVyQ291bnQrKztcbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIEVmZmVjdC5TaGFkZXJzU3RvcmVbc2hhICsgKHNoYWRlci50eXBlID09PSBFU2hhZGVyVHlwZS5WRVJURVggPyBcIlZlcnRleFNoYWRlclwiIDogXCJQaXhlbFNoYWRlclwiKV0gPSBzaGFkZXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnbHRmUnVudGltZS5sb2FkZWRTaGFkZXJDb3VudCA9PT0gZ2x0ZlJ1bnRpbWUuc2hhZGVyc2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG9ubG9hZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBUb29scy5FcnJvcihcIkVycm9yIHdoZW4gbG9hZGluZyBzaGFkZXIgcHJvZ3JhbSBuYW1lZCBcIiArIHNoYSArIFwiIGxvY2F0ZWQgYXQgXCIgKyBzaGFkZXIudXJpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHNoYSBpbiBnbHRmUnVudGltZS5zaGFkZXJzKSB7XG4gICAgICAgICAgICBoYXNTaGFkZXJzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHNoYWRlciA9IGdsdGZSdW50aW1lLnNoYWRlcnNbc2hhXTtcbiAgICAgICAgICAgIGlmIChzaGFkZXIpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzU2hhZGVyLmJpbmQodGhpcywgc2hhLCBzaGFkZXIpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBUb29scy5FcnJvcihcIk5vIHNoYWRlciBuYW1lZDogXCIgKyBzaGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzU2hhZGVycykge1xuICAgICAgICAgICAgb25sb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2xvYWRCdWZmZXJzQXN5bmMoZ2x0ZlJ1bnRpbWUsIG9uTG9hZCkge1xuICAgICAgICBsZXQgaGFzQnVmZmVycyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBwcm9jZXNzQnVmZmVyID0gKGJ1ZiwgYnVmZmVyKSA9PiB7XG4gICAgICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLkxvYWRCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgYnVmLCAoYnVmZmVyVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIGdsdGZSdW50aW1lLmxvYWRlZEJ1ZmZlckNvdW50Kys7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlclZpZXcuYnl0ZUxlbmd0aCAhPSBnbHRmUnVudGltZS5idWZmZXJzW2J1Zl0uYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVG9vbHMuRXJyb3IoXCJCdWZmZXIgbmFtZWQgXCIgKyBidWYgKyBcIiBpcyBsZW5ndGggXCIgKyBidWZmZXJWaWV3LmJ5dGVMZW5ndGggKyBcIi4gRXhwZWN0ZWQ6IFwiICsgYnVmZmVyLmJ5dGVMZW5ndGgpOyAvLyBJbXByb3ZlIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBnbHRmUnVudGltZS5sb2FkZWRCdWZmZXJWaWV3c1tidWZdID0gYnVmZmVyVmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGdsdGZSdW50aW1lLmxvYWRlZEJ1ZmZlckNvdW50ID09PSBnbHRmUnVudGltZS5idWZmZXJzQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25Mb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIFRvb2xzLkVycm9yKFwiRXJyb3Igd2hlbiBsb2FkaW5nIGJ1ZmZlciBuYW1lZCBcIiArIGJ1ZiArIFwiIGxvY2F0ZWQgYXQgXCIgKyBidWZmZXIudXJpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGJ1ZiBpbiBnbHRmUnVudGltZS5idWZmZXJzKSB7XG4gICAgICAgICAgICBoYXNCdWZmZXJzID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGdsdGZSdW50aW1lLmJ1ZmZlcnNbYnVmXTtcbiAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzQnVmZmVyLmJpbmQodGhpcywgYnVmLCBidWZmZXIpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBUb29scy5FcnJvcihcIk5vIGJ1ZmZlciBuYW1lZDogXCIgKyBidWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzQnVmZmVycykge1xuICAgICAgICAgICAgb25Mb2FkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NyZWF0ZU5vZGVzKGdsdGZSdW50aW1lKSB7XG4gICAgICAgIGxldCBjdXJyZW50U2NlbmUgPSBnbHRmUnVudGltZS5jdXJyZW50U2NlbmU7XG4gICAgICAgIGlmIChjdXJyZW50U2NlbmUpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgb25lIHNjZW5lIGV2ZW4gaWYgbXVsdGlwbGUgc2NlbmVzIGFyZSBkZWZpbmVkXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTY2VuZS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRyYXZlcnNlTm9kZXMoZ2x0ZlJ1bnRpbWUsIGN1cnJlbnRTY2VuZS5ub2Rlc1tpXSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBMb2FkIGFsbCBzY2VuZXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGhpbmcgaW4gZ2x0ZlJ1bnRpbWUuc2NlbmVzKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNjZW5lID0gZ2x0ZlJ1bnRpbWUuc2NlbmVzW3RoaW5nXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRTY2VuZS5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZU5vZGVzKGdsdGZSdW50aW1lLCBjdXJyZW50U2NlbmUubm9kZXNbaV0sIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbkdMVEZMb2FkZXIuRXh0ZW5zaW9ucyA9IHt9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIEdMVEZMb2FkZXJFeHRlbnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhbiBvdmVycmlkZSBmb3IgbG9hZGluZyB0aGUgcnVudGltZVxuICAgICAqIFJldHVybiB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGUgcnVudGltZVxuICAgICAqIEBwYXJhbSBzY2VuZVxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHBhcmFtIHJvb3RVcmxcbiAgICAgKiBAcGFyYW0gb25TdWNjZXNzXG4gICAgICogQHBhcmFtIG9uRXJyb3JcbiAgICAgKiBAcmV0dXJucyB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGUgcnVudGltZVxuICAgICAqL1xuICAgIGxvYWRSdW50aW1lQXN5bmMoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYW4gb252ZXJyaWRlIGZvciBjcmVhdGluZyBnbHRmIHJ1bnRpbWVcbiAgICAgKiBSZXR1cm4gdHJ1ZSB0byBzdG9wIGZ1cnRoZXIgZXh0ZW5zaW9ucyBmcm9tIGNyZWF0aW5nIHRoZSBydW50aW1lXG4gICAgICogQHBhcmFtIGdsdGZSdW50aW1lXG4gICAgICogQHBhcmFtIG9uU3VjY2Vzc1xuICAgICAqIEBwYXJhbSBvbkVycm9yXG4gICAgICogQHJldHVybnMgdHJ1ZSB0byBzdG9wIGZ1cnRoZXIgZXh0ZW5zaW9ucyBmcm9tIGNyZWF0aW5nIHRoZSBydW50aW1lXG4gICAgICovXG4gICAgbG9hZFJ1bnRpbWVFeHRlbnNpb25zQXN5bmMoZ2x0ZlJ1bnRpbWUsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYW4gb3ZlcnJpZGUgZm9yIGxvYWRpbmcgYnVmZmVyc1xuICAgICAqIFJldHVybiB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGlzIGJ1ZmZlclxuICAgICAqIEBwYXJhbSBnbHRmUnVudGltZVxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqIEBwYXJhbSBvblN1Y2Nlc3NcbiAgICAgKiBAcGFyYW0gb25FcnJvclxuICAgICAqIEBwYXJhbSBvblByb2dyZXNzXG4gICAgICogQHJldHVybnMgdHJ1ZSB0byBzdG9wIGZ1cnRoZXIgZXh0ZW5zaW9ucyBmcm9tIGxvYWRpbmcgdGhpcyBidWZmZXJcbiAgICAgKi9cbiAgICBsb2FkQnVmZmVyQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIG9uUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIG92ZXJyaWRlIGZvciBsb2FkaW5nIHRleHR1cmUgYnVmZmVyc1xuICAgICAqIFJldHVybiB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGlzIHRleHR1cmUgZGF0YVxuICAgICAqIEBwYXJhbSBnbHRmUnVudGltZVxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqIEBwYXJhbSBvblN1Y2Nlc3NcbiAgICAgKiBAcGFyYW0gb25FcnJvclxuICAgICAqIEByZXR1cm5zIHRydWUgdG8gc3RvcCBmdXJ0aGVyIGV4dGVuc2lvbnMgZnJvbSBsb2FkaW5nIHRoaXMgdGV4dHVyZSBkYXRhXG4gICAgICovXG4gICAgbG9hZFRleHR1cmVCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYW4gb3ZlcnJpZGUgZm9yIGNyZWF0aW5nIHRleHR1cmVzXG4gICAgICogUmV0dXJuIHRydWUgdG8gc3RvcCBmdXJ0aGVyIGV4dGVuc2lvbnMgZnJvbSBsb2FkaW5nIHRoaXMgdGV4dHVyZVxuICAgICAqIEBwYXJhbSBnbHRmUnVudGltZVxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqIEBwYXJhbSBidWZmZXJcbiAgICAgKiBAcGFyYW0gb25TdWNjZXNzXG4gICAgICogQHBhcmFtIG9uRXJyb3JcbiAgICAgKiBAcmV0dXJucyB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGlzIHRleHR1cmVcbiAgICAgKi9cbiAgICBjcmVhdGVUZXh0dXJlQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBidWZmZXIsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYW4gb3ZlcnJpZGUgZm9yIGxvYWRpbmcgc2hhZGVyIHN0cmluZ3NcbiAgICAgKiBSZXR1cm4gdHJ1ZSB0byBzdG9wIGZ1cnRoZXIgZXh0ZW5zaW9ucyBmcm9tIGxvYWRpbmcgdGhpcyBzaGFkZXIgZGF0YVxuICAgICAqIEBwYXJhbSBnbHRmUnVudGltZVxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqIEBwYXJhbSBvblN1Y2Nlc3NcbiAgICAgKiBAcGFyYW0gb25FcnJvclxuICAgICAqIEByZXR1cm5zIHRydWUgdG8gc3RvcCBmdXJ0aGVyIGV4dGVuc2lvbnMgZnJvbSBsb2FkaW5nIHRoaXMgc2hhZGVyIGRhdGFcbiAgICAgKi9cbiAgICBsb2FkU2hhZGVyU3RyaW5nQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGFuIG92ZXJyaWRlIGZvciBsb2FkaW5nIG1hdGVyaWFsc1xuICAgICAqIFJldHVybiB0cnVlIHRvIHN0b3AgZnVydGhlciBleHRlbnNpb25zIGZyb20gbG9hZGluZyB0aGlzIG1hdGVyaWFsXG4gICAgICogQHBhcmFtIGdsdGZSdW50aW1lXG4gICAgICogQHBhcmFtIGlkXG4gICAgICogQHBhcmFtIG9uU3VjY2Vzc1xuICAgICAqIEBwYXJhbSBvbkVycm9yXG4gICAgICogQHJldHVybnMgdHJ1ZSB0byBzdG9wIGZ1cnRoZXIgZXh0ZW5zaW9ucyBmcm9tIGxvYWRpbmcgdGhpcyBtYXRlcmlhbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbEFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gLS0tLS0tLS0tXG4gICAgLy8gVXRpbGl0aWVzXG4gICAgLy8gLS0tLS0tLS0tXG4gICAgc3RhdGljIExvYWRSdW50aW1lQXN5bmMoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLl9BcHBseUV4dGVuc2lvbnMoKGxvYWRlckV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRlckV4dGVuc2lvbi5sb2FkUnVudGltZUFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW9uU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uU3VjY2VzcyhHTFRGTG9hZGVyQmFzZS5DcmVhdGVSdW50aW1lKGRhdGEuanNvbiwgc2NlbmUsIHJvb3RVcmwpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIExvYWRSdW50aW1lRXh0ZW5zaW9uc0FzeW5jKGdsdGZSdW50aW1lLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgR0xURkxvYWRlckV4dGVuc2lvbi5fQXBwbHlFeHRlbnNpb25zKChsb2FkZXJFeHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJFeHRlbnNpb24ubG9hZFJ1bnRpbWVFeHRlbnNpb25zQXN5bmMoZ2x0ZlJ1bnRpbWUsIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG9uU3VjY2VzcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgTG9hZEJ1ZmZlckFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yLCBvblByb2dyZXNzKSB7XG4gICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uX0FwcGx5RXh0ZW5zaW9ucygobG9hZGVyRXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVyRXh0ZW5zaW9uLmxvYWRCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvciwgb25Qcm9ncmVzcyk7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIEdMVEZMb2FkZXJCYXNlLkxvYWRCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvciwgb25Qcm9ncmVzcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgTG9hZFRleHR1cmVBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLl9Mb2FkVGV4dHVyZUJ1ZmZlckFzeW5jKGdsdGZSdW50aW1lLCBpZCwgKGJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uX0NyZWF0ZVRleHR1cmVBc3luYyhnbHRmUnVudGltZSwgaWQsIGJ1ZmZlciwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgb25FcnJvcik7XG4gICAgfVxuICAgIHN0YXRpYyBMb2FkU2hhZGVyU3RyaW5nQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgR0xURkxvYWRlckV4dGVuc2lvbi5fQXBwbHlFeHRlbnNpb25zKChsb2FkZXJFeHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJFeHRlbnNpb24ubG9hZFNoYWRlclN0cmluZ0FzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgR0xURkxvYWRlckJhc2UuTG9hZFNoYWRlclN0cmluZ0FzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBMb2FkTWF0ZXJpYWxBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLl9BcHBseUV4dGVuc2lvbnMoKGxvYWRlckV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRlckV4dGVuc2lvbi5sb2FkTWF0ZXJpYWxBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIEdMVEZMb2FkZXJCYXNlLkxvYWRNYXRlcmlhbEFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBfTG9hZFRleHR1cmVCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgICBHTFRGTG9hZGVyRXh0ZW5zaW9uLl9BcHBseUV4dGVuc2lvbnMoKGxvYWRlckV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRlckV4dGVuc2lvbi5sb2FkVGV4dHVyZUJ1ZmZlckFzeW5jKGdsdGZSdW50aW1lLCBpZCwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgR0xURkxvYWRlckJhc2UuTG9hZFRleHR1cmVCdWZmZXJBc3luYyhnbHRmUnVudGltZSwgaWQsIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgX0NyZWF0ZVRleHR1cmVBc3luYyhnbHRmUnVudGltZSwgaWQsIGJ1ZmZlciwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgICAgIEdMVEZMb2FkZXJFeHRlbnNpb24uX0FwcGx5RXh0ZW5zaW9ucygobG9hZGVyRXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVyRXh0ZW5zaW9uLmNyZWF0ZVRleHR1cmVBc3luYyhnbHRmUnVudGltZSwgaWQsIGJ1ZmZlciwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgR0xURkxvYWRlckJhc2UuQ3JlYXRlVGV4dHVyZUFzeW5jKGdsdGZSdW50aW1lLCBpZCwgYnVmZmVyLCBvblN1Y2Nlc3MpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIF9BcHBseUV4dGVuc2lvbnMoZnVuYywgZGVmYXVsdEZ1bmMpIHtcbiAgICAgICAgZm9yIChjb25zdCBleHRlbnNpb25OYW1lIGluIEdMVEZMb2FkZXIuRXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgY29uc3QgbG9hZGVyRXh0ZW5zaW9uID0gR0xURkxvYWRlci5FeHRlbnNpb25zW2V4dGVuc2lvbk5hbWVdO1xuICAgICAgICAgICAgaWYgKGZ1bmMobG9hZGVyRXh0ZW5zaW9uKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0RnVuYygpO1xuICAgIH1cbn1cbkdMVEZGaWxlTG9hZGVyLl9DcmVhdGVHTFRGMUxvYWRlciA9ICgpID0+IG5ldyBHTFRGTG9hZGVyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbFRGTG9hZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EBlendingFunction: () => (/* binding */ EBlendingFunction),\n/* harmony export */   EComponentType: () => (/* binding */ EComponentType),\n/* harmony export */   ECullingType: () => (/* binding */ ECullingType),\n/* harmony export */   EParameterType: () => (/* binding */ EParameterType),\n/* harmony export */   EShaderType: () => (/* binding */ EShaderType),\n/* harmony export */   ETextureFilterType: () => (/* binding */ ETextureFilterType),\n/* harmony export */   ETextureFormat: () => (/* binding */ ETextureFormat),\n/* harmony export */   ETextureWrapMode: () => (/* binding */ ETextureWrapMode)\n/* harmony export */ });\n/**\n * Enums\n * @internal\n */\nvar EComponentType;\n(function (EComponentType) {\n    EComponentType[EComponentType[\"BYTE\"] = 5120] = \"BYTE\";\n    EComponentType[EComponentType[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n    EComponentType[EComponentType[\"SHORT\"] = 5122] = \"SHORT\";\n    EComponentType[EComponentType[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n    EComponentType[EComponentType[\"FLOAT\"] = 5126] = \"FLOAT\";\n})(EComponentType || (EComponentType = {}));\n/** @internal */\nvar EShaderType;\n(function (EShaderType) {\n    EShaderType[EShaderType[\"FRAGMENT\"] = 35632] = \"FRAGMENT\";\n    EShaderType[EShaderType[\"VERTEX\"] = 35633] = \"VERTEX\";\n})(EShaderType || (EShaderType = {}));\n/** @internal */\nvar EParameterType;\n(function (EParameterType) {\n    EParameterType[EParameterType[\"BYTE\"] = 5120] = \"BYTE\";\n    EParameterType[EParameterType[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n    EParameterType[EParameterType[\"SHORT\"] = 5122] = \"SHORT\";\n    EParameterType[EParameterType[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n    EParameterType[EParameterType[\"INT\"] = 5124] = \"INT\";\n    EParameterType[EParameterType[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n    EParameterType[EParameterType[\"FLOAT\"] = 5126] = \"FLOAT\";\n    EParameterType[EParameterType[\"FLOAT_VEC2\"] = 35664] = \"FLOAT_VEC2\";\n    EParameterType[EParameterType[\"FLOAT_VEC3\"] = 35665] = \"FLOAT_VEC3\";\n    EParameterType[EParameterType[\"FLOAT_VEC4\"] = 35666] = \"FLOAT_VEC4\";\n    EParameterType[EParameterType[\"INT_VEC2\"] = 35667] = \"INT_VEC2\";\n    EParameterType[EParameterType[\"INT_VEC3\"] = 35668] = \"INT_VEC3\";\n    EParameterType[EParameterType[\"INT_VEC4\"] = 35669] = \"INT_VEC4\";\n    EParameterType[EParameterType[\"BOOL\"] = 35670] = \"BOOL\";\n    EParameterType[EParameterType[\"BOOL_VEC2\"] = 35671] = \"BOOL_VEC2\";\n    EParameterType[EParameterType[\"BOOL_VEC3\"] = 35672] = \"BOOL_VEC3\";\n    EParameterType[EParameterType[\"BOOL_VEC4\"] = 35673] = \"BOOL_VEC4\";\n    EParameterType[EParameterType[\"FLOAT_MAT2\"] = 35674] = \"FLOAT_MAT2\";\n    EParameterType[EParameterType[\"FLOAT_MAT3\"] = 35675] = \"FLOAT_MAT3\";\n    EParameterType[EParameterType[\"FLOAT_MAT4\"] = 35676] = \"FLOAT_MAT4\";\n    EParameterType[EParameterType[\"SAMPLER_2D\"] = 35678] = \"SAMPLER_2D\";\n})(EParameterType || (EParameterType = {}));\n/** @internal */\nvar ETextureWrapMode;\n(function (ETextureWrapMode) {\n    ETextureWrapMode[ETextureWrapMode[\"CLAMP_TO_EDGE\"] = 33071] = \"CLAMP_TO_EDGE\";\n    ETextureWrapMode[ETextureWrapMode[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n    ETextureWrapMode[ETextureWrapMode[\"REPEAT\"] = 10497] = \"REPEAT\";\n})(ETextureWrapMode || (ETextureWrapMode = {}));\n/** @internal */\nvar ETextureFilterType;\n(function (ETextureFilterType) {\n    ETextureFilterType[ETextureFilterType[\"NEAREST\"] = 9728] = \"NEAREST\";\n    ETextureFilterType[ETextureFilterType[\"LINEAR\"] = 9728] = \"LINEAR\";\n    ETextureFilterType[ETextureFilterType[\"NEAREST_MIPMAP_NEAREST\"] = 9984] = \"NEAREST_MIPMAP_NEAREST\";\n    ETextureFilterType[ETextureFilterType[\"LINEAR_MIPMAP_NEAREST\"] = 9985] = \"LINEAR_MIPMAP_NEAREST\";\n    ETextureFilterType[ETextureFilterType[\"NEAREST_MIPMAP_LINEAR\"] = 9986] = \"NEAREST_MIPMAP_LINEAR\";\n    ETextureFilterType[ETextureFilterType[\"LINEAR_MIPMAP_LINEAR\"] = 9987] = \"LINEAR_MIPMAP_LINEAR\";\n})(ETextureFilterType || (ETextureFilterType = {}));\n/** @internal */\nvar ETextureFormat;\n(function (ETextureFormat) {\n    ETextureFormat[ETextureFormat[\"ALPHA\"] = 6406] = \"ALPHA\";\n    ETextureFormat[ETextureFormat[\"RGB\"] = 6407] = \"RGB\";\n    ETextureFormat[ETextureFormat[\"RGBA\"] = 6408] = \"RGBA\";\n    ETextureFormat[ETextureFormat[\"LUMINANCE\"] = 6409] = \"LUMINANCE\";\n    ETextureFormat[ETextureFormat[\"LUMINANCE_ALPHA\"] = 6410] = \"LUMINANCE_ALPHA\";\n})(ETextureFormat || (ETextureFormat = {}));\n/** @internal */\nvar ECullingType;\n(function (ECullingType) {\n    ECullingType[ECullingType[\"FRONT\"] = 1028] = \"FRONT\";\n    ECullingType[ECullingType[\"BACK\"] = 1029] = \"BACK\";\n    ECullingType[ECullingType[\"FRONT_AND_BACK\"] = 1032] = \"FRONT_AND_BACK\";\n})(ECullingType || (ECullingType = {}));\n/** @internal */\nvar EBlendingFunction;\n(function (EBlendingFunction) {\n    EBlendingFunction[EBlendingFunction[\"ZERO\"] = 0] = \"ZERO\";\n    EBlendingFunction[EBlendingFunction[\"ONE\"] = 1] = \"ONE\";\n    EBlendingFunction[EBlendingFunction[\"SRC_COLOR\"] = 768] = \"SRC_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_SRC_COLOR\"] = 769] = \"ONE_MINUS_SRC_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"DST_COLOR\"] = 774] = \"DST_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_DST_COLOR\"] = 775] = \"ONE_MINUS_DST_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"SRC_ALPHA\"] = 770] = \"SRC_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_SRC_ALPHA\"] = 771] = \"ONE_MINUS_SRC_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"DST_ALPHA\"] = 772] = \"DST_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_DST_ALPHA\"] = 773] = \"ONE_MINUS_DST_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"CONSTANT_COLOR\"] = 32769] = \"CONSTANT_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_CONSTANT_COLOR\"] = 32770] = \"ONE_MINUS_CONSTANT_COLOR\";\n    EBlendingFunction[EBlendingFunction[\"CONSTANT_ALPHA\"] = 32771] = \"CONSTANT_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"ONE_MINUS_CONSTANT_ALPHA\"] = 32772] = \"ONE_MINUS_CONSTANT_ALPHA\";\n    EBlendingFunction[EBlendingFunction[\"SRC_ALPHA_SATURATE\"] = 776] = \"SRC_ALPHA_SATURATE\";\n})(EBlendingFunction || (EBlendingFunction = {}));\n//# sourceMappingURL=glTFLoaderInterfaces.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZMb2FkZXJJbnRlcmZhY2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0NBQXdDO0FBQ3pDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtDQUFrQztBQUNuQztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUN6QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRDQUE0QztBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRDtBQUNqRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3Q0FBd0M7QUFDekM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0M7QUFDckM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzEuMC9nbFRGTG9hZGVySW50ZXJmYWNlcy5qcz9lZjM4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW51bXNcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdmFyIEVDb21wb25lbnRUeXBlO1xuKGZ1bmN0aW9uIChFQ29tcG9uZW50VHlwZSkge1xuICAgIEVDb21wb25lbnRUeXBlW0VDb21wb25lbnRUeXBlW1wiQllURVwiXSA9IDUxMjBdID0gXCJCWVRFXCI7XG4gICAgRUNvbXBvbmVudFR5cGVbRUNvbXBvbmVudFR5cGVbXCJVTlNJR05FRF9CWVRFXCJdID0gNTEyMV0gPSBcIlVOU0lHTkVEX0JZVEVcIjtcbiAgICBFQ29tcG9uZW50VHlwZVtFQ29tcG9uZW50VHlwZVtcIlNIT1JUXCJdID0gNTEyMl0gPSBcIlNIT1JUXCI7XG4gICAgRUNvbXBvbmVudFR5cGVbRUNvbXBvbmVudFR5cGVbXCJVTlNJR05FRF9TSE9SVFwiXSA9IDUxMjNdID0gXCJVTlNJR05FRF9TSE9SVFwiO1xuICAgIEVDb21wb25lbnRUeXBlW0VDb21wb25lbnRUeXBlW1wiRkxPQVRcIl0gPSA1MTI2XSA9IFwiRkxPQVRcIjtcbn0pKEVDb21wb25lbnRUeXBlIHx8IChFQ29tcG9uZW50VHlwZSA9IHt9KSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIEVTaGFkZXJUeXBlO1xuKGZ1bmN0aW9uIChFU2hhZGVyVHlwZSkge1xuICAgIEVTaGFkZXJUeXBlW0VTaGFkZXJUeXBlW1wiRlJBR01FTlRcIl0gPSAzNTYzMl0gPSBcIkZSQUdNRU5UXCI7XG4gICAgRVNoYWRlclR5cGVbRVNoYWRlclR5cGVbXCJWRVJURVhcIl0gPSAzNTYzM10gPSBcIlZFUlRFWFwiO1xufSkoRVNoYWRlclR5cGUgfHwgKEVTaGFkZXJUeXBlID0ge30pKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgRVBhcmFtZXRlclR5cGU7XG4oZnVuY3Rpb24gKEVQYXJhbWV0ZXJUeXBlKSB7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJCWVRFXCJdID0gNTEyMF0gPSBcIkJZVEVcIjtcbiAgICBFUGFyYW1ldGVyVHlwZVtFUGFyYW1ldGVyVHlwZVtcIlVOU0lHTkVEX0JZVEVcIl0gPSA1MTIxXSA9IFwiVU5TSUdORURfQllURVwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiU0hPUlRcIl0gPSA1MTIyXSA9IFwiU0hPUlRcIjtcbiAgICBFUGFyYW1ldGVyVHlwZVtFUGFyYW1ldGVyVHlwZVtcIlVOU0lHTkVEX1NIT1JUXCJdID0gNTEyM10gPSBcIlVOU0lHTkVEX1NIT1JUXCI7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJJTlRcIl0gPSA1MTI0XSA9IFwiSU5UXCI7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJVTlNJR05FRF9JTlRcIl0gPSA1MTI1XSA9IFwiVU5TSUdORURfSU5UXCI7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJGTE9BVFwiXSA9IDUxMjZdID0gXCJGTE9BVFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfVkVDMlwiXSA9IDM1NjY0XSA9IFwiRkxPQVRfVkVDMlwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfVkVDM1wiXSA9IDM1NjY1XSA9IFwiRkxPQVRfVkVDM1wiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfVkVDNFwiXSA9IDM1NjY2XSA9IFwiRkxPQVRfVkVDNFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiSU5UX1ZFQzJcIl0gPSAzNTY2N10gPSBcIklOVF9WRUMyXCI7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJJTlRfVkVDM1wiXSA9IDM1NjY4XSA9IFwiSU5UX1ZFQzNcIjtcbiAgICBFUGFyYW1ldGVyVHlwZVtFUGFyYW1ldGVyVHlwZVtcIklOVF9WRUM0XCJdID0gMzU2NjldID0gXCJJTlRfVkVDNFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiQk9PTFwiXSA9IDM1NjcwXSA9IFwiQk9PTFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiQk9PTF9WRUMyXCJdID0gMzU2NzFdID0gXCJCT09MX1ZFQzJcIjtcbiAgICBFUGFyYW1ldGVyVHlwZVtFUGFyYW1ldGVyVHlwZVtcIkJPT0xfVkVDM1wiXSA9IDM1NjcyXSA9IFwiQk9PTF9WRUMzXCI7XG4gICAgRVBhcmFtZXRlclR5cGVbRVBhcmFtZXRlclR5cGVbXCJCT09MX1ZFQzRcIl0gPSAzNTY3M10gPSBcIkJPT0xfVkVDNFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfTUFUMlwiXSA9IDM1Njc0XSA9IFwiRkxPQVRfTUFUMlwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfTUFUM1wiXSA9IDM1Njc1XSA9IFwiRkxPQVRfTUFUM1wiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiRkxPQVRfTUFUNFwiXSA9IDM1Njc2XSA9IFwiRkxPQVRfTUFUNFwiO1xuICAgIEVQYXJhbWV0ZXJUeXBlW0VQYXJhbWV0ZXJUeXBlW1wiU0FNUExFUl8yRFwiXSA9IDM1Njc4XSA9IFwiU0FNUExFUl8yRFwiO1xufSkoRVBhcmFtZXRlclR5cGUgfHwgKEVQYXJhbWV0ZXJUeXBlID0ge30pKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgRVRleHR1cmVXcmFwTW9kZTtcbihmdW5jdGlvbiAoRVRleHR1cmVXcmFwTW9kZSkge1xuICAgIEVUZXh0dXJlV3JhcE1vZGVbRVRleHR1cmVXcmFwTW9kZVtcIkNMQU1QX1RPX0VER0VcIl0gPSAzMzA3MV0gPSBcIkNMQU1QX1RPX0VER0VcIjtcbiAgICBFVGV4dHVyZVdyYXBNb2RlW0VUZXh0dXJlV3JhcE1vZGVbXCJNSVJST1JFRF9SRVBFQVRcIl0gPSAzMzY0OF0gPSBcIk1JUlJPUkVEX1JFUEVBVFwiO1xuICAgIEVUZXh0dXJlV3JhcE1vZGVbRVRleHR1cmVXcmFwTW9kZVtcIlJFUEVBVFwiXSA9IDEwNDk3XSA9IFwiUkVQRUFUXCI7XG59KShFVGV4dHVyZVdyYXBNb2RlIHx8IChFVGV4dHVyZVdyYXBNb2RlID0ge30pKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgRVRleHR1cmVGaWx0ZXJUeXBlO1xuKGZ1bmN0aW9uIChFVGV4dHVyZUZpbHRlclR5cGUpIHtcbiAgICBFVGV4dHVyZUZpbHRlclR5cGVbRVRleHR1cmVGaWx0ZXJUeXBlW1wiTkVBUkVTVFwiXSA9IDk3MjhdID0gXCJORUFSRVNUXCI7XG4gICAgRVRleHR1cmVGaWx0ZXJUeXBlW0VUZXh0dXJlRmlsdGVyVHlwZVtcIkxJTkVBUlwiXSA9IDk3MjhdID0gXCJMSU5FQVJcIjtcbiAgICBFVGV4dHVyZUZpbHRlclR5cGVbRVRleHR1cmVGaWx0ZXJUeXBlW1wiTkVBUkVTVF9NSVBNQVBfTkVBUkVTVFwiXSA9IDk5ODRdID0gXCJORUFSRVNUX01JUE1BUF9ORUFSRVNUXCI7XG4gICAgRVRleHR1cmVGaWx0ZXJUeXBlW0VUZXh0dXJlRmlsdGVyVHlwZVtcIkxJTkVBUl9NSVBNQVBfTkVBUkVTVFwiXSA9IDk5ODVdID0gXCJMSU5FQVJfTUlQTUFQX05FQVJFU1RcIjtcbiAgICBFVGV4dHVyZUZpbHRlclR5cGVbRVRleHR1cmVGaWx0ZXJUeXBlW1wiTkVBUkVTVF9NSVBNQVBfTElORUFSXCJdID0gOTk4Nl0gPSBcIk5FQVJFU1RfTUlQTUFQX0xJTkVBUlwiO1xuICAgIEVUZXh0dXJlRmlsdGVyVHlwZVtFVGV4dHVyZUZpbHRlclR5cGVbXCJMSU5FQVJfTUlQTUFQX0xJTkVBUlwiXSA9IDk5ODddID0gXCJMSU5FQVJfTUlQTUFQX0xJTkVBUlwiO1xufSkoRVRleHR1cmVGaWx0ZXJUeXBlIHx8IChFVGV4dHVyZUZpbHRlclR5cGUgPSB7fSkpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBFVGV4dHVyZUZvcm1hdDtcbihmdW5jdGlvbiAoRVRleHR1cmVGb3JtYXQpIHtcbiAgICBFVGV4dHVyZUZvcm1hdFtFVGV4dHVyZUZvcm1hdFtcIkFMUEhBXCJdID0gNjQwNl0gPSBcIkFMUEhBXCI7XG4gICAgRVRleHR1cmVGb3JtYXRbRVRleHR1cmVGb3JtYXRbXCJSR0JcIl0gPSA2NDA3XSA9IFwiUkdCXCI7XG4gICAgRVRleHR1cmVGb3JtYXRbRVRleHR1cmVGb3JtYXRbXCJSR0JBXCJdID0gNjQwOF0gPSBcIlJHQkFcIjtcbiAgICBFVGV4dHVyZUZvcm1hdFtFVGV4dHVyZUZvcm1hdFtcIkxVTUlOQU5DRVwiXSA9IDY0MDldID0gXCJMVU1JTkFOQ0VcIjtcbiAgICBFVGV4dHVyZUZvcm1hdFtFVGV4dHVyZUZvcm1hdFtcIkxVTUlOQU5DRV9BTFBIQVwiXSA9IDY0MTBdID0gXCJMVU1JTkFOQ0VfQUxQSEFcIjtcbn0pKEVUZXh0dXJlRm9ybWF0IHx8IChFVGV4dHVyZUZvcm1hdCA9IHt9KSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIEVDdWxsaW5nVHlwZTtcbihmdW5jdGlvbiAoRUN1bGxpbmdUeXBlKSB7XG4gICAgRUN1bGxpbmdUeXBlW0VDdWxsaW5nVHlwZVtcIkZST05UXCJdID0gMTAyOF0gPSBcIkZST05UXCI7XG4gICAgRUN1bGxpbmdUeXBlW0VDdWxsaW5nVHlwZVtcIkJBQ0tcIl0gPSAxMDI5XSA9IFwiQkFDS1wiO1xuICAgIEVDdWxsaW5nVHlwZVtFQ3VsbGluZ1R5cGVbXCJGUk9OVF9BTkRfQkFDS1wiXSA9IDEwMzJdID0gXCJGUk9OVF9BTkRfQkFDS1wiO1xufSkoRUN1bGxpbmdUeXBlIHx8IChFQ3VsbGluZ1R5cGUgPSB7fSkpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBFQmxlbmRpbmdGdW5jdGlvbjtcbihmdW5jdGlvbiAoRUJsZW5kaW5nRnVuY3Rpb24pIHtcbiAgICBFQmxlbmRpbmdGdW5jdGlvbltFQmxlbmRpbmdGdW5jdGlvbltcIlpFUk9cIl0gPSAwXSA9IFwiWkVST1wiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiT05FXCJdID0gMV0gPSBcIk9ORVwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiU1JDX0NPTE9SXCJdID0gNzY4XSA9IFwiU1JDX0NPTE9SXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfU1JDX0NPTE9SXCJdID0gNzY5XSA9IFwiT05FX01JTlVTX1NSQ19DT0xPUlwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiRFNUX0NPTE9SXCJdID0gNzc0XSA9IFwiRFNUX0NPTE9SXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfRFNUX0NPTE9SXCJdID0gNzc1XSA9IFwiT05FX01JTlVTX0RTVF9DT0xPUlwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiU1JDX0FMUEhBXCJdID0gNzcwXSA9IFwiU1JDX0FMUEhBXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfU1JDX0FMUEhBXCJdID0gNzcxXSA9IFwiT05FX01JTlVTX1NSQ19BTFBIQVwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiRFNUX0FMUEhBXCJdID0gNzcyXSA9IFwiRFNUX0FMUEhBXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfRFNUX0FMUEhBXCJdID0gNzczXSA9IFwiT05FX01JTlVTX0RTVF9BTFBIQVwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiQ09OU1RBTlRfQ09MT1JcIl0gPSAzMjc2OV0gPSBcIkNPTlNUQU5UX0NPTE9SXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfQ09OU1RBTlRfQ09MT1JcIl0gPSAzMjc3MF0gPSBcIk9ORV9NSU5VU19DT05TVEFOVF9DT0xPUlwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiQ09OU1RBTlRfQUxQSEFcIl0gPSAzMjc3MV0gPSBcIkNPTlNUQU5UX0FMUEhBXCI7XG4gICAgRUJsZW5kaW5nRnVuY3Rpb25bRUJsZW5kaW5nRnVuY3Rpb25bXCJPTkVfTUlOVVNfQ09OU1RBTlRfQUxQSEFcIl0gPSAzMjc3Ml0gPSBcIk9ORV9NSU5VU19DT05TVEFOVF9BTFBIQVwiO1xuICAgIEVCbGVuZGluZ0Z1bmN0aW9uW0VCbGVuZGluZ0Z1bmN0aW9uW1wiU1JDX0FMUEhBX1NBVFVSQVRFXCJdID0gNzc2XSA9IFwiU1JDX0FMUEhBX1NBVFVSQVRFXCI7XG59KShFQmxlbmRpbmdGdW5jdGlvbiB8fCAoRUJsZW5kaW5nRnVuY3Rpb24gPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2xURkxvYWRlckludGVyZmFjZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js ***!
  \*********************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFUtils: () => (/* binding */ GLTFUtils)\n/* harmony export */ });\n/* harmony import */ var _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFLoaderInterfaces.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Materials/effect.js */ \"@babylonjs/core/Materials/effect.js\");\n/* harmony import */ var _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Materials/shaderMaterial.js */ \"@babylonjs/core/Materials/shaderMaterial.js\");\n/* harmony import */ var _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/texture.js */ \"@babylonjs/core/Materials/Textures/texture.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__]);\n([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n/**\n * Utils functions for GLTF\n * @internal\n * @deprecated\n */\nclass GLTFUtils {\n    /**\n     * Sets the given \"parameter\" matrix\n     * @param scene the Scene object\n     * @param source the source node where to pick the matrix\n     * @param parameter the GLTF technique parameter\n     * @param uniformName the name of the shader's uniform\n     * @param shaderMaterial the shader material\n     */\n    static SetMatrix(scene, source, parameter, uniformName, shaderMaterial) {\n        let mat = null;\n        if (parameter.semantic === \"MODEL\") {\n            mat = source.getWorldMatrix();\n        }\n        else if (parameter.semantic === \"PROJECTION\") {\n            mat = scene.getProjectionMatrix();\n        }\n        else if (parameter.semantic === \"VIEW\") {\n            mat = scene.getViewMatrix();\n        }\n        else if (parameter.semantic === \"MODELVIEWINVERSETRANSPOSE\") {\n            mat = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Transpose(source.getWorldMatrix().multiply(scene.getViewMatrix()).invert());\n        }\n        else if (parameter.semantic === \"MODELVIEW\") {\n            mat = source.getWorldMatrix().multiply(scene.getViewMatrix());\n        }\n        else if (parameter.semantic === \"MODELVIEWPROJECTION\") {\n            mat = source.getWorldMatrix().multiply(scene.getTransformMatrix());\n        }\n        else if (parameter.semantic === \"MODELINVERSE\") {\n            mat = source.getWorldMatrix().invert();\n        }\n        else if (parameter.semantic === \"VIEWINVERSE\") {\n            mat = scene.getViewMatrix().invert();\n        }\n        else if (parameter.semantic === \"PROJECTIONINVERSE\") {\n            mat = scene.getProjectionMatrix().invert();\n        }\n        else if (parameter.semantic === \"MODELVIEWINVERSE\") {\n            mat = source.getWorldMatrix().multiply(scene.getViewMatrix()).invert();\n        }\n        else if (parameter.semantic === \"MODELVIEWPROJECTIONINVERSE\") {\n            mat = source.getWorldMatrix().multiply(scene.getTransformMatrix()).invert();\n        }\n        else if (parameter.semantic === \"MODELINVERSETRANSPOSE\") {\n            mat = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Transpose(source.getWorldMatrix().invert());\n        }\n        if (mat) {\n            switch (parameter.type) {\n                case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT2:\n                    shaderMaterial.setMatrix2x2(uniformName, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.GetAsMatrix2x2(mat));\n                    break;\n                case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT3:\n                    shaderMaterial.setMatrix3x3(uniformName, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.GetAsMatrix3x3(mat));\n                    break;\n                case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_MAT4:\n                    shaderMaterial.setMatrix(uniformName, mat);\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    /**\n     * Sets the given \"parameter\" matrix\n     * @param shaderMaterial the shader material\n     * @param uniform the name of the shader's uniform\n     * @param value the value of the uniform\n     * @param type the uniform's type (EParameterType FLOAT, VEC2, VEC3 or VEC4)\n     * @returns true if set, else false\n     */\n    static SetUniform(shaderMaterial, uniform, value, type) {\n        switch (type) {\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT:\n                shaderMaterial.setFloat(uniform, value);\n                return true;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_VEC2:\n                shaderMaterial.setVector2(uniform, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector2.FromArray(value));\n                return true;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_VEC3:\n                shaderMaterial.setVector3(uniform, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(value));\n                return true;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EParameterType.FLOAT_VEC4:\n                shaderMaterial.setVector4(uniform, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector4.FromArray(value));\n                return true;\n            default:\n                return false;\n        }\n    }\n    /**\n     * Returns the wrap mode of the texture\n     * @param mode the mode value\n     * @returns the wrap mode (TEXTURE_WRAP_ADDRESSMODE, MIRROR_ADDRESSMODE or CLAMP_ADDRESSMODE)\n     */\n    static GetWrapMode(mode) {\n        switch (mode) {\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureWrapMode.CLAMP_TO_EDGE:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.CLAMP_ADDRESSMODE;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureWrapMode.MIRRORED_REPEAT:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.MIRROR_ADDRESSMODE;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureWrapMode.REPEAT:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.WRAP_ADDRESSMODE;\n            default:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.WRAP_ADDRESSMODE;\n        }\n    }\n    /**\n     * Returns the byte stride giving an accessor\n     * @param accessor the GLTF accessor objet\n     * @returns the byte stride\n     */\n    static GetByteStrideFromType(accessor) {\n        // Needs this function since \"byteStride\" isn't requiered in glTF format\n        const type = accessor.type;\n        switch (type) {\n            case \"VEC2\":\n                return 2;\n            case \"VEC3\":\n                return 3;\n            case \"VEC4\":\n                return 4;\n            case \"MAT2\":\n                return 4;\n            case \"MAT3\":\n                return 9;\n            case \"MAT4\":\n                return 16;\n            default:\n                return 1;\n        }\n    }\n    /**\n     * Returns the texture filter mode giving a mode value\n     * @param mode the filter mode value\n     * @returns the filter mode (TODO - needs to be a type?)\n     */\n    static GetTextureFilterMode(mode) {\n        switch (mode) {\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.LINEAR:\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.LINEAR_MIPMAP_NEAREST:\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.LINEAR_MIPMAP_LINEAR:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.TRILINEAR_SAMPLINGMODE;\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.NEAREST:\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.ETextureFilterType.NEAREST_MIPMAP_NEAREST:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.NEAREST_SAMPLINGMODE;\n            default:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_5__.Texture.BILINEAR_SAMPLINGMODE;\n        }\n    }\n    static GetBufferFromBufferView(gltfRuntime, bufferView, byteOffset, byteLength, componentType) {\n        byteOffset = bufferView.byteOffset + byteOffset;\n        const loadedBufferView = gltfRuntime.loadedBufferViews[bufferView.buffer];\n        if (byteOffset + byteLength > loadedBufferView.byteLength) {\n            throw new Error(\"Buffer access is out of range\");\n        }\n        const buffer = loadedBufferView.buffer;\n        byteOffset += loadedBufferView.byteOffset;\n        switch (componentType) {\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EComponentType.BYTE:\n                return new Int8Array(buffer, byteOffset, byteLength);\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EComponentType.UNSIGNED_BYTE:\n                return new Uint8Array(buffer, byteOffset, byteLength);\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EComponentType.SHORT:\n                return new Int16Array(buffer, byteOffset, byteLength);\n            case _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.EComponentType.UNSIGNED_SHORT:\n                return new Uint16Array(buffer, byteOffset, byteLength);\n            default:\n                return new Float32Array(buffer, byteOffset, byteLength);\n        }\n    }\n    /**\n     * Returns a buffer from its accessor\n     * @param gltfRuntime the GLTF runtime\n     * @param accessor the GLTF accessor\n     * @returns an array buffer view\n     */\n    static GetBufferFromAccessor(gltfRuntime, accessor) {\n        const bufferView = gltfRuntime.bufferViews[accessor.bufferView];\n        const byteLength = accessor.count * GLTFUtils.GetByteStrideFromType(accessor);\n        return GLTFUtils.GetBufferFromBufferView(gltfRuntime, bufferView, accessor.byteOffset, byteLength, accessor.componentType);\n    }\n    /**\n     * Decodes a buffer view into a string\n     * @param view the buffer view\n     * @returns a string\n     */\n    static DecodeBufferToText(view) {\n        let result = \"\";\n        const length = view.byteLength;\n        for (let i = 0; i < length; ++i) {\n            result += String.fromCharCode(view[i]);\n        }\n        return result;\n    }\n    /**\n     * Returns the default material of gltf. Related to\n     * https://github.com/KhronosGroup/glTF/tree/master/specification/1.0#appendix-a-default-material\n     * @param scene the Babylon.js scene\n     * @returns the default Babylon material\n     */\n    static GetDefaultMaterial(scene) {\n        if (!GLTFUtils._DefaultMaterial) {\n            _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_3__.Effect.ShadersStore[\"GLTFDefaultMaterialVertexShader\"] = [\n                \"precision highp float;\",\n                \"\",\n                \"uniform mat4 worldView;\",\n                \"uniform mat4 projection;\",\n                \"\",\n                \"attribute vec3 position;\",\n                \"\",\n                \"void main(void)\",\n                \"{\",\n                \"    gl_Position = projection * worldView * vec4(position, 1.0);\",\n                \"}\",\n            ].join(\"\\n\");\n            _babylonjs_core_Materials_effect_js__WEBPACK_IMPORTED_MODULE_3__.Effect.ShadersStore[\"GLTFDefaultMaterialPixelShader\"] = [\n                \"precision highp float;\",\n                \"\",\n                \"uniform vec4 u_emission;\",\n                \"\",\n                \"void main(void)\",\n                \"{\",\n                \"    gl_FragColor = u_emission;\",\n                \"}\",\n            ].join(\"\\n\");\n            const shaderPath = {\n                vertex: \"GLTFDefaultMaterial\",\n                fragment: \"GLTFDefaultMaterial\",\n            };\n            const options = {\n                attributes: [\"position\"],\n                uniforms: [\"worldView\", \"projection\", \"u_emission\"],\n                samplers: new Array(),\n                needAlphaBlending: false,\n            };\n            GLTFUtils._DefaultMaterial = new _babylonjs_core_Materials_shaderMaterial_js__WEBPACK_IMPORTED_MODULE_4__.ShaderMaterial(\"GLTFDefaultMaterial\", scene, shaderPath, options);\n            GLTFUtils._DefaultMaterial.setColor4(\"u_emission\", new _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color4(0.5, 0.5, 0.5, 1.0));\n        }\n        return GLTFUtils._DefaultMaterial;\n    }\n}\n// The GLTF default material\nGLTFUtils._DefaultMaterial = null;\n//# sourceMappingURL=glTFLoaderUtils.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZMb2FkZXJVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWlIO0FBQ3hCO0FBQzVCO0FBQ0E7QUFDZ0I7QUFDTDtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdFQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0VBQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9FQUFjO0FBQ25DLDZEQUE2RCx3RUFBTTtBQUNuRTtBQUNBLHFCQUFxQixvRUFBYztBQUNuQyw2REFBNkQsd0VBQU07QUFDbkU7QUFDQSxxQkFBcUIsb0VBQWM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvRUFBYztBQUMvQjtBQUNBO0FBQ0EsaUJBQWlCLG9FQUFjO0FBQy9CLG1EQUFtRCx5RUFBTztBQUMxRDtBQUNBLGlCQUFpQixvRUFBYztBQUMvQixtREFBbUQseUVBQU87QUFDMUQ7QUFDQSxpQkFBaUIsb0VBQWM7QUFDL0IsbURBQW1ELHlFQUFPO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixzRUFBZ0I7QUFDakMsdUJBQXVCLGtGQUFPO0FBQzlCLGlCQUFpQixzRUFBZ0I7QUFDakMsdUJBQXVCLGtGQUFPO0FBQzlCLGlCQUFpQixzRUFBZ0I7QUFDakMsdUJBQXVCLGtGQUFPO0FBQzlCO0FBQ0EsdUJBQXVCLGtGQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdFQUFrQjtBQUNuQyxpQkFBaUIsd0VBQWtCO0FBQ25DLGlCQUFpQix3RUFBa0I7QUFDbkMsdUJBQXVCLGtGQUFPO0FBQzlCLGlCQUFpQix3RUFBa0I7QUFDbkMsaUJBQWlCLHdFQUFrQjtBQUNuQyx1QkFBdUIsa0ZBQU87QUFDOUI7QUFDQSx1QkFBdUIsa0ZBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvRUFBYztBQUMvQjtBQUNBLGlCQUFpQixvRUFBYztBQUMvQjtBQUNBLGlCQUFpQixvRUFBYztBQUMvQjtBQUNBLGlCQUFpQixvRUFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVFQUFNO0FBQ2xCLHVDQUF1QztBQUN2QztBQUNBLHdDQUF3QztBQUN4Qyx5Q0FBeUM7QUFDekM7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixnRkFBZ0Y7QUFDaEYsa0JBQWtCO0FBQ2xCO0FBQ0EsWUFBWSx1RUFBTTtBQUNsQix1Q0FBdUM7QUFDdkM7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQiwrQ0FBK0M7QUFDL0Msa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsdUZBQWM7QUFDM0QsbUVBQW1FLHVFQUFNO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8xLjAvZ2xURkxvYWRlclV0aWxzLmpzP2M0NzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVBhcmFtZXRlclR5cGUsIEVUZXh0dXJlV3JhcE1vZGUsIEVUZXh0dXJlRmlsdGVyVHlwZSwgRUNvbXBvbmVudFR5cGUgfSBmcm9tIFwiLi9nbFRGTG9hZGVySW50ZXJmYWNlcy5qc1wiO1xuaW1wb3J0IHsgVmVjdG9yMiwgVmVjdG9yMywgVmVjdG9yNCwgTWF0cml4IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3Rvci5qc1wiO1xuaW1wb3J0IHsgQ29sb3I0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yLmpzXCI7XG5pbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9lZmZlY3QuanNcIjtcbmltcG9ydCB7IFNoYWRlck1hdGVyaWFsIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvc2hhZGVyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy90ZXh0dXJlLmpzXCI7XG4vKipcbiAqIFV0aWxzIGZ1bmN0aW9ucyBmb3IgR0xURlxuICogQGludGVybmFsXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgY2xhc3MgR0xURlV0aWxzIHtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBnaXZlbiBcInBhcmFtZXRlclwiIG1hdHJpeFxuICAgICAqIEBwYXJhbSBzY2VuZSB0aGUgU2NlbmUgb2JqZWN0XG4gICAgICogQHBhcmFtIHNvdXJjZSB0aGUgc291cmNlIG5vZGUgd2hlcmUgdG8gcGljayB0aGUgbWF0cml4XG4gICAgICogQHBhcmFtIHBhcmFtZXRlciB0aGUgR0xURiB0ZWNobmlxdWUgcGFyYW1ldGVyXG4gICAgICogQHBhcmFtIHVuaWZvcm1OYW1lIHRoZSBuYW1lIG9mIHRoZSBzaGFkZXIncyB1bmlmb3JtXG4gICAgICogQHBhcmFtIHNoYWRlck1hdGVyaWFsIHRoZSBzaGFkZXIgbWF0ZXJpYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgU2V0TWF0cml4KHNjZW5lLCBzb3VyY2UsIHBhcmFtZXRlciwgdW5pZm9ybU5hbWUsIHNoYWRlck1hdGVyaWFsKSB7XG4gICAgICAgIGxldCBtYXQgPSBudWxsO1xuICAgICAgICBpZiAocGFyYW1ldGVyLnNlbWFudGljID09PSBcIk1PREVMXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNvdXJjZS5nZXRXb3JsZE1hdHJpeCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJQUk9KRUNUSU9OXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNjZW5lLmdldFByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiVklFV1wiKSB7XG4gICAgICAgICAgICBtYXQgPSBzY2VuZS5nZXRWaWV3TWF0cml4KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1ldGVyLnNlbWFudGljID09PSBcIk1PREVMVklFV0lOVkVSU0VUUkFOU1BPU0VcIikge1xuICAgICAgICAgICAgbWF0ID0gTWF0cml4LlRyYW5zcG9zZShzb3VyY2UuZ2V0V29ybGRNYXRyaXgoKS5tdWx0aXBseShzY2VuZS5nZXRWaWV3TWF0cml4KCkpLmludmVydCgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiTU9ERUxWSUVXXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNvdXJjZS5nZXRXb3JsZE1hdHJpeCgpLm11bHRpcGx5KHNjZW5lLmdldFZpZXdNYXRyaXgoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1ldGVyLnNlbWFudGljID09PSBcIk1PREVMVklFV1BST0pFQ1RJT05cIikge1xuICAgICAgICAgICAgbWF0ID0gc291cmNlLmdldFdvcmxkTWF0cml4KCkubXVsdGlwbHkoc2NlbmUuZ2V0VHJhbnNmb3JtTWF0cml4KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJNT0RFTElOVkVSU0VcIikge1xuICAgICAgICAgICAgbWF0ID0gc291cmNlLmdldFdvcmxkTWF0cml4KCkuaW52ZXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1ldGVyLnNlbWFudGljID09PSBcIlZJRVdJTlZFUlNFXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNjZW5lLmdldFZpZXdNYXRyaXgoKS5pbnZlcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiUFJPSkVDVElPTklOVkVSU0VcIikge1xuICAgICAgICAgICAgbWF0ID0gc2NlbmUuZ2V0UHJvamVjdGlvbk1hdHJpeCgpLmludmVydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmFtZXRlci5zZW1hbnRpYyA9PT0gXCJNT0RFTFZJRVdJTlZFUlNFXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNvdXJjZS5nZXRXb3JsZE1hdHJpeCgpLm11bHRpcGx5KHNjZW5lLmdldFZpZXdNYXRyaXgoKSkuaW52ZXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1ldGVyLnNlbWFudGljID09PSBcIk1PREVMVklFV1BST0pFQ1RJT05JTlZFUlNFXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IHNvdXJjZS5nZXRXb3JsZE1hdHJpeCgpLm11bHRpcGx5KHNjZW5lLmdldFRyYW5zZm9ybU1hdHJpeCgpKS5pbnZlcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbWV0ZXIuc2VtYW50aWMgPT09IFwiTU9ERUxJTlZFUlNFVFJBTlNQT1NFXCIpIHtcbiAgICAgICAgICAgIG1hdCA9IE1hdHJpeC5UcmFuc3Bvc2Uoc291cmNlLmdldFdvcmxkTWF0cml4KCkuaW52ZXJ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAocGFyYW1ldGVyLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEVQYXJhbWV0ZXJUeXBlLkZMT0FUX01BVDI6XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLnNldE1hdHJpeDJ4Mih1bmlmb3JtTmFtZSwgTWF0cml4LkdldEFzTWF0cml4MngyKG1hdCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVQYXJhbWV0ZXJUeXBlLkZMT0FUX01BVDM6XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLnNldE1hdHJpeDN4Myh1bmlmb3JtTmFtZSwgTWF0cml4LkdldEFzTWF0cml4M3gzKG1hdCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIEVQYXJhbWV0ZXJUeXBlLkZMT0FUX01BVDQ6XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLnNldE1hdHJpeCh1bmlmb3JtTmFtZSwgbWF0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZ2l2ZW4gXCJwYXJhbWV0ZXJcIiBtYXRyaXhcbiAgICAgKiBAcGFyYW0gc2hhZGVyTWF0ZXJpYWwgdGhlIHNoYWRlciBtYXRlcmlhbFxuICAgICAqIEBwYXJhbSB1bmlmb3JtIHRoZSBuYW1lIG9mIHRoZSBzaGFkZXIncyB1bmlmb3JtXG4gICAgICogQHBhcmFtIHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgdW5pZm9ybVxuICAgICAqIEBwYXJhbSB0eXBlIHRoZSB1bmlmb3JtJ3MgdHlwZSAoRVBhcmFtZXRlclR5cGUgRkxPQVQsIFZFQzIsIFZFQzMgb3IgVkVDNClcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHNldCwgZWxzZSBmYWxzZVxuICAgICAqL1xuICAgIHN0YXRpYyBTZXRVbmlmb3JtKHNoYWRlck1hdGVyaWFsLCB1bmlmb3JtLCB2YWx1ZSwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRVBhcmFtZXRlclR5cGUuRkxPQVQ6XG4gICAgICAgICAgICAgICAgc2hhZGVyTWF0ZXJpYWwuc2V0RmxvYXQodW5pZm9ybSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSBFUGFyYW1ldGVyVHlwZS5GTE9BVF9WRUMyOlxuICAgICAgICAgICAgICAgIHNoYWRlck1hdGVyaWFsLnNldFZlY3RvcjIodW5pZm9ybSwgVmVjdG9yMi5Gcm9tQXJyYXkodmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgRVBhcmFtZXRlclR5cGUuRkxPQVRfVkVDMzpcbiAgICAgICAgICAgICAgICBzaGFkZXJNYXRlcmlhbC5zZXRWZWN0b3IzKHVuaWZvcm0sIFZlY3RvcjMuRnJvbUFycmF5KHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjYXNlIEVQYXJhbWV0ZXJUeXBlLkZMT0FUX1ZFQzQ6XG4gICAgICAgICAgICAgICAgc2hhZGVyTWF0ZXJpYWwuc2V0VmVjdG9yNCh1bmlmb3JtLCBWZWN0b3I0LkZyb21BcnJheSh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgd3JhcCBtb2RlIG9mIHRoZSB0ZXh0dXJlXG4gICAgICogQHBhcmFtIG1vZGUgdGhlIG1vZGUgdmFsdWVcbiAgICAgKiBAcmV0dXJucyB0aGUgd3JhcCBtb2RlIChURVhUVVJFX1dSQVBfQUREUkVTU01PREUsIE1JUlJPUl9BRERSRVNTTU9ERSBvciBDTEFNUF9BRERSRVNTTU9ERSlcbiAgICAgKi9cbiAgICBzdGF0aWMgR2V0V3JhcE1vZGUobW9kZSkge1xuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgRVRleHR1cmVXcmFwTW9kZS5DTEFNUF9UT19FREdFOlxuICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLkNMQU1QX0FERFJFU1NNT0RFO1xuICAgICAgICAgICAgY2FzZSBFVGV4dHVyZVdyYXBNb2RlLk1JUlJPUkVEX1JFUEVBVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5NSVJST1JfQUREUkVTU01PREU7XG4gICAgICAgICAgICBjYXNlIEVUZXh0dXJlV3JhcE1vZGUuUkVQRUFUOlxuICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLldSQVBfQUREUkVTU01PREU7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLldSQVBfQUREUkVTU01PREU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYnl0ZSBzdHJpZGUgZ2l2aW5nIGFuIGFjY2Vzc29yXG4gICAgICogQHBhcmFtIGFjY2Vzc29yIHRoZSBHTFRGIGFjY2Vzc29yIG9iamV0XG4gICAgICogQHJldHVybnMgdGhlIGJ5dGUgc3RyaWRlXG4gICAgICovXG4gICAgc3RhdGljIEdldEJ5dGVTdHJpZGVGcm9tVHlwZShhY2Nlc3Nvcikge1xuICAgICAgICAvLyBOZWVkcyB0aGlzIGZ1bmN0aW9uIHNpbmNlIFwiYnl0ZVN0cmlkZVwiIGlzbid0IHJlcXVpZXJlZCBpbiBnbFRGIGZvcm1hdFxuICAgICAgICBjb25zdCB0eXBlID0gYWNjZXNzb3IudHlwZTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiVkVDMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgY2FzZSBcIlZFQzNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMztcbiAgICAgICAgICAgIGNhc2UgXCJWRUM0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICBjYXNlIFwiTUFUMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgY2FzZSBcIk1BVDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gOTtcbiAgICAgICAgICAgIGNhc2UgXCJNQVQ0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE2O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0ZXh0dXJlIGZpbHRlciBtb2RlIGdpdmluZyBhIG1vZGUgdmFsdWVcbiAgICAgKiBAcGFyYW0gbW9kZSB0aGUgZmlsdGVyIG1vZGUgdmFsdWVcbiAgICAgKiBAcmV0dXJucyB0aGUgZmlsdGVyIG1vZGUgKFRPRE8gLSBuZWVkcyB0byBiZSBhIHR5cGU/KVxuICAgICAqL1xuICAgIHN0YXRpYyBHZXRUZXh0dXJlRmlsdGVyTW9kZShtb2RlKSB7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBFVGV4dHVyZUZpbHRlclR5cGUuTElORUFSOlxuICAgICAgICAgICAgY2FzZSBFVGV4dHVyZUZpbHRlclR5cGUuTElORUFSX01JUE1BUF9ORUFSRVNUOlxuICAgICAgICAgICAgY2FzZSBFVGV4dHVyZUZpbHRlclR5cGUuTElORUFSX01JUE1BUF9MSU5FQVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuVFJJTElORUFSX1NBTVBMSU5HTU9ERTtcbiAgICAgICAgICAgIGNhc2UgRVRleHR1cmVGaWx0ZXJUeXBlLk5FQVJFU1Q6XG4gICAgICAgICAgICBjYXNlIEVUZXh0dXJlRmlsdGVyVHlwZS5ORUFSRVNUX01JUE1BUF9ORUFSRVNUOlxuICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfU0FNUExJTkdNT0RFO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5CSUxJTkVBUl9TQU1QTElOR01PREU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIEdldEJ1ZmZlckZyb21CdWZmZXJWaWV3KGdsdGZSdW50aW1lLCBidWZmZXJWaWV3LCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBjb21wb25lbnRUeXBlKSB7XG4gICAgICAgIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0O1xuICAgICAgICBjb25zdCBsb2FkZWRCdWZmZXJWaWV3ID0gZ2x0ZlJ1bnRpbWUubG9hZGVkQnVmZmVyVmlld3NbYnVmZmVyVmlldy5idWZmZXJdO1xuICAgICAgICBpZiAoYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGggPiBsb2FkZWRCdWZmZXJWaWV3LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJ1ZmZlciBhY2Nlc3MgaXMgb3V0IG9mIHJhbmdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGxvYWRlZEJ1ZmZlclZpZXcuYnVmZmVyO1xuICAgICAgICBieXRlT2Zmc2V0ICs9IGxvYWRlZEJ1ZmZlclZpZXcuYnl0ZU9mZnNldDtcbiAgICAgICAgc3dpdGNoIChjb21wb25lbnRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIEVDb21wb25lbnRUeXBlLkJZVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQ4QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGNhc2UgRUNvbXBvbmVudFR5cGUuVU5TSUdORURfQllURTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGNhc2UgRUNvbXBvbmVudFR5cGUuU0hPUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBjYXNlIEVDb21wb25lbnRUeXBlLlVOU0lHTkVEX1NIT1JUOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgYnVmZmVyIGZyb20gaXRzIGFjY2Vzc29yXG4gICAgICogQHBhcmFtIGdsdGZSdW50aW1lIHRoZSBHTFRGIHJ1bnRpbWVcbiAgICAgKiBAcGFyYW0gYWNjZXNzb3IgdGhlIEdMVEYgYWNjZXNzb3JcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBidWZmZXIgdmlld1xuICAgICAqL1xuICAgIHN0YXRpYyBHZXRCdWZmZXJGcm9tQWNjZXNzb3IoZ2x0ZlJ1bnRpbWUsIGFjY2Vzc29yKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlclZpZXcgPSBnbHRmUnVudGltZS5idWZmZXJWaWV3c1thY2Nlc3Nvci5idWZmZXJWaWV3XTtcbiAgICAgICAgY29uc3QgYnl0ZUxlbmd0aCA9IGFjY2Vzc29yLmNvdW50ICogR0xURlV0aWxzLkdldEJ5dGVTdHJpZGVGcm9tVHlwZShhY2Nlc3Nvcik7XG4gICAgICAgIHJldHVybiBHTFRGVXRpbHMuR2V0QnVmZmVyRnJvbUJ1ZmZlclZpZXcoZ2x0ZlJ1bnRpbWUsIGJ1ZmZlclZpZXcsIGFjY2Vzc29yLmJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGEgYnVmZmVyIHZpZXcgaW50byBhIHN0cmluZ1xuICAgICAqIEBwYXJhbSB2aWV3IHRoZSBidWZmZXIgdmlld1xuICAgICAqIEByZXR1cm5zIGEgc3RyaW5nXG4gICAgICovXG4gICAgc3RhdGljIERlY29kZUJ1ZmZlclRvVGV4dCh2aWV3KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBjb25zdCBsZW5ndGggPSB2aWV3LmJ5dGVMZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgZ2x0Zi4gUmVsYXRlZCB0b1xuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzEuMCNhcHBlbmRpeC1hLWRlZmF1bHQtbWF0ZXJpYWxcbiAgICAgKiBAcGFyYW0gc2NlbmUgdGhlIEJhYnlsb24uanMgc2NlbmVcbiAgICAgKiBAcmV0dXJucyB0aGUgZGVmYXVsdCBCYWJ5bG9uIG1hdGVyaWFsXG4gICAgICovXG4gICAgc3RhdGljIEdldERlZmF1bHRNYXRlcmlhbChzY2VuZSkge1xuICAgICAgICBpZiAoIUdMVEZVdGlscy5fRGVmYXVsdE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBFZmZlY3QuU2hhZGVyc1N0b3JlW1wiR0xURkRlZmF1bHRNYXRlcmlhbFZlcnRleFNoYWRlclwiXSA9IFtcbiAgICAgICAgICAgICAgICBcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgIFwidW5pZm9ybSBtYXQ0IHdvcmxkVmlldztcIixcbiAgICAgICAgICAgICAgICBcInVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uO1wiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgXCJhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgICAgIFwidm9pZCBtYWluKHZvaWQpXCIsXG4gICAgICAgICAgICAgICAgXCJ7XCIsXG4gICAgICAgICAgICAgICAgXCIgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uICogd29ybGRWaWV3ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcIixcbiAgICAgICAgICAgICAgICBcIn1cIixcbiAgICAgICAgICAgIF0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgIEVmZmVjdC5TaGFkZXJzU3RvcmVbXCJHTFRGRGVmYXVsdE1hdGVyaWFsUGl4ZWxTaGFkZXJcIl0gPSBbXG4gICAgICAgICAgICAgICAgXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgICBcInVuaWZvcm0gdmVjNCB1X2VtaXNzaW9uO1wiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgXCJ2b2lkIG1haW4odm9pZClcIixcbiAgICAgICAgICAgICAgICBcIntcIixcbiAgICAgICAgICAgICAgICBcIiAgICBnbF9GcmFnQ29sb3IgPSB1X2VtaXNzaW9uO1wiLFxuICAgICAgICAgICAgICAgIFwifVwiLFxuICAgICAgICAgICAgXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgY29uc3Qgc2hhZGVyUGF0aCA9IHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXg6IFwiR0xURkRlZmF1bHRNYXRlcmlhbFwiLFxuICAgICAgICAgICAgICAgIGZyYWdtZW50OiBcIkdMVEZEZWZhdWx0TWF0ZXJpYWxcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcInBvc2l0aW9uXCJdLFxuICAgICAgICAgICAgICAgIHVuaWZvcm1zOiBbXCJ3b3JsZFZpZXdcIiwgXCJwcm9qZWN0aW9uXCIsIFwidV9lbWlzc2lvblwiXSxcbiAgICAgICAgICAgICAgICBzYW1wbGVyczogbmV3IEFycmF5KCksXG4gICAgICAgICAgICAgICAgbmVlZEFscGhhQmxlbmRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEdMVEZVdGlscy5fRGVmYXVsdE1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsKFwiR0xURkRlZmF1bHRNYXRlcmlhbFwiLCBzY2VuZSwgc2hhZGVyUGF0aCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBHTFRGVXRpbHMuX0RlZmF1bHRNYXRlcmlhbC5zZXRDb2xvcjQoXCJ1X2VtaXNzaW9uXCIsIG5ldyBDb2xvcjQoMC41LCAwLjUsIDAuNSwgMS4wKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdMVEZVdGlscy5fRGVmYXVsdE1hdGVyaWFsO1xuICAgIH1cbn1cbi8vIFRoZSBHTFRGIGRlZmF1bHQgbWF0ZXJpYWxcbkdMVEZVdGlscy5fRGVmYXVsdE1hdGVyaWFsID0gbnVsbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsVEZMb2FkZXJVdGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/glTFMaterialsCommonExtension.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/glTFMaterialsCommonExtension.js ***!
  \**********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFMaterialsCommonExtension: () => (/* binding */ GLTFMaterialsCommonExtension)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\n/* harmony import */ var _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Materials/material.js */ \"@babylonjs/core/Materials/material.js\");\n/* harmony import */ var _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Materials/standardMaterial.js */ \"@babylonjs/core/Materials/standardMaterial.js\");\n/* harmony import */ var _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core/Lights/hemisphericLight.js */ \"@babylonjs/core/Lights/hemisphericLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/Lights/directionalLight.js */ \"@babylonjs/core/Lights/directionalLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Lights/pointLight.js */ \"@babylonjs/core/Lights/pointLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Lights/spotLight.js */ \"@babylonjs/core/Lights/spotLight.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_9__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n/**\n * @internal\n * @deprecated\n */\nclass GLTFMaterialsCommonExtension extends _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoaderExtension {\n    constructor() {\n        super(\"KHR_materials_common\");\n    }\n    loadRuntimeExtensionsAsync(gltfRuntime) {\n        if (!gltfRuntime.extensions) {\n            return false;\n        }\n        const extension = gltfRuntime.extensions[this.name];\n        if (!extension) {\n            return false;\n        }\n        // Create lights\n        const lights = extension.lights;\n        if (lights) {\n            for (const thing in lights) {\n                const light = lights[thing];\n                switch (light.type) {\n                    case \"ambient\": {\n                        const ambientLight = new _babylonjs_core_Lights_hemisphericLight_js__WEBPACK_IMPORTED_MODULE_6__.HemisphericLight(light.name, new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 1, 0), gltfRuntime.scene);\n                        const ambient = light.ambient;\n                        if (ambient) {\n                            ambientLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(ambient.color || [1, 1, 1]);\n                        }\n                        break;\n                    }\n                    case \"point\": {\n                        const pointLight = new _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_8__.PointLight(light.name, new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(10, 10, 10), gltfRuntime.scene);\n                        const point = light.point;\n                        if (point) {\n                            pointLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(point.color || [1, 1, 1]);\n                        }\n                        break;\n                    }\n                    case \"directional\": {\n                        const dirLight = new _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_7__.DirectionalLight(light.name, new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, -1, 0), gltfRuntime.scene);\n                        const directional = light.directional;\n                        if (directional) {\n                            dirLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(directional.color || [1, 1, 1]);\n                        }\n                        break;\n                    }\n                    case \"spot\": {\n                        const spot = light.spot;\n                        if (spot) {\n                            const spotLight = new _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_9__.SpotLight(light.name, new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, 10, 0), new _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3(0, -1, 0), spot.fallOffAngle || Math.PI, spot.fallOffExponent || 0.0, gltfRuntime.scene);\n                            spotLight.diffuse = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(spot.color || [1, 1, 1]);\n                        }\n                        break;\n                    }\n                    default:\n                        _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.Warn('GLTF Material Common extension: light type \"' + light.type + \" not supported\");\n                        break;\n                }\n            }\n        }\n        return false;\n    }\n    loadMaterialAsync(gltfRuntime, id, onSuccess, onError) {\n        const material = gltfRuntime.materials[id];\n        if (!material || !material.extensions) {\n            return false;\n        }\n        const extension = material.extensions[this.name];\n        if (!extension) {\n            return false;\n        }\n        const standardMaterial = new _babylonjs_core_Materials_standardMaterial_js__WEBPACK_IMPORTED_MODULE_5__.StandardMaterial(id, gltfRuntime.scene);\n        standardMaterial.sideOrientation = _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_4__.Material.CounterClockWiseSideOrientation;\n        if (extension.technique === \"CONSTANT\") {\n            standardMaterial.disableLighting = true;\n        }\n        standardMaterial.backFaceCulling = extension.doubleSided === undefined ? false : !extension.doubleSided;\n        standardMaterial.alpha = extension.values.transparency === undefined ? 1.0 : extension.values.transparency;\n        standardMaterial.specularPower = extension.values.shininess === undefined ? 0.0 : extension.values.shininess;\n        // Ambient\n        if (typeof extension.values.ambient === \"string\") {\n            this._loadTexture(gltfRuntime, extension.values.ambient, standardMaterial, \"ambientTexture\", onError);\n        }\n        else {\n            standardMaterial.ambientColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(extension.values.ambient || [0, 0, 0]);\n        }\n        // Diffuse\n        if (typeof extension.values.diffuse === \"string\") {\n            this._loadTexture(gltfRuntime, extension.values.diffuse, standardMaterial, \"diffuseTexture\", onError);\n        }\n        else {\n            standardMaterial.diffuseColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(extension.values.diffuse || [0, 0, 0]);\n        }\n        // Emission\n        if (typeof extension.values.emission === \"string\") {\n            this._loadTexture(gltfRuntime, extension.values.emission, standardMaterial, \"emissiveTexture\", onError);\n        }\n        else {\n            standardMaterial.emissiveColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(extension.values.emission || [0, 0, 0]);\n        }\n        // Specular\n        if (typeof extension.values.specular === \"string\") {\n            this._loadTexture(gltfRuntime, extension.values.specular, standardMaterial, \"specularTexture\", onError);\n        }\n        else {\n            standardMaterial.specularColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(extension.values.specular || [0, 0, 0]);\n        }\n        return true;\n    }\n    _loadTexture(gltfRuntime, id, material, propertyPath, onError) {\n        // Create buffer from texture url\n        _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoaderBase.LoadTextureBufferAsync(gltfRuntime, id, (buffer) => {\n            // Create texture from buffer\n            _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoaderBase.CreateTextureAsync(gltfRuntime, id, buffer, (texture) => (material[propertyPath] = texture));\n        }, onError);\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(new GLTFMaterialsCommonExtension());\n//# sourceMappingURL=glTFMaterialsCommonExtension.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZNYXRlcmlhbHNDb21tb25FeHRlbnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0Y7QUFDbkI7QUFDRjtBQUNQO0FBQ1c7QUFDZ0I7QUFDSDtBQUNBO0FBQ1o7QUFDRjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJDQUEyQywrREFBbUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHdGQUFnQixpQkFBaUIseUVBQU87QUFDekY7QUFDQTtBQUNBLG1EQUFtRCx1RUFBTTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyw0RUFBVSxpQkFBaUIseUVBQU87QUFDakY7QUFDQTtBQUNBLGlEQUFpRCx1RUFBTTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx3RkFBZ0IsaUJBQWlCLHlFQUFPO0FBQ3JGO0FBQ0E7QUFDQSwrQ0FBK0MsdUVBQU07QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDBFQUFTLGlCQUFpQix5RUFBTyxnQkFBZ0IseUVBQU87QUFDMUcsZ0RBQWdELHVFQUFNO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdFQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywyRkFBZ0I7QUFDckQsMkNBQTJDLDJFQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdUVBQU07QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHVFQUFNO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx1RUFBTTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsdUVBQU07QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMERBQWM7QUFDdEI7QUFDQSxZQUFZLDBEQUFjO0FBQzFCLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQVU7QUFDVix3RCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2dsVEZNYXRlcmlhbHNDb21tb25FeHRlbnNpb24uanM/ODBlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyRXh0ZW5zaW9uLCBHTFRGTG9hZGVyQmFzZSwgR0xURkxvYWRlciB9IGZyb20gXCIuL2dsVEZMb2FkZXIuanNcIjtcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yLmpzXCI7XG5pbXBvcnQgeyBDb2xvcjMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3IuanNcIjtcbmltcG9ydCB7IFRvb2xzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3Rvb2xzLmpzXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL21hdGVyaWFsLmpzXCI7XG5pbXBvcnQgeyBTdGFuZGFyZE1hdGVyaWFsIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvc3RhbmRhcmRNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgSGVtaXNwaGVyaWNMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2hlbWlzcGhlcmljTGlnaHQuanNcIjtcbmltcG9ydCB7IERpcmVjdGlvbmFsTGlnaHQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9kaXJlY3Rpb25hbExpZ2h0LmpzXCI7XG5pbXBvcnQgeyBQb2ludExpZ2h0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvcG9pbnRMaWdodC5qc1wiO1xuaW1wb3J0IHsgU3BvdExpZ2h0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvc3BvdExpZ2h0LmpzXCI7XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IGNsYXNzIEdMVEZNYXRlcmlhbHNDb21tb25FeHRlbnNpb24gZXh0ZW5kcyBHTFRGTG9hZGVyRXh0ZW5zaW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJLSFJfbWF0ZXJpYWxzX2NvbW1vblwiKTtcbiAgICB9XG4gICAgbG9hZFJ1bnRpbWVFeHRlbnNpb25zQXN5bmMoZ2x0ZlJ1bnRpbWUpIHtcbiAgICAgICAgaWYgKCFnbHRmUnVudGltZS5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZ2x0ZlJ1bnRpbWUuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO1xuICAgICAgICBpZiAoIWV4dGVuc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBsaWdodHNcbiAgICAgICAgY29uc3QgbGlnaHRzID0gZXh0ZW5zaW9uLmxpZ2h0cztcbiAgICAgICAgaWYgKGxpZ2h0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0aGluZyBpbiBsaWdodHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaWdodCA9IGxpZ2h0c1t0aGluZ107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChsaWdodC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhbWJpZW50XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBIZW1pc3BoZXJpY0xpZ2h0KGxpZ2h0Lm5hbWUsIG5ldyBWZWN0b3IzKDAsIDEsIDApLCBnbHRmUnVudGltZS5zY2VuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbWJpZW50ID0gbGlnaHQuYW1iaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbWJpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1iaWVudExpZ2h0LmRpZmZ1c2UgPSBDb2xvcjMuRnJvbUFycmF5KGFtYmllbnQuY29sb3IgfHwgWzEsIDEsIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwb2ludFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludExpZ2h0ID0gbmV3IFBvaW50TGlnaHQobGlnaHQubmFtZSwgbmV3IFZlY3RvcjMoMTAsIDEwLCAxMCksIGdsdGZSdW50aW1lLnNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gbGlnaHQucG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludExpZ2h0LmRpZmZ1c2UgPSBDb2xvcjMuRnJvbUFycmF5KHBvaW50LmNvbG9yIHx8IFsxLCAxLCAxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlyZWN0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyTGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodChsaWdodC5uYW1lLCBuZXcgVmVjdG9yMygwLCAtMSwgMCksIGdsdGZSdW50aW1lLnNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsID0gbGlnaHQuZGlyZWN0aW9uYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJMaWdodC5kaWZmdXNlID0gQ29sb3IzLkZyb21BcnJheShkaXJlY3Rpb25hbC5jb2xvciB8fCBbMSwgMSwgMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNwb3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BvdCA9IGxpZ2h0LnNwb3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwb3RMaWdodCA9IG5ldyBTcG90TGlnaHQobGlnaHQubmFtZSwgbmV3IFZlY3RvcjMoMCwgMTAsIDApLCBuZXcgVmVjdG9yMygwLCAtMSwgMCksIHNwb3QuZmFsbE9mZkFuZ2xlIHx8IE1hdGguUEksIHNwb3QuZmFsbE9mZkV4cG9uZW50IHx8IDAuMCwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5kaWZmdXNlID0gQ29sb3IzLkZyb21BcnJheShzcG90LmNvbG9yIHx8IFsxLCAxLCAxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgVG9vbHMuV2FybignR0xURiBNYXRlcmlhbCBDb21tb24gZXh0ZW5zaW9uOiBsaWdodCB0eXBlIFwiJyArIGxpZ2h0LnR5cGUgKyBcIuKAnSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9hZE1hdGVyaWFsQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBnbHRmUnVudGltZS5tYXRlcmlhbHNbaWRdO1xuICAgICAgICBpZiAoIW1hdGVyaWFsIHx8ICFtYXRlcmlhbC5leHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gbWF0ZXJpYWwuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO1xuICAgICAgICBpZiAoIWV4dGVuc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YW5kYXJkTWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbChpZCwgZ2x0ZlJ1bnRpbWUuc2NlbmUpO1xuICAgICAgICBzdGFuZGFyZE1hdGVyaWFsLnNpZGVPcmllbnRhdGlvbiA9IE1hdGVyaWFsLkNvdW50ZXJDbG9ja1dpc2VTaWRlT3JpZW50YXRpb247XG4gICAgICAgIGlmIChleHRlbnNpb24udGVjaG5pcXVlID09PSBcIkNPTlNUQU5UXCIpIHtcbiAgICAgICAgICAgIHN0YW5kYXJkTWF0ZXJpYWwuZGlzYWJsZUxpZ2h0aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzdGFuZGFyZE1hdGVyaWFsLmJhY2tGYWNlQ3VsbGluZyA9IGV4dGVuc2lvbi5kb3VibGVTaWRlZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiAhZXh0ZW5zaW9uLmRvdWJsZVNpZGVkO1xuICAgICAgICBzdGFuZGFyZE1hdGVyaWFsLmFscGhhID0gZXh0ZW5zaW9uLnZhbHVlcy50cmFuc3BhcmVuY3kgPT09IHVuZGVmaW5lZCA/IDEuMCA6IGV4dGVuc2lvbi52YWx1ZXMudHJhbnNwYXJlbmN5O1xuICAgICAgICBzdGFuZGFyZE1hdGVyaWFsLnNwZWN1bGFyUG93ZXIgPSBleHRlbnNpb24udmFsdWVzLnNoaW5pbmVzcyA9PT0gdW5kZWZpbmVkID8gMC4wIDogZXh0ZW5zaW9uLnZhbHVlcy5zaGluaW5lc3M7XG4gICAgICAgIC8vIEFtYmllbnRcbiAgICAgICAgaWYgKHR5cGVvZiBleHRlbnNpb24udmFsdWVzLmFtYmllbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRUZXh0dXJlKGdsdGZSdW50aW1lLCBleHRlbnNpb24udmFsdWVzLmFtYmllbnQsIHN0YW5kYXJkTWF0ZXJpYWwsIFwiYW1iaWVudFRleHR1cmVcIiwgb25FcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFuZGFyZE1hdGVyaWFsLmFtYmllbnRDb2xvciA9IENvbG9yMy5Gcm9tQXJyYXkoZXh0ZW5zaW9uLnZhbHVlcy5hbWJpZW50IHx8IFswLCAwLCAwXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlmZnVzZVxuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbi52YWx1ZXMuZGlmZnVzZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5fbG9hZFRleHR1cmUoZ2x0ZlJ1bnRpbWUsIGV4dGVuc2lvbi52YWx1ZXMuZGlmZnVzZSwgc3RhbmRhcmRNYXRlcmlhbCwgXCJkaWZmdXNlVGV4dHVyZVwiLCBvbkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YW5kYXJkTWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gQ29sb3IzLkZyb21BcnJheShleHRlbnNpb24udmFsdWVzLmRpZmZ1c2UgfHwgWzAsIDAsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbWlzc2lvblxuICAgICAgICBpZiAodHlwZW9mIGV4dGVuc2lvbi52YWx1ZXMuZW1pc3Npb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRUZXh0dXJlKGdsdGZSdW50aW1lLCBleHRlbnNpb24udmFsdWVzLmVtaXNzaW9uLCBzdGFuZGFyZE1hdGVyaWFsLCBcImVtaXNzaXZlVGV4dHVyZVwiLCBvbkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YW5kYXJkTWF0ZXJpYWwuZW1pc3NpdmVDb2xvciA9IENvbG9yMy5Gcm9tQXJyYXkoZXh0ZW5zaW9uLnZhbHVlcy5lbWlzc2lvbiB8fCBbMCwgMCwgMF0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNwZWN1bGFyXG4gICAgICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uLnZhbHVlcy5zcGVjdWxhciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5fbG9hZFRleHR1cmUoZ2x0ZlJ1bnRpbWUsIGV4dGVuc2lvbi52YWx1ZXMuc3BlY3VsYXIsIHN0YW5kYXJkTWF0ZXJpYWwsIFwic3BlY3VsYXJUZXh0dXJlXCIsIG9uRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhbmRhcmRNYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gQ29sb3IzLkZyb21BcnJheShleHRlbnNpb24udmFsdWVzLnNwZWN1bGFyIHx8IFswLCAwLCAwXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIF9sb2FkVGV4dHVyZShnbHRmUnVudGltZSwgaWQsIG1hdGVyaWFsLCBwcm9wZXJ0eVBhdGgsIG9uRXJyb3IpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGJ1ZmZlciBmcm9tIHRleHR1cmUgdXJsXG4gICAgICAgIEdMVEZMb2FkZXJCYXNlLkxvYWRUZXh0dXJlQnVmZmVyQXN5bmMoZ2x0ZlJ1bnRpbWUsIGlkLCAoYnVmZmVyKSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGV4dHVyZSBmcm9tIGJ1ZmZlclxuICAgICAgICAgICAgR0xURkxvYWRlckJhc2UuQ3JlYXRlVGV4dHVyZUFzeW5jKGdsdGZSdW50aW1lLCBpZCwgYnVmZmVyLCAodGV4dHVyZSkgPT4gKG1hdGVyaWFsW3Byb3BlcnR5UGF0aF0gPSB0ZXh0dXJlKSk7XG4gICAgICAgIH0sIG9uRXJyb3IpO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24obmV3IEdMVEZNYXRlcmlhbHNDb21tb25FeHRlbnNpb24oKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbFRGTWF0ZXJpYWxzQ29tbW9uRXh0ZW5zaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/glTFMaterialsCommonExtension.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/1.0/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/1.0/index.js ***!
  \***********************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _glTFBinaryExtension_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFBinaryExtension.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFBinaryExtension.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoader.js\");\n/* harmony import */ var _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./glTFLoaderInterfaces.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderInterfaces.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./glTFLoaderUtils.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFLoaderUtils.js\");\n/* harmony import */ var _glTFMaterialsCommonExtension_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./glTFMaterialsCommonExtension.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/glTFMaterialsCommonExtension.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFBinaryExtension_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_3__, _glTFMaterialsCommonExtension_js__WEBPACK_IMPORTED_MODULE_4__]);\n([_glTFBinaryExtension_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_3__, _glTFMaterialsCommonExtension_js__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFBinaryExtension_js__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFBinaryExtension_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoaderUtils_js__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFMaterialsCommonExtension_js__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFMaterialsCommonExtension_js__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMS4wL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QztBQUNUO0FBQ1U7QUFDTDtBQUNhO0FBQ2xELGlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8xLjAvaW5kZXguanM/ODY4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9nbFRGQmluYXJ5RXh0ZW5zaW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTG9hZGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTG9hZGVySW50ZXJmYWNlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2xURkxvYWRlclV0aWxzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTWF0ZXJpYWxzQ29tbW9uRXh0ZW5zaW9uLmpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/1.0/index.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_lights_image_based.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_lights_image_based.js ***!
  \***************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXT_lights_image_based: () => (/* binding */ EXT_lights_image_based)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_scalar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.scalar.js */ \"@babylonjs/core/Maths/math.scalar.js\");\n/* harmony import */ var _babylonjs_core_Maths_sphericalPolynomial_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/sphericalPolynomial.js */ \"@babylonjs/core/Maths/sphericalPolynomial.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Materials_Textures_rawCubeTexture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/rawCubeTexture.js */ \"@babylonjs/core/Materials/Textures/rawCubeTexture.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_scalar_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_sphericalPolynomial_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Materials_Textures_rawCubeTexture_js__WEBPACK_IMPORTED_MODULE_3__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__]);\n([_babylonjs_core_Maths_math_scalar_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_sphericalPolynomial_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Materials_Textures_rawCubeTexture_js__WEBPACK_IMPORTED_MODULE_3__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst NAME = \"EXT_lights_image_based\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_lights_image_based/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass EXT_lights_image_based {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        delete this._lights;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._lights = extension.lights;\n        }\n    }\n    /**\n     * @internal\n     */\n    loadSceneAsync(context, scene) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader.LoadExtensionAsync(context, scene, this.name, (extensionContext, extension) => {\n            this._loader._allMaterialsDirtyRequired = true;\n            const promises = new Array();\n            promises.push(this._loader.loadSceneAsync(context, scene));\n            this._loader.logOpen(`${extensionContext}`);\n            const light = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.ArrayItem.Get(`${extensionContext}/light`, this._lights, extension.light);\n            promises.push(this._loadLightAsync(`/extensions/${this.name}/lights/${extension.light}`, light).then((texture) => {\n                this._loader.babylonScene.environmentTexture = texture;\n            }));\n            this._loader.logClose();\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadLightAsync(context, light) {\n        if (!light._loaded) {\n            const promises = new Array();\n            this._loader.logOpen(`${context}`);\n            const imageData = new Array(light.specularImages.length);\n            for (let mipmap = 0; mipmap < light.specularImages.length; mipmap++) {\n                const faces = light.specularImages[mipmap];\n                imageData[mipmap] = new Array(faces.length);\n                for (let face = 0; face < faces.length; face++) {\n                    const specularImageContext = `${context}/specularImages/${mipmap}/${face}`;\n                    this._loader.logOpen(`${specularImageContext}`);\n                    const index = faces[face];\n                    const image = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.ArrayItem.Get(specularImageContext, this._loader.gltf.images, index);\n                    promises.push(this._loader.loadImageAsync(`/images/${index}`, image).then((data) => {\n                        imageData[mipmap][face] = data;\n                    }));\n                    this._loader.logClose();\n                }\n            }\n            this._loader.logClose();\n            light._loaded = Promise.all(promises).then(() => {\n                const babylonTexture = new _babylonjs_core_Materials_Textures_rawCubeTexture_js__WEBPACK_IMPORTED_MODULE_3__.RawCubeTexture(this._loader.babylonScene, null, light.specularImageSize);\n                babylonTexture.name = light.name || \"environment\";\n                light._babylonTexture = babylonTexture;\n                if (light.intensity != undefined) {\n                    babylonTexture.level = light.intensity;\n                }\n                if (light.rotation) {\n                    let rotation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__.Quaternion.FromArray(light.rotation);\n                    // Invert the rotation so that positive rotation is counter-clockwise.\n                    if (!this._loader.babylonScene.useRightHandedSystem) {\n                        rotation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__.Quaternion.Inverse(rotation);\n                    }\n                    _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_2__.Matrix.FromQuaternionToRef(rotation, babylonTexture.getReflectionTextureMatrix());\n                }\n                if (!light.irradianceCoefficients) {\n                    throw new Error(`${context}: Irradiance coefficients are missing`);\n                }\n                const sphericalHarmonics = _babylonjs_core_Maths_sphericalPolynomial_js__WEBPACK_IMPORTED_MODULE_1__.SphericalHarmonics.FromArray(light.irradianceCoefficients);\n                sphericalHarmonics.scaleInPlace(light.intensity);\n                sphericalHarmonics.convertIrradianceToLambertianRadiance();\n                const sphericalPolynomial = _babylonjs_core_Maths_sphericalPolynomial_js__WEBPACK_IMPORTED_MODULE_1__.SphericalPolynomial.FromHarmonics(sphericalHarmonics);\n                // Compute the lod generation scale to fit exactly to the number of levels available.\n                const lodGenerationScale = (imageData.length - 1) / _babylonjs_core_Maths_math_scalar_js__WEBPACK_IMPORTED_MODULE_0__.Scalar.Log2(light.specularImageSize);\n                return babylonTexture.updateRGBDAsync(imageData, sphericalPolynomial, lodGenerationScale);\n            });\n        }\n        return light._loaded.then(() => {\n            return light._babylonTexture;\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.GLTFLoader.RegisterExtension(NAME, (loader) => new EXT_lights_image_based(loader));\n//# sourceMappingURL=EXT_lights_image_based.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvRVhUX2xpZ2h0c19pbWFnZV9iYXNlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDeUM7QUFDN0I7QUFDWTtBQUM3QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGlCQUFpQjtBQUNyRCwwQkFBMEIscURBQVMsUUFBUSxpQkFBaUI7QUFDNUQsOERBQThELFVBQVUsVUFBVSxnQkFBZ0I7QUFDbEc7QUFDQSxhQUFhO0FBQ2I7QUFDQSx1REFBdUQ7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVE7QUFDNUM7QUFDQSxpQ0FBaUMsc0NBQXNDO0FBQ3ZFO0FBQ0E7QUFDQSxtQ0FBbUMscUJBQXFCO0FBQ3hELG9EQUFvRCxRQUFRLGtCQUFrQixPQUFPLEdBQUcsS0FBSztBQUM3Riw0Q0FBNEMscUJBQXFCO0FBQ2pFO0FBQ0Esa0NBQWtDLHFEQUFTO0FBQzNDLHlFQUF5RSxNQUFNO0FBQy9FO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0dBQWM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDRFQUFVO0FBQzdDO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQVU7QUFDN0M7QUFDQSxvQkFBb0Isd0VBQU07QUFDMUI7QUFDQTtBQUNBLHVDQUF1QyxRQUFRO0FBQy9DO0FBQ0EsMkNBQTJDLDRGQUFrQjtBQUM3RDtBQUNBO0FBQ0EsNENBQTRDLDZGQUFtQjtBQUMvRDtBQUNBLG9FQUFvRSx3RUFBTTtBQUMxRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFVO0FBQ1Ysa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0VYVF9saWdodHNfaW1hZ2VfYmFzZWQuanM/NTIyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2FsYXIgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguc2NhbGFyLmpzXCI7XG5pbXBvcnQgeyBTcGhlcmljYWxIYXJtb25pY3MsIFNwaGVyaWNhbFBvbHlub21pYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL3NwaGVyaWNhbFBvbHlub21pYWwuanNcIjtcbmltcG9ydCB7IFF1YXRlcm5pb24sIE1hdHJpeCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3IuanNcIjtcbmltcG9ydCB7IFJhd0N1YmVUZXh0dXJlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvcmF3Q3ViZVRleHR1cmUuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIsIEFycmF5SXRlbSB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJFWFRfbGlnaHRzX2ltYWdlX2Jhc2VkXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9FWFRfbGlnaHRzX2ltYWdlX2Jhc2VkL1JFQURNRS5tZClcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEVYVF9saWdodHNfaW1hZ2VfYmFzZWQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgICAgICBkZWxldGUgdGhpcy5fbGlnaHRzO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgb25Mb2FkaW5nKCkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25zID0gdGhpcy5fbG9hZGVyLmdsdGYuZXh0ZW5zaW9ucztcbiAgICAgICAgaWYgKGV4dGVuc2lvbnMgJiYgZXh0ZW5zaW9uc1t0aGlzLm5hbWVdKSB7XG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBleHRlbnNpb25zW3RoaXMubmFtZV07XG4gICAgICAgICAgICB0aGlzLl9saWdodHMgPSBleHRlbnNpb24ubGlnaHRzO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBzY2VuZSwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuX2FsbE1hdGVyaWFsc0RpcnR5UmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nT3BlbihgJHtleHRlbnNpb25Db250ZXh0fWApO1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBBcnJheUl0ZW0uR2V0KGAke2V4dGVuc2lvbkNvbnRleHR9L2xpZ2h0YCwgdGhpcy5fbGlnaHRzLCBleHRlbnNpb24ubGlnaHQpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTGlnaHRBc3luYyhgL2V4dGVuc2lvbnMvJHt0aGlzLm5hbWV9L2xpZ2h0cy8ke2V4dGVuc2lvbi5saWdodH1gLCBsaWdodCkudGhlbigodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUuZW52aXJvbm1lbnRUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlci5sb2dDbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZExpZ2h0QXN5bmMoY29udGV4dCwgbGlnaHQpIHtcbiAgICAgICAgaWYgKCFsaWdodC5fbG9hZGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZ09wZW4oYCR7Y29udGV4dH1gKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IG5ldyBBcnJheShsaWdodC5zcGVjdWxhckltYWdlcy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbWlwbWFwID0gMDsgbWlwbWFwIDwgbGlnaHQuc3BlY3VsYXJJbWFnZXMubGVuZ3RoOyBtaXBtYXArKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhY2VzID0gbGlnaHQuc3BlY3VsYXJJbWFnZXNbbWlwbWFwXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGFbbWlwbWFwXSA9IG5ldyBBcnJheShmYWNlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgZmFjZXMubGVuZ3RoOyBmYWNlKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlY3VsYXJJbWFnZUNvbnRleHQgPSBgJHtjb250ZXh0fS9zcGVjdWxhckltYWdlcy8ke21pcG1hcH0vJHtmYWNlfWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5sb2dPcGVuKGAke3NwZWN1bGFySW1hZ2VDb250ZXh0fWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGZhY2VzW2ZhY2VdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IEFycmF5SXRlbS5HZXQoc3BlY3VsYXJJbWFnZUNvbnRleHQsIHRoaXMuX2xvYWRlci5nbHRmLmltYWdlcywgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkSW1hZ2VBc3luYyhgL2ltYWdlcy8ke2luZGV4fWAsIGltYWdlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGFbbWlwbWFwXVtmYWNlXSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZ0Nsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZ0Nsb3NlKCk7XG4gICAgICAgICAgICBsaWdodC5fbG9hZGVkID0gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhYnlsb25UZXh0dXJlID0gbmV3IFJhd0N1YmVUZXh0dXJlKHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUsIG51bGwsIGxpZ2h0LnNwZWN1bGFySW1hZ2VTaXplKTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uVGV4dHVyZS5uYW1lID0gbGlnaHQubmFtZSB8fCBcImVudmlyb25tZW50XCI7XG4gICAgICAgICAgICAgICAgbGlnaHQuX2JhYnlsb25UZXh0dXJlID0gYmFieWxvblRleHR1cmU7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0LmludGVuc2l0eSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvblRleHR1cmUubGV2ZWwgPSBsaWdodC5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaWdodC5yb3RhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm90YXRpb24gPSBRdWF0ZXJuaW9uLkZyb21BcnJheShsaWdodC5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEludmVydCB0aGUgcm90YXRpb24gc28gdGhhdCBwb3NpdGl2ZSByb3RhdGlvbiBpcyBjb3VudGVyLWNsb2Nrd2lzZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lLnVzZVJpZ2h0SGFuZGVkU3lzdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbiA9IFF1YXRlcm5pb24uSW52ZXJzZShyb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgTWF0cml4LkZyb21RdWF0ZXJuaW9uVG9SZWYocm90YXRpb24sIGJhYnlsb25UZXh0dXJlLmdldFJlZmxlY3Rpb25UZXh0dXJlTWF0cml4KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWxpZ2h0LmlycmFkaWFuY2VDb2VmZmljaWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBJcnJhZGlhbmNlIGNvZWZmaWNpZW50cyBhcmUgbWlzc2luZ2ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3MgPSBTcGhlcmljYWxIYXJtb25pY3MuRnJvbUFycmF5KGxpZ2h0LmlycmFkaWFuY2VDb2VmZmljaWVudHMpO1xuICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljcy5zY2FsZUluUGxhY2UobGlnaHQuaW50ZW5zaXR5KTtcbiAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3MuY29udmVydElycmFkaWFuY2VUb0xhbWJlcnRpYW5SYWRpYW5jZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwaGVyaWNhbFBvbHlub21pYWwgPSBTcGhlcmljYWxQb2x5bm9taWFsLkZyb21IYXJtb25pY3Moc3BoZXJpY2FsSGFybW9uaWNzKTtcbiAgICAgICAgICAgICAgICAvLyBDb21wdXRlIHRoZSBsb2QgZ2VuZXJhdGlvbiBzY2FsZSB0byBmaXQgZXhhY3RseSB0byB0aGUgbnVtYmVyIG9mIGxldmVscyBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgY29uc3QgbG9kR2VuZXJhdGlvblNjYWxlID0gKGltYWdlRGF0YS5sZW5ndGggLSAxKSAvIFNjYWxhci5Mb2cyKGxpZ2h0LnNwZWN1bGFySW1hZ2VTaXplKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFieWxvblRleHR1cmUudXBkYXRlUkdCREFzeW5jKGltYWdlRGF0YSwgc3BoZXJpY2FsUG9seW5vbWlhbCwgbG9kR2VuZXJhdGlvblNjYWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaWdodC5fbG9hZGVkLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxpZ2h0Ll9iYWJ5bG9uVGV4dHVyZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgRVhUX2xpZ2h0c19pbWFnZV9iYXNlZChsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVYVF9saWdodHNfaW1hZ2VfYmFzZWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_lights_image_based.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.js ***!
  \****************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXT_mesh_gpu_instancing: () => (/* binding */ EXT_mesh_gpu_instancing)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Meshes_thinInstanceMesh_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Meshes/thinInstanceMesh.js */ \"@babylonjs/core/Meshes/thinInstanceMesh.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Meshes_thinInstanceMesh_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Meshes_thinInstanceMesh_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"EXT_mesh_gpu_instancing\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_mesh_gpu_instancing/README.md)\n * [Playground Sample](https://playground.babylonjs.com/#QFIGLW#9)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass EXT_mesh_gpu_instancing {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadNodeAsync(context, node, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, node, this.name, (extensionContext, extension) => {\n            this._loader._disableInstancedMesh++;\n            const promise = this._loader.loadNodeAsync(`/nodes/${node.index}`, node, assign);\n            this._loader._disableInstancedMesh--;\n            if (!node._primitiveBabylonMeshes) {\n                return promise;\n            }\n            const promises = new Array();\n            let instanceCount = 0;\n            const loadAttribute = (attribute) => {\n                if (extension.attributes[attribute] == undefined) {\n                    promises.push(Promise.resolve(null));\n                    return;\n                }\n                const accessor = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.ArrayItem.Get(`${extensionContext}/attributes/${attribute}`, this._loader.gltf.accessors, extension.attributes[attribute]);\n                promises.push(this._loader._loadFloatAccessorAsync(`/accessors/${accessor.bufferView}`, accessor));\n                if (instanceCount === 0) {\n                    instanceCount = accessor.count;\n                }\n                else if (instanceCount !== accessor.count) {\n                    throw new Error(`${extensionContext}/attributes: Instance buffer accessors do not have the same count.`);\n                }\n            };\n            loadAttribute(\"TRANSLATION\");\n            loadAttribute(\"ROTATION\");\n            loadAttribute(\"SCALE\");\n            return promise.then((babylonTransformNode) => {\n                return Promise.all(promises).then(([translationBuffer, rotationBuffer, scaleBuffer]) => {\n                    const matrices = new Float32Array(instanceCount * 16);\n                    _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[0].copyFromFloats(0, 0, 0); // translation\n                    _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Quaternion[0].copyFromFloats(0, 0, 0, 1); // rotation\n                    _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[1].copyFromFloats(1, 1, 1); // scale\n                    for (let i = 0; i < instanceCount; ++i) {\n                        translationBuffer && _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.FromArrayToRef(translationBuffer, i * 3, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[0]);\n                        rotationBuffer && _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Quaternion.FromArrayToRef(rotationBuffer, i * 4, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Quaternion[0]);\n                        scaleBuffer && _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.FromArrayToRef(scaleBuffer, i * 3, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[1]);\n                        _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Matrix.ComposeToRef(_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[1], _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Quaternion[0], _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Vector3[0], _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Matrix[0]);\n                        _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.TmpVectors.Matrix[0].copyToArray(matrices, i * 16);\n                    }\n                    for (const babylonMesh of node._primitiveBabylonMeshes) {\n                        babylonMesh.thinInstanceSetBuffer(\"matrix\", matrices, 16, true);\n                    }\n                    return babylonTransformNode;\n                });\n            });\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new EXT_mesh_gpu_instancing(loader));\n//# sourceMappingURL=EXT_mesh_gpu_instancing.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvRVhUX21lc2hfZ3B1X2luc3RhbmNpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUErRjtBQUN0QztBQUNMO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCO0FBQ0EsaUVBQWlFLFdBQVc7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxxREFBUyxRQUFRLGlCQUFpQixjQUFjLFVBQVU7QUFDM0YsaUZBQWlGLG9CQUFvQjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpQkFBaUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0RUFBVSxxQ0FBcUM7QUFDbkUsb0JBQW9CLDRFQUFVLDJDQUEyQztBQUN6RSxvQkFBb0IsNEVBQVUscUNBQXFDO0FBQ25FLG9DQUFvQyxtQkFBbUI7QUFDdkQsNkNBQTZDLHlFQUFPLDBDQUEwQyw0RUFBVTtBQUN4RywwQ0FBMEMsNEVBQVUsdUNBQXVDLDRFQUFVO0FBQ3JHLHVDQUF1Qyx5RUFBTyxvQ0FBb0MsNEVBQVU7QUFDNUYsd0JBQXdCLHdFQUFNLGNBQWMsNEVBQVUsYUFBYSw0RUFBVSxnQkFBZ0IsNEVBQVUsYUFBYSw0RUFBVTtBQUM5SCx3QkFBd0IsNEVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBVTtBQUNWLG1EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9FWFRfbWVzaF9ncHVfaW5zdGFuY2luZy5qcz85ODZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlY3RvcjMsIFF1YXRlcm5pb24sIE1hdHJpeCwgVG1wVmVjdG9ycyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3IuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIsIEFycmF5SXRlbSB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5pbXBvcnQgXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RoaW5JbnN0YW5jZU1lc2guanNcIjtcbmNvbnN0IE5BTUUgPSBcIkVYVF9tZXNoX2dwdV9pbnN0YW5jaW5nXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9FWFRfbWVzaF9ncHVfaW5zdGFuY2luZy9SRUFETUUubWQpXG4gKiBbUGxheWdyb3VuZCBTYW1wbGVdKGh0dHBzOi8vcGxheWdyb3VuZC5iYWJ5bG9uanMuY29tLyNRRklHTFcjOSlcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEVYVF9tZXNoX2dwdV9pbnN0YW5jaW5nIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIG5vZGUsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLl9kaXNhYmxlSW5zdGFuY2VkTWVzaCsrO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2xvYWRlci5sb2FkTm9kZUFzeW5jKGAvbm9kZXMvJHtub2RlLmluZGV4fWAsIG5vZGUsIGFzc2lnbik7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuX2Rpc2FibGVJbnN0YW5jZWRNZXNoLS07XG4gICAgICAgICAgICBpZiAoIW5vZGUuX3ByaW1pdGl2ZUJhYnlsb25NZXNoZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBsZXQgaW5zdGFuY2VDb3VudCA9IDA7XG4gICAgICAgICAgICBjb25zdCBsb2FkQXR0cmlidXRlID0gKGF0dHJpYnV0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb24uYXR0cmlidXRlc1thdHRyaWJ1dGVdID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKFByb21pc2UucmVzb2x2ZShudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzb3IgPSBBcnJheUl0ZW0uR2V0KGAke2V4dGVuc2lvbkNvbnRleHR9L2F0dHJpYnV0ZXMvJHthdHRyaWJ1dGV9YCwgdGhpcy5fbG9hZGVyLmdsdGYuYWNjZXNzb3JzLCBleHRlbnNpb24uYXR0cmlidXRlc1thdHRyaWJ1dGVdKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5fbG9hZEZsb2F0QWNjZXNzb3JBc3luYyhgL2FjY2Vzc29ycy8ke2FjY2Vzc29yLmJ1ZmZlclZpZXd9YCwgYWNjZXNzb3IpKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2VDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUNvdW50ID0gYWNjZXNzb3IuY291bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlQ291bnQgIT09IGFjY2Vzc29yLmNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtleHRlbnNpb25Db250ZXh0fS9hdHRyaWJ1dGVzOiBJbnN0YW5jZSBidWZmZXIgYWNjZXNzb3JzIGRvIG5vdCBoYXZlIHRoZSBzYW1lIGNvdW50LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiVFJBTlNMQVRJT05cIik7XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiUk9UQVRJT05cIik7XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiU0NBTEVcIik7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKChiYWJ5bG9uVHJhbnNmb3JtTm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoW3RyYW5zbGF0aW9uQnVmZmVyLCByb3RhdGlvbkJ1ZmZlciwgc2NhbGVCdWZmZXJdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdHJpY2VzID0gbmV3IEZsb2F0MzJBcnJheShpbnN0YW5jZUNvdW50ICogMTYpO1xuICAgICAgICAgICAgICAgICAgICBUbXBWZWN0b3JzLlZlY3RvcjNbMF0uY29weUZyb21GbG9hdHMoMCwgMCwgMCk7IC8vIHRyYW5zbGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIFRtcFZlY3RvcnMuUXVhdGVybmlvblswXS5jb3B5RnJvbUZsb2F0cygwLCAwLCAwLCAxKTsgLy8gcm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgVG1wVmVjdG9ycy5WZWN0b3IzWzFdLmNvcHlGcm9tRmxvYXRzKDEsIDEsIDEpOyAvLyBzY2FsZVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RhbmNlQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25CdWZmZXIgJiYgVmVjdG9yMy5Gcm9tQXJyYXlUb1JlZih0cmFuc2xhdGlvbkJ1ZmZlciwgaSAqIDMsIFRtcFZlY3RvcnMuVmVjdG9yM1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbkJ1ZmZlciAmJiBRdWF0ZXJuaW9uLkZyb21BcnJheVRvUmVmKHJvdGF0aW9uQnVmZmVyLCBpICogNCwgVG1wVmVjdG9ycy5RdWF0ZXJuaW9uWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlQnVmZmVyICYmIFZlY3RvcjMuRnJvbUFycmF5VG9SZWYoc2NhbGVCdWZmZXIsIGkgKiAzLCBUbXBWZWN0b3JzLlZlY3RvcjNbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4LkNvbXBvc2VUb1JlZihUbXBWZWN0b3JzLlZlY3RvcjNbMV0sIFRtcFZlY3RvcnMuUXVhdGVybmlvblswXSwgVG1wVmVjdG9ycy5WZWN0b3IzWzBdLCBUbXBWZWN0b3JzLk1hdHJpeFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBUbXBWZWN0b3JzLk1hdHJpeFswXS5jb3B5VG9BcnJheShtYXRyaWNlcywgaSAqIDE2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJhYnlsb25NZXNoIG9mIG5vZGUuX3ByaW1pdGl2ZUJhYnlsb25NZXNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoLnRoaW5JbnN0YW5jZVNldEJ1ZmZlcihcIm1hdHJpeFwiLCBtYXRyaWNlcywgMTYsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYWJ5bG9uVHJhbnNmb3JtTm9kZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBFWFRfbWVzaF9ncHVfaW5zdGFuY2luZyhsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVYVF9tZXNoX2dwdV9pbnN0YW5jaW5nLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_meshopt_compression.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_meshopt_compression.js ***!
  \****************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXT_meshopt_compression: () => (/* binding */ EXT_meshopt_compression)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Meshes_Compression_meshoptCompression_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Meshes/Compression/meshoptCompression.js */ \"@babylonjs/core/Meshes/Compression/meshoptCompression.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Meshes_Compression_meshoptCompression_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Meshes_Compression_meshoptCompression_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"EXT_meshopt_compression\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_meshopt_compression/README.md)\n *\n * This extension uses a WebAssembly decoder module from https://github.com/zeux/meshoptimizer/tree/master/js\n * @since 5.0.0\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass EXT_meshopt_compression {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this.enabled = loader.isExtensionUsed(NAME);\n        this._loader = loader;\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadBufferViewAsync(context, bufferView) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.LoadExtensionAsync(context, bufferView, this.name, (extensionContext, extension) => {\n            const bufferViewMeshopt = bufferView;\n            if (bufferViewMeshopt._meshOptData) {\n                return bufferViewMeshopt._meshOptData;\n            }\n            const buffer = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${context}/buffer`, this._loader.gltf.buffers, extension.buffer);\n            bufferViewMeshopt._meshOptData = this._loader.loadBufferAsync(`/buffers/${buffer.index}`, buffer, extension.byteOffset || 0, extension.byteLength).then((buffer) => {\n                return _babylonjs_core_Meshes_Compression_meshoptCompression_js__WEBPACK_IMPORTED_MODULE_1__.MeshoptCompression.Default.decodeGltfBufferAsync(buffer, extension.count, extension.byteStride, extension.mode, extension.filter);\n            });\n            return bufferViewMeshopt._meshOptData;\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new EXT_meshopt_compression(loader));\n//# sourceMappingURL=EXT_meshopt_compression.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvRVhUX21lc2hvcHRfY29tcHJlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXlEO0FBQ3FDO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixxREFBUyxRQUFRLFFBQVE7QUFDcEQsc0ZBQXNGLGFBQWE7QUFDbkcsdUJBQXVCLHdHQUFrQjtBQUN6QyxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0VYVF9tZXNob3B0X2NvbXByZXNzaW9uLmpzPzY5ODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXJyYXlJdGVtLCBHTFRGTG9hZGVyIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmltcG9ydCB7IE1lc2hvcHRDb21wcmVzc2lvbiB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL0NvbXByZXNzaW9uL21lc2hvcHRDb21wcmVzc2lvbi5qc1wiO1xuY29uc3QgTkFNRSA9IFwiRVhUX21lc2hvcHRfY29tcHJlc3Npb25cIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvVmVuZG9yL0VYVF9tZXNob3B0X2NvbXByZXNzaW9uL1JFQURNRS5tZClcbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiB1c2VzIGEgV2ViQXNzZW1ibHkgZGVjb2RlciBtb2R1bGUgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vemV1eC9tZXNob3B0aW1pemVyL3RyZWUvbWFzdGVyL2pzXG4gKiBAc2luY2UgNS4wLjBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEVYVF9tZXNob3B0X2NvbXByZXNzaW9uIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZEJ1ZmZlclZpZXdBc3luYyhjb250ZXh0LCBidWZmZXJWaWV3KSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBidWZmZXJWaWV3LCB0aGlzLm5hbWUsIChleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlclZpZXdNZXNob3B0ID0gYnVmZmVyVmlldztcbiAgICAgICAgICAgIGlmIChidWZmZXJWaWV3TWVzaG9wdC5fbWVzaE9wdERhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVmZmVyVmlld01lc2hvcHQuX21lc2hPcHREYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9idWZmZXJgLCB0aGlzLl9sb2FkZXIuZ2x0Zi5idWZmZXJzLCBleHRlbnNpb24uYnVmZmVyKTtcbiAgICAgICAgICAgIGJ1ZmZlclZpZXdNZXNob3B0Ll9tZXNoT3B0RGF0YSA9IHRoaXMuX2xvYWRlci5sb2FkQnVmZmVyQXN5bmMoYC9idWZmZXJzLyR7YnVmZmVyLmluZGV4fWAsIGJ1ZmZlciwgZXh0ZW5zaW9uLmJ5dGVPZmZzZXQgfHwgMCwgZXh0ZW5zaW9uLmJ5dGVMZW5ndGgpLnRoZW4oKGJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBNZXNob3B0Q29tcHJlc3Npb24uRGVmYXVsdC5kZWNvZGVHbHRmQnVmZmVyQXN5bmMoYnVmZmVyLCBleHRlbnNpb24uY291bnQsIGV4dGVuc2lvbi5ieXRlU3RyaWRlLCBleHRlbnNpb24ubW9kZSwgZXh0ZW5zaW9uLmZpbHRlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBidWZmZXJWaWV3TWVzaG9wdC5fbWVzaE9wdERhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEVYVF9tZXNob3B0X2NvbXByZXNzaW9uKGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RVhUX21lc2hvcHRfY29tcHJlc3Npb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_meshopt_compression.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_texture_webp.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_texture_webp.js ***!
  \*********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXT_texture_webp: () => (/* binding */ EXT_texture_webp)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__]);\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst NAME = \"EXT_texture_webp\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_texture_webp/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass EXT_texture_webp {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /** The name of this extension. */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    _loadTextureAsync(context, texture, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.LoadExtensionAsync(context, texture, this.name, (extensionContext, extension) => {\n            const sampler = texture.sampler == undefined ? _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.DefaultSampler : _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${context}/sampler`, this._loader.gltf.samplers, texture.sampler);\n            const image = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${extensionContext}/source`, this._loader.gltf.images, extension.source);\n            return this._loader._createTextureAsync(context, sampler, image, (babylonTexture) => {\n                assign(babylonTexture);\n            }, undefined, !texture._textureInfo.nonColorData);\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new EXT_texture_webp(loader));\n//# sourceMappingURL=EXT_texture_webp.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvRVhUX3RleHR1cmVfd2VicC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QiwyREFBMkQsc0RBQVUsa0JBQWtCLHFEQUFTLFFBQVEsUUFBUTtBQUNoSCwwQkFBMEIscURBQVMsUUFBUSxpQkFBaUI7QUFDNUQ7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0VYVF90ZXh0dXJlX3dlYnAuanM/ZmVhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyLCBBcnJheUl0ZW0gfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiRVhUX3RleHR1cmVfd2VicFwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9WZW5kb3IvRVhUX3RleHR1cmVfd2VicC9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBFWFRfdGV4dHVyZV93ZWJwIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLiAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IGxvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfbG9hZFRleHR1cmVBc3luYyhjb250ZXh0LCB0ZXh0dXJlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIHRleHR1cmUsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlciA9IHRleHR1cmUuc2FtcGxlciA9PSB1bmRlZmluZWQgPyBHTFRGTG9hZGVyLkRlZmF1bHRTYW1wbGVyIDogQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9zYW1wbGVyYCwgdGhpcy5fbG9hZGVyLmdsdGYuc2FtcGxlcnMsIHRleHR1cmUuc2FtcGxlcik7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IEFycmF5SXRlbS5HZXQoYCR7ZXh0ZW5zaW9uQ29udGV4dH0vc291cmNlYCwgdGhpcy5fbG9hZGVyLmdsdGYuaW1hZ2VzLCBleHRlbnNpb24uc291cmNlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIuX2NyZWF0ZVRleHR1cmVBc3luYyhjb250ZXh0LCBzYW1wbGVyLCBpbWFnZSwgKGJhYnlsb25UZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzaWduKGJhYnlsb25UZXh0dXJlKTtcbiAgICAgICAgICAgIH0sIHVuZGVmaW5lZCwgIXRleHR1cmUuX3RleHR1cmVJbmZvLm5vbkNvbG9yRGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEVYVF90ZXh0dXJlX3dlYnAobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FWFRfdGV4dHVyZV93ZWJwLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_texture_webp.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/ExtrasAsMetadata.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/ExtrasAsMetadata.js ***!
  \*********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtrasAsMetadata: () => (/* binding */ ExtrasAsMetadata)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__]);\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst NAME = \"ExtrasAsMetadata\";\n/**\n * Store glTF extras (if present) in BJS objects' metadata\n */\nclass ExtrasAsMetadata {\n    _assignExtras(babylonObject, gltfProp) {\n        if (gltfProp.extras && Object.keys(gltfProp.extras).length > 0) {\n            const metadata = (babylonObject.metadata = babylonObject.metadata || {});\n            const gltf = (metadata.gltf = metadata.gltf || {});\n            gltf.extras = gltfProp.extras;\n        }\n    }\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines whether this extension is enabled.\n         */\n        this.enabled = true;\n        this._loader = loader;\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadNodeAsync(context, node, assign) {\n        return this._loader.loadNodeAsync(context, node, (babylonTransformNode) => {\n            this._assignExtras(babylonTransformNode, node);\n            assign(babylonTransformNode);\n        });\n    }\n    /**\n     * @internal\n     */\n    loadCameraAsync(context, camera, assign) {\n        return this._loader.loadCameraAsync(context, camera, (babylonCamera) => {\n            this._assignExtras(babylonCamera, camera);\n            assign(babylonCamera);\n        });\n    }\n    /**\n     * @internal\n     */\n    createMaterial(context, material, babylonDrawMode) {\n        const babylonMaterial = this._loader.createMaterial(context, material, babylonDrawMode);\n        this._assignExtras(babylonMaterial, material);\n        return babylonMaterial;\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new ExtrasAsMetadata(loader));\n//# sourceMappingURL=ExtrasAsMetadata.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvRXh0cmFzQXNNZXRhZGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRiw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0V4dHJhc0FzTWV0YWRhdGEuanM/NTgyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIkV4dHJhc0FzTWV0YWRhdGFcIjtcbi8qKlxuICogU3RvcmUgZ2xURiBleHRyYXMgKGlmIHByZXNlbnQpIGluIEJKUyBvYmplY3RzJyBtZXRhZGF0YVxuICovXG5leHBvcnQgY2xhc3MgRXh0cmFzQXNNZXRhZGF0YSB7XG4gICAgX2Fzc2lnbkV4dHJhcyhiYWJ5bG9uT2JqZWN0LCBnbHRmUHJvcCkge1xuICAgICAgICBpZiAoZ2x0ZlByb3AuZXh0cmFzICYmIE9iamVjdC5rZXlzKGdsdGZQcm9wLmV4dHJhcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSAoYmFieWxvbk9iamVjdC5tZXRhZGF0YSA9IGJhYnlsb25PYmplY3QubWV0YWRhdGEgfHwge30pO1xuICAgICAgICAgICAgY29uc3QgZ2x0ZiA9IChtZXRhZGF0YS5nbHRmID0gbWV0YWRhdGEuZ2x0ZiB8fCB7fSk7XG4gICAgICAgICAgICBnbHRmLmV4dHJhcyA9IGdsdGZQcm9wLmV4dHJhcztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgd2hldGhlciB0aGlzIGV4dGVuc2lvbiBpcyBlbmFibGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkTm9kZUFzeW5jKGNvbnRleHQsIG5vZGUsIChiYWJ5bG9uVHJhbnNmb3JtTm9kZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fYXNzaWduRXh0cmFzKGJhYnlsb25UcmFuc2Zvcm1Ob2RlLCBub2RlKTtcbiAgICAgICAgICAgIGFzc2lnbihiYWJ5bG9uVHJhbnNmb3JtTm9kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkQ2FtZXJhQXN5bmMoY29udGV4dCwgY2FtZXJhLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkQ2FtZXJhQXN5bmMoY29udGV4dCwgY2FtZXJhLCAoYmFieWxvbkNhbWVyYSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fYXNzaWduRXh0cmFzKGJhYnlsb25DYW1lcmEsIGNhbWVyYSk7XG4gICAgICAgICAgICBhc3NpZ24oYmFieWxvbkNhbWVyYSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjcmVhdGVNYXRlcmlhbChjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlKSB7XG4gICAgICAgIGNvbnN0IGJhYnlsb25NYXRlcmlhbCA9IHRoaXMuX2xvYWRlci5jcmVhdGVNYXRlcmlhbChjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlKTtcbiAgICAgICAgdGhpcy5fYXNzaWduRXh0cmFzKGJhYnlsb25NYXRlcmlhbCwgbWF0ZXJpYWwpO1xuICAgICAgICByZXR1cm4gYmFieWxvbk1hdGVyaWFsO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEV4dHJhc0FzTWV0YWRhdGEobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FeHRyYXNBc01ldGFkYXRhLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/ExtrasAsMetadata.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.data.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.data.js ***!
  \*******************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   animationPointerTree: () => (/* binding */ animationPointerTree)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Animations/animation.js */ \"@babylonjs/core/Animations/animation.js\");\n/* harmony import */ var _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoaderAnimation.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderAnimation.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable @typescript-eslint/naming-convention */\n\n\n\nfunction getColor3(_target, source, offset, scale) {\n    return _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(source, offset).scale(scale);\n}\nfunction getAlpha(_target, source, offset, scale) {\n    return source[offset + 3] * scale;\n}\nfunction getFloat(_target, source, offset, scale) {\n    return source[offset] * scale;\n}\nfunction getMinusFloat(_target, source, offset, scale) {\n    return -source[offset] * scale;\n}\nfunction getNextFloat(_target, source, offset, scale) {\n    return source[offset + 1] * scale;\n}\nfunction getFloatBy2(_target, source, offset, scale) {\n    return source[offset] * scale * 2;\n}\nfunction getTextureTransformTree(textureName) {\n    return {\n        scale: [\n            new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, `${textureName}.uScale`, getFloat, () => 2),\n            new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, `${textureName}.vScale`, getNextFloat, () => 2),\n        ],\n        offset: [\n            new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, `${textureName}.uOffset`, getFloat, () => 2),\n            new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, `${textureName}.vOffset`, getNextFloat, () => 2),\n        ],\n        rotation: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, `${textureName}.wAng`, getMinusFloat, () => 1)],\n    };\n}\nclass CameraAnimationPropertyInfo extends _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__.AnimationPropertyInfo {\n    /** @internal */\n    buildAnimations(target, name, fps, keys, callback) {\n        callback(target._babylonCamera, this._buildAnimation(name, fps, keys));\n    }\n}\nclass MaterialAnimationPropertyInfo extends _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__.AnimationPropertyInfo {\n    /** @internal */\n    buildAnimations(target, name, fps, keys, callback) {\n        for (const fillMode in target._data) {\n            callback(target._data[fillMode].babylonMaterial, this._buildAnimation(name, fps, keys));\n        }\n    }\n}\nclass LightAnimationPropertyInfo extends _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__.AnimationPropertyInfo {\n    /** @internal */\n    buildAnimations(target, name, fps, keys, callback) {\n        callback(target._babylonLight, this._buildAnimation(name, fps, keys));\n    }\n}\nconst nodesTree = {\n    __array__: {\n        __target__: true,\n        ..._glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_1__.nodeAnimationData,\n    },\n};\nconst camerasTree = {\n    __array__: {\n        __target__: true,\n        orthographic: {\n            xmag: [\n                new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"orthoLeft\", getMinusFloat, () => 1),\n                new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"orthoRight\", getNextFloat, () => 1),\n            ],\n            ymag: [\n                new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"orthoBottom\", getMinusFloat, () => 1),\n                new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"orthoTop\", getNextFloat, () => 1),\n            ],\n            zfar: [new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"maxZ\", getFloat, () => 1)],\n            znear: [new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"minZ\", getFloat, () => 1)],\n        },\n        perspective: {\n            yfov: [new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"fov\", getFloat, () => 1)],\n            zfar: [new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"maxZ\", getFloat, () => 1)],\n            znear: [new CameraAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"minZ\", getFloat, () => 1)],\n        },\n    },\n};\nconst materialsTree = {\n    __array__: {\n        __target__: true,\n        pbrMetallicRoughness: {\n            baseColorFactor: [\n                new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"albedoColor\", getColor3, () => 4),\n                new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"alpha\", getAlpha, () => 4),\n            ],\n            metallicFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"metallic\", getFloat, () => 1)],\n            roughnessFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"roughness\", getFloat, () => 1)],\n            baseColorTexture: {\n                extensions: {\n                    KHR_texture_transform: getTextureTransformTree(\"albedoTexture\"),\n                },\n            },\n            metallicRoughnessTexture: {\n                extensions: {\n                    KHR_texture_transform: getTextureTransformTree(\"metallicRoughnessTexture\"),\n                },\n            },\n        },\n        emissiveFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"emissiveColor\", getColor3, () => 3)],\n        normalTexture: {\n            scale: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"bumpTexture.level\", getFloat, () => 1)],\n            extensions: {\n                KHR_texture_transform: getTextureTransformTree(\"bumpTexture\"),\n            },\n        },\n        occlusionTexture: {\n            strength: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"ambientTextureStrength\", getFloat, () => 1)],\n            extensions: {\n                KHR_texture_transform: getTextureTransformTree(\"ambientTexture\"),\n            },\n        },\n        emissiveTexture: {\n            extensions: {\n                KHR_texture_transform: getTextureTransformTree(\"emissiveTexture\"),\n            },\n        },\n        extensions: {\n            KHR_materials_anisotropy: {\n                anisotropyStrength: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"anisotropy.intensity\", getFloat, () => 1)],\n                anisotropyRotation: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"anisotropy.angle\", getFloat, () => 1)],\n                anisotropyTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"emissiveTexture\"),\n                    },\n                },\n            },\n            KHR_materials_clearcoat: {\n                clearcoatFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"clearCoat.intensity\", getFloat, () => 1)],\n                clearcoatRoughnessFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"clearCoat.roughness\", getFloat, () => 1)],\n                clearcoatTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"clearCoat.texture\"),\n                    },\n                },\n                clearcoatNormalTexture: {\n                    scale: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"clearCoat.bumpTexture.level\", getFloat, () => 1)],\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"clearCoat.bumpTexture\"),\n                    },\n                },\n                clearcoatRoughnessTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"clearCoat.textureRoughness\"),\n                    },\n                },\n            },\n            KHR_materials_dispersion: {\n                dispersion: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"subSurface.dispersion\", getFloat, () => 1)],\n            },\n            KHR_materials_emissive_strength: {\n                emissiveStrength: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"emissiveIntensity\", getFloat, () => 1)],\n            },\n            KHR_materials_ior: {\n                ior: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"indexOfRefraction\", getFloat, () => 1)],\n            },\n            KHR_materials_iridescence: {\n                iridescenceFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"iridescence.intensity\", getFloat, () => 1)],\n                iridescenceIor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"iridescence.indexOfRefraction\", getFloat, () => 1)],\n                iridescenceThicknessMinimum: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"iridescence.minimumThickness\", getFloat, () => 1)],\n                iridescenceThicknessMaximum: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"iridescence.maximumThickness\", getFloat, () => 1)],\n            },\n            KHR_materials_sheen: {\n                sheenColorFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"sheen.color\", getColor3, () => 3)],\n                sheenRoughnessFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"sheen.roughness\", getFloat, () => 1)],\n                sheenColorTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"sheen.texture\"),\n                    },\n                },\n                sheenRoughnessTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"sheen.textureRoughness\"),\n                    },\n                },\n            },\n            KHR_materials_specular: {\n                specularFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"metallicF0Factor\", getFloat, () => 1)],\n                specularColorFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"metallicReflectanceColor\", getColor3, () => 3)],\n                specularTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"metallicReflectanceTexture\"),\n                    },\n                },\n                specularColorTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"reflectanceTexture\"),\n                    },\n                },\n            },\n            KHR_materials_transmission: {\n                transmissionFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"subSurface.refractionIntensity\", getFloat, () => 1)],\n                transmissionTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"subSurface.refractionIntensityTexture\"),\n                    },\n                },\n            },\n            KHR_materials_volume: {\n                attenuationColor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"subSurface.tintColor\", getColor3, () => 3)],\n                attenuationDistance: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"subSurface.tintColorAtDistance\", getFloat, () => 1)],\n                thicknessFactor: [new MaterialAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"subSurface.maximumThickness\", getFloat, () => 1)],\n                thicknessTexture: {\n                    extensions: {\n                        KHR_texture_transform: getTextureTransformTree(\"subSurface.thicknessTexture\"),\n                    },\n                },\n            },\n        },\n    },\n};\nconst extensionsTree = {\n    KHR_lights_punctual: {\n        lights: {\n            __array__: {\n                __target__: true,\n                color: [new LightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_COLOR3, \"diffuse\", getColor3, () => 3)],\n                intensity: [new LightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"intensity\", getFloat, () => 1)],\n                range: [new LightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"range\", getFloat, () => 1)],\n                spot: {\n                    innerConeAngle: [new LightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"innerAngle\", getFloatBy2, () => 1)],\n                    outerConeAngle: [new LightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"angle\", getFloatBy2, () => 1)],\n                },\n            },\n        },\n    },\n};\n/** @internal */\nconst animationPointerTree = {\n    nodes: nodesTree,\n    materials: materialsTree,\n    cameras: camerasTree,\n    extensions: extensionsTree,\n};\n//# sourceMappingURL=KHR_animation_pointer.data.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2FuaW1hdGlvbl9wb2ludGVyLmRhdGEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ29FO0FBQ2lCO0FBQ3hCO0FBQzdEO0FBQ0EsV0FBVyx1RUFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyw4RUFBUyx5QkFBeUIsWUFBWTtBQUM1Riw4Q0FBOEMsOEVBQVMseUJBQXlCLFlBQVk7QUFDNUY7QUFDQTtBQUNBLDhDQUE4Qyw4RUFBUyx5QkFBeUIsWUFBWTtBQUM1Riw4Q0FBOEMsOEVBQVMseUJBQXlCLFlBQVk7QUFDNUY7QUFDQSxxREFBcUQsOEVBQVMseUJBQXlCLFlBQVk7QUFDbkc7QUFDQTtBQUNBLDBDQUEwQywwRUFBcUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwRUFBcUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMEVBQXFCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNFQUFpQjtBQUM1QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhFQUFTO0FBQ3pELGdEQUFnRCw4RUFBUztBQUN6RDtBQUNBO0FBQ0EsZ0RBQWdELDhFQUFTO0FBQ3pELGdEQUFnRCw4RUFBUztBQUN6RDtBQUNBLG1EQUFtRCw4RUFBUztBQUM1RCxvREFBb0QsOEVBQVM7QUFDN0QsU0FBUztBQUNUO0FBQ0EsbURBQW1ELDhFQUFTO0FBQzVELG1EQUFtRCw4RUFBUztBQUM1RCxvREFBb0QsOEVBQVM7QUFDN0QsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsOEVBQVM7QUFDM0Qsa0RBQWtELDhFQUFTO0FBQzNEO0FBQ0EsK0RBQStELDhFQUFTO0FBQ3hFLGdFQUFnRSw4RUFBUztBQUN6RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULDJEQUEyRCw4RUFBUztBQUNwRTtBQUNBLHNEQUFzRCw4RUFBUztBQUMvRDtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLHlEQUF5RCw4RUFBUztBQUNsRTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSx1RUFBdUUsOEVBQVM7QUFDaEYsdUVBQXVFLDhFQUFTO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0Esb0VBQW9FLDhFQUFTO0FBQzdFLDZFQUE2RSw4RUFBUztBQUN0RjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0EsOERBQThELDhFQUFTO0FBQ3ZFO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsK0RBQStELDhFQUFTO0FBQ3hFLGFBQWE7QUFDYjtBQUNBLHFFQUFxRSw4RUFBUztBQUM5RSxhQUFhO0FBQ2I7QUFDQSx3REFBd0QsOEVBQVM7QUFDakUsYUFBYTtBQUNiO0FBQ0Esc0VBQXNFLDhFQUFTO0FBQy9FLG1FQUFtRSw4RUFBUztBQUM1RSxnRkFBZ0YsOEVBQVM7QUFDekYsZ0ZBQWdGLDhFQUFTO0FBQ3pGLGFBQWE7QUFDYjtBQUNBLHFFQUFxRSw4RUFBUztBQUM5RSx5RUFBeUUsOEVBQVM7QUFDbEY7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLG1FQUFtRSw4RUFBUztBQUM1RSx3RUFBd0UsOEVBQVM7QUFDakY7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLHVFQUF1RSw4RUFBUztBQUNoRjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBLHFFQUFxRSw4RUFBUztBQUM5RSx3RUFBd0UsOEVBQVM7QUFDakYsb0VBQW9FLDhFQUFTO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELDhFQUFTO0FBQ2hFLDJEQUEyRCw4RUFBUztBQUNwRSx1REFBdUQsOEVBQVM7QUFDaEU7QUFDQSxvRUFBb0UsOEVBQVM7QUFDN0Usb0VBQW9FLDhFQUFTO0FBQzdFLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9hbmltYXRpb25fcG9pbnRlci5kYXRhLmpzP2I0MDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5pbXBvcnQgeyBBbmltYXRpb24gfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0FuaW1hdGlvbnMvYW5pbWF0aW9uLmpzXCI7XG5pbXBvcnQgeyBBbmltYXRpb25Qcm9wZXJ0eUluZm8sIG5vZGVBbmltYXRpb25EYXRhIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXJBbmltYXRpb24uanNcIjtcbmltcG9ydCB7IENvbG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvci5qc1wiO1xuZnVuY3Rpb24gZ2V0Q29sb3IzKF90YXJnZXQsIHNvdXJjZSwgb2Zmc2V0LCBzY2FsZSkge1xuICAgIHJldHVybiBDb2xvcjMuRnJvbUFycmF5KHNvdXJjZSwgb2Zmc2V0KS5zY2FsZShzY2FsZSk7XG59XG5mdW5jdGlvbiBnZXRBbHBoYShfdGFyZ2V0LCBzb3VyY2UsIG9mZnNldCwgc2NhbGUpIHtcbiAgICByZXR1cm4gc291cmNlW29mZnNldCArIDNdICogc2NhbGU7XG59XG5mdW5jdGlvbiBnZXRGbG9hdChfdGFyZ2V0LCBzb3VyY2UsIG9mZnNldCwgc2NhbGUpIHtcbiAgICByZXR1cm4gc291cmNlW29mZnNldF0gKiBzY2FsZTtcbn1cbmZ1bmN0aW9uIGdldE1pbnVzRmxvYXQoX3RhcmdldCwgc291cmNlLCBvZmZzZXQsIHNjYWxlKSB7XG4gICAgcmV0dXJuIC1zb3VyY2Vbb2Zmc2V0XSAqIHNjYWxlO1xufVxuZnVuY3Rpb24gZ2V0TmV4dEZsb2F0KF90YXJnZXQsIHNvdXJjZSwgb2Zmc2V0LCBzY2FsZSkge1xuICAgIHJldHVybiBzb3VyY2Vbb2Zmc2V0ICsgMV0gKiBzY2FsZTtcbn1cbmZ1bmN0aW9uIGdldEZsb2F0QnkyKF90YXJnZXQsIHNvdXJjZSwgb2Zmc2V0LCBzY2FsZSkge1xuICAgIHJldHVybiBzb3VyY2Vbb2Zmc2V0XSAqIHNjYWxlICogMjtcbn1cbmZ1bmN0aW9uIGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKHRleHR1cmVOYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2NhbGU6IFtcbiAgICAgICAgICAgIG5ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgYCR7dGV4dHVyZU5hbWV9LnVTY2FsZWAsIGdldEZsb2F0LCAoKSA9PiAyKSxcbiAgICAgICAgICAgIG5ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgYCR7dGV4dHVyZU5hbWV9LnZTY2FsZWAsIGdldE5leHRGbG9hdCwgKCkgPT4gMiksXG4gICAgICAgIF0sXG4gICAgICAgIG9mZnNldDogW1xuICAgICAgICAgICAgbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBgJHt0ZXh0dXJlTmFtZX0udU9mZnNldGAsIGdldEZsb2F0LCAoKSA9PiAyKSxcbiAgICAgICAgICAgIG5ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgYCR7dGV4dHVyZU5hbWV9LnZPZmZzZXRgLCBnZXROZXh0RmxvYXQsICgpID0+IDIpLFxuICAgICAgICBdLFxuICAgICAgICByb3RhdGlvbjogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgYCR7dGV4dHVyZU5hbWV9LndBbmdgLCBnZXRNaW51c0Zsb2F0LCAoKSA9PiAxKV0sXG4gICAgfTtcbn1cbmNsYXNzIENhbWVyYUFuaW1hdGlvblByb3BlcnR5SW5mbyBleHRlbmRzIEFuaW1hdGlvblByb3BlcnR5SW5mbyB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGJ1aWxkQW5pbWF0aW9ucyh0YXJnZXQsIG5hbWUsIGZwcywga2V5cywgY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sodGFyZ2V0Ll9iYWJ5bG9uQ2FtZXJhLCB0aGlzLl9idWlsZEFuaW1hdGlvbihuYW1lLCBmcHMsIGtleXMpKTtcbiAgICB9XG59XG5jbGFzcyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyBleHRlbmRzIEFuaW1hdGlvblByb3BlcnR5SW5mbyB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGJ1aWxkQW5pbWF0aW9ucyh0YXJnZXQsIG5hbWUsIGZwcywga2V5cywgY2FsbGJhY2spIHtcbiAgICAgICAgZm9yIChjb25zdCBmaWxsTW9kZSBpbiB0YXJnZXQuX2RhdGEpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRhcmdldC5fZGF0YVtmaWxsTW9kZV0uYmFieWxvbk1hdGVyaWFsLCB0aGlzLl9idWlsZEFuaW1hdGlvbihuYW1lLCBmcHMsIGtleXMpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIExpZ2h0QW5pbWF0aW9uUHJvcGVydHlJbmZvIGV4dGVuZHMgQW5pbWF0aW9uUHJvcGVydHlJbmZvIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgYnVpbGRBbmltYXRpb25zKHRhcmdldCwgbmFtZSwgZnBzLCBrZXlzLCBjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayh0YXJnZXQuX2JhYnlsb25MaWdodCwgdGhpcy5fYnVpbGRBbmltYXRpb24obmFtZSwgZnBzLCBrZXlzKSk7XG4gICAgfVxufVxuY29uc3Qgbm9kZXNUcmVlID0ge1xuICAgIF9fYXJyYXlfXzoge1xuICAgICAgICBfX3RhcmdldF9fOiB0cnVlLFxuICAgICAgICAuLi5ub2RlQW5pbWF0aW9uRGF0YSxcbiAgICB9LFxufTtcbmNvbnN0IGNhbWVyYXNUcmVlID0ge1xuICAgIF9fYXJyYXlfXzoge1xuICAgICAgICBfX3RhcmdldF9fOiB0cnVlLFxuICAgICAgICBvcnRob2dyYXBoaWM6IHtcbiAgICAgICAgICAgIHhtYWc6IFtcbiAgICAgICAgICAgICAgICBuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm9ydGhvTGVmdFwiLCBnZXRNaW51c0Zsb2F0LCAoKSA9PiAxKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm9ydGhvUmlnaHRcIiwgZ2V0TmV4dEZsb2F0LCAoKSA9PiAxKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB5bWFnOiBbXG4gICAgICAgICAgICAgICAgbmV3IENhbWVyYUFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJvcnRob0JvdHRvbVwiLCBnZXRNaW51c0Zsb2F0LCAoKSA9PiAxKSxcbiAgICAgICAgICAgICAgICBuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm9ydGhvVG9wXCIsIGdldE5leHRGbG9hdCwgKCkgPT4gMSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgemZhcjogW25ldyBDYW1lcmFBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwibWF4WlwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgem5lYXI6IFtuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm1pblpcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgfSxcbiAgICAgICAgcGVyc3BlY3RpdmU6IHtcbiAgICAgICAgICAgIHlmb3Y6IFtuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImZvdlwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgemZhcjogW25ldyBDYW1lcmFBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwibWF4WlwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgem5lYXI6IFtuZXcgQ2FtZXJhQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm1pblpcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbmNvbnN0IG1hdGVyaWFsc1RyZWUgPSB7XG4gICAgX19hcnJheV9fOiB7XG4gICAgICAgIF9fdGFyZ2V0X186IHRydWUsXG4gICAgICAgIHBick1ldGFsbGljUm91Z2huZXNzOiB7XG4gICAgICAgICAgICBiYXNlQ29sb3JGYWN0b3I6IFtcbiAgICAgICAgICAgICAgICBuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfQ09MT1IzLCBcImFsYmVkb0NvbG9yXCIsIGdldENvbG9yMywgKCkgPT4gNCksXG4gICAgICAgICAgICAgICAgbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImFscGhhXCIsIGdldEFscGhhLCAoKSA9PiA0KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtZXRhbGxpY0ZhY3RvcjogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJtZXRhbGxpY1wiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgcm91Z2huZXNzRmFjdG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcInJvdWdobmVzc1wiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgYmFzZUNvbG9yVGV4dHVyZToge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgS0hSX3RleHR1cmVfdHJhbnNmb3JtOiBnZXRUZXh0dXJlVHJhbnNmb3JtVHJlZShcImFsYmVkb1RleHR1cmVcIiksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRhbGxpY1JvdWdobmVzc1RleHR1cmU6IHtcbiAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJtZXRhbGxpY1JvdWdobmVzc1RleHR1cmVcIiksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGVtaXNzaXZlRmFjdG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0NPTE9SMywgXCJlbWlzc2l2ZUNvbG9yXCIsIGdldENvbG9yMywgKCkgPT4gMyldLFxuICAgICAgICBub3JtYWxUZXh0dXJlOiB7XG4gICAgICAgICAgICBzY2FsZTogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJidW1wVGV4dHVyZS5sZXZlbFwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJidW1wVGV4dHVyZVwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9jY2x1c2lvblRleHR1cmU6IHtcbiAgICAgICAgICAgIHN0cmVuZ3RoOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImFtYmllbnRUZXh0dXJlU3RyZW5ndGhcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiYW1iaWVudFRleHR1cmVcIiksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlbWlzc2l2ZVRleHR1cmU6IHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiZW1pc3NpdmVUZXh0dXJlXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICAgICAgS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5OiB7XG4gICAgICAgICAgICAgICAgYW5pc290cm9weVN0cmVuZ3RoOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImFuaXNvdHJvcHkuaW50ZW5zaXR5XCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICAgICAgYW5pc290cm9weVJvdGF0aW9uOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImFuaXNvdHJvcHkuYW5nbGVcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICBhbmlzb3Ryb3B5VGV4dHVyZToge1xuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiZW1pc3NpdmVUZXh0dXJlXCIpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgS0hSX21hdGVyaWFsc19jbGVhcmNvYXQ6IHtcbiAgICAgICAgICAgICAgICBjbGVhcmNvYXRGYWN0b3I6IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiY2xlYXJDb2F0LmludGVuc2l0eVwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgICAgIGNsZWFyY29hdFJvdWdobmVzc0ZhY3RvcjogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJjbGVhckNvYXQucm91Z2huZXNzXCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICAgICAgY2xlYXJjb2F0VGV4dHVyZToge1xuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiY2xlYXJDb2F0LnRleHR1cmVcIiksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbGVhcmNvYXROb3JtYWxUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImNsZWFyQ29hdC5idW1wVGV4dHVyZS5sZXZlbFwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiY2xlYXJDb2F0LmJ1bXBUZXh0dXJlXCIpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xlYXJjb2F0Um91Z2huZXNzVGV4dHVyZToge1xuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBLSFJfdGV4dHVyZV90cmFuc2Zvcm06IGdldFRleHR1cmVUcmFuc2Zvcm1UcmVlKFwiY2xlYXJDb2F0LnRleHR1cmVSb3VnaG5lc3NcIiksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBLSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb246IHtcbiAgICAgICAgICAgICAgICBkaXNwZXJzaW9uOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcInN1YlN1cmZhY2UuZGlzcGVyc2lvblwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEtIUl9tYXRlcmlhbHNfZW1pc3NpdmVfc3RyZW5ndGg6IHtcbiAgICAgICAgICAgICAgICBlbWlzc2l2ZVN0cmVuZ3RoOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImVtaXNzaXZlSW50ZW5zaXR5XCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgS0hSX21hdGVyaWFsc19pb3I6IHtcbiAgICAgICAgICAgICAgICBpb3I6IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaW5kZXhPZlJlZnJhY3Rpb25cIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBLSFJfbWF0ZXJpYWxzX2lyaWRlc2NlbmNlOiB7XG4gICAgICAgICAgICAgICAgaXJpZGVzY2VuY2VGYWN0b3I6IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaXJpZGVzY2VuY2UuaW50ZW5zaXR5XCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICAgICAgaXJpZGVzY2VuY2VJb3I6IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaXJpZGVzY2VuY2UuaW5kZXhPZlJlZnJhY3Rpb25cIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICBpcmlkZXNjZW5jZVRoaWNrbmVzc01pbmltdW06IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaXJpZGVzY2VuY2UubWluaW11bVRoaWNrbmVzc1wiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgICAgIGlyaWRlc2NlbmNlVGhpY2tuZXNzTWF4aW11bTogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJpcmlkZXNjZW5jZS5tYXhpbXVtVGhpY2tuZXNzXCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgS0hSX21hdGVyaWFsc19zaGVlbjoge1xuICAgICAgICAgICAgICAgIHNoZWVuQ29sb3JGYWN0b3I6IFtuZXcgTWF0ZXJpYWxBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfQ09MT1IzLCBcInNoZWVuLmNvbG9yXCIsIGdldENvbG9yMywgKCkgPT4gMyldLFxuICAgICAgICAgICAgICAgIHNoZWVuUm91Z2huZXNzRmFjdG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcInNoZWVuLnJvdWdobmVzc1wiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgICAgIHNoZWVuQ29sb3JUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJzaGVlbi50ZXh0dXJlXCIpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2hlZW5Sb3VnaG5lc3NUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJzaGVlbi50ZXh0dXJlUm91Z2huZXNzXCIpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgS0hSX21hdGVyaWFsc19zcGVjdWxhcjoge1xuICAgICAgICAgICAgICAgIHNwZWN1bGFyRmFjdG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcIm1ldGFsbGljRjBGYWN0b3JcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICBzcGVjdWxhckNvbG9yRmFjdG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0NPTE9SMywgXCJtZXRhbGxpY1JlZmxlY3RhbmNlQ29sb3JcIiwgZ2V0Q29sb3IzLCAoKSA9PiAzKV0sXG4gICAgICAgICAgICAgICAgc3BlY3VsYXJUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJtZXRhbGxpY1JlZmxlY3RhbmNlVGV4dHVyZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNwZWN1bGFyQ29sb3JUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJyZWZsZWN0YW5jZVRleHR1cmVcIiksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbjoge1xuICAgICAgICAgICAgICAgIHRyYW5zbWlzc2lvbkZhY3RvcjogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJzdWJTdXJmYWNlLnJlZnJhY3Rpb25JbnRlbnNpdHlcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICB0cmFuc21pc3Npb25UZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJzdWJTdXJmYWNlLnJlZnJhY3Rpb25JbnRlbnNpdHlUZXh0dXJlXCIpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgS0hSX21hdGVyaWFsc192b2x1bWU6IHtcbiAgICAgICAgICAgICAgICBhdHRlbnVhdGlvbkNvbG9yOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0NPTE9SMywgXCJzdWJTdXJmYWNlLnRpbnRDb2xvclwiLCBnZXRDb2xvcjMsICgpID0+IDMpXSxcbiAgICAgICAgICAgICAgICBhdHRlbnVhdGlvbkRpc3RhbmNlOiBbbmV3IE1hdGVyaWFsQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcInN1YlN1cmZhY2UudGludENvbG9yQXREaXN0YW5jZVwiLCBnZXRGbG9hdCwgKCkgPT4gMSldLFxuICAgICAgICAgICAgICAgIHRoaWNrbmVzc0ZhY3RvcjogW25ldyBNYXRlcmlhbEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9GTE9BVCwgXCJzdWJTdXJmYWNlLm1heGltdW1UaGlja25lc3NcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICB0aGlja25lc3NUZXh0dXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEtIUl90ZXh0dXJlX3RyYW5zZm9ybTogZ2V0VGV4dHVyZVRyYW5zZm9ybVRyZWUoXCJzdWJTdXJmYWNlLnRoaWNrbmVzc1RleHR1cmVcIiksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5jb25zdCBleHRlbnNpb25zVHJlZSA9IHtcbiAgICBLSFJfbGlnaHRzX3B1bmN0dWFsOiB7XG4gICAgICAgIGxpZ2h0czoge1xuICAgICAgICAgICAgX19hcnJheV9fOiB7XG4gICAgICAgICAgICAgICAgX190YXJnZXRfXzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogW25ldyBMaWdodEFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9DT0xPUjMsIFwiZGlmZnVzZVwiLCBnZXRDb2xvcjMsICgpID0+IDMpXSxcbiAgICAgICAgICAgICAgICBpbnRlbnNpdHk6IFtuZXcgTGlnaHRBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaW50ZW5zaXR5XCIsIGdldEZsb2F0LCAoKSA9PiAxKV0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IFtuZXcgTGlnaHRBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwicmFuZ2VcIiwgZ2V0RmxvYXQsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICBzcG90OiB7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyQ29uZUFuZ2xlOiBbbmV3IExpZ2h0QW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX0ZMT0FULCBcImlubmVyQW5nbGVcIiwgZ2V0RmxvYXRCeTIsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJDb25lQW5nbGU6IFtuZXcgTGlnaHRBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiYW5nbGVcIiwgZ2V0RmxvYXRCeTIsICgpID0+IDEpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjb25zdCBhbmltYXRpb25Qb2ludGVyVHJlZSA9IHtcbiAgICBub2Rlczogbm9kZXNUcmVlLFxuICAgIG1hdGVyaWFsczogbWF0ZXJpYWxzVHJlZSxcbiAgICBjYW1lcmFzOiBjYW1lcmFzVHJlZSxcbiAgICBleHRlbnNpb25zOiBleHRlbnNpb25zVHJlZSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfYW5pbWF0aW9uX3BvaW50ZXIuZGF0YS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.data.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.js ***!
  \**************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_animation_pointer: () => (/* binding */ KHR_animation_pointer)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Misc/logger.js */ \"@babylonjs/core/Misc/logger.js\");\n/* harmony import */ var _KHR_animation_pointer_data_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./KHR_animation_pointer.data.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.data.js\");\n/* harmony import */ var _gltfPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gltfPathToObjectConverter.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/gltfPathToObjectConverter.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__, _KHR_animation_pointer_data_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__, _KHR_animation_pointer_data_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst NAME = \"KHR_animation_pointer\";\n/**\n * Class to convert an animation pointer path to a smart object that\n * gets data from the animation buffer and creates animations.\n */\nclass AnimationPointerPathToObjectConverter extends _gltfPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_3__.GLTFPathToObjectConverter {\n    constructor(gltf) {\n        super(gltf, _KHR_animation_pointer_data_js__WEBPACK_IMPORTED_MODULE_2__.animationPointerTree);\n    }\n}\n/**\n * [Specification PR](https://github.com/KhronosGroup/glTF/pull/2147)\n * !!! Experimental Extension Subject to Changes !!!\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_animation_pointer {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this._pathToObjectConverter = new AnimationPointerPathToObjectConverter(this._loader.gltf);\n    }\n    /**\n     * Defines whether this extension is enabled.\n     */\n    get enabled() {\n        return this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        delete this._pathToObjectConverter; // GC\n    }\n    /**\n     * Loads a glTF animation channel.\n     * @param context The context when loading the asset\n     * @param animationContext The context of the animation when loading the asset\n     * @param animation The glTF animation property\n     * @param channel The glTF animation channel property\n     * @param onLoad Called for each animation loaded\n     * @returns A void promise that resolves when the load is complete or null if not handled\n     */\n    _loadAnimationChannelAsync(context, animationContext, animation, channel, onLoad) {\n        const extension = channel.target.extensions?.KHR_animation_pointer;\n        if (!extension || !this._pathToObjectConverter) {\n            return null;\n        }\n        if (channel.target.path !== \"pointer\" /* AnimationChannelTargetPath.POINTER */) {\n            _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__.Logger.Warn(`${context}/target/path: Value (${channel.target.path}) must be (${\"pointer\" /* AnimationChannelTargetPath.POINTER */}) when using the ${this.name} extension`);\n        }\n        if (channel.target.node != undefined) {\n            _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__.Logger.Warn(`${context}/target/node: Value (${channel.target.node}) must not be present when using the ${this.name} extension`);\n        }\n        const extensionContext = `${context}/extensions/${this.name}`;\n        const pointer = extension.pointer;\n        if (!pointer) {\n            throw new Error(`${extensionContext}: Pointer is missing`);\n        }\n        try {\n            const targetInfo = this._pathToObjectConverter.convert(pointer);\n            return this._loader._loadAnimationChannelFromTargetInfoAsync(context, animationContext, animation, channel, targetInfo, onLoad);\n        }\n        catch (e) {\n            _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_1__.Logger.Warn(`${extensionContext}/pointer: Invalid pointer (${pointer}) skipped`);\n            return null;\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_animation_pointer(loader));\n//# sourceMappingURL=KHR_animation_pointer.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2FuaW1hdGlvbl9wb2ludGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThDO0FBQ1U7QUFDZTtBQUNJO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsb0ZBQXlCO0FBQzdFO0FBQ0Esb0JBQW9CLGdGQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0VBQU0sU0FBUyxRQUFRLHVCQUF1QixvQkFBb0IsYUFBYSxtREFBbUQsbUJBQW1CLFdBQVc7QUFDNUs7QUFDQTtBQUNBLFlBQVksa0VBQU0sU0FBUyxRQUFRLHVCQUF1QixvQkFBb0IsdUNBQXVDLFdBQVc7QUFDaEk7QUFDQSxvQ0FBb0MsUUFBUSxjQUFjLFVBQVU7QUFDcEU7QUFDQTtBQUNBLCtCQUErQixpQkFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBTSxTQUFTLGlCQUFpQiw2QkFBNkIsUUFBUTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9hbmltYXRpb25fcG9pbnRlci5qcz83MGE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgYW5pbWF0aW9uUG9pbnRlclRyZWUgfSBmcm9tIFwiLi9LSFJfYW5pbWF0aW9uX3BvaW50ZXIuZGF0YS5qc1wiO1xuaW1wb3J0IHsgR0xURlBhdGhUb09iamVjdENvbnZlcnRlciB9IGZyb20gXCIuL2dsdGZQYXRoVG9PYmplY3RDb252ZXJ0ZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl9hbmltYXRpb25fcG9pbnRlclwiO1xuLyoqXG4gKiBDbGFzcyB0byBjb252ZXJ0IGFuIGFuaW1hdGlvbiBwb2ludGVyIHBhdGggdG8gYSBzbWFydCBvYmplY3QgdGhhdFxuICogZ2V0cyBkYXRhIGZyb20gdGhlIGFuaW1hdGlvbiBidWZmZXIgYW5kIGNyZWF0ZXMgYW5pbWF0aW9ucy5cbiAqL1xuY2xhc3MgQW5pbWF0aW9uUG9pbnRlclBhdGhUb09iamVjdENvbnZlcnRlciBleHRlbmRzIEdMVEZQYXRoVG9PYmplY3RDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGdsdGYpIHtcbiAgICAgICAgc3VwZXIoZ2x0ZiwgYW5pbWF0aW9uUG9pbnRlclRyZWUpO1xuICAgIH1cbn1cbi8qKlxuICogW1NwZWNpZmljYXRpb24gUFJdKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9wdWxsLzIxNDcpXG4gKiAhISEgRXhwZXJpbWVudGFsIEV4dGVuc2lvbiBTdWJqZWN0IHRvIENoYW5nZXMgISEhXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfYW5pbWF0aW9uX3BvaW50ZXIge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuX3BhdGhUb09iamVjdENvbnZlcnRlciA9IG5ldyBBbmltYXRpb25Qb2ludGVyUGF0aFRvT2JqZWN0Q29udmVydGVyKHRoaXMuX2xvYWRlci5nbHRmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB3aGV0aGVyIHRoaXMgZXh0ZW5zaW9uIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgZ2V0IGVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3BhdGhUb09iamVjdENvbnZlcnRlcjsgLy8gR0NcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBnbFRGIGFuaW1hdGlvbiBjaGFubmVsLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgYW5pbWF0aW9uIHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uIFRoZSBnbFRGIGFuaW1hdGlvbiBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBjaGFubmVsIFRoZSBnbFRGIGFuaW1hdGlvbiBjaGFubmVsIHByb3BlcnR5XG4gICAgICogQHBhcmFtIG9uTG9hZCBDYWxsZWQgZm9yIGVhY2ggYW5pbWF0aW9uIGxvYWRlZFxuICAgICAqIEByZXR1cm5zIEEgdm9pZCBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZSBvciBudWxsIGlmIG5vdCBoYW5kbGVkXG4gICAgICovXG4gICAgX2xvYWRBbmltYXRpb25DaGFubmVsQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCBvbkxvYWQpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gY2hhbm5lbC50YXJnZXQuZXh0ZW5zaW9ucz8uS0hSX2FuaW1hdGlvbl9wb2ludGVyO1xuICAgICAgICBpZiAoIWV4dGVuc2lvbiB8fCAhdGhpcy5fcGF0aFRvT2JqZWN0Q29udmVydGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbm5lbC50YXJnZXQucGF0aCAhPT0gXCJwb2ludGVyXCIgLyogQW5pbWF0aW9uQ2hhbm5lbFRhcmdldFBhdGguUE9JTlRFUiAqLykge1xuICAgICAgICAgICAgTG9nZ2VyLldhcm4oYCR7Y29udGV4dH0vdGFyZ2V0L3BhdGg6IFZhbHVlICgke2NoYW5uZWwudGFyZ2V0LnBhdGh9KSBtdXN0IGJlICgke1wicG9pbnRlclwiIC8qIEFuaW1hdGlvbkNoYW5uZWxUYXJnZXRQYXRoLlBPSU5URVIgKi99KSB3aGVuIHVzaW5nIHRoZSAke3RoaXMubmFtZX0gZXh0ZW5zaW9uYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWwudGFyZ2V0Lm5vZGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBMb2dnZXIuV2FybihgJHtjb250ZXh0fS90YXJnZXQvbm9kZTogVmFsdWUgKCR7Y2hhbm5lbC50YXJnZXQubm9kZX0pIG11c3Qgbm90IGJlIHByZXNlbnQgd2hlbiB1c2luZyB0aGUgJHt0aGlzLm5hbWV9IGV4dGVuc2lvbmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbkNvbnRleHQgPSBgJHtjb250ZXh0fS9leHRlbnNpb25zLyR7dGhpcy5uYW1lfWA7XG4gICAgICAgIGNvbnN0IHBvaW50ZXIgPSBleHRlbnNpb24ucG9pbnRlcjtcbiAgICAgICAgaWYgKCFwb2ludGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZXh0ZW5zaW9uQ29udGV4dH06IFBvaW50ZXIgaXMgbWlzc2luZ2ApO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRJbmZvID0gdGhpcy5fcGF0aFRvT2JqZWN0Q29udmVydGVyLmNvbnZlcnQocG9pbnRlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGVyLl9sb2FkQW5pbWF0aW9uQ2hhbm5lbEZyb21UYXJnZXRJbmZvQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCB0YXJnZXRJbmZvLCBvbkxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBMb2dnZXIuV2FybihgJHtleHRlbnNpb25Db250ZXh0fS9wb2ludGVyOiBJbnZhbGlkIHBvaW50ZXIgKCR7cG9pbnRlcn0pIHNraXBwZWRgKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgS0hSX2FuaW1hdGlvbl9wb2ludGVyKGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S0hSX2FuaW1hdGlvbl9wb2ludGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_draco_mesh_compression.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_draco_mesh_compression.js ***!
  \*******************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_draco_mesh_compression: () => (/* binding */ KHR_draco_mesh_compression)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Meshes_Compression_dracoCompression_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Meshes/Compression/dracoCompression.js */ \"@babylonjs/core/Meshes/Compression/dracoCompression.js\");\n/* harmony import */ var _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Buffers/buffer.js */ \"@babylonjs/core/Buffers/buffer.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Meshes_Compression_dracoCompression_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Meshes_Compression_dracoCompression_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"KHR_draco_mesh_compression\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_draco_mesh_compression/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_draco_mesh_compression {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines whether to use the normalized flag from the glTF accessor instead of the Draco data. Defaults to true.\n         */\n        this.useNormalizedFlagFromAccessor = true;\n        this._loader = loader;\n        this.enabled = _babylonjs_core_Meshes_Compression_dracoCompression_js__WEBPACK_IMPORTED_MODULE_0__.DracoCompression.DecoderAvailable && this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        delete this.dracoCompression;\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    _loadVertexDataAsync(context, primitive, babylonMesh) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.LoadExtensionAsync(context, primitive, this.name, (extensionContext, extension) => {\n            if (primitive.mode != undefined) {\n                if (primitive.mode !== 4 /* MeshPrimitiveMode.TRIANGLES */ && primitive.mode !== 5 /* MeshPrimitiveMode.TRIANGLE_STRIP */) {\n                    throw new Error(`${context}: Unsupported mode ${primitive.mode}`);\n                }\n            }\n            const attributes = {};\n            const normalized = {};\n            const loadAttribute = (name, kind) => {\n                const uniqueId = extension.attributes[name];\n                if (uniqueId == undefined) {\n                    return;\n                }\n                babylonMesh._delayInfo = babylonMesh._delayInfo || [];\n                if (babylonMesh._delayInfo.indexOf(kind) === -1) {\n                    babylonMesh._delayInfo.push(kind);\n                }\n                attributes[kind] = uniqueId;\n                if (this.useNormalizedFlagFromAccessor) {\n                    const accessor = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.ArrayItem.TryGet(this._loader.gltf.accessors, primitive.attributes[name]);\n                    if (accessor) {\n                        normalized[kind] = accessor.normalized || false;\n                    }\n                }\n            };\n            loadAttribute(\"POSITION\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.PositionKind);\n            loadAttribute(\"NORMAL\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.NormalKind);\n            loadAttribute(\"TANGENT\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.TangentKind);\n            loadAttribute(\"TEXCOORD_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UVKind);\n            loadAttribute(\"TEXCOORD_1\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UV2Kind);\n            loadAttribute(\"TEXCOORD_2\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UV3Kind);\n            loadAttribute(\"TEXCOORD_3\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UV4Kind);\n            loadAttribute(\"TEXCOORD_4\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UV5Kind);\n            loadAttribute(\"TEXCOORD_5\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.UV6Kind);\n            loadAttribute(\"JOINTS_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.MatricesIndicesKind);\n            loadAttribute(\"WEIGHTS_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.MatricesWeightsKind);\n            loadAttribute(\"COLOR_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_1__.VertexBuffer.ColorKind);\n            const bufferView = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.ArrayItem.Get(extensionContext, this._loader.gltf.bufferViews, extension.bufferView);\n            if (!bufferView._dracoBabylonGeometry) {\n                bufferView._dracoBabylonGeometry = this._loader.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView).then((data) => {\n                    const dracoCompression = this.dracoCompression || _babylonjs_core_Meshes_Compression_dracoCompression_js__WEBPACK_IMPORTED_MODULE_0__.DracoCompression.Default;\n                    return dracoCompression._decodeMeshToGeometryForGltfAsync(babylonMesh.name, this._loader.babylonScene, data, attributes, normalized).catch((error) => {\n                        throw new Error(`${context}: ${error.message}`);\n                    });\n                });\n            }\n            return bufferView._dracoBabylonGeometry;\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_draco_mesh_compression(loader));\n//# sourceMappingURL=KHR_draco_mesh_compression.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwRjtBQUN6QjtBQUNSO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9HQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBLHVDQUF1QyxRQUFRLHFCQUFxQixlQUFlO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxxREFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDJFQUFZO0FBQ2xELG9DQUFvQywyRUFBWTtBQUNoRCxxQ0FBcUMsMkVBQVk7QUFDakQsd0NBQXdDLDJFQUFZO0FBQ3BELHdDQUF3QywyRUFBWTtBQUNwRCx3Q0FBd0MsMkVBQVk7QUFDcEQsd0NBQXdDLDJFQUFZO0FBQ3BELHdDQUF3QywyRUFBWTtBQUNwRCx3Q0FBd0MsMkVBQVk7QUFDcEQsc0NBQXNDLDJFQUFZO0FBQ2xELHVDQUF1QywyRUFBWTtBQUNuRCxxQ0FBcUMsMkVBQVk7QUFDakQsK0JBQStCLHFEQUFTO0FBQ3hDO0FBQ0Esb0dBQW9HLGlCQUFpQjtBQUNySCxzRUFBc0Usb0dBQWdCO0FBQ3RGO0FBQ0EsMkNBQTJDLFFBQVEsSUFBSSxjQUFjO0FBQ3JFLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQVU7QUFDVixzRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24uanM/ODAyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEcmFjb0NvbXByZXNzaW9uIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvQ29tcHJlc3Npb24vZHJhY29Db21wcmVzc2lvbi5qc1wiO1xuaW1wb3J0IHsgVmVydGV4QnVmZmVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlci5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciwgQXJyYXlJdGVtIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24vUkVBRE1FLm1kKVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24ge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyB3aGV0aGVyIHRvIHVzZSB0aGUgbm9ybWFsaXplZCBmbGFnIGZyb20gdGhlIGdsVEYgYWNjZXNzb3IgaW5zdGVhZCBvZiB0aGUgRHJhY28gZGF0YS4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXNlTm9ybWFsaXplZEZsYWdGcm9tQWNjZXNzb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IERyYWNvQ29tcHJlc3Npb24uRGVjb2RlckF2YWlsYWJsZSAmJiB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuZHJhY29Db21wcmVzc2lvbjtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dCwgcHJpbWl0aXZlLCBiYWJ5bG9uTWVzaCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgcHJpbWl0aXZlLCB0aGlzLm5hbWUsIChleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChwcmltaXRpdmUubW9kZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlLm1vZGUgIT09IDQgLyogTWVzaFByaW1pdGl2ZU1vZGUuVFJJQU5HTEVTICovICYmIHByaW1pdGl2ZS5tb2RlICE9PSA1IC8qIE1lc2hQcmltaXRpdmVNb2RlLlRSSUFOR0xFX1NUUklQICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogVW5zdXBwb3J0ZWQgbW9kZSAke3ByaW1pdGl2ZS5tb2RlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRBdHRyaWJ1dGUgPSAobmFtZSwga2luZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUlkID0gZXh0ZW5zaW9uLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHVuaXF1ZUlkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoLl9kZWxheUluZm8gPSBiYWJ5bG9uTWVzaC5fZGVsYXlJbmZvIHx8IFtdO1xuICAgICAgICAgICAgICAgIGlmIChiYWJ5bG9uTWVzaC5fZGVsYXlJbmZvLmluZGV4T2Yoa2luZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoLl9kZWxheUluZm8ucHVzaChraW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1traW5kXSA9IHVuaXF1ZUlkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZU5vcm1hbGl6ZWRGbGFnRnJvbUFjY2Vzc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc29yID0gQXJyYXlJdGVtLlRyeUdldCh0aGlzLl9sb2FkZXIuZ2x0Zi5hY2Nlc3NvcnMsIHByaW1pdGl2ZS5hdHRyaWJ1dGVzW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2Vzc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkW2tpbmRdID0gYWNjZXNzb3Iubm9ybWFsaXplZCB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiUE9TSVRJT05cIiwgVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZCk7XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiTk9STUFMXCIsIFZlcnRleEJ1ZmZlci5Ob3JtYWxLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJUQU5HRU5UXCIsIFZlcnRleEJ1ZmZlci5UYW5nZW50S2luZCk7XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEVYQ09PUkRfMFwiLCBWZXJ0ZXhCdWZmZXIuVVZLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF8xXCIsIFZlcnRleEJ1ZmZlci5VVjJLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF8yXCIsIFZlcnRleEJ1ZmZlci5VVjNLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF8zXCIsIFZlcnRleEJ1ZmZlci5VVjRLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF80XCIsIFZlcnRleEJ1ZmZlci5VVjVLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF81XCIsIFZlcnRleEJ1ZmZlci5VVjZLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJKT0lOVFNfMFwiLCBWZXJ0ZXhCdWZmZXIuTWF0cmljZXNJbmRpY2VzS2luZCk7XG4gICAgICAgICAgICBsb2FkQXR0cmlidXRlKFwiV0VJR0hUU18wXCIsIFZlcnRleEJ1ZmZlci5NYXRyaWNlc1dlaWdodHNLaW5kKTtcbiAgICAgICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJDT0xPUl8wXCIsIFZlcnRleEJ1ZmZlci5Db2xvcktpbmQpO1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyVmlldyA9IEFycmF5SXRlbS5HZXQoZXh0ZW5zaW9uQ29udGV4dCwgdGhpcy5fbG9hZGVyLmdsdGYuYnVmZmVyVmlld3MsIGV4dGVuc2lvbi5idWZmZXJWaWV3KTtcbiAgICAgICAgICAgIGlmICghYnVmZmVyVmlldy5fZHJhY29CYWJ5bG9uR2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBidWZmZXJWaWV3Ll9kcmFjb0JhYnlsb25HZW9tZXRyeSA9IHRoaXMuX2xvYWRlci5sb2FkQnVmZmVyVmlld0FzeW5jKGAvYnVmZmVyVmlld3MvJHtidWZmZXJWaWV3LmluZGV4fWAsIGJ1ZmZlclZpZXcpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHJhY29Db21wcmVzc2lvbiA9IHRoaXMuZHJhY29Db21wcmVzc2lvbiB8fCBEcmFjb0NvbXByZXNzaW9uLkRlZmF1bHQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkcmFjb0NvbXByZXNzaW9uLl9kZWNvZGVNZXNoVG9HZW9tZXRyeUZvckdsdGZBc3luYyhiYWJ5bG9uTWVzaC5uYW1lLCB0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lLCBkYXRhLCBhdHRyaWJ1dGVzLCBub3JtYWxpemVkKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWZmZXJWaWV3Ll9kcmFjb0JhYnlsb25HZW9tZXRyeTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb24obG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfZHJhY29fbWVzaF9jb21wcmVzc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_draco_mesh_compression.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_interactivity.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_interactivity.js ***!
  \**********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_interactivity: () => (/* binding */ KHR_interactivity)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_flowGraphCoordinator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/flowGraphCoordinator.js */ \"@babylonjs/core/FlowGraph/flowGraphCoordinator.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_flowGraph_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/flowGraph.js */ \"@babylonjs/core/FlowGraph/flowGraph.js\");\n/* harmony import */ var _interactivityFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactivityFunctions.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityFunctions.js\");\n/* harmony import */ var _interactivityPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactivityPathToObjectConverter.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityPathToObjectConverter.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_FlowGraph_flowGraphCoordinator_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_flowGraph_js__WEBPACK_IMPORTED_MODULE_2__, _interactivityFunctions_js__WEBPACK_IMPORTED_MODULE_3__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_FlowGraph_flowGraphCoordinator_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_flowGraph_js__WEBPACK_IMPORTED_MODULE_2__, _interactivityFunctions_js__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst NAME = \"KHR_interactivity\";\n/**\n * Loader extension for KHR_interactivity\n */\nclass KHR_interactivity {\n    /**\n     * @internal\n     * @param _loader\n     */\n    constructor(_loader) {\n        this._loader = _loader;\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n        this._pathConverter = new _interactivityPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_4__.InteractivityPathToObjectConverter(this._loader.gltf);\n    }\n    dispose() {\n        this._loader = null;\n        delete this._pathConverter;\n    }\n    onReady() {\n        if (!this._loader.babylonScene || !this._pathConverter) {\n            return;\n        }\n        const scene = this._loader.babylonScene;\n        const interactivityDefinition = this._loader.gltf.extensions?.KHR_interactivity;\n        const json = (0,_interactivityFunctions_js__WEBPACK_IMPORTED_MODULE_3__.convertGLTFToSerializedFlowGraph)(interactivityDefinition);\n        const coordinator = new _babylonjs_core_FlowGraph_flowGraphCoordinator_js__WEBPACK_IMPORTED_MODULE_1__.FlowGraphCoordinator({ scene });\n        _babylonjs_core_FlowGraph_flowGraph_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraph.Parse(json, { coordinator, pathConverter: this._pathConverter });\n        coordinator.start();\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_interactivity(loader));\n//# sourceMappingURL=KHR_interactivity.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2ludGVyYWN0aXZpdHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQThDO0FBQzJDO0FBQ3RCO0FBQ1k7QUFDYztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxzR0FBa0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0RkFBZ0M7QUFDckQsZ0NBQWdDLG1HQUFvQixHQUFHLE9BQU87QUFDOUQsUUFBUSw2RUFBUyxlQUFlLGlEQUFpRDtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS5qcz8yNWViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoQ29vcmRpbmF0b3IgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0Zsb3dHcmFwaC9mbG93R3JhcGhDb29yZGluYXRvci5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9GbG93R3JhcGgvZmxvd0dyYXBoLmpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0R0xURlRvU2VyaWFsaXplZEZsb3dHcmFwaCB9IGZyb20gXCIuL2ludGVyYWN0aXZpdHlGdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IEludGVyYWN0aXZpdHlQYXRoVG9PYmplY3RDb252ZXJ0ZXIgfSBmcm9tIFwiLi9pbnRlcmFjdGl2aXR5UGF0aFRvT2JqZWN0Q29udmVydGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfaW50ZXJhY3Rpdml0eVwiO1xuLyoqXG4gKiBMb2FkZXIgZXh0ZW5zaW9uIGZvciBLSFJfaW50ZXJhY3Rpdml0eVxuICovXG5leHBvcnQgY2xhc3MgS0hSX2ludGVyYWN0aXZpdHkge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEBwYXJhbSBfbG9hZGVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX2xvYWRlcikge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBfbG9hZGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgICAgICB0aGlzLl9wYXRoQ29udmVydGVyID0gbmV3IEludGVyYWN0aXZpdHlQYXRoVG9PYmplY3RDb252ZXJ0ZXIodGhpcy5fbG9hZGVyLmdsdGYpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgICAgICBkZWxldGUgdGhpcy5fcGF0aENvbnZlcnRlcjtcbiAgICB9XG4gICAgb25SZWFkeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lIHx8ICF0aGlzLl9wYXRoQ29udmVydGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lO1xuICAgICAgICBjb25zdCBpbnRlcmFjdGl2aXR5RGVmaW5pdGlvbiA9IHRoaXMuX2xvYWRlci5nbHRmLmV4dGVuc2lvbnM/LktIUl9pbnRlcmFjdGl2aXR5O1xuICAgICAgICBjb25zdCBqc29uID0gY29udmVydEdMVEZUb1NlcmlhbGl6ZWRGbG93R3JhcGgoaW50ZXJhY3Rpdml0eURlZmluaXRpb24pO1xuICAgICAgICBjb25zdCBjb29yZGluYXRvciA9IG5ldyBGbG93R3JhcGhDb29yZGluYXRvcih7IHNjZW5lIH0pO1xuICAgICAgICBGbG93R3JhcGguUGFyc2UoanNvbiwgeyBjb29yZGluYXRvciwgcGF0aENvbnZlcnRlcjogdGhpcy5fcGF0aENvbnZlcnRlciB9KTtcbiAgICAgICAgY29vcmRpbmF0b3Iuc3RhcnQoKTtcbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfaW50ZXJhY3Rpdml0eShsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9pbnRlcmFjdGl2aXR5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_interactivity.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_lights_punctual.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_lights_punctual.js ***!
  \************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_lights: () => (/* binding */ KHR_lights)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Lights/directionalLight.js */ \"@babylonjs/core/Lights/directionalLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Lights/pointLight.js */ \"@babylonjs/core/Lights/pointLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Lights/spotLight.js */ \"@babylonjs/core/Lights/spotLight.js\");\n/* harmony import */ var _babylonjs_core_Lights_light_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Lights/light.js */ \"@babylonjs/core/Lights/light.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Lights_light_js__WEBPACK_IMPORTED_MODULE_5__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__]);\n([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Lights_light_js__WEBPACK_IMPORTED_MODULE_5__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst NAME = \"KHR_lights_punctual\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_lights_punctual/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_lights {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        delete this._lights;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._lights = extension.lights;\n            _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__.ArrayItem.Assign(this._lights);\n        }\n    }\n    /**\n     * @internal\n     */\n    loadNodeAsync(context, node, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__.GLTFLoader.LoadExtensionAsync(context, node, this.name, (extensionContext, extension) => {\n            this._loader._allMaterialsDirtyRequired = true;\n            return this._loader.loadNodeAsync(context, node, (babylonMesh) => {\n                let babylonLight;\n                const light = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__.ArrayItem.Get(extensionContext, this._lights, extension.light);\n                const name = light.name || babylonMesh.name;\n                this._loader.babylonScene._blockEntityCollection = !!this._loader._assetContainer;\n                switch (light.type) {\n                    case \"directional\" /* KHRLightsPunctual_LightType.DIRECTIONAL */: {\n                        const babylonDirectionalLight = new _babylonjs_core_Lights_directionalLight_js__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight(name, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.Backward(), this._loader.babylonScene);\n                        babylonDirectionalLight.position.setAll(0);\n                        babylonLight = babylonDirectionalLight;\n                        break;\n                    }\n                    case \"point\" /* KHRLightsPunctual_LightType.POINT */: {\n                        babylonLight = new _babylonjs_core_Lights_pointLight_js__WEBPACK_IMPORTED_MODULE_3__.PointLight(name, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero(), this._loader.babylonScene);\n                        break;\n                    }\n                    case \"spot\" /* KHRLightsPunctual_LightType.SPOT */: {\n                        const babylonSpotLight = new _babylonjs_core_Lights_spotLight_js__WEBPACK_IMPORTED_MODULE_4__.SpotLight(name, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.Zero(), _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.Backward(), 0, 1, this._loader.babylonScene);\n                        babylonSpotLight.angle = ((light.spot && light.spot.outerConeAngle) || Math.PI / 4) * 2;\n                        babylonSpotLight.innerAngle = ((light.spot && light.spot.innerConeAngle) || 0) * 2;\n                        babylonLight = babylonSpotLight;\n                        break;\n                    }\n                    default: {\n                        this._loader.babylonScene._blockEntityCollection = false;\n                        throw new Error(`${extensionContext}: Invalid light type (${light.type})`);\n                    }\n                }\n                babylonLight._parentContainer = this._loader._assetContainer;\n                this._loader.babylonScene._blockEntityCollection = false;\n                light._babylonLight = babylonLight;\n                babylonLight.falloffType = _babylonjs_core_Lights_light_js__WEBPACK_IMPORTED_MODULE_5__.Light.FALLOFF_GLTF;\n                babylonLight.diffuse = light.color ? _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_1__.Color3.FromArray(light.color) : _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_1__.Color3.White();\n                babylonLight.intensity = light.intensity == undefined ? 1 : light.intensity;\n                babylonLight.range = light.range == undefined ? Number.MAX_VALUE : light.range;\n                babylonLight.parent = babylonMesh;\n                this._loader._babylonLights.push(babylonLight);\n                _glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__.GLTFLoader.AddPointerMetadata(babylonLight, extensionContext);\n                assign(babylonMesh);\n            });\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_6__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_lights(loader));\n//# sourceMappingURL=KHR_lights_punctual.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX2xpZ2h0c19wdW5jdHVhbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRDtBQUNGO0FBQ2lCO0FBQ1o7QUFDRjtBQUNSO0FBQ0M7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFEQUFTO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdGQUFnQixPQUFPLHlFQUFPO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNEVBQVUsT0FBTyx5RUFBTztBQUNuRTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsMEVBQVMsT0FBTyx5RUFBTyxTQUFTLHlFQUFPO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGlCQUFpQix3QkFBd0IsV0FBVztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGtFQUFLO0FBQ2hELHFEQUFxRCx1RUFBTSwwQkFBMEIsdUVBQU07QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQVU7QUFDMUI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBVTtBQUNWLCtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbGlnaHRzX3B1bmN0dWFsLmpzPzVmMmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3IuanNcIjtcbmltcG9ydCB7IENvbG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvci5qc1wiO1xuaW1wb3J0IHsgRGlyZWN0aW9uYWxMaWdodCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTGlnaHRzL2RpcmVjdGlvbmFsTGlnaHQuanNcIjtcbmltcG9ydCB7IFBvaW50TGlnaHQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9wb2ludExpZ2h0LmpzXCI7XG5pbXBvcnQgeyBTcG90TGlnaHQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0xpZ2h0cy9zcG90TGlnaHQuanNcIjtcbmltcG9ydCB7IExpZ2h0IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9MaWdodHMvbGlnaHQuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIsIEFycmF5SXRlbSB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbGlnaHRzX3B1bmN0dWFsXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2xpZ2h0c19wdW5jdHVhbC9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfbGlnaHRzIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2xpZ2h0cztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG9uTG9hZGluZygpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHRoaXMuX2xvYWRlci5nbHRmLmV4dGVuc2lvbnM7XG4gICAgICAgIGlmIChleHRlbnNpb25zICYmIGV4dGVuc2lvbnNbdGhpcy5uYW1lXSkge1xuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO1xuICAgICAgICAgICAgdGhpcy5fbGlnaHRzID0gZXh0ZW5zaW9uLmxpZ2h0cztcbiAgICAgICAgICAgIEFycmF5SXRlbS5Bc3NpZ24odGhpcy5fbGlnaHRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTm9kZUFzeW5jKGNvbnRleHQsIG5vZGUsIGFzc2lnbikge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbm9kZSwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuX2FsbE1hdGVyaWFsc0RpcnR5UmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkTm9kZUFzeW5jKGNvbnRleHQsIG5vZGUsIChiYWJ5bG9uTWVzaCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBiYWJ5bG9uTGlnaHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBBcnJheUl0ZW0uR2V0KGV4dGVuc2lvbkNvbnRleHQsIHRoaXMuX2xpZ2h0cywgZXh0ZW5zaW9uLmxpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGlnaHQubmFtZSB8fCBiYWJ5bG9uTWVzaC5uYW1lO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fbG9hZGVyLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpcmVjdGlvbmFsXCIgLyogS0hSTGlnaHRzUHVuY3R1YWxfTGlnaHRUeXBlLkRJUkVDVElPTkFMICovOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWJ5bG9uRGlyZWN0aW9uYWxMaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KG5hbWUsIFZlY3RvcjMuQmFja3dhcmQoKSwgdGhpcy5fbG9hZGVyLmJhYnlsb25TY2VuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uRGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXRBbGwoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTGlnaHQgPSBiYWJ5bG9uRGlyZWN0aW9uYWxMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwb2ludFwiIC8qIEtIUkxpZ2h0c1B1bmN0dWFsX0xpZ2h0VHlwZS5QT0lOVCAqLzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbkxpZ2h0ID0gbmV3IFBvaW50TGlnaHQobmFtZSwgVmVjdG9yMy5aZXJvKCksIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNwb3RcIiAvKiBLSFJMaWdodHNQdW5jdHVhbF9MaWdodFR5cGUuU1BPVCAqLzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFieWxvblNwb3RMaWdodCA9IG5ldyBTcG90TGlnaHQobmFtZSwgVmVjdG9yMy5aZXJvKCksIFZlY3RvcjMuQmFja3dhcmQoKSwgMCwgMSwgdGhpcy5fbG9hZGVyLmJhYnlsb25TY2VuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uU3BvdExpZ2h0LmFuZ2xlID0gKChsaWdodC5zcG90ICYmIGxpZ2h0LnNwb3Qub3V0ZXJDb25lQW5nbGUpIHx8IE1hdGguUEkgLyA0KSAqIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uU3BvdExpZ2h0LmlubmVyQW5nbGUgPSAoKGxpZ2h0LnNwb3QgJiYgbGlnaHQuc3BvdC5pbm5lckNvbmVBbmdsZSkgfHwgMCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbkxpZ2h0ID0gYmFieWxvblNwb3RMaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2V4dGVuc2lvbkNvbnRleHR9OiBJbnZhbGlkIGxpZ2h0IHR5cGUgKCR7bGlnaHQudHlwZX0pYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFieWxvbkxpZ2h0Ll9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9sb2FkZXIuX2Fzc2V0Q29udGFpbmVyO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxpZ2h0Ll9iYWJ5bG9uTGlnaHQgPSBiYWJ5bG9uTGlnaHQ7XG4gICAgICAgICAgICAgICAgYmFieWxvbkxpZ2h0LmZhbGxvZmZUeXBlID0gTGlnaHQuRkFMTE9GRl9HTFRGO1xuICAgICAgICAgICAgICAgIGJhYnlsb25MaWdodC5kaWZmdXNlID0gbGlnaHQuY29sb3IgPyBDb2xvcjMuRnJvbUFycmF5KGxpZ2h0LmNvbG9yKSA6IENvbG9yMy5XaGl0ZSgpO1xuICAgICAgICAgICAgICAgIGJhYnlsb25MaWdodC5pbnRlbnNpdHkgPSBsaWdodC5pbnRlbnNpdHkgPT0gdW5kZWZpbmVkID8gMSA6IGxpZ2h0LmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTGlnaHQucmFuZ2UgPSBsaWdodC5yYW5nZSA9PSB1bmRlZmluZWQgPyBOdW1iZXIuTUFYX1ZBTFVFIDogbGlnaHQucmFuZ2U7XG4gICAgICAgICAgICAgICAgYmFieWxvbkxpZ2h0LnBhcmVudCA9IGJhYnlsb25NZXNoO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5fYmFieWxvbkxpZ2h0cy5wdXNoKGJhYnlsb25MaWdodCk7XG4gICAgICAgICAgICAgICAgR0xURkxvYWRlci5BZGRQb2ludGVyTWV0YWRhdGEoYmFieWxvbkxpZ2h0LCBleHRlbnNpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9saWdodHMobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbGlnaHRzX3B1bmN0dWFsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_lights_punctual.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_anisotropy.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_anisotropy.js ***!
  \*****************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_anisotropy: () => (/* binding */ KHR_materials_anisotropy)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_anisotropy\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_anisotropy)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_anisotropy {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 195;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadIridescencePropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadIridescencePropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.anisotropy.isEnabled = true;\n        babylonMaterial.anisotropy.intensity = properties.anisotropyStrength ?? 0;\n        babylonMaterial.anisotropy.angle = properties.anisotropyRotation ?? 0;\n        if (properties.anisotropyTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/anisotropyTexture`, properties.anisotropyTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Anisotropy Intensity)`;\n                babylonMaterial.anisotropy.texture = texture;\n            }));\n        }\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_anisotropy(loader));\n//# sourceMappingURL=KHR_materials_anisotropy.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRTtBQUM3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQSx5Q0FBeUMscUZBQVc7QUFDcEQsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkUsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBLGFBQWE7QUFDYjtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0Esc0RBQVU7QUFDVixvRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5LmpzPzU0MmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5XCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYWluL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5KVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21hdGVyaWFsc19hbmlzb3Ryb3B5IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAxOTU7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZElyaWRlc2NlbmNlUHJvcGVydGllc0FzeW5jKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbiwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4geyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkSXJpZGVzY2VuY2VQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgcHJvcGVydGllcywgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYW5pc290cm9weS5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYW5pc290cm9weS5pbnRlbnNpdHkgPSBwcm9wZXJ0aWVzLmFuaXNvdHJvcHlTdHJlbmd0aCA/PyAwO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYW5pc290cm9weS5hbmdsZSA9IHByb3BlcnRpZXMuYW5pc290cm9weVJvdGF0aW9uID8/IDA7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmFuaXNvdHJvcHlUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9hbmlzb3Ryb3B5VGV4dHVyZWAsIHByb3BlcnRpZXMuYW5pc290cm9weVRleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gYCR7YmFieWxvbk1hdGVyaWFsLm5hbWV9IChBbmlzb3Ryb3B5IEludGVuc2l0eSlgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5hbmlzb3Ryb3B5LnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfYW5pc290cm9weShsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfYW5pc290cm9weS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_anisotropy.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_clearcoat.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_clearcoat.js ***!
  \****************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_clearcoat: () => (/* binding */ KHR_materials_clearcoat)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_clearcoat\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_clearcoat/README.md)\n * [Playground Sample](https://www.babylonjs-playground.com/frame.html#7F7PN6#8)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_clearcoat {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 190;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadClearCoatPropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadClearCoatPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.clearCoat.isEnabled = true;\n        babylonMaterial.clearCoat.useRoughnessFromMainTexture = false;\n        babylonMaterial.clearCoat.remapF0OnInterfaceChange = false;\n        if (properties.clearcoatFactor != undefined) {\n            babylonMaterial.clearCoat.intensity = properties.clearcoatFactor;\n        }\n        else {\n            babylonMaterial.clearCoat.intensity = 0;\n        }\n        if (properties.clearcoatTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/clearcoatTexture`, properties.clearcoatTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (ClearCoat Intensity)`;\n                babylonMaterial.clearCoat.texture = texture;\n            }));\n        }\n        if (properties.clearcoatRoughnessFactor != undefined) {\n            babylonMaterial.clearCoat.roughness = properties.clearcoatRoughnessFactor;\n        }\n        else {\n            babylonMaterial.clearCoat.roughness = 0;\n        }\n        if (properties.clearcoatRoughnessTexture) {\n            properties.clearcoatRoughnessTexture.nonColorData = true;\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/clearcoatRoughnessTexture`, properties.clearcoatRoughnessTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (ClearCoat Roughness)`;\n                babylonMaterial.clearCoat.textureRoughness = texture;\n            }));\n        }\n        if (properties.clearcoatNormalTexture) {\n            properties.clearcoatNormalTexture.nonColorData = true;\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/clearcoatNormalTexture`, properties.clearcoatNormalTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (ClearCoat Normal)`;\n                babylonMaterial.clearCoat.bumpTexture = texture;\n            }));\n            babylonMaterial.invertNormalMapX = !babylonMaterial.getScene().useRightHandedSystem;\n            babylonMaterial.invertNormalMapY = babylonMaterial.getScene().useRightHandedSystem;\n            if (properties.clearcoatNormalTexture.scale != undefined) {\n                babylonMaterial.clearCoat.bumpTexture.level = properties.clearcoatNormalTexture.scale;\n            }\n        }\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_clearcoat(loader));\n//# sourceMappingURL=KHR_materials_clearcoat.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19jbGVhcmNvYXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BELCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkUsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0Esc0RBQVU7QUFDVixtRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19jbGVhcmNvYXQuanM/MzVlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX2NsZWFyY29hdFwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfY2xlYXJjb2F0L1JFQURNRS5tZClcbiAqIFtQbGF5Z3JvdW5kIFNhbXBsZV0oaHR0cHM6Ly93d3cuYmFieWxvbmpzLXBsYXlncm91bmQuY29tL2ZyYW1lLmh0bWwjN0Y3UE42IzgpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfbWF0ZXJpYWxzX2NsZWFyY29hdCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTkwO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRDbGVhckNvYXRQcm9wZXJ0aWVzQXN5bmMoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRDbGVhckNvYXRQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgcHJvcGVydGllcywgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuY2xlYXJDb2F0LmlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQudXNlUm91Z2huZXNzRnJvbU1haW5UZXh0dXJlID0gZmFsc2U7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQucmVtYXBGME9uSW50ZXJmYWNlQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmNsZWFyY29hdEZhY3RvciAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQuaW50ZW5zaXR5ID0gcHJvcGVydGllcy5jbGVhcmNvYXRGYWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuY2xlYXJDb2F0LmludGVuc2l0eSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuY2xlYXJjb2F0VGV4dHVyZSkge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vY2xlYXJjb2F0VGV4dHVyZWAsIHByb3BlcnRpZXMuY2xlYXJjb2F0VGV4dHVyZSwgKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKENsZWFyQ29hdCBJbnRlbnNpdHkpYDtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuY2xlYXJDb2F0LnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmNsZWFyY29hdFJvdWdobmVzc0ZhY3RvciAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQucm91Z2huZXNzID0gcHJvcGVydGllcy5jbGVhcmNvYXRSb3VnaG5lc3NGYWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuY2xlYXJDb2F0LnJvdWdobmVzcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuY2xlYXJjb2F0Um91Z2huZXNzVGV4dHVyZSkge1xuICAgICAgICAgICAgcHJvcGVydGllcy5jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlLm5vbkNvbG9yRGF0YSA9IHRydWU7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlYCwgcHJvcGVydGllcy5jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoQ2xlYXJDb2F0IFJvdWdobmVzcylgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQudGV4dHVyZVJvdWdobmVzcyA9IHRleHR1cmU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZSkge1xuICAgICAgICAgICAgcHJvcGVydGllcy5jbGVhcmNvYXROb3JtYWxUZXh0dXJlLm5vbkNvbG9yRGF0YSA9IHRydWU7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9jbGVhcmNvYXROb3JtYWxUZXh0dXJlYCwgcHJvcGVydGllcy5jbGVhcmNvYXROb3JtYWxUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoQ2xlYXJDb2F0IE5vcm1hbClgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5jbGVhckNvYXQuYnVtcFRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmludmVydE5vcm1hbE1hcFggPSAhYmFieWxvbk1hdGVyaWFsLmdldFNjZW5lKCkudXNlUmlnaHRIYW5kZWRTeXN0ZW07XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuaW52ZXJ0Tm9ybWFsTWFwWSA9IGJhYnlsb25NYXRlcmlhbC5nZXRTY2VuZSgpLnVzZVJpZ2h0SGFuZGVkU3lzdGVtO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZS5zY2FsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuY2xlYXJDb2F0LmJ1bXBUZXh0dXJlLmxldmVsID0gcHJvcGVydGllcy5jbGVhcmNvYXROb3JtYWxUZXh0dXJlLnNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfY2xlYXJjb2F0KGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S0hSX21hdGVyaWFsc19jbGVhcmNvYXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_clearcoat.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_dispersion.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_dispersion.js ***!
  \*****************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_dispersion: () => (/* binding */ KHR_materials_dispersion)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_dispersion\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/87bd64a7f5e23c84b6aef2e6082069583ed0ddb4/extensions/2.0/Khronos/KHR_materials_dispersion/README.md)\n * @experimental\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_dispersion {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 174;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadDispersionPropertiesAsync(extensionContext, material, babylonMaterial, extension));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadDispersionPropertiesAsync(context, material, babylonMaterial, extension) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        // If transparency isn't enabled already, this extension shouldn't do anything.\n        // i.e. it requires either the KHR_materials_transmission or KHR_materials_translucency extensions.\n        if (!babylonMaterial.subSurface.isRefractionEnabled || !extension.dispersion) {\n            return Promise.resolve();\n        }\n        babylonMaterial.subSurface.isDispersionEnabled = true;\n        babylonMaterial.subSurface.dispersion = extension.dispersion;\n        return Promise.resolve();\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_dispersion(loader));\n//# sourceMappingURL=KHR_materials_dispersion.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19kaXNwZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRTtBQUM3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BELCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBVTtBQUNWLG9EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb24uanM/Yzk0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb25cIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iLzg3YmQ2NGE3ZjVlMjNjODRiNmFlZjJlNjA4MjA2OTU4M2VkMGRkYjQvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb24vUkVBRE1FLm1kKVxuICogQGV4cGVyaW1lbnRhbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21hdGVyaWFsc19kaXNwZXJzaW9uIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAxNzQ7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsQmFzZVByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkRGlzcGVyc2lvblByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsLCBleHRlbnNpb24pKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWREaXNwZXJzaW9uUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwsIGV4dGVuc2lvbikge1xuICAgICAgICBpZiAoIShiYWJ5bG9uTWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdHJhbnNwYXJlbmN5IGlzbid0IGVuYWJsZWQgYWxyZWFkeSwgdGhpcyBleHRlbnNpb24gc2hvdWxkbid0IGRvIGFueXRoaW5nLlxuICAgICAgICAvLyBpLmUuIGl0IHJlcXVpcmVzIGVpdGhlciB0aGUgS0hSX21hdGVyaWFsc190cmFuc21pc3Npb24gb3IgS0hSX21hdGVyaWFsc190cmFuc2x1Y2VuY3kgZXh0ZW5zaW9ucy5cbiAgICAgICAgaWYgKCFiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5pc1JlZnJhY3Rpb25FbmFibGVkIHx8ICFleHRlbnNpb24uZGlzcGVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5zdWJTdXJmYWNlLmlzRGlzcGVyc2lvbkVuYWJsZWQgPSB0cnVlO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5kaXNwZXJzaW9uID0gZXh0ZW5zaW9uLmRpc3BlcnNpb247XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb24obG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbWF0ZXJpYWxzX2Rpc3BlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_dispersion.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_emissive_strength.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_emissive_strength.js ***!
  \************************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_emissive_strength: () => (/* binding */ KHR_materials_emissive_strength)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_emissive_strength\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_emissive_strength/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_emissive_strength {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 170;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            return this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial).then(() => {\n                this._loadEmissiveProperties(extensionContext, extension, babylonMaterial);\n            });\n        });\n    }\n    _loadEmissiveProperties(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        if (properties.emissiveStrength !== undefined) {\n            babylonMaterial.emissiveIntensity = properties.emissiveStrength;\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_emissive_strength(loader));\n//# sourceMappingURL=KHR_materials_emissive_strength.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19lbWlzc2l2ZV9zdHJlbmd0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkU7QUFDN0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5QyxxRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbWF0ZXJpYWxzX2VtaXNzaXZlX3N0cmVuZ3RoLmpzPzE1YjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiS0hSX21hdGVyaWFsc19lbWlzc2l2ZV9zdHJlbmd0aFwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfZW1pc3NpdmVfc3RyZW5ndGgvUkVBRE1FLm1kKVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21hdGVyaWFsc19lbWlzc2l2ZV9zdHJlbmd0aCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTcwO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZEVtaXNzaXZlUHJvcGVydGllcyhleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24sIGJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkRW1pc3NpdmVQcm9wZXJ0aWVzKGNvbnRleHQsIHByb3BlcnRpZXMsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICBpZiAoIShiYWJ5bG9uTWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuZW1pc3NpdmVTdHJlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSBwcm9wZXJ0aWVzLmVtaXNzaXZlU3RyZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfbWF0ZXJpYWxzX2VtaXNzaXZlX3N0cmVuZ3RoKGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S0hSX21hdGVyaWFsc19lbWlzc2l2ZV9zdHJlbmd0aC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_emissive_strength.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_ior.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_ior.js ***!
  \**********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_ior: () => (/* binding */ KHR_materials_ior)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_ior\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_ior/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_ior {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 180;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadIorPropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadIorPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        if (properties.ior !== undefined) {\n            babylonMaterial.indexOfRefraction = properties.ior;\n        }\n        else {\n            babylonMaterial.indexOfRefraction = KHR_materials_ior._DEFAULT_IOR;\n        }\n        return Promise.resolve();\n    }\n}\n/**\n * Default ior Value from the spec.\n */\nKHR_materials_ior._DEFAULT_IOR = 1.5;\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_ior(loader));\n//# sourceMappingURL=KHR_materials_ior.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19pb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5QyxxRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQVU7QUFDViw2QyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19pb3IuanM/ZjYxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX2lvclwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfaW9yL1JFQURNRS5tZClcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl9tYXRlcmlhbHNfaW9yIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAxODA7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZElvclByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24sIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZElvclByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBwcm9wZXJ0aWVzLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKCEoYmFieWxvbk1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IE1hdGVyaWFsIHR5cGUgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmlvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuaW5kZXhPZlJlZnJhY3Rpb24gPSBwcm9wZXJ0aWVzLmlvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5pbmRleE9mUmVmcmFjdGlvbiA9IEtIUl9tYXRlcmlhbHNfaW9yLl9ERUZBVUxUX0lPUjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBEZWZhdWx0IGlvciBWYWx1ZSBmcm9tIHRoZSBzcGVjLlxuICovXG5LSFJfbWF0ZXJpYWxzX2lvci5fREVGQVVMVF9JT1IgPSAxLjU7XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfbWF0ZXJpYWxzX2lvcihsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfaW9yLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_ior.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_iridescence.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_iridescence.js ***!
  \******************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_iridescence: () => (/* binding */ KHR_materials_iridescence)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_iridescence\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_iridescence/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_iridescence {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 195;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadIridescencePropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadIridescencePropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.iridescence.isEnabled = true;\n        babylonMaterial.iridescence.intensity = properties.iridescenceFactor ?? 0;\n        babylonMaterial.iridescence.indexOfRefraction = properties.iridescenceIor ?? properties.iridescenceIOR ?? 1.3;\n        babylonMaterial.iridescence.minimumThickness = properties.iridescenceThicknessMinimum ?? 100;\n        babylonMaterial.iridescence.maximumThickness = properties.iridescenceThicknessMaximum ?? 400;\n        if (properties.iridescenceTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/iridescenceTexture`, properties.iridescenceTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Iridescence Intensity)`;\n                babylonMaterial.iridescence.texture = texture;\n            }));\n        }\n        if (properties.iridescenceThicknessTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/iridescenceThicknessTexture`, properties.iridescenceThicknessTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Iridescence Thickness)`;\n                babylonMaterial.iridescence.thicknessTexture = texture;\n            }));\n        }\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_iridescence(loader));\n//# sourceMappingURL=KHR_materials_iridescence.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19pcmlkZXNjZW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkU7QUFDN0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BELCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQSxzREFBVTtBQUNWLHFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbWF0ZXJpYWxzX2lyaWRlc2NlbmNlLmpzPzg0NzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiS0hSX21hdGVyaWFsc19pcmlkZXNjZW5jZVwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfaXJpZGVzY2VuY2UvUkVBRE1FLm1kKVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21hdGVyaWFsc19pcmlkZXNjZW5jZSB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTk1O1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRJcmlkZXNjZW5jZVByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24sIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZElyaWRlc2NlbmNlUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIHByb3BlcnRpZXMsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICBpZiAoIShiYWJ5bG9uTWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLmlyaWRlc2NlbmNlLmlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5pcmlkZXNjZW5jZS5pbnRlbnNpdHkgPSBwcm9wZXJ0aWVzLmlyaWRlc2NlbmNlRmFjdG9yID8/IDA7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5pcmlkZXNjZW5jZS5pbmRleE9mUmVmcmFjdGlvbiA9IHByb3BlcnRpZXMuaXJpZGVzY2VuY2VJb3IgPz8gcHJvcGVydGllcy5pcmlkZXNjZW5jZUlPUiA/PyAxLjM7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5pcmlkZXNjZW5jZS5taW5pbXVtVGhpY2tuZXNzID0gcHJvcGVydGllcy5pcmlkZXNjZW5jZVRoaWNrbmVzc01pbmltdW0gPz8gMTAwO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuaXJpZGVzY2VuY2UubWF4aW11bVRoaWNrbmVzcyA9IHByb3BlcnRpZXMuaXJpZGVzY2VuY2VUaGlja25lc3NNYXhpbXVtID8/IDQwMDtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMuaXJpZGVzY2VuY2VUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9pcmlkZXNjZW5jZVRleHR1cmVgLCBwcm9wZXJ0aWVzLmlyaWRlc2NlbmNlVGV4dHVyZSwgKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKElyaWRlc2NlbmNlIEludGVuc2l0eSlgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5pcmlkZXNjZW5jZS50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydGllcy5pcmlkZXNjZW5jZVRoaWNrbmVzc1RleHR1cmUpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L2lyaWRlc2NlbmNlVGhpY2tuZXNzVGV4dHVyZWAsIHByb3BlcnRpZXMuaXJpZGVzY2VuY2VUaGlja25lc3NUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoSXJpZGVzY2VuY2UgVGhpY2tuZXNzKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmlyaWRlc2NlbmNlLnRoaWNrbmVzc1RleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfaXJpZGVzY2VuY2UobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbWF0ZXJpYWxzX2lyaWRlc2NlbmNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_iridescence.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.js ***!
  \****************************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_pbrSpecularGlossiness: () => (/* binding */ KHR_materials_pbrSpecularGlossiness)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"KHR_materials_pbrSpecularGlossiness\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_pbrSpecularGlossiness {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 200;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadSpecularGlossinessPropertiesAsync(extensionContext, extension, babylonMaterial));\n            this._loader.loadMaterialAlphaProperties(context, material, babylonMaterial);\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadSpecularGlossinessPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.metallic = null;\n        babylonMaterial.roughness = null;\n        if (properties.diffuseFactor) {\n            babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.FromArray(properties.diffuseFactor);\n            babylonMaterial.alpha = properties.diffuseFactor[3];\n        }\n        else {\n            babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.White();\n        }\n        babylonMaterial.reflectivityColor = properties.specularFactor ? _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.FromArray(properties.specularFactor) : _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.White();\n        babylonMaterial.microSurface = properties.glossinessFactor == undefined ? 1 : properties.glossinessFactor;\n        if (properties.diffuseTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/diffuseTexture`, properties.diffuseTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Diffuse)`;\n                babylonMaterial.albedoTexture = texture;\n            }));\n        }\n        if (properties.specularGlossinessTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/specularGlossinessTexture`, properties.specularGlossinessTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Specular Glossiness)`;\n                babylonMaterial.reflectivityTexture = texture;\n                babylonMaterial.reflectivityTexture.hasAlpha = true;\n            }));\n            babylonMaterial.useMicroSurfaceFromReflectivityMapAlpha = true;\n        }\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_pbrSpecularGlossiness(loader));\n//# sourceMappingURL=KHR_materials_pbrSpecularGlossiness.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE2RDtBQUNjO0FBQzdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BELCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUVBQU07QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHVFQUFNO0FBQ2hEO0FBQ0Esd0VBQXdFLHVFQUFNLHdDQUF3Qyx1RUFBTTtBQUM1SDtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkUsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsK0RBQStELFFBQVE7QUFDdkUsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsK0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzLmpzP2M0YTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yLmpzXCI7XG5pbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzc1wiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9BcmNoaXZlZC9LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcy9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcyB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMjAwO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbEJhc2VQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkU3BlY3VsYXJHbG9zc2luZXNzUHJvcGVydGllc0FzeW5jKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbiwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsQWxwaGFQcm9wZXJ0aWVzKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZFNwZWN1bGFyR2xvc3NpbmVzc1Byb3BlcnRpZXNBc3luYyhjb250ZXh0LCBwcm9wZXJ0aWVzLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKCEoYmFieWxvbk1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IE1hdGVyaWFsIHR5cGUgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5tZXRhbGxpYyA9IG51bGw7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5yb3VnaG5lc3MgPSBudWxsO1xuICAgICAgICBpZiAocHJvcGVydGllcy5kaWZmdXNlRmFjdG9yKSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvQ29sb3IgPSBDb2xvcjMuRnJvbUFycmF5KHByb3BlcnRpZXMuZGlmZnVzZUZhY3Rvcik7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxwaGEgPSBwcm9wZXJ0aWVzLmRpZmZ1c2VGYWN0b3JbM107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvQ29sb3IgPSBDb2xvcjMuV2hpdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwucmVmbGVjdGl2aXR5Q29sb3IgPSBwcm9wZXJ0aWVzLnNwZWN1bGFyRmFjdG9yID8gQ29sb3IzLkZyb21BcnJheShwcm9wZXJ0aWVzLnNwZWN1bGFyRmFjdG9yKSA6IENvbG9yMy5XaGl0ZSgpO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwubWljcm9TdXJmYWNlID0gcHJvcGVydGllcy5nbG9zc2luZXNzRmFjdG9yID09IHVuZGVmaW5lZCA/IDEgOiBwcm9wZXJ0aWVzLmdsb3NzaW5lc3NGYWN0b3I7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLmRpZmZ1c2VUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9kaWZmdXNlVGV4dHVyZWAsIHByb3BlcnRpZXMuZGlmZnVzZVRleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gYCR7YmFieWxvbk1hdGVyaWFsLm5hbWV9IChEaWZmdXNlKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L3NwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmVgLCBwcm9wZXJ0aWVzLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gYCR7YmFieWxvbk1hdGVyaWFsLm5hbWV9IChTcGVjdWxhciBHbG9zc2luZXNzKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnJlZmxlY3Rpdml0eVRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5yZWZsZWN0aXZpdHlUZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC51c2VNaWNyb1N1cmZhY2VGcm9tUmVmbGVjdGl2aXR5TWFwQWxwaGEgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzKGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3MuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_sheen.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_sheen.js ***!
  \************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_sheen: () => (/* binding */ KHR_materials_sheen)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"KHR_materials_sheen\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_sheen/README.md)\n * [Playground Sample](https://www.babylonjs-playground.com/frame.html#BNIZX6#4)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_sheen {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 190;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadSheenPropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadSheenPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.sheen.isEnabled = true;\n        babylonMaterial.sheen.intensity = 1;\n        if (properties.sheenColorFactor != undefined) {\n            babylonMaterial.sheen.color = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(properties.sheenColorFactor);\n        }\n        else {\n            babylonMaterial.sheen.color = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.Black();\n        }\n        if (properties.sheenColorTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/sheenColorTexture`, properties.sheenColorTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Sheen Color)`;\n                babylonMaterial.sheen.texture = texture;\n            }));\n        }\n        if (properties.sheenRoughnessFactor !== undefined) {\n            babylonMaterial.sheen.roughness = properties.sheenRoughnessFactor;\n        }\n        else {\n            babylonMaterial.sheen.roughness = 0;\n        }\n        if (properties.sheenRoughnessTexture) {\n            properties.sheenRoughnessTexture.nonColorData = true;\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/sheenRoughnessTexture`, properties.sheenRoughnessTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Sheen Roughness)`;\n                babylonMaterial.sheen.textureRoughness = texture;\n            }));\n        }\n        babylonMaterial.sheen.albedoScaling = true;\n        babylonMaterial.sheen.useRoughnessFromMainTexture = false;\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_sheen(loader));\n//# sourceMappingURL=KHR_materials_sheen.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19zaGVlbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQ2U7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQSx5Q0FBeUMscUZBQVc7QUFDcEQsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx1RUFBTTtBQUNoRDtBQUNBO0FBQ0EsMENBQTBDLHVFQUFNO0FBQ2hEO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQSxzREFBVTtBQUNWLCtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbWF0ZXJpYWxzX3NoZWVuLmpzP2M4ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuaW1wb3J0IHsgQ29sb3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX3NoZWVuXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc19zaGVlbi9SRUFETUUubWQpXG4gKiBbUGxheWdyb3VuZCBTYW1wbGVdKGh0dHBzOi8vd3d3LmJhYnlsb25qcy1wbGF5Z3JvdW5kLmNvbS9mcmFtZS5odG1sI0JOSVpYNiM0KVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21hdGVyaWFsc19zaGVlbiB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTkwO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRTaGVlblByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24sIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZFNoZWVuUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIHByb3BlcnRpZXMsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICBpZiAoIShiYWJ5bG9uTWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLmlzRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5zaGVlbi5pbnRlbnNpdHkgPSAxO1xuICAgICAgICBpZiAocHJvcGVydGllcy5zaGVlbkNvbG9yRmFjdG9yICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLmNvbG9yID0gQ29sb3IzLkZyb21BcnJheShwcm9wZXJ0aWVzLnNoZWVuQ29sb3JGYWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLmNvbG9yID0gQ29sb3IzLkJsYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuc2hlZW5Db2xvclRleHR1cmUpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L3NoZWVuQ29sb3JUZXh0dXJlYCwgcHJvcGVydGllcy5zaGVlbkNvbG9yVGV4dHVyZSwgKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKFNoZWVuIENvbG9yKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnNoZWVuUm91Z2huZXNzRmFjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5zaGVlbi5yb3VnaG5lc3MgPSBwcm9wZXJ0aWVzLnNoZWVuUm91Z2huZXNzRmFjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLnJvdWdobmVzcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuc2hlZW5Sb3VnaG5lc3NUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnNoZWVuUm91Z2huZXNzVGV4dHVyZS5ub25Db2xvckRhdGEgPSB0cnVlO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vc2hlZW5Sb3VnaG5lc3NUZXh0dXJlYCwgcHJvcGVydGllcy5zaGVlblJvdWdobmVzc1RleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gYCR7YmFieWxvbk1hdGVyaWFsLm5hbWV9IChTaGVlbiBSb3VnaG5lc3MpYDtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc2hlZW4udGV4dHVyZVJvdWdobmVzcyA9IHRleHR1cmU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNoZWVuLmFsYmVkb1NjYWxpbmcgPSB0cnVlO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc2hlZW4udXNlUm91Z2huZXNzRnJvbU1haW5UZXh0dXJlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfc2hlZW4obG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbWF0ZXJpYWxzX3NoZWVuLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_sheen.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_specular.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_specular.js ***!
  \***************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_specular: () => (/* binding */ KHR_materials_specular)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"KHR_materials_specular\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_specular/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_specular {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 190;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadSpecularPropertiesAsync(extensionContext, extension, babylonMaterial));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadSpecularPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        if (properties.specularFactor !== undefined) {\n            babylonMaterial.metallicF0Factor = properties.specularFactor;\n        }\n        if (properties.specularColorFactor !== undefined) {\n            babylonMaterial.metallicReflectanceColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(properties.specularColorFactor);\n        }\n        if (properties.specularTexture) {\n            properties.specularTexture.nonColorData = true;\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/specularTexture`, properties.specularTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Specular F0 Strength)`;\n                babylonMaterial.metallicReflectanceTexture = texture;\n                babylonMaterial.useOnlyMetallicFromMetallicReflectanceTexture = true;\n            }));\n        }\n        if (properties.specularColorTexture) {\n            promises.push(this._loader.loadTextureInfoAsync(`${context}/specularColorTexture`, properties.specularColorTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Specular F0 Color)`;\n                babylonMaterial.reflectanceTexture = texture;\n            }));\n        }\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_specular(loader));\n//# sourceMappingURL=KHR_materials_specular.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc19zcGVjdWxhci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQ2U7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZELFNBQVM7QUFDVDtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BELCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCx1RUFBTTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsUUFBUTtBQUN2RSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQSxhQUFhO0FBQ2I7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBLHNEQUFVO0FBQ1Ysa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9tYXRlcmlhbHNfc3BlY3VsYXIuanM/ZmZlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5pbXBvcnQgeyBDb2xvcjMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGguY29sb3IuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl9tYXRlcmlhbHNfc3BlY3VsYXJcIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3NwZWN1bGFyL1JFQURNRS5tZClcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl9tYXRlcmlhbHNfc3BlY3VsYXIge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBhIG51bWJlciB0aGF0IGRldGVybWluZXMgdGhlIG9yZGVyIHRoZSBleHRlbnNpb25zIGFyZSBhcHBsaWVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmRlciA9IDE5MDtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCB0aGlzLm5hbWUsIChleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkU3BlY3VsYXJQcm9wZXJ0aWVzQXN5bmMoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRTcGVjdWxhclByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBwcm9wZXJ0aWVzLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKCEoYmFieWxvbk1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IE1hdGVyaWFsIHR5cGUgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzLnNwZWN1bGFyRmFjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5tZXRhbGxpY0YwRmFjdG9yID0gcHJvcGVydGllcy5zcGVjdWxhckZhY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydGllcy5zcGVjdWxhckNvbG9yRmFjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5tZXRhbGxpY1JlZmxlY3RhbmNlQ29sb3IgPSBDb2xvcjMuRnJvbUFycmF5KHByb3BlcnRpZXMuc3BlY3VsYXJDb2xvckZhY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuc3BlY3VsYXJUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnNwZWN1bGFyVGV4dHVyZS5ub25Db2xvckRhdGEgPSB0cnVlO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vc3BlY3VsYXJUZXh0dXJlYCwgcHJvcGVydGllcy5zcGVjdWxhclRleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gYCR7YmFieWxvbk1hdGVyaWFsLm5hbWV9IChTcGVjdWxhciBGMCBTdHJlbmd0aClgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5tZXRhbGxpY1JlZmxlY3RhbmNlVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnVzZU9ubHlNZXRhbGxpY0Zyb21NZXRhbGxpY1JlZmxlY3RhbmNlVGV4dHVyZSA9IHRydWU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnRpZXMuc3BlY3VsYXJDb2xvclRleHR1cmUpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L3NwZWN1bGFyQ29sb3JUZXh0dXJlYCwgcHJvcGVydGllcy5zcGVjdWxhckNvbG9yVGV4dHVyZSwgKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKFNwZWN1bGFyIEYwIENvbG9yKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnJlZmxlY3RhbmNlVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgS0hSX21hdGVyaWFsc19zcGVjdWxhcihsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfc3BlY3VsYXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_specular.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_translucency.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_translucency.js ***!
  \*******************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_translucency: () => (/* binding */ KHR_materials_translucency)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_translucency\";\n/**\n * [Proposed Specification](https://github.com/KhronosGroup/glTF/pull/1825)\n * !!! Experimental Extension Subject to Changes !!!\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_translucency {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 174;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n        if (this.enabled) {\n            loader.parent.transparencyAsCoverage = true;\n        }\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadTranslucentPropertiesAsync(extensionContext, material, babylonMaterial, extension));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadTranslucentPropertiesAsync(context, material, babylonMaterial, extension) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const pbrMaterial = babylonMaterial;\n        // Enables \"translucency\" texture which represents diffusely-transmitted light.\n        pbrMaterial.subSurface.isTranslucencyEnabled = true;\n        // Since this extension models thin-surface transmission only, we must make the\n        // internal IOR == 1.0 and set the thickness to 0.\n        pbrMaterial.subSurface.volumeIndexOfRefraction = 1.0;\n        pbrMaterial.subSurface.minimumThickness = 0.0;\n        pbrMaterial.subSurface.maximumThickness = 0.0;\n        // Albedo colour will tint transmission.\n        pbrMaterial.subSurface.useAlbedoToTintTranslucency = true;\n        if (extension.translucencyFactor !== undefined) {\n            pbrMaterial.subSurface.translucencyIntensity = extension.translucencyFactor;\n        }\n        else {\n            pbrMaterial.subSurface.translucencyIntensity = 0.0;\n            pbrMaterial.subSurface.isTranslucencyEnabled = false;\n            return Promise.resolve();\n        }\n        if (extension.translucencyTexture) {\n            extension.translucencyTexture.nonColorData = true;\n            return this._loader.loadTextureInfoAsync(`${context}/translucencyTexture`, extension.translucencyTexture).then((texture) => {\n                pbrMaterial.subSurface.translucencyIntensityTexture = texture;\n            });\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_translucency(loader));\n//# sourceMappingURL=KHR_materials_translucency.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc190cmFuc2x1Y2VuY3kuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQSx5Q0FBeUMscUZBQVc7QUFDcEQsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELFFBQVE7QUFDaEU7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQVU7QUFDVixzRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc190cmFuc2x1Y2VuY3kuanM/NjY2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX3RyYW5zbHVjZW5jeVwiO1xuLyoqXG4gKiBbUHJvcG9zZWQgU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3B1bGwvMTgyNSlcbiAqICEhISBFeHBlcmltZW50YWwgRXh0ZW5zaW9uIFN1YmplY3QgdG8gQ2hhbmdlcyAhISFcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl9tYXRlcmlhbHNfdHJhbnNsdWNlbmN5IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAxNzQ7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgbG9hZGVyLnBhcmVudC50cmFuc3BhcmVuY3lBc0NvdmVyYWdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCB0aGlzLm5hbWUsIChleHRlbnNpb25Db250ZXh0LCBleHRlbnNpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxCYXNlUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRUcmFuc2x1Y2VudFByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsLCBleHRlbnNpb24pKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRUcmFuc2x1Y2VudFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsLCBleHRlbnNpb24pIHtcbiAgICAgICAgaWYgKCEoYmFieWxvbk1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IE1hdGVyaWFsIHR5cGUgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBick1hdGVyaWFsID0gYmFieWxvbk1hdGVyaWFsO1xuICAgICAgICAvLyBFbmFibGVzIFwidHJhbnNsdWNlbmN5XCIgdGV4dHVyZSB3aGljaCByZXByZXNlbnRzIGRpZmZ1c2VseS10cmFuc21pdHRlZCBsaWdodC5cbiAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS5pc1RyYW5zbHVjZW5jeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyBTaW5jZSB0aGlzIGV4dGVuc2lvbiBtb2RlbHMgdGhpbi1zdXJmYWNlIHRyYW5zbWlzc2lvbiBvbmx5LCB3ZSBtdXN0IG1ha2UgdGhlXG4gICAgICAgIC8vIGludGVybmFsIElPUiA9PSAxLjAgYW5kIHNldCB0aGUgdGhpY2tuZXNzIHRvIDAuXG4gICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2Uudm9sdW1lSW5kZXhPZlJlZnJhY3Rpb24gPSAxLjA7XG4gICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UubWluaW11bVRoaWNrbmVzcyA9IDAuMDtcbiAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS5tYXhpbXVtVGhpY2tuZXNzID0gMC4wO1xuICAgICAgICAvLyBBbGJlZG8gY29sb3VyIHdpbGwgdGludCB0cmFuc21pc3Npb24uXG4gICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UudXNlQWxiZWRvVG9UaW50VHJhbnNsdWNlbmN5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbi50cmFuc2x1Y2VuY3lGYWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS50cmFuc2x1Y2VuY3lJbnRlbnNpdHkgPSBleHRlbnNpb24udHJhbnNsdWNlbmN5RmFjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS50cmFuc2x1Y2VuY3lJbnRlbnNpdHkgPSAwLjA7XG4gICAgICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLmlzVHJhbnNsdWNlbmN5RW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnNpb24udHJhbnNsdWNlbmN5VGV4dHVyZSkge1xuICAgICAgICAgICAgZXh0ZW5zaW9uLnRyYW5zbHVjZW5jeVRleHR1cmUubm9uQ29sb3JEYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vdHJhbnNsdWNlbmN5VGV4dHVyZWAsIGV4dGVuc2lvbi50cmFuc2x1Y2VuY3lUZXh0dXJlKS50aGVuKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS50cmFuc2x1Y2VuY3lJbnRlbnNpdHlUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgS0hSX21hdGVyaWFsc190cmFuc2x1Y2VuY3kobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbWF0ZXJpYWxzX3RyYW5zbHVjZW5jeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_translucency.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_transmission.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_transmission.js ***!
  \*******************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_transmission: () => (/* binding */ KHR_materials_transmission)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Materials_Textures_renderTargetTexture_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/renderTargetTexture.js */ \"@babylonjs/core/Materials/Textures/renderTargetTexture.js\");\n/* harmony import */ var _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Misc/observable.js */ \"@babylonjs/core/Misc/observable.js\");\n/* harmony import */ var _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Engines/constants.js */ \"@babylonjs/core/Engines/constants.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Materials_Textures_renderTargetTexture_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_5__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Materials_Textures_renderTargetTexture_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n/**\n * A class to handle setting up the rendering of opaque objects to be shown through transmissive objects.\n */\nclass TransmissionHelper {\n    /**\n     * Creates the default options for the helper.\n     * @returns the default options\n     */\n    static _GetDefaultOptions() {\n        return {\n            renderSize: 1024,\n            samples: 4,\n            lodGenerationScale: 1,\n            lodGenerationOffset: -4,\n            renderTargetTextureType: _babylonjs_core_Engines_constants_js__WEBPACK_IMPORTED_MODULE_4__.Constants.TEXTURETYPE_HALF_FLOAT,\n            generateMipmaps: true,\n        };\n    }\n    /**\n     * constructor\n     * @param options Defines the options we want to customize the helper\n     * @param scene The scene to add the material to\n     */\n    constructor(options, scene) {\n        this._opaqueRenderTarget = null;\n        this._opaqueMeshesCache = [];\n        this._transparentMeshesCache = [];\n        this._materialObservers = {};\n        this._options = {\n            ...TransmissionHelper._GetDefaultOptions(),\n            ...options,\n        };\n        this._scene = scene;\n        this._scene._transmissionHelper = this;\n        this.onErrorObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_3__.Observable();\n        this._scene.onDisposeObservable.addOnce(() => {\n            this.dispose();\n        });\n        this._parseScene();\n        this._setupRenderTargets();\n    }\n    /**\n     * Updates the background according to the new options\n     * @param options\n     */\n    updateOptions(options) {\n        // First check if any options are actually being changed. If not, exit.\n        const newValues = Object.keys(options).filter((key) => this._options[key] !== options[key]);\n        if (!newValues.length) {\n            return;\n        }\n        const newOptions = {\n            ...this._options,\n            ...options,\n        };\n        const oldOptions = this._options;\n        this._options = newOptions;\n        // If size changes, recreate everything\n        if (newOptions.renderSize !== oldOptions.renderSize ||\n            newOptions.renderTargetTextureType !== oldOptions.renderTargetTextureType ||\n            newOptions.generateMipmaps !== oldOptions.generateMipmaps ||\n            !this._opaqueRenderTarget) {\n            this._setupRenderTargets();\n        }\n        else {\n            this._opaqueRenderTarget.samples = newOptions.samples;\n            this._opaqueRenderTarget.lodGenerationScale = newOptions.lodGenerationScale;\n            this._opaqueRenderTarget.lodGenerationOffset = newOptions.lodGenerationOffset;\n        }\n    }\n    /**\n     * @returns the opaque render target texture or null if not available.\n     */\n    getOpaqueTarget() {\n        return this._opaqueRenderTarget;\n    }\n    _shouldRenderAsTransmission(material) {\n        if (!material) {\n            return false;\n        }\n        if (material instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial && material.subSurface.isRefractionEnabled) {\n            return true;\n        }\n        return false;\n    }\n    _addMesh(mesh) {\n        this._materialObservers[mesh.uniqueId] = mesh.onMaterialChangedObservable.add(this._onMeshMaterialChanged.bind(this));\n        // we need to defer the processing because _addMesh may be called as part as an instance mesh creation, in which case some\n        // internal properties are not setup yet, like _sourceMesh (needed when doing mesh.material below)\n        _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_5__.Tools.SetImmediate(() => {\n            if (this._shouldRenderAsTransmission(mesh.material)) {\n                mesh.material.refractionTexture = this._opaqueRenderTarget;\n                if (this._transparentMeshesCache.indexOf(mesh) === -1) {\n                    this._transparentMeshesCache.push(mesh);\n                }\n            }\n            else {\n                if (this._opaqueMeshesCache.indexOf(mesh) === -1) {\n                    this._opaqueMeshesCache.push(mesh);\n                }\n            }\n        });\n    }\n    _removeMesh(mesh) {\n        mesh.onMaterialChangedObservable.remove(this._materialObservers[mesh.uniqueId]);\n        delete this._materialObservers[mesh.uniqueId];\n        let idx = this._transparentMeshesCache.indexOf(mesh);\n        if (idx !== -1) {\n            this._transparentMeshesCache.splice(idx, 1);\n        }\n        idx = this._opaqueMeshesCache.indexOf(mesh);\n        if (idx !== -1) {\n            this._opaqueMeshesCache.splice(idx, 1);\n        }\n    }\n    _parseScene() {\n        this._scene.meshes.forEach(this._addMesh.bind(this));\n        // Listen for when a mesh is added to the scene and add it to our cache lists.\n        this._scene.onNewMeshAddedObservable.add(this._addMesh.bind(this));\n        // Listen for when a mesh is removed from to the scene and remove it from our cache lists.\n        this._scene.onMeshRemovedObservable.add(this._removeMesh.bind(this));\n    }\n    // When one of the meshes in the scene has its material changed, make sure that it's in the correct cache list.\n    _onMeshMaterialChanged(mesh) {\n        const transparentIdx = this._transparentMeshesCache.indexOf(mesh);\n        const opaqueIdx = this._opaqueMeshesCache.indexOf(mesh);\n        // If the material is transparent, make sure that it's added to the transparent list and removed from the opaque list\n        const useTransmission = this._shouldRenderAsTransmission(mesh.material);\n        if (useTransmission) {\n            if (mesh.material instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial) {\n                mesh.material.subSurface.refractionTexture = this._opaqueRenderTarget;\n            }\n            if (opaqueIdx !== -1) {\n                this._opaqueMeshesCache.splice(opaqueIdx, 1);\n                this._transparentMeshesCache.push(mesh);\n            }\n            else if (transparentIdx === -1) {\n                this._transparentMeshesCache.push(mesh);\n            }\n            // If the material is opaque, make sure that it's added to the opaque list and removed from the transparent list\n        }\n        else {\n            if (transparentIdx !== -1) {\n                this._transparentMeshesCache.splice(transparentIdx, 1);\n                this._opaqueMeshesCache.push(mesh);\n            }\n            else if (opaqueIdx === -1) {\n                this._opaqueMeshesCache.push(mesh);\n            }\n        }\n    }\n    /**\n     * @internal\n     * Check if the opaque render target has not been disposed and can still be used.\n     * @returns\n     */\n    _isRenderTargetValid() {\n        return this._opaqueRenderTarget?.getInternalTexture() !== null;\n    }\n    /**\n     * @internal\n     * Setup the render targets according to the specified options.\n     */\n    _setupRenderTargets() {\n        if (this._opaqueRenderTarget) {\n            this._opaqueRenderTarget.dispose();\n        }\n        this._opaqueRenderTarget = new _babylonjs_core_Materials_Textures_renderTargetTexture_js__WEBPACK_IMPORTED_MODULE_2__.RenderTargetTexture(\"opaqueSceneTexture\", this._options.renderSize, this._scene, this._options.generateMipmaps, undefined, this._options.renderTargetTextureType);\n        this._opaqueRenderTarget.ignoreCameraViewport = true;\n        this._opaqueRenderTarget.renderList = this._opaqueMeshesCache;\n        this._opaqueRenderTarget.clearColor = this._options.clearColor?.clone() ?? this._scene.clearColor.clone();\n        this._opaqueRenderTarget.gammaSpace = false;\n        this._opaqueRenderTarget.lodGenerationScale = this._options.lodGenerationScale;\n        this._opaqueRenderTarget.lodGenerationOffset = this._options.lodGenerationOffset;\n        this._opaqueRenderTarget.samples = this._options.samples;\n        this._opaqueRenderTarget.renderSprites = true;\n        this._opaqueRenderTarget.renderParticles = true;\n        let sceneImageProcessingapplyByPostProcess;\n        let saveSceneEnvIntensity;\n        this._opaqueRenderTarget.onBeforeBindObservable.add((opaqueRenderTarget) => {\n            saveSceneEnvIntensity = this._scene.environmentIntensity;\n            this._scene.environmentIntensity = 1.0;\n            sceneImageProcessingapplyByPostProcess = this._scene.imageProcessingConfiguration.applyByPostProcess;\n            if (!this._options.clearColor) {\n                this._scene.clearColor.toLinearSpaceToRef(opaqueRenderTarget.clearColor, this._scene.getEngine().useExactSrgbConversions);\n            }\n            else {\n                opaqueRenderTarget.clearColor.copyFrom(this._options.clearColor);\n            }\n            // we do not use the applyByPostProcess setter to avoid flagging all the materials as \"image processing dirty\"!\n            this._scene.imageProcessingConfiguration._applyByPostProcess = true;\n        });\n        this._opaqueRenderTarget.onAfterUnbindObservable.add(() => {\n            this._scene.environmentIntensity = saveSceneEnvIntensity;\n            this._scene.imageProcessingConfiguration._applyByPostProcess = sceneImageProcessingapplyByPostProcess;\n        });\n        this._transparentMeshesCache.forEach((mesh) => {\n            if (this._shouldRenderAsTransmission(mesh.material)) {\n                mesh.material.refractionTexture = this._opaqueRenderTarget;\n            }\n        });\n    }\n    /**\n     * Dispose all the elements created by the Helper.\n     */\n    dispose() {\n        this._scene._transmissionHelper = undefined;\n        if (this._opaqueRenderTarget) {\n            this._opaqueRenderTarget.dispose();\n            this._opaqueRenderTarget = null;\n        }\n        this._transparentMeshesCache = [];\n        this._opaqueMeshesCache = [];\n    }\n}\nconst NAME = \"KHR_materials_transmission\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_transmission/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_transmission {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 175;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n        if (this.enabled) {\n            loader.parent.transparencyAsCoverage = true;\n        }\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadTransparentPropertiesAsync(extensionContext, material, babylonMaterial, extension));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadTransparentPropertiesAsync(context, material, babylonMaterial, extension) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const pbrMaterial = babylonMaterial;\n        // Enables \"refraction\" texture which represents transmitted light.\n        pbrMaterial.subSurface.isRefractionEnabled = true;\n        // Since this extension models thin-surface transmission only, we must make IOR = 1.0\n        pbrMaterial.subSurface.volumeIndexOfRefraction = 1.0;\n        // Albedo colour will tint transmission.\n        pbrMaterial.subSurface.useAlbedoToTintRefraction = true;\n        if (extension.transmissionFactor !== undefined) {\n            pbrMaterial.subSurface.refractionIntensity = extension.transmissionFactor;\n            const scene = pbrMaterial.getScene();\n            if (pbrMaterial.subSurface.refractionIntensity && !scene._transmissionHelper) {\n                new TransmissionHelper({}, pbrMaterial.getScene());\n            }\n            else if (pbrMaterial.subSurface.refractionIntensity && !scene._transmissionHelper?._isRenderTargetValid()) {\n                // If the render target is not valid, recreate it.\n                scene._transmissionHelper?._setupRenderTargets();\n            }\n        }\n        else {\n            pbrMaterial.subSurface.refractionIntensity = 0.0;\n            pbrMaterial.subSurface.isRefractionEnabled = false;\n            return Promise.resolve();\n        }\n        pbrMaterial.subSurface.minimumThickness = 0.0;\n        pbrMaterial.subSurface.maximumThickness = 0.0;\n        if (extension.transmissionTexture) {\n            extension.transmissionTexture.nonColorData = true;\n            return this._loader.loadTextureInfoAsync(`${context}/transmissionTexture`, extension.transmissionTexture, undefined).then((texture) => {\n                pbrMaterial.subSurface.refractionIntensityTexture = texture;\n                pbrMaterial.subSurface.useGltfStyleTextures = true;\n            });\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_transmission(loader));\n//# sourceMappingURL=KHR_materials_transmission.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc190cmFuc21pc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUEyRTtBQUM3QjtBQUNrRDtBQUNoQztBQUNDO0FBQ1g7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywyRUFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywwRUFBVTtBQUMvQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxRkFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHFGQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBHQUFtQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQSx5Q0FBeUMscUZBQVc7QUFDcEQsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxRQUFRO0FBQ2hFO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQVU7QUFDVixzRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc190cmFuc21pc3Npb24uanM/MjNmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5pbXBvcnQgeyBSZW5kZXJUYXJnZXRUZXh0dXJlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvcmVuZGVyVGFyZ2V0VGV4dHVyZS5qc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0VuZ2luZXMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyBUb29scyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWlzYy90b29scy5qc1wiO1xuLyoqXG4gKiBBIGNsYXNzIHRvIGhhbmRsZSBzZXR0aW5nIHVwIHRoZSByZW5kZXJpbmcgb2Ygb3BhcXVlIG9iamVjdHMgdG8gYmUgc2hvd24gdGhyb3VnaCB0cmFuc21pc3NpdmUgb2JqZWN0cy5cbiAqL1xuY2xhc3MgVHJhbnNtaXNzaW9uSGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBoZWxwZXIuXG4gICAgICogQHJldHVybnMgdGhlIGRlZmF1bHQgb3B0aW9uc1xuICAgICAqL1xuICAgIHN0YXRpYyBfR2V0RGVmYXVsdE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZW5kZXJTaXplOiAxMDI0LFxuICAgICAgICAgICAgc2FtcGxlczogNCxcbiAgICAgICAgICAgIGxvZEdlbmVyYXRpb25TY2FsZTogMSxcbiAgICAgICAgICAgIGxvZEdlbmVyYXRpb25PZmZzZXQ6IC00LFxuICAgICAgICAgICAgcmVuZGVyVGFyZ2V0VGV4dHVyZVR5cGU6IENvbnN0YW50cy5URVhUVVJFVFlQRV9IQUxGX0ZMT0FULFxuICAgICAgICAgICAgZ2VuZXJhdGVNaXBtYXBzOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSBvcHRpb25zIERlZmluZXMgdGhlIG9wdGlvbnMgd2Ugd2FudCB0byBjdXN0b21pemUgdGhlIGhlbHBlclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gYWRkIHRoZSBtYXRlcmlhbCB0b1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHNjZW5lKSB7XG4gICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlID0gW107XG4gICAgICAgIHRoaXMuX3RyYW5zcGFyZW50TWVzaGVzQ2FjaGUgPSBbXTtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxPYnNlcnZlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLlRyYW5zbWlzc2lvbkhlbHBlci5fR2V0RGVmYXVsdE9wdGlvbnMoKSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3NjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuX3NjZW5lLl90cmFuc21pc3Npb25IZWxwZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLm9uRXJyb3JPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgdGhpcy5fc2NlbmUub25EaXNwb3NlT2JzZXJ2YWJsZS5hZGRPbmNlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcGFyc2VTY2VuZSgpO1xuICAgICAgICB0aGlzLl9zZXR1cFJlbmRlclRhcmdldHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgYmFja2dyb3VuZCBhY2NvcmRpbmcgdG8gdGhlIG5ldyBvcHRpb25zXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICB1cGRhdGVPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgYW55IG9wdGlvbnMgYXJlIGFjdHVhbGx5IGJlaW5nIGNoYW5nZWQuIElmIG5vdCwgZXhpdC5cbiAgICAgICAgY29uc3QgbmV3VmFsdWVzID0gT2JqZWN0LmtleXMob3B0aW9ucykuZmlsdGVyKChrZXkpID0+IHRoaXMuX29wdGlvbnNba2V5XSAhPT0gb3B0aW9uc1trZXldKTtcbiAgICAgICAgaWYgKCFuZXdWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuX29wdGlvbnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbGRPcHRpb25zID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gICAgICAgIC8vIElmIHNpemUgY2hhbmdlcywgcmVjcmVhdGUgZXZlcnl0aGluZ1xuICAgICAgICBpZiAobmV3T3B0aW9ucy5yZW5kZXJTaXplICE9PSBvbGRPcHRpb25zLnJlbmRlclNpemUgfHxcbiAgICAgICAgICAgIG5ld09wdGlvbnMucmVuZGVyVGFyZ2V0VGV4dHVyZVR5cGUgIT09IG9sZE9wdGlvbnMucmVuZGVyVGFyZ2V0VGV4dHVyZVR5cGUgfHxcbiAgICAgICAgICAgIG5ld09wdGlvbnMuZ2VuZXJhdGVNaXBtYXBzICE9PSBvbGRPcHRpb25zLmdlbmVyYXRlTWlwbWFwcyB8fFxuICAgICAgICAgICAgIXRoaXMuX29wYXF1ZVJlbmRlclRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5fc2V0dXBSZW5kZXJUYXJnZXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9vcGFxdWVSZW5kZXJUYXJnZXQuc2FtcGxlcyA9IG5ld09wdGlvbnMuc2FtcGxlcztcbiAgICAgICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5sb2RHZW5lcmF0aW9uU2NhbGUgPSBuZXdPcHRpb25zLmxvZEdlbmVyYXRpb25TY2FsZTtcbiAgICAgICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5sb2RHZW5lcmF0aW9uT2Zmc2V0ID0gbmV3T3B0aW9ucy5sb2RHZW5lcmF0aW9uT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSBvcGFxdWUgcmVuZGVyIHRhcmdldCB0ZXh0dXJlIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS5cbiAgICAgKi9cbiAgICBnZXRPcGFxdWVUYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcGFxdWVSZW5kZXJUYXJnZXQ7XG4gICAgfVxuICAgIF9zaG91bGRSZW5kZXJBc1RyYW5zbWlzc2lvbihtYXRlcmlhbCkge1xuICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgUEJSTWF0ZXJpYWwgJiYgbWF0ZXJpYWwuc3ViU3VyZmFjZS5pc1JlZnJhY3Rpb25FbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIF9hZGRNZXNoKG1lc2gpIHtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxPYnNlcnZlcnNbbWVzaC51bmlxdWVJZF0gPSBtZXNoLm9uTWF0ZXJpYWxDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQodGhpcy5fb25NZXNoTWF0ZXJpYWxDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgICAvLyB3ZSBuZWVkIHRvIGRlZmVyIHRoZSBwcm9jZXNzaW5nIGJlY2F1c2UgX2FkZE1lc2ggbWF5IGJlIGNhbGxlZCBhcyBwYXJ0IGFzIGFuIGluc3RhbmNlIG1lc2ggY3JlYXRpb24sIGluIHdoaWNoIGNhc2Ugc29tZVxuICAgICAgICAvLyBpbnRlcm5hbCBwcm9wZXJ0aWVzIGFyZSBub3Qgc2V0dXAgeWV0LCBsaWtlIF9zb3VyY2VNZXNoIChuZWVkZWQgd2hlbiBkb2luZyBtZXNoLm1hdGVyaWFsIGJlbG93KVxuICAgICAgICBUb29scy5TZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3VsZFJlbmRlckFzVHJhbnNtaXNzaW9uKG1lc2gubWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC5yZWZyYWN0aW9uVGV4dHVyZSA9IHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdHJhbnNwYXJlbnRNZXNoZXNDYWNoZS5pbmRleE9mKG1lc2gpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFuc3BhcmVudE1lc2hlc0NhY2hlLnB1c2gobWVzaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlLmluZGV4T2YobWVzaCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlLnB1c2gobWVzaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlbW92ZU1lc2gobWVzaCkge1xuICAgICAgICBtZXNoLm9uTWF0ZXJpYWxDaGFuZ2VkT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fbWF0ZXJpYWxPYnNlcnZlcnNbbWVzaC51bmlxdWVJZF0pO1xuICAgICAgICBkZWxldGUgdGhpcy5fbWF0ZXJpYWxPYnNlcnZlcnNbbWVzaC51bmlxdWVJZF07XG4gICAgICAgIGxldCBpZHggPSB0aGlzLl90cmFuc3BhcmVudE1lc2hlc0NhY2hlLmluZGV4T2YobWVzaCk7XG4gICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl90cmFuc3BhcmVudE1lc2hlc0NhY2hlLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlkeCA9IHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlLmluZGV4T2YobWVzaCk7XG4gICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9vcGFxdWVNZXNoZXNDYWNoZS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcGFyc2VTY2VuZSgpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUubWVzaGVzLmZvckVhY2godGhpcy5fYWRkTWVzaC5iaW5kKHRoaXMpKTtcbiAgICAgICAgLy8gTGlzdGVuIGZvciB3aGVuIGEgbWVzaCBpcyBhZGRlZCB0byB0aGUgc2NlbmUgYW5kIGFkZCBpdCB0byBvdXIgY2FjaGUgbGlzdHMuXG4gICAgICAgIHRoaXMuX3NjZW5lLm9uTmV3TWVzaEFkZGVkT2JzZXJ2YWJsZS5hZGQodGhpcy5fYWRkTWVzaC5iaW5kKHRoaXMpKTtcbiAgICAgICAgLy8gTGlzdGVuIGZvciB3aGVuIGEgbWVzaCBpcyByZW1vdmVkIGZyb20gdG8gdGhlIHNjZW5lIGFuZCByZW1vdmUgaXQgZnJvbSBvdXIgY2FjaGUgbGlzdHMuXG4gICAgICAgIHRoaXMuX3NjZW5lLm9uTWVzaFJlbW92ZWRPYnNlcnZhYmxlLmFkZCh0aGlzLl9yZW1vdmVNZXNoLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICAvLyBXaGVuIG9uZSBvZiB0aGUgbWVzaGVzIGluIHRoZSBzY2VuZSBoYXMgaXRzIG1hdGVyaWFsIGNoYW5nZWQsIG1ha2Ugc3VyZSB0aGF0IGl0J3MgaW4gdGhlIGNvcnJlY3QgY2FjaGUgbGlzdC5cbiAgICBfb25NZXNoTWF0ZXJpYWxDaGFuZ2VkKG1lc2gpIHtcbiAgICAgICAgY29uc3QgdHJhbnNwYXJlbnRJZHggPSB0aGlzLl90cmFuc3BhcmVudE1lc2hlc0NhY2hlLmluZGV4T2YobWVzaCk7XG4gICAgICAgIGNvbnN0IG9wYXF1ZUlkeCA9IHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlLmluZGV4T2YobWVzaCk7XG4gICAgICAgIC8vIElmIHRoZSBtYXRlcmlhbCBpcyB0cmFuc3BhcmVudCwgbWFrZSBzdXJlIHRoYXQgaXQncyBhZGRlZCB0byB0aGUgdHJhbnNwYXJlbnQgbGlzdCBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBvcGFxdWUgbGlzdFxuICAgICAgICBjb25zdCB1c2VUcmFuc21pc3Npb24gPSB0aGlzLl9zaG91bGRSZW5kZXJBc1RyYW5zbWlzc2lvbihtZXNoLm1hdGVyaWFsKTtcbiAgICAgICAgaWYgKHVzZVRyYW5zbWlzc2lvbikge1xuICAgICAgICAgICAgaWYgKG1lc2gubWF0ZXJpYWwgaW5zdGFuY2VvZiBQQlJNYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuc3ViU3VyZmFjZS5yZWZyYWN0aW9uVGV4dHVyZSA9IHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcGFxdWVJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3BhcXVlTWVzaGVzQ2FjaGUuc3BsaWNlKG9wYXF1ZUlkeCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNwYXJlbnRNZXNoZXNDYWNoZS5wdXNoKG1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHJhbnNwYXJlbnRJZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhbnNwYXJlbnRNZXNoZXNDYWNoZS5wdXNoKG1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIG1hdGVyaWFsIGlzIG9wYXF1ZSwgbWFrZSBzdXJlIHRoYXQgaXQncyBhZGRlZCB0byB0aGUgb3BhcXVlIGxpc3QgYW5kIHJlbW92ZWQgZnJvbSB0aGUgdHJhbnNwYXJlbnQgbGlzdFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50SWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYW5zcGFyZW50TWVzaGVzQ2FjaGUuc3BsaWNlKHRyYW5zcGFyZW50SWR4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcGFxdWVNZXNoZXNDYWNoZS5wdXNoKG1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3BhcXVlSWR4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlLnB1c2gobWVzaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQ2hlY2sgaWYgdGhlIG9wYXF1ZSByZW5kZXIgdGFyZ2V0IGhhcyBub3QgYmVlbiBkaXNwb3NlZCBhbmQgY2FuIHN0aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBfaXNSZW5kZXJUYXJnZXRWYWxpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldD8uZ2V0SW50ZXJuYWxUZXh0dXJlKCkgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHVwIHRoZSByZW5kZXIgdGFyZ2V0cyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBvcHRpb25zLlxuICAgICAqL1xuICAgIF9zZXR1cFJlbmRlclRhcmdldHMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcGFxdWVSZW5kZXJUYXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0ID0gbmV3IFJlbmRlclRhcmdldFRleHR1cmUoXCJvcGFxdWVTY2VuZVRleHR1cmVcIiwgdGhpcy5fb3B0aW9ucy5yZW5kZXJTaXplLCB0aGlzLl9zY2VuZSwgdGhpcy5fb3B0aW9ucy5nZW5lcmF0ZU1pcG1hcHMsIHVuZGVmaW5lZCwgdGhpcy5fb3B0aW9ucy5yZW5kZXJUYXJnZXRUZXh0dXJlVHlwZSk7XG4gICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5pZ25vcmVDYW1lcmFWaWV3cG9ydCA9IHRydWU7XG4gICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5yZW5kZXJMaXN0ID0gdGhpcy5fb3BhcXVlTWVzaGVzQ2FjaGU7XG4gICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5jbGVhckNvbG9yID0gdGhpcy5fb3B0aW9ucy5jbGVhckNvbG9yPy5jbG9uZSgpID8/IHRoaXMuX3NjZW5lLmNsZWFyQ29sb3IuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0LmdhbW1hU3BhY2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0LmxvZEdlbmVyYXRpb25TY2FsZSA9IHRoaXMuX29wdGlvbnMubG9kR2VuZXJhdGlvblNjYWxlO1xuICAgICAgICB0aGlzLl9vcGFxdWVSZW5kZXJUYXJnZXQubG9kR2VuZXJhdGlvbk9mZnNldCA9IHRoaXMuX29wdGlvbnMubG9kR2VuZXJhdGlvbk9mZnNldDtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0LnNhbXBsZXMgPSB0aGlzLl9vcHRpb25zLnNhbXBsZXM7XG4gICAgICAgIHRoaXMuX29wYXF1ZVJlbmRlclRhcmdldC5yZW5kZXJTcHJpdGVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0LnJlbmRlclBhcnRpY2xlcyA9IHRydWU7XG4gICAgICAgIGxldCBzY2VuZUltYWdlUHJvY2Vzc2luZ2FwcGx5QnlQb3N0UHJvY2VzcztcbiAgICAgICAgbGV0IHNhdmVTY2VuZUVudkludGVuc2l0eTtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0Lm9uQmVmb3JlQmluZE9ic2VydmFibGUuYWRkKChvcGFxdWVSZW5kZXJUYXJnZXQpID0+IHtcbiAgICAgICAgICAgIHNhdmVTY2VuZUVudkludGVuc2l0eSA9IHRoaXMuX3NjZW5lLmVudmlyb25tZW50SW50ZW5zaXR5O1xuICAgICAgICAgICAgdGhpcy5fc2NlbmUuZW52aXJvbm1lbnRJbnRlbnNpdHkgPSAxLjA7XG4gICAgICAgICAgICBzY2VuZUltYWdlUHJvY2Vzc2luZ2FwcGx5QnlQb3N0UHJvY2VzcyA9IHRoaXMuX3NjZW5lLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uYXBwbHlCeVBvc3RQcm9jZXNzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9vcHRpb25zLmNsZWFyQ29sb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2VuZS5jbGVhckNvbG9yLnRvTGluZWFyU3BhY2VUb1JlZihvcGFxdWVSZW5kZXJUYXJnZXQuY2xlYXJDb2xvciwgdGhpcy5fc2NlbmUuZ2V0RW5naW5lKCkudXNlRXhhY3RTcmdiQ29udmVyc2lvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3BhcXVlUmVuZGVyVGFyZ2V0LmNsZWFyQ29sb3IuY29weUZyb20odGhpcy5fb3B0aW9ucy5jbGVhckNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIGRvIG5vdCB1c2UgdGhlIGFwcGx5QnlQb3N0UHJvY2VzcyBzZXR0ZXIgdG8gYXZvaWQgZmxhZ2dpbmcgYWxsIHRoZSBtYXRlcmlhbHMgYXMgXCJpbWFnZSBwcm9jZXNzaW5nIGRpcnR5XCIhXG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5pbWFnZVByb2Nlc3NpbmdDb25maWd1cmF0aW9uLl9hcHBseUJ5UG9zdFByb2Nlc3MgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0Lm9uQWZ0ZXJVbmJpbmRPYnNlcnZhYmxlLmFkZCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5lbnZpcm9ubWVudEludGVuc2l0eSA9IHNhdmVTY2VuZUVudkludGVuc2l0eTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lLmltYWdlUHJvY2Vzc2luZ0NvbmZpZ3VyYXRpb24uX2FwcGx5QnlQb3N0UHJvY2VzcyA9IHNjZW5lSW1hZ2VQcm9jZXNzaW5nYXBwbHlCeVBvc3RQcm9jZXNzO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fdHJhbnNwYXJlbnRNZXNoZXNDYWNoZS5mb3JFYWNoKChtZXNoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fc2hvdWxkUmVuZGVyQXNUcmFuc21pc3Npb24obWVzaC5tYXRlcmlhbCkpIHtcbiAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsLnJlZnJhY3Rpb25UZXh0dXJlID0gdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBhbGwgdGhlIGVsZW1lbnRzIGNyZWF0ZWQgYnkgdGhlIEhlbHBlci5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9zY2VuZS5fdHJhbnNtaXNzaW9uSGVscGVyID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9vcGFxdWVSZW5kZXJUYXJnZXQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5fb3BhcXVlUmVuZGVyVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90cmFuc3BhcmVudE1lc2hlc0NhY2hlID0gW107XG4gICAgICAgIHRoaXMuX29wYXF1ZU1lc2hlc0NhY2hlID0gW107XG4gICAgfVxufVxuY29uc3QgTkFNRSA9IFwiS0hSX21hdGVyaWFsc190cmFuc21pc3Npb25cIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbi9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbiB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTc1O1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGxvYWRlci5wYXJlbnQudHJhbnNwYXJlbmN5QXNDb3ZlcmFnZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsQmFzZVByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkVHJhbnNwYXJlbnRQcm9wZXJ0aWVzQXN5bmMoZXh0ZW5zaW9uQ29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCwgZXh0ZW5zaW9uKSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4geyB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkVHJhbnNwYXJlbnRQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCwgZXh0ZW5zaW9uKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYnJNYXRlcmlhbCA9IGJhYnlsb25NYXRlcmlhbDtcbiAgICAgICAgLy8gRW5hYmxlcyBcInJlZnJhY3Rpb25cIiB0ZXh0dXJlIHdoaWNoIHJlcHJlc2VudHMgdHJhbnNtaXR0ZWQgbGlnaHQuXG4gICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UuaXNSZWZyYWN0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIC8vIFNpbmNlIHRoaXMgZXh0ZW5zaW9uIG1vZGVscyB0aGluLXN1cmZhY2UgdHJhbnNtaXNzaW9uIG9ubHksIHdlIG11c3QgbWFrZSBJT1IgPSAxLjBcbiAgICAgICAgcGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS52b2x1bWVJbmRleE9mUmVmcmFjdGlvbiA9IDEuMDtcbiAgICAgICAgLy8gQWxiZWRvIGNvbG91ciB3aWxsIHRpbnQgdHJhbnNtaXNzaW9uLlxuICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLnVzZUFsYmVkb1RvVGludFJlZnJhY3Rpb24gPSB0cnVlO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uLnRyYW5zbWlzc2lvbkZhY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLnJlZnJhY3Rpb25JbnRlbnNpdHkgPSBleHRlbnNpb24udHJhbnNtaXNzaW9uRmFjdG9yO1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBwYnJNYXRlcmlhbC5nZXRTY2VuZSgpO1xuICAgICAgICAgICAgaWYgKHBick1hdGVyaWFsLnN1YlN1cmZhY2UucmVmcmFjdGlvbkludGVuc2l0eSAmJiAhc2NlbmUuX3RyYW5zbWlzc2lvbkhlbHBlcikge1xuICAgICAgICAgICAgICAgIG5ldyBUcmFuc21pc3Npb25IZWxwZXIoe30sIHBick1hdGVyaWFsLmdldFNjZW5lKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGJyTWF0ZXJpYWwuc3ViU3VyZmFjZS5yZWZyYWN0aW9uSW50ZW5zaXR5ICYmICFzY2VuZS5fdHJhbnNtaXNzaW9uSGVscGVyPy5faXNSZW5kZXJUYXJnZXRWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlbmRlciB0YXJnZXQgaXMgbm90IHZhbGlkLCByZWNyZWF0ZSBpdC5cbiAgICAgICAgICAgICAgICBzY2VuZS5fdHJhbnNtaXNzaW9uSGVscGVyPy5fc2V0dXBSZW5kZXJUYXJnZXRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLnJlZnJhY3Rpb25JbnRlbnNpdHkgPSAwLjA7XG4gICAgICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLmlzUmVmcmFjdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBwYnJNYXRlcmlhbC5zdWJTdXJmYWNlLm1pbmltdW1UaGlja25lc3MgPSAwLjA7XG4gICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UubWF4aW11bVRoaWNrbmVzcyA9IDAuMDtcbiAgICAgICAgaWYgKGV4dGVuc2lvbi50cmFuc21pc3Npb25UZXh0dXJlKSB7XG4gICAgICAgICAgICBleHRlbnNpb24udHJhbnNtaXNzaW9uVGV4dHVyZS5ub25Db2xvckRhdGEgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS90cmFuc21pc3Npb25UZXh0dXJlYCwgZXh0ZW5zaW9uLnRyYW5zbWlzc2lvblRleHR1cmUsIHVuZGVmaW5lZCkudGhlbigodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UucmVmcmFjdGlvbkludGVuc2l0eVRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgICAgIHBick1hdGVyaWFsLnN1YlN1cmZhY2UudXNlR2x0ZlN0eWxlVGV4dHVyZXMgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbihsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfdHJhbnNtaXNzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_transmission.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_unlit.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_unlit.js ***!
  \************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_unlit: () => (/* binding */ KHR_materials_unlit)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"KHR_materials_unlit\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_unlit/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_unlit {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 210;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.LoadExtensionAsync(context, material, this.name, () => {\n            return this._loadUnlitPropertiesAsync(context, material, babylonMaterial);\n        });\n    }\n    _loadUnlitPropertiesAsync(context, material, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_1__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.unlit = true;\n        const properties = material.pbrMetallicRoughness;\n        if (properties) {\n            if (properties.baseColorFactor) {\n                babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.FromArray(properties.baseColorFactor);\n                babylonMaterial.alpha = properties.baseColorFactor[3];\n            }\n            else {\n                babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_0__.Color3.White();\n            }\n            if (properties.baseColorTexture) {\n                promises.push(this._loader.loadTextureInfoAsync(`${context}/baseColorTexture`, properties.baseColorTexture, (texture) => {\n                    texture.name = `${babylonMaterial.name} (Base Color)`;\n                    babylonMaterial.albedoTexture = texture;\n                }));\n            }\n        }\n        if (material.doubleSided) {\n            babylonMaterial.backFaceCulling = false;\n            babylonMaterial.twoSidedLighting = true;\n        }\n        this._loader.loadMaterialAlphaProperties(context, material, babylonMaterial);\n        return Promise.all(promises).then(() => { });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_unlit(loader));\n//# sourceMappingURL=KHR_materials_unlit.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc191bmxpdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZEO0FBQ2M7QUFDN0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5QyxxRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsdUVBQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHVFQUFNO0FBQ3BEO0FBQ0E7QUFDQSxtRUFBbUUsUUFBUTtBQUMzRSxzQ0FBc0Msc0JBQXNCO0FBQzVEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQSxzREFBVTtBQUNWLCtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfbWF0ZXJpYWxzX3VubGl0LmpzPzk0MDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29sb3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLmNvbG9yLmpzXCI7XG5pbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWF0ZXJpYWxzX3VubGl0XCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc191bmxpdC9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfbWF0ZXJpYWxzX3VubGl0IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAyMTA7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgdGhpcy5uYW1lLCAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZFVubGl0UHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRVbmxpdFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwudW5saXQgPSB0cnVlO1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3M7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5iYXNlQ29sb3JGYWN0b3IpIHtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvQ29sb3IgPSBDb2xvcjMuRnJvbUFycmF5KHByb3BlcnRpZXMuYmFzZUNvbG9yRmFjdG9yKTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxwaGEgPSBwcm9wZXJ0aWVzLmJhc2VDb2xvckZhY3RvclszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5hbGJlZG9Db2xvciA9IENvbG9yMy5XaGl0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuYmFzZUNvbG9yVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L2Jhc2VDb2xvclRleHR1cmVgLCBwcm9wZXJ0aWVzLmJhc2VDb2xvclRleHR1cmUsICh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoQmFzZSBDb2xvcilgO1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRlcmlhbC5kb3VibGVTaWRlZCkge1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmJhY2tGYWNlQ3VsbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnR3b1NpZGVkTGlnaHRpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvYWRlci5sb2FkTWF0ZXJpYWxBbHBoYVByb3BlcnRpZXMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tYXRlcmlhbHNfdW5saXQobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfbWF0ZXJpYWxzX3VubGl0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_unlit.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_variants.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_variants.js ***!
  \***************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_variants: () => (/* binding */ KHR_materials_variants)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Meshes/mesh.js */ \"@babylonjs/core/Meshes/mesh.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_variants\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_variants/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_variants {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * Gets the list of available variant names for this asset.\n     * @param rootMesh The glTF root mesh\n     * @returns the list of all the variant names for this model\n     */\n    static GetAvailableVariants(rootMesh) {\n        const extensionMetadata = this._GetExtensionMetadata(rootMesh);\n        if (!extensionMetadata) {\n            return [];\n        }\n        return Object.keys(extensionMetadata.variants);\n    }\n    /**\n     * Gets the list of available variant names for this asset.\n     * @param rootMesh The glTF root mesh\n     * @returns the list of all the variant names for this model\n     */\n    getAvailableVariants(rootMesh) {\n        return KHR_materials_variants.GetAvailableVariants(rootMesh);\n    }\n    /**\n     * Select a variant given a variant name or a list of variant names.\n     * @param rootMesh The glTF root mesh\n     * @param variantName The variant name(s) to select.\n     */\n    static SelectVariant(rootMesh, variantName) {\n        const extensionMetadata = this._GetExtensionMetadata(rootMesh);\n        if (!extensionMetadata) {\n            throw new Error(`Cannot select variant on a glTF mesh that does not have the ${NAME} extension`);\n        }\n        const select = (variantName) => {\n            const entries = extensionMetadata.variants[variantName];\n            if (entries) {\n                for (const entry of entries) {\n                    entry.mesh.material = entry.material;\n                }\n            }\n        };\n        if (variantName instanceof Array) {\n            for (const name of variantName) {\n                select(name);\n            }\n        }\n        else {\n            select(variantName);\n        }\n        extensionMetadata.lastSelected = variantName;\n    }\n    /**\n     * Select a variant given a variant name or a list of variant names.\n     * @param rootMesh The glTF root mesh\n     * @param variantName The variant name(s) to select.\n     */\n    selectVariant(rootMesh, variantName) {\n        KHR_materials_variants.SelectVariant(rootMesh, variantName);\n    }\n    /**\n     * Reset back to the original before selecting a variant.\n     * @param rootMesh The glTF root mesh\n     */\n    static Reset(rootMesh) {\n        const extensionMetadata = this._GetExtensionMetadata(rootMesh);\n        if (!extensionMetadata) {\n            throw new Error(`Cannot reset on a glTF mesh that does not have the ${NAME} extension`);\n        }\n        for (const entry of extensionMetadata.original) {\n            entry.mesh.material = entry.material;\n        }\n        extensionMetadata.lastSelected = null;\n    }\n    /**\n     * Reset back to the original before selecting a variant.\n     * @param rootMesh The glTF root mesh\n     */\n    reset(rootMesh) {\n        KHR_materials_variants.Reset(rootMesh);\n    }\n    /**\n     * Gets the last selected variant name(s) or null if original.\n     * @param rootMesh The glTF root mesh\n     * @returns The selected variant name(s).\n     */\n    static GetLastSelectedVariant(rootMesh) {\n        const extensionMetadata = this._GetExtensionMetadata(rootMesh);\n        if (!extensionMetadata) {\n            throw new Error(`Cannot get the last selected variant on a glTF mesh that does not have the ${NAME} extension`);\n        }\n        return extensionMetadata.lastSelected;\n    }\n    /**\n     * Gets the last selected variant name(s) or null if original.\n     * @param rootMesh The glTF root mesh\n     * @returns The selected variant name(s).\n     */\n    getLastSelectedVariant(rootMesh) {\n        return KHR_materials_variants.GetLastSelectedVariant(rootMesh);\n    }\n    static _GetExtensionMetadata(rootMesh) {\n        return rootMesh?._internalMetadata?.gltf?.[NAME] || null;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._variants = extension.variants;\n        }\n    }\n    /**\n     * @internal\n     */\n    _loadMeshPrimitiveAsync(context, name, node, mesh, primitive, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.LoadExtensionAsync(context, primitive, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader._loadMeshPrimitiveAsync(context, name, node, mesh, primitive, (babylonMesh) => {\n                assign(babylonMesh);\n                if (babylonMesh instanceof _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_1__.Mesh) {\n                    const babylonDrawMode = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader._GetDrawMode(context, primitive.mode);\n                    const root = this._loader.rootBabylonMesh;\n                    const metadata = root ? (root._internalMetadata = root._internalMetadata || {}) : {};\n                    const gltf = (metadata.gltf = metadata.gltf || {});\n                    const extensionMetadata = (gltf[NAME] = gltf[NAME] || { lastSelected: null, original: [], variants: {} });\n                    // Store the original material.\n                    extensionMetadata.original.push({ mesh: babylonMesh, material: babylonMesh.material });\n                    // For each mapping, look at the variants and make a new entry for them.\n                    for (let mappingIndex = 0; mappingIndex < extension.mappings.length; ++mappingIndex) {\n                        const mapping = extension.mappings[mappingIndex];\n                        const material = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${extensionContext}/mappings/${mappingIndex}/material`, this._loader.gltf.materials, mapping.material);\n                        promises.push(this._loader._loadMaterialAsync(`#/materials/${mapping.material}`, material, babylonMesh, babylonDrawMode, (babylonMaterial) => {\n                            for (let mappingVariantIndex = 0; mappingVariantIndex < mapping.variants.length; ++mappingVariantIndex) {\n                                const variantIndex = mapping.variants[mappingVariantIndex];\n                                const variant = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`/extensions/${NAME}/variants/${variantIndex}`, this._variants, variantIndex);\n                                extensionMetadata.variants[variant.name] = extensionMetadata.variants[variant.name] || [];\n                                extensionMetadata.variants[variant.name].push({\n                                    mesh: babylonMesh,\n                                    material: babylonMaterial,\n                                });\n                                // Replace the target when original mesh is cloned\n                                babylonMesh.onClonedObservable.add((newOne) => {\n                                    const newMesh = newOne;\n                                    let metadata = null;\n                                    let newRoot = newMesh;\n                                    // Find root to get medata\n                                    do {\n                                        newRoot = newRoot.parent;\n                                        if (!newRoot) {\n                                            return;\n                                        }\n                                        metadata = KHR_materials_variants._GetExtensionMetadata(newRoot);\n                                    } while (metadata === null);\n                                    // Need to clone the metadata on the root (first time only)\n                                    if (root && metadata === KHR_materials_variants._GetExtensionMetadata(root)) {\n                                        // Copy main metadata\n                                        newRoot._internalMetadata = {};\n                                        for (const key in root._internalMetadata) {\n                                            newRoot._internalMetadata[key] = root._internalMetadata[key];\n                                        }\n                                        // Copy the gltf metadata\n                                        newRoot._internalMetadata.gltf = [];\n                                        for (const key in root._internalMetadata.gltf) {\n                                            newRoot._internalMetadata.gltf[key] = root._internalMetadata.gltf[key];\n                                        }\n                                        // Duplicate the extension specific metadata\n                                        newRoot._internalMetadata.gltf[NAME] = { lastSelected: null, original: [], variants: {} };\n                                        for (const original of metadata.original) {\n                                            newRoot._internalMetadata.gltf[NAME].original.push({\n                                                mesh: original.mesh,\n                                                material: original.material,\n                                            });\n                                        }\n                                        for (const key in metadata.variants) {\n                                            if (Object.prototype.hasOwnProperty.call(metadata.variants, key)) {\n                                                newRoot._internalMetadata.gltf[NAME].variants[key] = [];\n                                                for (const variantEntry of metadata.variants[key]) {\n                                                    newRoot._internalMetadata.gltf[NAME].variants[key].push({\n                                                        mesh: variantEntry.mesh,\n                                                        material: variantEntry.material,\n                                                    });\n                                                }\n                                            }\n                                        }\n                                        metadata = newRoot._internalMetadata.gltf[NAME];\n                                    }\n                                    // Relocate\n                                    for (const target of metadata.original) {\n                                        if (target.mesh === babylonMesh) {\n                                            target.mesh = newMesh;\n                                        }\n                                    }\n                                    for (const target of metadata.variants[variant.name]) {\n                                        if (target.mesh === babylonMesh) {\n                                            target.mesh = newMesh;\n                                        }\n                                    }\n                                });\n                            }\n                        }));\n                    }\n                }\n            }));\n            return Promise.all(promises).then(([babylonMesh]) => {\n                return babylonMesh;\n            });\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_variants(loader));\n//# sourceMappingURL=KHR_materials_variants.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc192YXJpYW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUQ7QUFDSDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixNQUFNO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLE1BQU07QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEdBQTBHLE1BQU07QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdFQUFJO0FBQy9DLDRDQUE0QyxzREFBVTtBQUN0RDtBQUNBLGtHQUFrRztBQUNsRyxxRUFBcUU7QUFDckUsNEVBQTRFLGdEQUFnRDtBQUM1SDtBQUNBLHNEQUFzRCxtREFBbUQ7QUFDekc7QUFDQSwrQ0FBK0MsMENBQTBDO0FBQ3pGO0FBQ0EseUNBQXlDLHFEQUFTLFFBQVEsaUJBQWlCLFlBQVksYUFBYTtBQUNwRyxxRkFBcUYsaUJBQWlCO0FBQ3RHLDhEQUE4RCwrQ0FBK0M7QUFDN0c7QUFDQSxnREFBZ0QscURBQVMsb0JBQW9CLEtBQUssWUFBWSxhQUFhO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFVO0FBQ1Ysa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9tYXRlcmlhbHNfdmFyaWFudHMuanM/ZjFjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyLCBBcnJheUl0ZW0gfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuaW1wb3J0IHsgTWVzaCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL21lc2guanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl9tYXRlcmlhbHNfdmFyaWFudHNcIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3ZhcmlhbnRzL1JFQURNRS5tZClcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl9tYXRlcmlhbHNfdmFyaWFudHMge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSB2YXJpYW50IG5hbWVzIGZvciB0aGlzIGFzc2V0LlxuICAgICAqIEBwYXJhbSByb290TWVzaCBUaGUgZ2xURiByb290IG1lc2hcbiAgICAgKiBAcmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgdGhlIHZhcmlhbnQgbmFtZXMgZm9yIHRoaXMgbW9kZWxcbiAgICAgKi9cbiAgICBzdGF0aWMgR2V0QXZhaWxhYmxlVmFyaWFudHMocm9vdE1lc2gpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uTWV0YWRhdGEgPSB0aGlzLl9HZXRFeHRlbnNpb25NZXRhZGF0YShyb290TWVzaCk7XG4gICAgICAgIGlmICghZXh0ZW5zaW9uTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZXh0ZW5zaW9uTWV0YWRhdGEudmFyaWFudHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSB2YXJpYW50IG5hbWVzIGZvciB0aGlzIGFzc2V0LlxuICAgICAqIEBwYXJhbSByb290TWVzaCBUaGUgZ2xURiByb290IG1lc2hcbiAgICAgKiBAcmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgdGhlIHZhcmlhbnQgbmFtZXMgZm9yIHRoaXMgbW9kZWxcbiAgICAgKi9cbiAgICBnZXRBdmFpbGFibGVWYXJpYW50cyhyb290TWVzaCkge1xuICAgICAgICByZXR1cm4gS0hSX21hdGVyaWFsc192YXJpYW50cy5HZXRBdmFpbGFibGVWYXJpYW50cyhyb290TWVzaCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBhIHZhcmlhbnQgZ2l2ZW4gYSB2YXJpYW50IG5hbWUgb3IgYSBsaXN0IG9mIHZhcmlhbnQgbmFtZXMuXG4gICAgICogQHBhcmFtIHJvb3RNZXNoIFRoZSBnbFRGIHJvb3QgbWVzaFxuICAgICAqIEBwYXJhbSB2YXJpYW50TmFtZSBUaGUgdmFyaWFudCBuYW1lKHMpIHRvIHNlbGVjdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgU2VsZWN0VmFyaWFudChyb290TWVzaCwgdmFyaWFudE5hbWUpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uTWV0YWRhdGEgPSB0aGlzLl9HZXRFeHRlbnNpb25NZXRhZGF0YShyb290TWVzaCk7XG4gICAgICAgIGlmICghZXh0ZW5zaW9uTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHNlbGVjdCB2YXJpYW50IG9uIGEgZ2xURiBtZXNoIHRoYXQgZG9lcyBub3QgaGF2ZSB0aGUgJHtOQU1FfSBleHRlbnNpb25gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWxlY3QgPSAodmFyaWFudE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJpZXMgPSBleHRlbnNpb25NZXRhZGF0YS52YXJpYW50c1t2YXJpYW50TmFtZV07XG4gICAgICAgICAgICBpZiAoZW50cmllcykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBlbnRyeS5tZXNoLm1hdGVyaWFsID0gZW50cnkubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodmFyaWFudE5hbWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHZhcmlhbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0KG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0KHZhcmlhbnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBleHRlbnNpb25NZXRhZGF0YS5sYXN0U2VsZWN0ZWQgPSB2YXJpYW50TmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VsZWN0IGEgdmFyaWFudCBnaXZlbiBhIHZhcmlhbnQgbmFtZSBvciBhIGxpc3Qgb2YgdmFyaWFudCBuYW1lcy5cbiAgICAgKiBAcGFyYW0gcm9vdE1lc2ggVGhlIGdsVEYgcm9vdCBtZXNoXG4gICAgICogQHBhcmFtIHZhcmlhbnROYW1lIFRoZSB2YXJpYW50IG5hbWUocykgdG8gc2VsZWN0LlxuICAgICAqL1xuICAgIHNlbGVjdFZhcmlhbnQocm9vdE1lc2gsIHZhcmlhbnROYW1lKSB7XG4gICAgICAgIEtIUl9tYXRlcmlhbHNfdmFyaWFudHMuU2VsZWN0VmFyaWFudChyb290TWVzaCwgdmFyaWFudE5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBiYWNrIHRvIHRoZSBvcmlnaW5hbCBiZWZvcmUgc2VsZWN0aW5nIGEgdmFyaWFudC5cbiAgICAgKiBAcGFyYW0gcm9vdE1lc2ggVGhlIGdsVEYgcm9vdCBtZXNoXG4gICAgICovXG4gICAgc3RhdGljIFJlc2V0KHJvb3RNZXNoKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbk1ldGFkYXRhID0gdGhpcy5fR2V0RXh0ZW5zaW9uTWV0YWRhdGEocm9vdE1lc2gpO1xuICAgICAgICBpZiAoIWV4dGVuc2lvbk1ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCByZXNldCBvbiBhIGdsVEYgbWVzaCB0aGF0IGRvZXMgbm90IGhhdmUgdGhlICR7TkFNRX0gZXh0ZW5zaW9uYCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBleHRlbnNpb25NZXRhZGF0YS5vcmlnaW5hbCkge1xuICAgICAgICAgICAgZW50cnkubWVzaC5tYXRlcmlhbCA9IGVudHJ5Lm1hdGVyaWFsO1xuICAgICAgICB9XG4gICAgICAgIGV4dGVuc2lvbk1ldGFkYXRhLmxhc3RTZWxlY3RlZCA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGJhY2sgdG8gdGhlIG9yaWdpbmFsIGJlZm9yZSBzZWxlY3RpbmcgYSB2YXJpYW50LlxuICAgICAqIEBwYXJhbSByb290TWVzaCBUaGUgZ2xURiByb290IG1lc2hcbiAgICAgKi9cbiAgICByZXNldChyb290TWVzaCkge1xuICAgICAgICBLSFJfbWF0ZXJpYWxzX3ZhcmlhbnRzLlJlc2V0KHJvb3RNZXNoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGFzdCBzZWxlY3RlZCB2YXJpYW50IG5hbWUocykgb3IgbnVsbCBpZiBvcmlnaW5hbC5cbiAgICAgKiBAcGFyYW0gcm9vdE1lc2ggVGhlIGdsVEYgcm9vdCBtZXNoXG4gICAgICogQHJldHVybnMgVGhlIHNlbGVjdGVkIHZhcmlhbnQgbmFtZShzKS5cbiAgICAgKi9cbiAgICBzdGF0aWMgR2V0TGFzdFNlbGVjdGVkVmFyaWFudChyb290TWVzaCkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25NZXRhZGF0YSA9IHRoaXMuX0dldEV4dGVuc2lvbk1ldGFkYXRhKHJvb3RNZXNoKTtcbiAgICAgICAgaWYgKCFleHRlbnNpb25NZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZ2V0IHRoZSBsYXN0IHNlbGVjdGVkIHZhcmlhbnQgb24gYSBnbFRGIG1lc2ggdGhhdCBkb2VzIG5vdCBoYXZlIHRoZSAke05BTUV9IGV4dGVuc2lvbmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRlbnNpb25NZXRhZGF0YS5sYXN0U2VsZWN0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhc3Qgc2VsZWN0ZWQgdmFyaWFudCBuYW1lKHMpIG9yIG51bGwgaWYgb3JpZ2luYWwuXG4gICAgICogQHBhcmFtIHJvb3RNZXNoIFRoZSBnbFRGIHJvb3QgbWVzaFxuICAgICAqIEByZXR1cm5zIFRoZSBzZWxlY3RlZCB2YXJpYW50IG5hbWUocykuXG4gICAgICovXG4gICAgZ2V0TGFzdFNlbGVjdGVkVmFyaWFudChyb290TWVzaCkge1xuICAgICAgICByZXR1cm4gS0hSX21hdGVyaWFsc192YXJpYW50cy5HZXRMYXN0U2VsZWN0ZWRWYXJpYW50KHJvb3RNZXNoKTtcbiAgICB9XG4gICAgc3RhdGljIF9HZXRFeHRlbnNpb25NZXRhZGF0YShyb290TWVzaCkge1xuICAgICAgICByZXR1cm4gcm9vdE1lc2g/Ll9pbnRlcm5hbE1ldGFkYXRhPy5nbHRmPy5bTkFNRV0gfHwgbnVsbDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG9uTG9hZGluZygpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHRoaXMuX2xvYWRlci5nbHRmLmV4dGVuc2lvbnM7XG4gICAgICAgIGlmIChleHRlbnNpb25zICYmIGV4dGVuc2lvbnNbdGhpcy5uYW1lXSkge1xuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1t0aGlzLm5hbWVdO1xuICAgICAgICAgICAgdGhpcy5fdmFyaWFudHMgPSBleHRlbnNpb24udmFyaWFudHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvYWRNZXNoUHJpbWl0aXZlQXN5bmMoY29udGV4dCwgbmFtZSwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIHByaW1pdGl2ZSwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIuX2xvYWRNZXNoUHJpbWl0aXZlQXN5bmMoY29udGV4dCwgbmFtZSwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgICAgIGlmIChiYWJ5bG9uTWVzaCBpbnN0YW5jZW9mIE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbkRyYXdNb2RlID0gR0xURkxvYWRlci5fR2V0RHJhd01vZGUoY29udGV4dCwgcHJpbWl0aXZlLm1vZGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb290ID0gdGhpcy5fbG9hZGVyLnJvb3RCYWJ5bG9uTWVzaDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSByb290ID8gKHJvb3QuX2ludGVybmFsTWV0YWRhdGEgPSByb290Ll9pbnRlcm5hbE1ldGFkYXRhIHx8IHt9KSA6IHt9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnbHRmID0gKG1ldGFkYXRhLmdsdGYgPSBtZXRhZGF0YS5nbHRmIHx8IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uTWV0YWRhdGEgPSAoZ2x0ZltOQU1FXSA9IGdsdGZbTkFNRV0gfHwgeyBsYXN0U2VsZWN0ZWQ6IG51bGwsIG9yaWdpbmFsOiBbXSwgdmFyaWFudHM6IHt9IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgb3JpZ2luYWwgbWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbk1ldGFkYXRhLm9yaWdpbmFsLnB1c2goeyBtZXNoOiBiYWJ5bG9uTWVzaCwgbWF0ZXJpYWw6IGJhYnlsb25NZXNoLm1hdGVyaWFsIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBtYXBwaW5nLCBsb29rIGF0IHRoZSB2YXJpYW50cyBhbmQgbWFrZSBhIG5ldyBlbnRyeSBmb3IgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbWFwcGluZ0luZGV4ID0gMDsgbWFwcGluZ0luZGV4IDwgZXh0ZW5zaW9uLm1hcHBpbmdzLmxlbmd0aDsgKyttYXBwaW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcgPSBleHRlbnNpb24ubWFwcGluZ3NbbWFwcGluZ0luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gQXJyYXlJdGVtLkdldChgJHtleHRlbnNpb25Db250ZXh0fS9tYXBwaW5ncy8ke21hcHBpbmdJbmRleH0vbWF0ZXJpYWxgLCB0aGlzLl9sb2FkZXIuZ2x0Zi5tYXRlcmlhbHMsIG1hcHBpbmcubWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIuX2xvYWRNYXRlcmlhbEFzeW5jKGAjL21hdGVyaWFscy8ke21hcHBpbmcubWF0ZXJpYWx9YCwgbWF0ZXJpYWwsIGJhYnlsb25NZXNoLCBiYWJ5bG9uRHJhd01vZGUsIChiYWJ5bG9uTWF0ZXJpYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtYXBwaW5nVmFyaWFudEluZGV4ID0gMDsgbWFwcGluZ1ZhcmlhbnRJbmRleCA8IG1hcHBpbmcudmFyaWFudHMubGVuZ3RoOyArK21hcHBpbmdWYXJpYW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudEluZGV4ID0gbWFwcGluZy52YXJpYW50c1ttYXBwaW5nVmFyaWFudEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudCA9IEFycmF5SXRlbS5HZXQoYC9leHRlbnNpb25zLyR7TkFNRX0vdmFyaWFudHMvJHt2YXJpYW50SW5kZXh9YCwgdGhpcy5fdmFyaWFudHMsIHZhcmlhbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbk1ldGFkYXRhLnZhcmlhbnRzW3ZhcmlhbnQubmFtZV0gPSBleHRlbnNpb25NZXRhZGF0YS52YXJpYW50c1t2YXJpYW50Lm5hbWVdIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25NZXRhZGF0YS52YXJpYW50c1t2YXJpYW50Lm5hbWVdLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaDogYmFieWxvbk1lc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDogYmFieWxvbk1hdGVyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFyZ2V0IHdoZW4gb3JpZ2luYWwgbWVzaCBpcyBjbG9uZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2gub25DbG9uZWRPYnNlcnZhYmxlLmFkZCgobmV3T25lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNZXNoID0gbmV3T25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdSb290ID0gbmV3TWVzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgcm9vdCB0byBnZXQgbWVkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3QucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3Um9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhID0gS0hSX21hdGVyaWFsc192YXJpYW50cy5fR2V0RXh0ZW5zaW9uTWV0YWRhdGEobmV3Um9vdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChtZXRhZGF0YSA9PT0gbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGNsb25lIHRoZSBtZXRhZGF0YSBvbiB0aGUgcm9vdCAoZmlyc3QgdGltZSBvbmx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QgJiYgbWV0YWRhdGEgPT09IEtIUl9tYXRlcmlhbHNfdmFyaWFudHMuX0dldEV4dGVuc2lvbk1ldGFkYXRhKHJvb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSBtYWluIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdC5faW50ZXJuYWxNZXRhZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJvb3QuX2ludGVybmFsTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdC5faW50ZXJuYWxNZXRhZGF0YVtrZXldID0gcm9vdC5faW50ZXJuYWxNZXRhZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBnbHRmIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdC5faW50ZXJuYWxNZXRhZGF0YS5nbHRmID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcm9vdC5faW50ZXJuYWxNZXRhZGF0YS5nbHRmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvb3QuX2ludGVybmFsTWV0YWRhdGEuZ2x0ZltrZXldID0gcm9vdC5faW50ZXJuYWxNZXRhZGF0YS5nbHRmW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIER1cGxpY2F0ZSB0aGUgZXh0ZW5zaW9uIHNwZWNpZmljIG1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdC5faW50ZXJuYWxNZXRhZGF0YS5nbHRmW05BTUVdID0geyBsYXN0U2VsZWN0ZWQ6IG51bGwsIG9yaWdpbmFsOiBbXSwgdmFyaWFudHM6IHt9IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvcmlnaW5hbCBvZiBtZXRhZGF0YS5vcmlnaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdSb290Ll9pbnRlcm5hbE1ldGFkYXRhLmdsdGZbTkFNRV0ub3JpZ2luYWwucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoOiBvcmlnaW5hbC5tZXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IG9yaWdpbmFsLm1hdGVyaWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWV0YWRhdGEudmFyaWFudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtZXRhZGF0YS52YXJpYW50cywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdC5faW50ZXJuYWxNZXRhZGF0YS5nbHRmW05BTUVdLnZhcmlhbnRzW2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFyaWFudEVudHJ5IG9mIG1ldGFkYXRhLnZhcmlhbnRzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdSb290Ll9pbnRlcm5hbE1ldGFkYXRhLmdsdGZbTkFNRV0udmFyaWFudHNba2V5XS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaDogdmFyaWFudEVudHJ5Lm1lc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB2YXJpYW50RW50cnkubWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBuZXdSb290Ll9pbnRlcm5hbE1ldGFkYXRhLmdsdGZbTkFNRV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxvY2F0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2YgbWV0YWRhdGEub3JpZ2luYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lm1lc2ggPT09IGJhYnlsb25NZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5tZXNoID0gbmV3TWVzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiBtZXRhZGF0YS52YXJpYW50c1t2YXJpYW50Lm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5tZXNoID09PSBiYWJ5bG9uTWVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQubWVzaCA9IG5ld01lc2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKFtiYWJ5bG9uTWVzaF0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFieWxvbk1lc2g7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgS0hSX21hdGVyaWFsc192YXJpYW50cyhsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfdmFyaWFudHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_variants.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_volume.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_volume.js ***!
  \*************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_materials_volume: () => (/* binding */ KHR_materials_volume)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_materials_volume\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_volume/README.md)\n * @since 5.0.0\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_materials_volume {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 173;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n        if (this.enabled) {\n            // We need to disable instance usage because the attenuation factor depends on the node scale of each individual mesh\n            this._loader._disableInstancedMesh++;\n        }\n    }\n    /** @internal */\n    dispose() {\n        if (this.enabled) {\n            this._loader._disableInstancedMesh--;\n        }\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n            promises.push(this._loadVolumePropertiesAsync(extensionContext, material, babylonMaterial, extension));\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    _loadVolumePropertiesAsync(context, material, babylonMaterial, extension) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        // If transparency isn't enabled already, this extension shouldn't do anything.\n        // i.e. it requires either the KHR_materials_transmission or KHR_materials_translucency extensions.\n        if ((!babylonMaterial.subSurface.isRefractionEnabled && !babylonMaterial.subSurface.isTranslucencyEnabled) || !extension.thicknessFactor) {\n            return Promise.resolve();\n        }\n        // IOR in this extension only affects interior.\n        babylonMaterial.subSurface.volumeIndexOfRefraction = babylonMaterial.indexOfRefraction;\n        const attenuationDistance = extension.attenuationDistance !== undefined ? extension.attenuationDistance : Number.MAX_VALUE;\n        babylonMaterial.subSurface.tintColorAtDistance = attenuationDistance;\n        if (extension.attenuationColor !== undefined && extension.attenuationColor.length == 3) {\n            babylonMaterial.subSurface.tintColor.copyFromFloats(extension.attenuationColor[0], extension.attenuationColor[1], extension.attenuationColor[2]);\n        }\n        babylonMaterial.subSurface.minimumThickness = 0.0;\n        babylonMaterial.subSurface.maximumThickness = extension.thicknessFactor;\n        babylonMaterial.subSurface.useThicknessAsDepth = true;\n        if (extension.thicknessTexture) {\n            extension.thicknessTexture.nonColorData = true;\n            return this._loader.loadTextureInfoAsync(`${context}/thicknessTexture`, extension.thicknessTexture).then((texture) => {\n                babylonMaterial.subSurface.thicknessTexture = texture;\n                babylonMaterial.subSurface.useGltfStyleTextures = true;\n            });\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_materials_volume(loader));\n//# sourceMappingURL=KHR_materials_volume.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21hdGVyaWFsc192b2x1bWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJFO0FBQzdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5QyxxRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsUUFBUTtBQUNoRTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl9tYXRlcmlhbHNfdm9sdW1lLmpzP2Y0ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiS0hSX21hdGVyaWFsc192b2x1bWVcIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3ZvbHVtZS9SRUFETUUubWQpXG4gKiBAc2luY2UgNS4wLjBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl9tYXRlcmlhbHNfdm9sdW1lIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYSBudW1iZXIgdGhhdCBkZXRlcm1pbmVzIHRoZSBvcmRlciB0aGUgZXh0ZW5zaW9ucyBhcmUgYXBwbGllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3JkZXIgPSAxNzM7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkaXNhYmxlIGluc3RhbmNlIHVzYWdlIGJlY2F1c2UgdGhlIGF0dGVudWF0aW9uIGZhY3RvciBkZXBlbmRzIG9uIHRoZSBub2RlIHNjYWxlIG9mIGVhY2ggaW5kaXZpZHVhbCBtZXNoXG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuX2Rpc2FibGVJbnN0YW5jZWRNZXNoKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlci5fZGlzYWJsZUluc3RhbmNlZE1lc2gtLTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZGVyLmxvYWRNYXRlcmlhbEJhc2VQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZFZvbHVtZVByb3BlcnRpZXNBc3luYyhleHRlbnNpb25Db250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsLCBleHRlbnNpb24pKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRWb2x1bWVQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCwgZXh0ZW5zaW9uKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0cmFuc3BhcmVuY3kgaXNuJ3QgZW5hYmxlZCBhbHJlYWR5LCB0aGlzIGV4dGVuc2lvbiBzaG91bGRuJ3QgZG8gYW55dGhpbmcuXG4gICAgICAgIC8vIGkuZS4gaXQgcmVxdWlyZXMgZWl0aGVyIHRoZSBLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbiBvciBLSFJfbWF0ZXJpYWxzX3RyYW5zbHVjZW5jeSBleHRlbnNpb25zLlxuICAgICAgICBpZiAoKCFiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5pc1JlZnJhY3Rpb25FbmFibGVkICYmICFiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5pc1RyYW5zbHVjZW5jeUVuYWJsZWQpIHx8ICFleHRlbnNpb24udGhpY2tuZXNzRmFjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSU9SIGluIHRoaXMgZXh0ZW5zaW9uIG9ubHkgYWZmZWN0cyBpbnRlcmlvci5cbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLnN1YlN1cmZhY2Uudm9sdW1lSW5kZXhPZlJlZnJhY3Rpb24gPSBiYWJ5bG9uTWF0ZXJpYWwuaW5kZXhPZlJlZnJhY3Rpb247XG4gICAgICAgIGNvbnN0IGF0dGVudWF0aW9uRGlzdGFuY2UgPSBleHRlbnNpb24uYXR0ZW51YXRpb25EaXN0YW5jZSAhPT0gdW5kZWZpbmVkID8gZXh0ZW5zaW9uLmF0dGVudWF0aW9uRGlzdGFuY2UgOiBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS50aW50Q29sb3JBdERpc3RhbmNlID0gYXR0ZW51YXRpb25EaXN0YW5jZTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbi5hdHRlbnVhdGlvbkNvbG9yICE9PSB1bmRlZmluZWQgJiYgZXh0ZW5zaW9uLmF0dGVudWF0aW9uQ29sb3IubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5zdWJTdXJmYWNlLnRpbnRDb2xvci5jb3B5RnJvbUZsb2F0cyhleHRlbnNpb24uYXR0ZW51YXRpb25Db2xvclswXSwgZXh0ZW5zaW9uLmF0dGVudWF0aW9uQ29sb3JbMV0sIGV4dGVuc2lvbi5hdHRlbnVhdGlvbkNvbG9yWzJdKTtcbiAgICAgICAgfVxuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5taW5pbXVtVGhpY2tuZXNzID0gMC4wO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuc3ViU3VyZmFjZS5tYXhpbXVtVGhpY2tuZXNzID0gZXh0ZW5zaW9uLnRoaWNrbmVzc0ZhY3RvcjtcbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLnN1YlN1cmZhY2UudXNlVGhpY2tuZXNzQXNEZXB0aCA9IHRydWU7XG4gICAgICAgIGlmIChleHRlbnNpb24udGhpY2tuZXNzVGV4dHVyZSkge1xuICAgICAgICAgICAgZXh0ZW5zaW9uLnRoaWNrbmVzc1RleHR1cmUubm9uQ29sb3JEYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vdGhpY2tuZXNzVGV4dHVyZWAsIGV4dGVuc2lvbi50aGlja25lc3NUZXh0dXJlKS50aGVuKCh0ZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnN1YlN1cmZhY2UudGhpY2tuZXNzVGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnN1YlN1cmZhY2UudXNlR2x0ZlN0eWxlVGV4dHVyZXMgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfbWF0ZXJpYWxzX3ZvbHVtZShsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tYXRlcmlhbHNfdm9sdW1lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_volume.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_mesh_quantization.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_mesh_quantization.js ***!
  \**************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_mesh_quantization: () => (/* binding */ KHR_mesh_quantization)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__]);\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst NAME = \"KHR_mesh_quantization\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_mesh_quantization {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this.enabled = loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() { }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_mesh_quantization(loader));\n//# sourceMappingURL=KHR_mesh_quantization.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21lc2hfcXVhbnRpemF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQVU7QUFDVixpRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX21lc2hfcXVhbnRpemF0aW9uLmpzPzMwMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJLSFJfbWVzaF9xdWFudGl6YXRpb25cIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21haW4vZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWVzaF9xdWFudGl6YXRpb24vUkVBRE1FLm1kKVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgS0hSX21lc2hfcXVhbnRpemF0aW9uIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7IH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl9tZXNoX3F1YW50aXphdGlvbihsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl9tZXNoX3F1YW50aXphdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_mesh_quantization.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_basisu.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_basisu.js ***!
  \***********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_texture_basisu: () => (/* binding */ KHR_texture_basisu)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__]);\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst NAME = \"KHR_texture_basisu\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_texture_basisu/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_texture_basisu {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /** The name of this extension. */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    _loadTextureAsync(context, texture, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.LoadExtensionAsync(context, texture, this.name, (extensionContext, extension) => {\n            const sampler = texture.sampler == undefined ? _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.DefaultSampler : _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${context}/sampler`, this._loader.gltf.samplers, texture.sampler);\n            const image = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.ArrayItem.Get(`${extensionContext}/source`, this._loader.gltf.images, extension.source);\n            return this._loader._createTextureAsync(context, sampler, image, (babylonTexture) => {\n                assign(babylonTexture);\n            }, texture._textureInfo.nonColorData ? { useRGBAIfASTCBC7NotAvailableWhenUASTC: true } : undefined, !texture._textureInfo.nonColorData);\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_texture_basisu(loader));\n//# sourceMappingURL=KHR_texture_basisu.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX3RleHR1cmVfYmFzaXN1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCLDJEQUEyRCxzREFBVSxrQkFBa0IscURBQVMsUUFBUSxRQUFRO0FBQ2hILDBCQUEwQixxREFBUyxRQUFRLGlCQUFpQjtBQUM1RDtBQUNBO0FBQ0EsYUFBYSx3Q0FBd0MsOENBQThDO0FBQ25HLFNBQVM7QUFDVDtBQUNBO0FBQ0Esc0RBQVU7QUFDViw4QyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX3RleHR1cmVfYmFzaXN1LmpzPzEzMTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR0xURkxvYWRlciwgQXJyYXlJdGVtIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl90ZXh0dXJlX2Jhc2lzdVwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl90ZXh0dXJlX2Jhc2lzdS9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfdGV4dHVyZV9iYXNpc3Uge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKiogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sb2FkVGV4dHVyZUFzeW5jKGNvbnRleHQsIHRleHR1cmUsIGFzc2lnbikge1xuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgdGV4dHVyZSwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVyID0gdGV4dHVyZS5zYW1wbGVyID09IHVuZGVmaW5lZCA/IEdMVEZMb2FkZXIuRGVmYXVsdFNhbXBsZXIgOiBBcnJheUl0ZW0uR2V0KGAke2NvbnRleHR9L3NhbXBsZXJgLCB0aGlzLl9sb2FkZXIuZ2x0Zi5zYW1wbGVycywgdGV4dHVyZS5zYW1wbGVyKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gQXJyYXlJdGVtLkdldChgJHtleHRlbnNpb25Db250ZXh0fS9zb3VyY2VgLCB0aGlzLl9sb2FkZXIuZ2x0Zi5pbWFnZXMsIGV4dGVuc2lvbi5zb3VyY2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5fY3JlYXRlVGV4dHVyZUFzeW5jKGNvbnRleHQsIHNhbXBsZXIsIGltYWdlLCAoYmFieWxvblRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvblRleHR1cmUpO1xuICAgICAgICAgICAgfSwgdGV4dHVyZS5fdGV4dHVyZUluZm8ubm9uQ29sb3JEYXRhID8geyB1c2VSR0JBSWZBU1RDQkM3Tm90QXZhaWxhYmxlV2hlblVBU1RDOiB0cnVlIH0gOiB1bmRlZmluZWQsICF0ZXh0dXJlLl90ZXh0dXJlSW5mby5ub25Db2xvckRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfdGV4dHVyZV9iYXNpc3UobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfdGV4dHVyZV9iYXNpc3UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_basisu.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_transform.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_transform.js ***!
  \**************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_texture_transform: () => (/* binding */ KHR_texture_transform)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/texture.js */ \"@babylonjs/core/Materials/Textures/texture.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"KHR_texture_transform\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_texture_transform/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_texture_transform {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * @internal\n     */\n    loadTextureInfoAsync(context, textureInfo, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtensionAsync(context, textureInfo, this.name, (extensionContext, extension) => {\n            return this._loader.loadTextureInfoAsync(context, textureInfo, (babylonTexture) => {\n                if (!(babylonTexture instanceof _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_0__.Texture)) {\n                    throw new Error(`${extensionContext}: Texture type not supported`);\n                }\n                if (extension.offset) {\n                    babylonTexture.uOffset = extension.offset[0];\n                    babylonTexture.vOffset = extension.offset[1];\n                }\n                // Always rotate around the origin.\n                babylonTexture.uRotationCenter = 0;\n                babylonTexture.vRotationCenter = 0;\n                if (extension.rotation) {\n                    babylonTexture.wAng = -extension.rotation;\n                }\n                if (extension.scale) {\n                    babylonTexture.uScale = extension.scale[0];\n                    babylonTexture.vScale = extension.scale[1];\n                }\n                if (extension.texCoord != undefined) {\n                    babylonTexture.coordinatesIndex = extension.texCoord;\n                }\n                assign(babylonTexture);\n            });\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_texture_transform(loader));\n//# sourceMappingURL=KHR_texture_transform.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX3RleHR1cmVfdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RTtBQUMxQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQSxnREFBZ0Qsa0ZBQU87QUFDdkQsdUNBQXVDLGlCQUFpQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNEQUFVO0FBQ1YsaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL0tIUl90ZXh0dXJlX3RyYW5zZm9ybS5qcz9jM2NmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRleHR1cmUgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9UZXh0dXJlcy90ZXh0dXJlLmpzXCI7XG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl90ZXh0dXJlX3RyYW5zZm9ybVwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl90ZXh0dXJlX3RyYW5zZm9ybS9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBLSFJfdGV4dHVyZV90cmFuc2Zvcm0ge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxvYWRlcikge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhpcyBleHRlbnNpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkVGV4dHVyZUluZm9Bc3luYyhjb250ZXh0LCB0ZXh0dXJlSW5mbywgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCB0ZXh0dXJlSW5mbywgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGNvbnRleHQsIHRleHR1cmVJbmZvLCAoYmFieWxvblRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShiYWJ5bG9uVGV4dHVyZSBpbnN0YW5jZW9mIFRleHR1cmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtleHRlbnNpb25Db250ZXh0fTogVGV4dHVyZSB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvblRleHR1cmUudU9mZnNldCA9IGV4dGVuc2lvbi5vZmZzZXRbMF07XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlLnZPZmZzZXQgPSBleHRlbnNpb24ub2Zmc2V0WzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcm90YXRlIGFyb3VuZCB0aGUgb3JpZ2luLlxuICAgICAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlLnVSb3RhdGlvbkNlbnRlciA9IDA7XG4gICAgICAgICAgICAgICAgYmFieWxvblRleHR1cmUudlJvdGF0aW9uQ2VudGVyID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLnJvdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlLndBbmcgPSAtZXh0ZW5zaW9uLnJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLnNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlLnVTY2FsZSA9IGV4dGVuc2lvbi5zY2FsZVswXTtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvblRleHR1cmUudlNjYWxlID0gZXh0ZW5zaW9uLnNjYWxlWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLnRleENvb3JkICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uVGV4dHVyZS5jb29yZGluYXRlc0luZGV4ID0gZXh0ZW5zaW9uLnRleENvb3JkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvblRleHR1cmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IEtIUl90ZXh0dXJlX3RyYW5zZm9ybShsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtIUl90ZXh0dXJlX3RyYW5zZm9ybS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_transform.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_xmp_json_ld.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_xmp_json_ld.js ***!
  \********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KHR_xmp_json_ld: () => (/* binding */ KHR_xmp_json_ld)\n/* harmony export */ });\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__]);\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst NAME = \"KHR_xmp_json_ld\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_xmp_json_ld/README.md)\n * @since 5.0.0\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass KHR_xmp_json_ld {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 100;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /**\n     * Called after the loader state changes to LOADING.\n     */\n    onLoading() {\n        if (this._loader.rootBabylonMesh === null) {\n            return;\n        }\n        const xmp_gltf = this._loader.gltf.extensions?.KHR_xmp_json_ld;\n        const xmp_node = this._loader.gltf.asset?.extensions?.KHR_xmp_json_ld;\n        if (xmp_gltf && xmp_node) {\n            const packet = +xmp_node.packet;\n            if (xmp_gltf.packets && packet < xmp_gltf.packets.length) {\n                this._loader.rootBabylonMesh.metadata = this._loader.rootBabylonMesh.metadata || {};\n                this._loader.rootBabylonMesh.metadata.xmp = xmp_gltf.packets[packet];\n            }\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader.RegisterExtension(NAME, (loader) => new KHR_xmp_json_ld(loader));\n//# sourceMappingURL=KHR_xmp_json_ld.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvS0hSX3htcF9qc29uX2xkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9LSFJfeG1wX2pzb25fbGQuanM/NDNkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIktIUl94bXBfanNvbl9sZFwiO1xuLyoqXG4gKiBbU3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFpbi9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl94bXBfanNvbl9sZC9SRUFETUUubWQpXG4gKiBAc2luY2UgNS4wLjBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIEtIUl94bXBfanNvbl9sZCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTAwO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYWZ0ZXIgdGhlIGxvYWRlciBzdGF0ZSBjaGFuZ2VzIHRvIExPQURJTkcuXG4gICAgICovXG4gICAgb25Mb2FkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5fbG9hZGVyLnJvb3RCYWJ5bG9uTWVzaCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHhtcF9nbHRmID0gdGhpcy5fbG9hZGVyLmdsdGYuZXh0ZW5zaW9ucz8uS0hSX3htcF9qc29uX2xkO1xuICAgICAgICBjb25zdCB4bXBfbm9kZSA9IHRoaXMuX2xvYWRlci5nbHRmLmFzc2V0Py5leHRlbnNpb25zPy5LSFJfeG1wX2pzb25fbGQ7XG4gICAgICAgIGlmICh4bXBfZ2x0ZiAmJiB4bXBfbm9kZSkge1xuICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gK3htcF9ub2RlLnBhY2tldDtcbiAgICAgICAgICAgIGlmICh4bXBfZ2x0Zi5wYWNrZXRzICYmIHBhY2tldCA8IHhtcF9nbHRmLnBhY2tldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyLnJvb3RCYWJ5bG9uTWVzaC5tZXRhZGF0YSA9IHRoaXMuX2xvYWRlci5yb290QmFieWxvbk1lc2gubWV0YWRhdGEgfHwge307XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyLnJvb3RCYWJ5bG9uTWVzaC5tZXRhZGF0YS54bXAgPSB4bXBfZ2x0Zi5wYWNrZXRzW3BhY2tldF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBLSFJfeG1wX2pzb25fbGQobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LSFJfeG1wX2pzb25fbGQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_xmp_json_ld.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_audio_emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_audio_emitter.js ***!
  \***********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MSFT_audio_emitter: () => (/* binding */ MSFT_audio_emitter)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\n/* harmony import */ var _babylonjs_core_Animations_animationEvent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Animations/animationEvent.js */ \"@babylonjs/core/Animations/animationEvent.js\");\n/* harmony import */ var _babylonjs_core_Audio_sound_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Audio/sound.js */ \"@babylonjs/core/Audio/sound.js\");\n/* harmony import */ var _babylonjs_core_Audio_weightedsound_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Audio/weightedsound.js */ \"@babylonjs/core/Audio/weightedsound.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Animations_animationEvent_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Audio_sound_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Audio_weightedsound_js__WEBPACK_IMPORTED_MODULE_4__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__]);\n([_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Animations_animationEvent_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Audio_sound_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Audio_weightedsound_js__WEBPACK_IMPORTED_MODULE_4__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nconst NAME = \"MSFT_audio_emitter\";\n/**\n * [Specification](https://github.com/najadojo/glTF/blob/MSFT_audio_emitter/extensions/2.0/Vendor/MSFT_audio_emitter/README.md)\n * !!! Experimental Extension Subject to Changes !!!\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass MSFT_audio_emitter {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        this._clips = null;\n        this._emitters = null;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._clips = extension.clips;\n            this._emitters = extension.emitters;\n            _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Assign(this._clips);\n            _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Assign(this._emitters);\n        }\n    }\n    /**\n     * @internal\n     */\n    loadSceneAsync(context, scene) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader.LoadExtensionAsync(context, scene, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            promises.push(this._loader.loadSceneAsync(context, scene));\n            for (const emitterIndex of extension.emitters) {\n                const emitter = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Get(`${extensionContext}/emitters`, this._emitters, emitterIndex);\n                if (emitter.refDistance != undefined ||\n                    emitter.maxDistance != undefined ||\n                    emitter.rolloffFactor != undefined ||\n                    emitter.distanceModel != undefined ||\n                    emitter.innerAngle != undefined ||\n                    emitter.outerAngle != undefined) {\n                    throw new Error(`${extensionContext}: Direction or Distance properties are not allowed on emitters attached to a scene`);\n                }\n                promises.push(this._loadEmitterAsync(`${extensionContext}/emitters/${emitter.index}`, emitter));\n            }\n            return Promise.all(promises).then(() => { });\n        });\n    }\n    /**\n     * @internal\n     */\n    loadNodeAsync(context, node, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader.LoadExtensionAsync(context, node, this.name, (extensionContext, extension) => {\n            const promises = new Array();\n            return this._loader\n                .loadNodeAsync(extensionContext, node, (babylonMesh) => {\n                for (const emitterIndex of extension.emitters) {\n                    const emitter = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Get(`${extensionContext}/emitters`, this._emitters, emitterIndex);\n                    promises.push(this._loadEmitterAsync(`${extensionContext}/emitters/${emitter.index}`, emitter).then(() => {\n                        for (const sound of emitter._babylonSounds) {\n                            sound.attachToMesh(babylonMesh);\n                            if (emitter.innerAngle != undefined || emitter.outerAngle != undefined) {\n                                sound.setLocalDirectionToMesh(_babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_0__.Vector3.Forward());\n                                sound.setDirectionalCone(2 * _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.ToDegrees(emitter.innerAngle == undefined ? Math.PI : emitter.innerAngle), 2 * _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.ToDegrees(emitter.outerAngle == undefined ? Math.PI : emitter.outerAngle), 0);\n                            }\n                        }\n                    }));\n                }\n                assign(babylonMesh);\n            })\n                .then((babylonMesh) => {\n                return Promise.all(promises).then(() => {\n                    return babylonMesh;\n                });\n            });\n        });\n    }\n    /**\n     * @internal\n     */\n    loadAnimationAsync(context, animation) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader.LoadExtensionAsync(context, animation, this.name, (extensionContext, extension) => {\n            return this._loader.loadAnimationAsync(context, animation).then((babylonAnimationGroup) => {\n                const promises = new Array();\n                _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Assign(extension.events);\n                for (const event of extension.events) {\n                    promises.push(this._loadAnimationEventAsync(`${extensionContext}/events/${event.index}`, context, animation, event, babylonAnimationGroup));\n                }\n                return Promise.all(promises).then(() => {\n                    return babylonAnimationGroup;\n                });\n            });\n        });\n    }\n    _loadClipAsync(context, clip) {\n        if (clip._objectURL) {\n            return clip._objectURL;\n        }\n        let promise;\n        if (clip.uri) {\n            promise = this._loader.loadUriAsync(context, clip, clip.uri);\n        }\n        else {\n            const bufferView = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Get(`${context}/bufferView`, this._loader.gltf.bufferViews, clip.bufferView);\n            promise = this._loader.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView);\n        }\n        clip._objectURL = promise.then((data) => {\n            return URL.createObjectURL(new Blob([data], { type: clip.mimeType }));\n        });\n        return clip._objectURL;\n    }\n    _loadEmitterAsync(context, emitter) {\n        emitter._babylonSounds = emitter._babylonSounds || [];\n        if (!emitter._babylonData) {\n            const clipPromises = new Array();\n            const name = emitter.name || `emitter${emitter.index}`;\n            const options = {\n                loop: false,\n                autoplay: false,\n                volume: emitter.volume == undefined ? 1 : emitter.volume,\n            };\n            for (let i = 0; i < emitter.clips.length; i++) {\n                const clipContext = `/extensions/${this.name}/clips`;\n                const clip = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Get(clipContext, this._clips, emitter.clips[i].clip);\n                clipPromises.push(this._loadClipAsync(`${clipContext}/${emitter.clips[i].clip}`, clip).then((objectURL) => {\n                    const sound = (emitter._babylonSounds[i] = new _babylonjs_core_Audio_sound_js__WEBPACK_IMPORTED_MODULE_3__.Sound(name, objectURL, this._loader.babylonScene, null, options));\n                    sound.refDistance = emitter.refDistance || 1;\n                    sound.maxDistance = emitter.maxDistance || 256;\n                    sound.rolloffFactor = emitter.rolloffFactor || 1;\n                    sound.distanceModel = emitter.distanceModel || \"exponential\";\n                }));\n            }\n            const promise = Promise.all(clipPromises).then(() => {\n                const weights = emitter.clips.map((clip) => {\n                    return clip.weight || 1;\n                });\n                const weightedSound = new _babylonjs_core_Audio_weightedsound_js__WEBPACK_IMPORTED_MODULE_4__.WeightedSound(emitter.loop || false, emitter._babylonSounds, weights);\n                if (emitter.innerAngle) {\n                    weightedSound.directionalConeInnerAngle = 2 * _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.ToDegrees(emitter.innerAngle);\n                }\n                if (emitter.outerAngle) {\n                    weightedSound.directionalConeOuterAngle = 2 * _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.ToDegrees(emitter.outerAngle);\n                }\n                if (emitter.volume) {\n                    weightedSound.volume = emitter.volume;\n                }\n                emitter._babylonData.sound = weightedSound;\n            });\n            emitter._babylonData = {\n                loaded: promise,\n            };\n        }\n        return emitter._babylonData.loaded;\n    }\n    _getEventAction(context, sound, action, time, startOffset) {\n        switch (action) {\n            case \"play\" /* IMSFTAudioEmitter_AnimationEventAction.play */: {\n                return (currentFrame) => {\n                    const frameOffset = (startOffset || 0) + (currentFrame - time);\n                    sound.play(frameOffset);\n                };\n            }\n            case \"stop\" /* IMSFTAudioEmitter_AnimationEventAction.stop */: {\n                return () => {\n                    sound.stop();\n                };\n            }\n            case \"pause\" /* IMSFTAudioEmitter_AnimationEventAction.pause */: {\n                return () => {\n                    sound.pause();\n                };\n            }\n            default: {\n                throw new Error(`${context}: Unsupported action ${action}`);\n            }\n        }\n    }\n    _loadAnimationEventAsync(context, animationContext, animation, event, babylonAnimationGroup) {\n        if (babylonAnimationGroup.targetedAnimations.length == 0) {\n            return Promise.resolve();\n        }\n        const babylonAnimation = babylonAnimationGroup.targetedAnimations[0];\n        const emitterIndex = event.emitter;\n        const emitter = _glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.ArrayItem.Get(`/extensions/${this.name}/emitters`, this._emitters, emitterIndex);\n        return this._loadEmitterAsync(context, emitter).then(() => {\n            const sound = emitter._babylonData.sound;\n            if (sound) {\n                const babylonAnimationEvent = new _babylonjs_core_Animations_animationEvent_js__WEBPACK_IMPORTED_MODULE_2__.AnimationEvent(event.time, this._getEventAction(context, sound, event.action, event.time, event.startOffset));\n                babylonAnimation.animation.addEvent(babylonAnimationEvent);\n                // Make sure all started audio stops when this animation is terminated.\n                babylonAnimationGroup.onAnimationGroupEndObservable.add(() => {\n                    sound.stop();\n                });\n                babylonAnimationGroup.onAnimationGroupPauseObservable.add(() => {\n                    sound.pause();\n                });\n            }\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader.RegisterExtension(NAME, (loader) => new MSFT_audio_emitter(loader));\n//# sourceMappingURL=MSFT_audio_emitter.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvTVNGVF9hdWRpb19lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDVDtBQUN3QjtBQUN2QjtBQUNnQjtBQUNkO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBUztBQUNyQixZQUFZLHFEQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFEQUFTLFFBQVEsaUJBQWlCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpQkFBaUI7QUFDeEQ7QUFDQSx3REFBd0QsaUJBQWlCLFlBQVksY0FBYztBQUNuRztBQUNBLHVEQUF1RDtBQUN2RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MscURBQVMsUUFBUSxpQkFBaUI7QUFDdEUsNERBQTRELGlCQUFpQixZQUFZLGNBQWM7QUFDdkc7QUFDQTtBQUNBO0FBQ0EsOERBQThELHlFQUFPO0FBQ3JFLDZEQUE2RCxnRUFBSyxnRkFBZ0YsZ0VBQUs7QUFDdko7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNEQUFVO0FBQ3pCO0FBQ0E7QUFDQSxnQkFBZ0IscURBQVM7QUFDekI7QUFDQSxtRUFBbUUsaUJBQWlCLFVBQVUsWUFBWTtBQUMxRztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixxREFBUyxRQUFRLFFBQVE7QUFDeEQsdUVBQXVFLGlCQUFpQjtBQUN4RjtBQUNBO0FBQ0EsMERBQTBELHFCQUFxQjtBQUMvRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGNBQWM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwQkFBMEI7QUFDdEQsbURBQW1ELFVBQVU7QUFDN0QsNkJBQTZCLHFEQUFTO0FBQ3RDLHlEQUF5RCxZQUFZLEdBQUcsc0JBQXNCO0FBQzlGLG1FQUFtRSxpRUFBSztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiwwQ0FBMEMsaUZBQWE7QUFDdkQ7QUFDQSxrRUFBa0UsZ0VBQUs7QUFDdkU7QUFDQTtBQUNBLGtFQUFrRSxnRUFBSztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVEsdUJBQXVCLE9BQU87QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFTLG9CQUFvQixVQUFVO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx3RkFBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9NU0ZUX2F1ZGlvX2VtaXR0ZXIuanM/OGRjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRocy9tYXRoLnZlY3Rvci5qc1wiO1xuaW1wb3J0IHsgVG9vbHMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvdG9vbHMuanNcIjtcbmltcG9ydCB7IEFuaW1hdGlvbkV2ZW50IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9BbmltYXRpb25zL2FuaW1hdGlvbkV2ZW50LmpzXCI7XG5pbXBvcnQgeyBTb3VuZCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQXVkaW8vc291bmQuanNcIjtcbmltcG9ydCB7IFdlaWdodGVkU291bmQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0F1ZGlvL3dlaWdodGVkc291bmQuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIsIEFycmF5SXRlbSB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJNU0ZUX2F1ZGlvX2VtaXR0ZXJcIjtcbi8qKlxuICogW1NwZWNpZmljYXRpb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9uYWphZG9qby9nbFRGL2Jsb2IvTVNGVF9hdWRpb19lbWl0dGVyL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9NU0ZUX2F1ZGlvX2VtaXR0ZXIvUkVBRE1FLm1kKVxuICogISEhIEV4cGVyaW1lbnRhbCBFeHRlbnNpb24gU3ViamVjdCB0byBDaGFuZ2VzICEhIVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY2xhc3MgTVNGVF9hdWRpb19lbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgZXh0ZW5zaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTkFNRTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLl9sb2FkZXIuaXNFeHRlbnNpb25Vc2VkKE5BTUUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2xpcHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9lbWl0dGVycyA9IG51bGw7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBvbkxvYWRpbmcoKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB0aGlzLl9sb2FkZXIuZ2x0Zi5leHRlbnNpb25zO1xuICAgICAgICBpZiAoZXh0ZW5zaW9ucyAmJiBleHRlbnNpb25zW3RoaXMubmFtZV0pIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGV4dGVuc2lvbnNbdGhpcy5uYW1lXTtcbiAgICAgICAgICAgIHRoaXMuX2NsaXBzID0gZXh0ZW5zaW9uLmNsaXBzO1xuICAgICAgICAgICAgdGhpcy5fZW1pdHRlcnMgPSBleHRlbnNpb24uZW1pdHRlcnM7XG4gICAgICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2NsaXBzKTtcbiAgICAgICAgICAgIEFycmF5SXRlbS5Bc3NpZ24odGhpcy5fZW1pdHRlcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSB7XG4gICAgICAgIHJldHVybiBHTFRGTG9hZGVyLkxvYWRFeHRlbnNpb25Bc3luYyhjb250ZXh0LCBzY2VuZSwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkZXIubG9hZFNjZW5lQXN5bmMoY29udGV4dCwgc2NlbmUpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW1pdHRlckluZGV4IG9mIGV4dGVuc2lvbi5lbWl0dGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVtaXR0ZXIgPSBBcnJheUl0ZW0uR2V0KGAke2V4dGVuc2lvbkNvbnRleHR9L2VtaXR0ZXJzYCwgdGhpcy5fZW1pdHRlcnMsIGVtaXR0ZXJJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGVtaXR0ZXIucmVmRGlzdGFuY2UgIT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIubWF4RGlzdGFuY2UgIT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIucm9sbG9mZkZhY3RvciAhPSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5kaXN0YW5jZU1vZGVsICE9IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyLmlubmVyQW5nbGUgIT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIub3V0ZXJBbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2V4dGVuc2lvbkNvbnRleHR9OiBEaXJlY3Rpb24gb3IgRGlzdGFuY2UgcHJvcGVydGllcyBhcmUgbm90IGFsbG93ZWQgb24gZW1pdHRlcnMgYXR0YWNoZWQgdG8gYSBzY2VuZWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRFbWl0dGVyQXN5bmMoYCR7ZXh0ZW5zaW9uQ29udGV4dH0vZW1pdHRlcnMvJHtlbWl0dGVyLmluZGV4fWAsIGVtaXR0ZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIG5vZGUsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXJcbiAgICAgICAgICAgICAgICAubG9hZE5vZGVBc3luYyhleHRlbnNpb25Db250ZXh0LCBub2RlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVtaXR0ZXJJbmRleCBvZiBleHRlbnNpb24uZW1pdHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1pdHRlciA9IEFycmF5SXRlbS5HZXQoYCR7ZXh0ZW5zaW9uQ29udGV4dH0vZW1pdHRlcnNgLCB0aGlzLl9lbWl0dGVycywgZW1pdHRlckluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkRW1pdHRlckFzeW5jKGAke2V4dGVuc2lvbkNvbnRleHR9L2VtaXR0ZXJzLyR7ZW1pdHRlci5pbmRleH1gLCBlbWl0dGVyKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc291bmQgb2YgZW1pdHRlci5fYmFieWxvblNvdW5kcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kLmF0dGFjaFRvTWVzaChiYWJ5bG9uTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVtaXR0ZXIuaW5uZXJBbmdsZSAhPSB1bmRlZmluZWQgfHwgZW1pdHRlci5vdXRlckFuZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VuZC5zZXRMb2NhbERpcmVjdGlvblRvTWVzaChWZWN0b3IzLkZvcndhcmQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdW5kLnNldERpcmVjdGlvbmFsQ29uZSgyICogVG9vbHMuVG9EZWdyZWVzKGVtaXR0ZXIuaW5uZXJBbmdsZSA9PSB1bmRlZmluZWQgPyBNYXRoLlBJIDogZW1pdHRlci5pbm5lckFuZ2xlKSwgMiAqIFRvb2xzLlRvRGVncmVlcyhlbWl0dGVyLm91dGVyQW5nbGUgPT0gdW5kZWZpbmVkID8gTWF0aC5QSSA6IGVtaXR0ZXIub3V0ZXJBbmdsZSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFieWxvbk1lc2g7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRBbmltYXRpb25Bc3luYyhjb250ZXh0LCBhbmltYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIGFuaW1hdGlvbiwgdGhpcy5uYW1lLCAoZXh0ZW5zaW9uQ29udGV4dCwgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmxvYWRBbmltYXRpb25Bc3luYyhjb250ZXh0LCBhbmltYXRpb24pLnRoZW4oKGJhYnlsb25BbmltYXRpb25Hcm91cCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICAgQXJyYXlJdGVtLkFzc2lnbihleHRlbnNpb24uZXZlbnRzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV4dGVuc2lvbi5ldmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkQW5pbWF0aW9uRXZlbnRBc3luYyhgJHtleHRlbnNpb25Db250ZXh0fS9ldmVudHMvJHtldmVudC5pbmRleH1gLCBjb250ZXh0LCBhbmltYXRpb24sIGV2ZW50LCBiYWJ5bG9uQW5pbWF0aW9uR3JvdXApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhYnlsb25BbmltYXRpb25Hcm91cDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRDbGlwQXN5bmMoY29udGV4dCwgY2xpcCkge1xuICAgICAgICBpZiAoY2xpcC5fb2JqZWN0VVJMKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpcC5fb2JqZWN0VVJMO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwcm9taXNlO1xuICAgICAgICBpZiAoY2xpcC51cmkpIHtcbiAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLl9sb2FkZXIubG9hZFVyaUFzeW5jKGNvbnRleHQsIGNsaXAsIGNsaXAudXJpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlclZpZXcgPSBBcnJheUl0ZW0uR2V0KGAke2NvbnRleHR9L2J1ZmZlclZpZXdgLCB0aGlzLl9sb2FkZXIuZ2x0Zi5idWZmZXJWaWV3cywgY2xpcC5idWZmZXJWaWV3KTtcbiAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLl9sb2FkZXIubG9hZEJ1ZmZlclZpZXdBc3luYyhgL2J1ZmZlclZpZXdzLyR7YnVmZmVyVmlldy5pbmRleH1gLCBidWZmZXJWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICBjbGlwLl9vYmplY3RVUkwgPSBwcm9taXNlLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtkYXRhXSwgeyB0eXBlOiBjbGlwLm1pbWVUeXBlIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGlwLl9vYmplY3RVUkw7XG4gICAgfVxuICAgIF9sb2FkRW1pdHRlckFzeW5jKGNvbnRleHQsIGVtaXR0ZXIpIHtcbiAgICAgICAgZW1pdHRlci5fYmFieWxvblNvdW5kcyA9IGVtaXR0ZXIuX2JhYnlsb25Tb3VuZHMgfHwgW107XG4gICAgICAgIGlmICghZW1pdHRlci5fYmFieWxvbkRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaXBQcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGVtaXR0ZXIubmFtZSB8fCBgZW1pdHRlciR7ZW1pdHRlci5pbmRleH1gO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBsb29wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgdm9sdW1lOiBlbWl0dGVyLnZvbHVtZSA9PSB1bmRlZmluZWQgPyAxIDogZW1pdHRlci52b2x1bWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbWl0dGVyLmNsaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpcENvbnRleHQgPSBgL2V4dGVuc2lvbnMvJHt0aGlzLm5hbWV9L2NsaXBzYDtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGlwID0gQXJyYXlJdGVtLkdldChjbGlwQ29udGV4dCwgdGhpcy5fY2xpcHMsIGVtaXR0ZXIuY2xpcHNbaV0uY2xpcCk7XG4gICAgICAgICAgICAgICAgY2xpcFByb21pc2VzLnB1c2godGhpcy5fbG9hZENsaXBBc3luYyhgJHtjbGlwQ29udGV4dH0vJHtlbWl0dGVyLmNsaXBzW2ldLmNsaXB9YCwgY2xpcCkudGhlbigob2JqZWN0VVJMKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdW5kID0gKGVtaXR0ZXIuX2JhYnlsb25Tb3VuZHNbaV0gPSBuZXcgU291bmQobmFtZSwgb2JqZWN0VVJMLCB0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lLCBudWxsLCBvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIHNvdW5kLnJlZkRpc3RhbmNlID0gZW1pdHRlci5yZWZEaXN0YW5jZSB8fCAxO1xuICAgICAgICAgICAgICAgICAgICBzb3VuZC5tYXhEaXN0YW5jZSA9IGVtaXR0ZXIubWF4RGlzdGFuY2UgfHwgMjU2O1xuICAgICAgICAgICAgICAgICAgICBzb3VuZC5yb2xsb2ZmRmFjdG9yID0gZW1pdHRlci5yb2xsb2ZmRmFjdG9yIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgIHNvdW5kLmRpc3RhbmNlTW9kZWwgPSBlbWl0dGVyLmRpc3RhbmNlTW9kZWwgfHwgXCJleHBvbmVudGlhbFwiO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLmFsbChjbGlwUHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodHMgPSBlbWl0dGVyLmNsaXBzLm1hcCgoY2xpcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpcC53ZWlnaHQgfHwgMTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHRlZFNvdW5kID0gbmV3IFdlaWdodGVkU291bmQoZW1pdHRlci5sb29wIHx8IGZhbHNlLCBlbWl0dGVyLl9iYWJ5bG9uU291bmRzLCB3ZWlnaHRzKTtcbiAgICAgICAgICAgICAgICBpZiAoZW1pdHRlci5pbm5lckFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodGVkU291bmQuZGlyZWN0aW9uYWxDb25lSW5uZXJBbmdsZSA9IDIgKiBUb29scy5Ub0RlZ3JlZXMoZW1pdHRlci5pbm5lckFuZ2xlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVtaXR0ZXIub3V0ZXJBbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRlZFNvdW5kLmRpcmVjdGlvbmFsQ29uZU91dGVyQW5nbGUgPSAyICogVG9vbHMuVG9EZWdyZWVzKGVtaXR0ZXIub3V0ZXJBbmdsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbWl0dGVyLnZvbHVtZSkge1xuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRlZFNvdW5kLnZvbHVtZSA9IGVtaXR0ZXIudm9sdW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbWl0dGVyLl9iYWJ5bG9uRGF0YS5zb3VuZCA9IHdlaWdodGVkU291bmQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVtaXR0ZXIuX2JhYnlsb25EYXRhID0ge1xuICAgICAgICAgICAgICAgIGxvYWRlZDogcHJvbWlzZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtaXR0ZXIuX2JhYnlsb25EYXRhLmxvYWRlZDtcbiAgICB9XG4gICAgX2dldEV2ZW50QWN0aW9uKGNvbnRleHQsIHNvdW5kLCBhY3Rpb24sIHRpbWUsIHN0YXJ0T2Zmc2V0KSB7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwicGxheVwiIC8qIElNU0ZUQXVkaW9FbWl0dGVyX0FuaW1hdGlvbkV2ZW50QWN0aW9uLnBsYXkgKi86IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRGcmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZU9mZnNldCA9IChzdGFydE9mZnNldCB8fCAwKSArIChjdXJyZW50RnJhbWUgLSB0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc291bmQucGxheShmcmFtZU9mZnNldCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJzdG9wXCIgLyogSU1TRlRBdWRpb0VtaXR0ZXJfQW5pbWF0aW9uRXZlbnRBY3Rpb24uc3RvcCAqLzoge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdW5kLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInBhdXNlXCIgLyogSU1TRlRBdWRpb0VtaXR0ZXJfQW5pbWF0aW9uRXZlbnRBY3Rpb24ucGF1c2UgKi86IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzb3VuZC5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBVbnN1cHBvcnRlZCBhY3Rpb24gJHthY3Rpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2xvYWRBbmltYXRpb25FdmVudEFzeW5jKGNvbnRleHQsIGFuaW1hdGlvbkNvbnRleHQsIGFuaW1hdGlvbiwgZXZlbnQsIGJhYnlsb25BbmltYXRpb25Hcm91cCkge1xuICAgICAgICBpZiAoYmFieWxvbkFuaW1hdGlvbkdyb3VwLnRhcmdldGVkQW5pbWF0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhYnlsb25BbmltYXRpb24gPSBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAudGFyZ2V0ZWRBbmltYXRpb25zWzBdO1xuICAgICAgICBjb25zdCBlbWl0dGVySW5kZXggPSBldmVudC5lbWl0dGVyO1xuICAgICAgICBjb25zdCBlbWl0dGVyID0gQXJyYXlJdGVtLkdldChgL2V4dGVuc2lvbnMvJHt0aGlzLm5hbWV9L2VtaXR0ZXJzYCwgdGhpcy5fZW1pdHRlcnMsIGVtaXR0ZXJJbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkRW1pdHRlckFzeW5jKGNvbnRleHQsIGVtaXR0ZXIpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc291bmQgPSBlbWl0dGVyLl9iYWJ5bG9uRGF0YS5zb3VuZDtcbiAgICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhYnlsb25BbmltYXRpb25FdmVudCA9IG5ldyBBbmltYXRpb25FdmVudChldmVudC50aW1lLCB0aGlzLl9nZXRFdmVudEFjdGlvbihjb250ZXh0LCBzb3VuZCwgZXZlbnQuYWN0aW9uLCBldmVudC50aW1lLCBldmVudC5zdGFydE9mZnNldCkpO1xuICAgICAgICAgICAgICAgIGJhYnlsb25BbmltYXRpb24uYW5pbWF0aW9uLmFkZEV2ZW50KGJhYnlsb25BbmltYXRpb25FdmVudCk7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCBzdGFydGVkIGF1ZGlvIHN0b3BzIHdoZW4gdGhpcyBhbmltYXRpb24gaXMgdGVybWluYXRlZC5cbiAgICAgICAgICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAub25BbmltYXRpb25Hcm91cEVuZE9ic2VydmFibGUuYWRkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc291bmQuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJhYnlsb25BbmltYXRpb25Hcm91cC5vbkFuaW1hdGlvbkdyb3VwUGF1c2VPYnNlcnZhYmxlLmFkZCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdW5kLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IE1TRlRfYXVkaW9fZW1pdHRlcihsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1TRlRfYXVkaW9fZW1pdHRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_audio_emitter.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_lod.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_lod.js ***!
  \*************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MSFT_lod: () => (/* binding */ MSFT_lod)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Misc/observable.js */ \"@babylonjs/core/Misc/observable.js\");\n/* harmony import */ var _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Misc/deferred.js */ \"@babylonjs/core/Misc/deferred.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst NAME = \"MSFT_lod\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/MSFT_lod/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass MSFT_lod {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        /**\n         * Defines a number that determines the order the extensions are applied.\n         */\n        this.order = 100;\n        /**\n         * Maximum number of LODs to load, starting from the lowest LOD.\n         */\n        this.maxLODsToLoad = 10;\n        /**\n         * Observable raised when all node LODs of one level are loaded.\n         * The event data is the index of the loaded LOD starting from zero.\n         * Dispose the loader to cancel the loading of the next level of LODs.\n         */\n        this.onNodeLODsLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when all material LODs of one level are loaded.\n         * The event data is the index of the loaded LOD starting from zero.\n         * Dispose the loader to cancel the loading of the next level of LODs.\n         */\n        this.onMaterialLODsLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        this._bufferLODs = new Array();\n        this._nodeIndexLOD = null;\n        this._nodeSignalLODs = new Array();\n        this._nodePromiseLODs = new Array();\n        this._nodeBufferLODs = new Array();\n        this._materialIndexLOD = null;\n        this._materialSignalLODs = new Array();\n        this._materialPromiseLODs = new Array();\n        this._materialBufferLODs = new Array();\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        this._nodeIndexLOD = null;\n        this._nodeSignalLODs.length = 0;\n        this._nodePromiseLODs.length = 0;\n        this._nodeBufferLODs.length = 0;\n        this._materialIndexLOD = null;\n        this._materialSignalLODs.length = 0;\n        this._materialPromiseLODs.length = 0;\n        this._materialBufferLODs.length = 0;\n        this.onMaterialLODsLoadedObservable.clear();\n        this.onNodeLODsLoadedObservable.clear();\n    }\n    /** @internal */\n    onReady() {\n        for (let indexLOD = 0; indexLOD < this._nodePromiseLODs.length; indexLOD++) {\n            const promise = Promise.all(this._nodePromiseLODs[indexLOD]).then(() => {\n                if (indexLOD !== 0) {\n                    this._loader.endPerformanceCounter(`Node LOD ${indexLOD}`);\n                    this._loader.log(`Loaded node LOD ${indexLOD}`);\n                }\n                this.onNodeLODsLoadedObservable.notifyObservers(indexLOD);\n                if (indexLOD !== this._nodePromiseLODs.length - 1) {\n                    this._loader.startPerformanceCounter(`Node LOD ${indexLOD + 1}`);\n                    this._loadBufferLOD(this._nodeBufferLODs, indexLOD + 1);\n                    if (this._nodeSignalLODs[indexLOD]) {\n                        this._nodeSignalLODs[indexLOD].resolve();\n                    }\n                }\n            });\n            this._loader._completePromises.push(promise);\n        }\n        for (let indexLOD = 0; indexLOD < this._materialPromiseLODs.length; indexLOD++) {\n            const promise = Promise.all(this._materialPromiseLODs[indexLOD]).then(() => {\n                if (indexLOD !== 0) {\n                    this._loader.endPerformanceCounter(`Material LOD ${indexLOD}`);\n                    this._loader.log(`Loaded material LOD ${indexLOD}`);\n                }\n                this.onMaterialLODsLoadedObservable.notifyObservers(indexLOD);\n                if (indexLOD !== this._materialPromiseLODs.length - 1) {\n                    this._loader.startPerformanceCounter(`Material LOD ${indexLOD + 1}`);\n                    this._loadBufferLOD(this._materialBufferLODs, indexLOD + 1);\n                    if (this._materialSignalLODs[indexLOD]) {\n                        this._materialSignalLODs[indexLOD].resolve();\n                    }\n                }\n            });\n            this._loader._completePromises.push(promise);\n        }\n    }\n    /**\n     * @internal\n     */\n    loadSceneAsync(context, scene) {\n        const promise = this._loader.loadSceneAsync(context, scene);\n        this._loadBufferLOD(this._bufferLODs, 0);\n        return promise;\n    }\n    /**\n     * @internal\n     */\n    loadNodeAsync(context, node, assign) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.LoadExtensionAsync(context, node, this.name, (extensionContext, extension) => {\n            let firstPromise;\n            const nodeLODs = this._getLODs(extensionContext, node, this._loader.gltf.nodes, extension.ids);\n            this._loader.logOpen(`${extensionContext}`);\n            for (let indexLOD = 0; indexLOD < nodeLODs.length; indexLOD++) {\n                const nodeLOD = nodeLODs[indexLOD];\n                if (indexLOD !== 0) {\n                    this._nodeIndexLOD = indexLOD;\n                    this._nodeSignalLODs[indexLOD] = this._nodeSignalLODs[indexLOD] || new _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__.Deferred();\n                }\n                const assignWrap = (babylonTransformNode) => {\n                    assign(babylonTransformNode);\n                    babylonTransformNode.setEnabled(false);\n                };\n                const promise = this._loader.loadNodeAsync(`/nodes/${nodeLOD.index}`, nodeLOD, assignWrap).then((babylonMesh) => {\n                    if (indexLOD !== 0) {\n                        // TODO: should not rely on _babylonTransformNode\n                        const previousNodeLOD = nodeLODs[indexLOD - 1];\n                        if (previousNodeLOD._babylonTransformNode) {\n                            this._disposeTransformNode(previousNodeLOD._babylonTransformNode);\n                            delete previousNodeLOD._babylonTransformNode;\n                        }\n                    }\n                    babylonMesh.setEnabled(true);\n                    return babylonMesh;\n                });\n                this._nodePromiseLODs[indexLOD] = this._nodePromiseLODs[indexLOD] || [];\n                if (indexLOD === 0) {\n                    firstPromise = promise;\n                }\n                else {\n                    this._nodeIndexLOD = null;\n                    this._nodePromiseLODs[indexLOD].push(promise);\n                }\n            }\n            this._loader.logClose();\n            return firstPromise;\n        });\n    }\n    /**\n     * @internal\n     */\n    _loadMaterialAsync(context, material, babylonMesh, babylonDrawMode, assign) {\n        // Don't load material LODs if already loading a node LOD.\n        if (this._nodeIndexLOD) {\n            return null;\n        }\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.LoadExtensionAsync(context, material, this.name, (extensionContext, extension) => {\n            let firstPromise;\n            const materialLODs = this._getLODs(extensionContext, material, this._loader.gltf.materials, extension.ids);\n            this._loader.logOpen(`${extensionContext}`);\n            for (let indexLOD = 0; indexLOD < materialLODs.length; indexLOD++) {\n                const materialLOD = materialLODs[indexLOD];\n                if (indexLOD !== 0) {\n                    this._materialIndexLOD = indexLOD;\n                }\n                const promise = this._loader\n                    ._loadMaterialAsync(`/materials/${materialLOD.index}`, materialLOD, babylonMesh, babylonDrawMode, (babylonMaterial) => {\n                    if (indexLOD === 0) {\n                        assign(babylonMaterial);\n                    }\n                })\n                    .then((babylonMaterial) => {\n                    if (indexLOD !== 0) {\n                        assign(babylonMaterial);\n                        // TODO: should not rely on _data\n                        const previousDataLOD = materialLODs[indexLOD - 1]._data;\n                        if (previousDataLOD[babylonDrawMode]) {\n                            this._disposeMaterials([previousDataLOD[babylonDrawMode].babylonMaterial]);\n                            delete previousDataLOD[babylonDrawMode];\n                        }\n                    }\n                    return babylonMaterial;\n                });\n                this._materialPromiseLODs[indexLOD] = this._materialPromiseLODs[indexLOD] || [];\n                if (indexLOD === 0) {\n                    firstPromise = promise;\n                }\n                else {\n                    this._materialIndexLOD = null;\n                    this._materialPromiseLODs[indexLOD].push(promise);\n                }\n            }\n            this._loader.logClose();\n            return firstPromise;\n        });\n    }\n    /**\n     * @internal\n     */\n    _loadUriAsync(context, property, uri) {\n        // Defer the loading of uris if loading a node or material LOD.\n        if (this._nodeIndexLOD !== null) {\n            this._loader.log(`deferred`);\n            const previousIndexLOD = this._nodeIndexLOD - 1;\n            this._nodeSignalLODs[previousIndexLOD] = this._nodeSignalLODs[previousIndexLOD] || new _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__.Deferred();\n            return this._nodeSignalLODs[this._nodeIndexLOD - 1].promise.then(() => {\n                return this._loader.loadUriAsync(context, property, uri);\n            });\n        }\n        else if (this._materialIndexLOD !== null) {\n            this._loader.log(`deferred`);\n            const previousIndexLOD = this._materialIndexLOD - 1;\n            this._materialSignalLODs[previousIndexLOD] = this._materialSignalLODs[previousIndexLOD] || new _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__.Deferred();\n            return this._materialSignalLODs[previousIndexLOD].promise.then(() => {\n                return this._loader.loadUriAsync(context, property, uri);\n            });\n        }\n        return null;\n    }\n    /**\n     * @internal\n     */\n    loadBufferAsync(context, buffer, byteOffset, byteLength) {\n        if (this._loader.parent.useRangeRequests && !buffer.uri) {\n            if (!this._loader.bin) {\n                throw new Error(`${context}: Uri is missing or the binary glTF is missing its binary chunk`);\n            }\n            const loadAsync = (bufferLODs, indexLOD) => {\n                const start = byteOffset;\n                const end = start + byteLength - 1;\n                let bufferLOD = bufferLODs[indexLOD];\n                if (bufferLOD) {\n                    bufferLOD.start = Math.min(bufferLOD.start, start);\n                    bufferLOD.end = Math.max(bufferLOD.end, end);\n                }\n                else {\n                    bufferLOD = { start: start, end: end, loaded: new _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_1__.Deferred() };\n                    bufferLODs[indexLOD] = bufferLOD;\n                }\n                return bufferLOD.loaded.promise.then((data) => {\n                    return new Uint8Array(data.buffer, data.byteOffset + byteOffset - bufferLOD.start, byteLength);\n                });\n            };\n            this._loader.log(`deferred`);\n            if (this._nodeIndexLOD !== null) {\n                return loadAsync(this._nodeBufferLODs, this._nodeIndexLOD);\n            }\n            else if (this._materialIndexLOD !== null) {\n                return loadAsync(this._materialBufferLODs, this._materialIndexLOD);\n            }\n            else {\n                return loadAsync(this._bufferLODs, 0);\n            }\n        }\n        return null;\n    }\n    _loadBufferLOD(bufferLODs, indexLOD) {\n        const bufferLOD = bufferLODs[indexLOD];\n        if (bufferLOD) {\n            this._loader.log(`Loading buffer range [${bufferLOD.start}-${bufferLOD.end}]`);\n            this._loader.bin.readAsync(bufferLOD.start, bufferLOD.end - bufferLOD.start + 1).then((data) => {\n                bufferLOD.loaded.resolve(data);\n            }, (error) => {\n                bufferLOD.loaded.reject(error);\n            });\n        }\n    }\n    /**\n     * @returns an array of LOD properties from lowest to highest.\n     * @param context\n     * @param property\n     * @param array\n     * @param ids\n     */\n    _getLODs(context, property, array, ids) {\n        if (this.maxLODsToLoad <= 0) {\n            throw new Error(\"maxLODsToLoad must be greater than zero\");\n        }\n        const properties = [];\n        for (let i = ids.length - 1; i >= 0; i--) {\n            properties.push(_glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.ArrayItem.Get(`${context}/ids/${ids[i]}`, array, ids[i]));\n            if (properties.length === this.maxLODsToLoad) {\n                return properties;\n            }\n        }\n        properties.push(property);\n        return properties;\n    }\n    _disposeTransformNode(babylonTransformNode) {\n        const babylonMaterials = [];\n        const babylonMaterial = babylonTransformNode.material;\n        if (babylonMaterial) {\n            babylonMaterials.push(babylonMaterial);\n        }\n        for (const babylonMesh of babylonTransformNode.getChildMeshes()) {\n            if (babylonMesh.material) {\n                babylonMaterials.push(babylonMesh.material);\n            }\n        }\n        babylonTransformNode.dispose();\n        const babylonMaterialsToDispose = babylonMaterials.filter((babylonMaterial) => this._loader.babylonScene.meshes.every((mesh) => mesh.material != babylonMaterial));\n        this._disposeMaterials(babylonMaterialsToDispose);\n    }\n    _disposeMaterials(babylonMaterials) {\n        const babylonTextures = {};\n        for (const babylonMaterial of babylonMaterials) {\n            for (const babylonTexture of babylonMaterial.getActiveTextures()) {\n                babylonTextures[babylonTexture.uniqueId] = babylonTexture;\n            }\n            babylonMaterial.dispose();\n        }\n        for (const uniqueId in babylonTextures) {\n            for (const babylonMaterial of this._loader.babylonScene.materials) {\n                if (babylonMaterial.hasTexture(babylonTextures[uniqueId])) {\n                    delete babylonTextures[uniqueId];\n                }\n            }\n        }\n        for (const uniqueId in babylonTextures) {\n            babylonTextures[uniqueId].dispose();\n        }\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.GLTFLoader.RegisterExtension(NAME, (loader) => new MSFT_lod(loader));\n//# sourceMappingURL=MSFT_lod.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvTVNGVF9sb2QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRTtBQUNKO0FBQ0g7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDBFQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsMEVBQVU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUNBQXlDO0FBQ3hFO0FBQ0E7QUFDQSxtRUFBbUUsU0FBUztBQUM1RSx3REFBd0QsU0FBUztBQUNqRTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSwrQkFBK0IsNkNBQTZDO0FBQzVFO0FBQ0E7QUFDQSx1RUFBdUUsU0FBUztBQUNoRiw0REFBNEQsU0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsYUFBYTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQTtBQUNBLG9DQUFvQyxpQkFBaUI7QUFDckQsbUNBQW1DLDRCQUE0QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQSwyRkFBMkYsc0VBQVE7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxjQUFjO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBO0FBQ0Esb0NBQW9DLGlCQUFpQjtBQUNyRCxtQ0FBbUMsZ0NBQWdDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsa0JBQWtCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HLHNFQUFRO0FBQzNHO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkcsc0VBQVE7QUFDbkg7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQ0FBb0Msc0VBQVE7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnQkFBZ0IsR0FBRyxjQUFjO0FBQ3ZGO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxRQUFRO0FBQzdDLDRCQUE0QixxREFBUyxRQUFRLFFBQVEsT0FBTyxPQUFPO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFVO0FBQ1Ysb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL01TRlRfbG9kLmpzP2VlZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9vYnNlcnZhYmxlLmpzXCI7XG5pbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWlzYy9kZWZlcnJlZC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciwgQXJyYXlJdGVtIH0gZnJvbSBcIi4uL2dsVEZMb2FkZXIuanNcIjtcbmNvbnN0IE5BTUUgPSBcIk1TRlRfbG9kXCI7XG4vKipcbiAqIFtTcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYWluL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9NU0ZUX2xvZC9SRUFETUUubWQpXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBNU0ZUX2xvZCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobG9hZGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGlzIGV4dGVuc2lvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE5BTUU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGEgbnVtYmVyIHRoYXQgZGV0ZXJtaW5lcyB0aGUgb3JkZXIgdGhlIGV4dGVuc2lvbnMgYXJlIGFwcGxpZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yZGVyID0gMTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBudW1iZXIgb2YgTE9EcyB0byBsb2FkLCBzdGFydGluZyBmcm9tIHRoZSBsb3dlc3QgTE9ELlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhMT0RzVG9Mb2FkID0gMTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIGFsbCBub2RlIExPRHMgb2Ygb25lIGxldmVsIGFyZSBsb2FkZWQuXG4gICAgICAgICAqIFRoZSBldmVudCBkYXRhIGlzIHRoZSBpbmRleCBvZiB0aGUgbG9hZGVkIExPRCBzdGFydGluZyBmcm9tIHplcm8uXG4gICAgICAgICAqIERpc3Bvc2UgdGhlIGxvYWRlciB0byBjYW5jZWwgdGhlIGxvYWRpbmcgb2YgdGhlIG5leHQgbGV2ZWwgb2YgTE9Ecy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Ob2RlTE9Ec0xvYWRlZE9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogT2JzZXJ2YWJsZSByYWlzZWQgd2hlbiBhbGwgbWF0ZXJpYWwgTE9EcyBvZiBvbmUgbGV2ZWwgYXJlIGxvYWRlZC5cbiAgICAgICAgICogVGhlIGV2ZW50IGRhdGEgaXMgdGhlIGluZGV4IG9mIHRoZSBsb2FkZWQgTE9EIHN0YXJ0aW5nIGZyb20gemVyby5cbiAgICAgICAgICogRGlzcG9zZSB0aGUgbG9hZGVyIHRvIGNhbmNlbCB0aGUgbG9hZGluZyBvZiB0aGUgbmV4dCBsZXZlbCBvZiBMT0RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbk1hdGVyaWFsTE9Ec0xvYWRlZE9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICB0aGlzLl9idWZmZXJMT0RzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuX25vZGVJbmRleExPRCA9IG51bGw7XG4gICAgICAgIHRoaXMuX25vZGVTaWduYWxMT0RzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuX25vZGVQcm9taXNlTE9EcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLl9ub2RlQnVmZmVyTE9EcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbEluZGV4TE9EID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuX21hdGVyaWFsUHJvbWlzZUxPRHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxCdWZmZXJMT0RzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlcjtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5fbG9hZGVyLmlzRXh0ZW5zaW9uVXNlZChOQU1FKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX25vZGVJbmRleExPRCA9IG51bGw7XG4gICAgICAgIHRoaXMuX25vZGVTaWduYWxMT0RzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX25vZGVQcm9taXNlTE9Ecy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9ub2RlQnVmZmVyTE9Ecy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9tYXRlcmlhbEluZGV4TE9EID0gbnVsbDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX21hdGVyaWFsUHJvbWlzZUxPRHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWxCdWZmZXJMT0RzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMub25NYXRlcmlhbExPRHNMb2FkZWRPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMub25Ob2RlTE9Ec0xvYWRlZE9ic2VydmFibGUuY2xlYXIoKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG9uUmVhZHkoKSB7XG4gICAgICAgIGZvciAobGV0IGluZGV4TE9EID0gMDsgaW5kZXhMT0QgPCB0aGlzLl9ub2RlUHJvbWlzZUxPRHMubGVuZ3RoOyBpbmRleExPRCsrKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gUHJvbWlzZS5hbGwodGhpcy5fbm9kZVByb21pc2VMT0RzW2luZGV4TE9EXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5lbmRQZXJmb3JtYW5jZUNvdW50ZXIoYE5vZGUgTE9EICR7aW5kZXhMT0R9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5sb2coYExvYWRlZCBub2RlIExPRCAke2luZGV4TE9EfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9uTm9kZUxPRHNMb2FkZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhpbmRleExPRCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSB0aGlzLl9ub2RlUHJvbWlzZUxPRHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkZXIuc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXIoYE5vZGUgTE9EICR7aW5kZXhMT0QgKyAxfWApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkQnVmZmVyTE9EKHRoaXMuX25vZGVCdWZmZXJMT0RzLCBpbmRleExPRCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbm9kZVNpZ25hbExPRHNbaW5kZXhMT0RdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ub2RlU2lnbmFsTE9Ec1tpbmRleExPRF0ucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIuX2NvbXBsZXRlUHJvbWlzZXMucHVzaChwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpbmRleExPRCA9IDA7IGluZGV4TE9EIDwgdGhpcy5fbWF0ZXJpYWxQcm9taXNlTE9Ecy5sZW5ndGg7IGluZGV4TE9EKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLmFsbCh0aGlzLl9tYXRlcmlhbFByb21pc2VMT0RzW2luZGV4TE9EXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlci5lbmRQZXJmb3JtYW5jZUNvdW50ZXIoYE1hdGVyaWFsIExPRCAke2luZGV4TE9EfWApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nKGBMb2FkZWQgbWF0ZXJpYWwgTE9EICR7aW5kZXhMT0R9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub25NYXRlcmlhbExPRHNMb2FkZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhpbmRleExPRCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSB0aGlzLl9tYXRlcmlhbFByb21pc2VMT0RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZGVyLnN0YXJ0UGVyZm9ybWFuY2VDb3VudGVyKGBNYXRlcmlhbCBMT0QgJHtpbmRleExPRCArIDF9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRCdWZmZXJMT0QodGhpcy5fbWF0ZXJpYWxCdWZmZXJMT0RzLCBpbmRleExPRCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzW2luZGV4TE9EXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzW2luZGV4TE9EXS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlci5fY29tcGxldGVQcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9sb2FkZXIubG9hZFNjZW5lQXN5bmMoY29udGV4dCwgc2NlbmUpO1xuICAgICAgICB0aGlzLl9sb2FkQnVmZmVyTE9EKHRoaXMuX2J1ZmZlckxPRHMsIDApO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dGVuc2lvbkFzeW5jKGNvbnRleHQsIG5vZGUsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgbGV0IGZpcnN0UHJvbWlzZTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVMT0RzID0gdGhpcy5fZ2V0TE9EcyhleHRlbnNpb25Db250ZXh0LCBub2RlLCB0aGlzLl9sb2FkZXIuZ2x0Zi5ub2RlcywgZXh0ZW5zaW9uLmlkcyk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nT3BlbihgJHtleHRlbnNpb25Db250ZXh0fWApO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXhMT0QgPSAwOyBpbmRleExPRCA8IG5vZGVMT0RzLmxlbmd0aDsgaW5kZXhMT0QrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVMT0QgPSBub2RlTE9Ec1tpbmRleExPRF07XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX25vZGVJbmRleExPRCA9IGluZGV4TE9EO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ub2RlU2lnbmFsTE9Ec1tpbmRleExPRF0gPSB0aGlzLl9ub2RlU2lnbmFsTE9Ec1tpbmRleExPRF0gfHwgbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbldyYXAgPSAoYmFieWxvblRyYW5zZm9ybU5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKGJhYnlsb25UcmFuc2Zvcm1Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvblRyYW5zZm9ybU5vZGUuc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fbG9hZGVyLmxvYWROb2RlQXN5bmMoYC9ub2Rlcy8ke25vZGVMT0QuaW5kZXh9YCwgbm9kZUxPRCwgYXNzaWduV3JhcCkudGhlbigoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBzaG91bGQgbm90IHJlbHkgb24gX2JhYnlsb25UcmFuc2Zvcm1Ob2RlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c05vZGVMT0QgPSBub2RlTE9Ec1tpbmRleExPRCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzTm9kZUxPRC5fYmFieWxvblRyYW5zZm9ybU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwb3NlVHJhbnNmb3JtTm9kZShwcmV2aW91c05vZGVMT0QuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJldmlvdXNOb2RlTE9ELl9iYWJ5bG9uVHJhbnNmb3JtTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWVzaC5zZXRFbmFibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFieWxvbk1lc2g7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbm9kZVByb21pc2VMT0RzW2luZGV4TE9EXSA9IHRoaXMuX25vZGVQcm9taXNlTE9Ec1tpbmRleExPRF0gfHwgW107XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0UHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ub2RlSW5kZXhMT0QgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ub2RlUHJvbWlzZUxPRHNbaW5kZXhMT0RdLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZ0Nsb3NlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RQcm9taXNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvYWRNYXRlcmlhbEFzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWVzaCwgYmFieWxvbkRyYXdNb2RlLCBhc3NpZ24pIHtcbiAgICAgICAgLy8gRG9uJ3QgbG9hZCBtYXRlcmlhbCBMT0RzIGlmIGFscmVhZHkgbG9hZGluZyBhIG5vZGUgTE9ELlxuICAgICAgICBpZiAodGhpcy5fbm9kZUluZGV4TE9EKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR0xURkxvYWRlci5Mb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dGVuc2lvbkNvbnRleHQsIGV4dGVuc2lvbikgPT4ge1xuICAgICAgICAgICAgbGV0IGZpcnN0UHJvbWlzZTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsTE9EcyA9IHRoaXMuX2dldExPRHMoZXh0ZW5zaW9uQ29udGV4dCwgbWF0ZXJpYWwsIHRoaXMuX2xvYWRlci5nbHRmLm1hdGVyaWFscywgZXh0ZW5zaW9uLmlkcyk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nT3BlbihgJHtleHRlbnNpb25Db250ZXh0fWApO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXhMT0QgPSAwOyBpbmRleExPRCA8IG1hdGVyaWFsTE9Ecy5sZW5ndGg7IGluZGV4TE9EKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbExPRCA9IG1hdGVyaWFsTE9Ec1tpbmRleExPRF07XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsSW5kZXhMT0QgPSBpbmRleExPRDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2xvYWRlclxuICAgICAgICAgICAgICAgICAgICAuX2xvYWRNYXRlcmlhbEFzeW5jKGAvbWF0ZXJpYWxzLyR7bWF0ZXJpYWxMT0QuaW5kZXh9YCwgbWF0ZXJpYWxMT0QsIGJhYnlsb25NZXNoLCBiYWJ5bG9uRHJhd01vZGUsIChiYWJ5bG9uTWF0ZXJpYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvbk1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChiYWJ5bG9uTWF0ZXJpYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4TE9EICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24oYmFieWxvbk1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHNob3VsZCBub3QgcmVseSBvbiBfZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEYXRhTE9EID0gbWF0ZXJpYWxMT0RzW2luZGV4TE9EIC0gMV0uX2RhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNEYXRhTE9EW2JhYnlsb25EcmF3TW9kZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwb3NlTWF0ZXJpYWxzKFtwcmV2aW91c0RhdGFMT0RbYmFieWxvbkRyYXdNb2RlXS5iYWJ5bG9uTWF0ZXJpYWxdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJldmlvdXNEYXRhTE9EW2JhYnlsb25EcmF3TW9kZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhYnlsb25NYXRlcmlhbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXRlcmlhbFByb21pc2VMT0RzW2luZGV4TE9EXSA9IHRoaXMuX21hdGVyaWFsUHJvbWlzZUxPRHNbaW5kZXhMT0RdIHx8IFtdO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleExPRCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFByb21pc2UgPSBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWxJbmRleExPRCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsUHJvbWlzZUxPRHNbaW5kZXhMT0RdLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZ0Nsb3NlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RQcm9taXNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvYWRVcmlBc3luYyhjb250ZXh0LCBwcm9wZXJ0eSwgdXJpKSB7XG4gICAgICAgIC8vIERlZmVyIHRoZSBsb2FkaW5nIG9mIHVyaXMgaWYgbG9hZGluZyBhIG5vZGUgb3IgbWF0ZXJpYWwgTE9ELlxuICAgICAgICBpZiAodGhpcy5fbm9kZUluZGV4TE9EICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nKGBkZWZlcnJlZGApO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJbmRleExPRCA9IHRoaXMuX25vZGVJbmRleExPRCAtIDE7XG4gICAgICAgICAgICB0aGlzLl9ub2RlU2lnbmFsTE9Ec1twcmV2aW91c0luZGV4TE9EXSA9IHRoaXMuX25vZGVTaWduYWxMT0RzW3ByZXZpb3VzSW5kZXhMT0RdIHx8IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX25vZGVTaWduYWxMT0RzW3RoaXMuX25vZGVJbmRleExPRCAtIDFdLnByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkVXJpQXN5bmMoY29udGV4dCwgcHJvcGVydHksIHVyaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9tYXRlcmlhbEluZGV4TE9EICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkZXIubG9nKGBkZWZlcnJlZGApO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJbmRleExPRCA9IHRoaXMuX21hdGVyaWFsSW5kZXhMT0QgLSAxO1xuICAgICAgICAgICAgdGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzW3ByZXZpb3VzSW5kZXhMT0RdID0gdGhpcy5fbWF0ZXJpYWxTaWduYWxMT0RzW3ByZXZpb3VzSW5kZXhMT0RdIHx8IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsU2lnbmFsTE9Ec1twcmV2aW91c0luZGV4TE9EXS5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIubG9hZFVyaUFzeW5jKGNvbnRleHQsIHByb3BlcnR5LCB1cmkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRCdWZmZXJBc3luYyhjb250ZXh0LCBidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRlci5wYXJlbnQudXNlUmFuZ2VSZXF1ZXN0cyAmJiAhYnVmZmVyLnVyaSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9sb2FkZXIuYmluKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBVcmkgaXMgbWlzc2luZyBvciB0aGUgYmluYXJ5IGdsVEYgaXMgbWlzc2luZyBpdHMgYmluYXJ5IGNodW5rYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2FkQXN5bmMgPSAoYnVmZmVyTE9EcywgaW5kZXhMT0QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGJ5dGVPZmZzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyBieXRlTGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBsZXQgYnVmZmVyTE9EID0gYnVmZmVyTE9Ec1tpbmRleExPRF07XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlckxPRCkge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJMT0Quc3RhcnQgPSBNYXRoLm1pbihidWZmZXJMT0Quc3RhcnQsIHN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyTE9ELmVuZCA9IE1hdGgubWF4KGJ1ZmZlckxPRC5lbmQsIGVuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJMT0QgPSB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGxvYWRlZDogbmV3IERlZmVycmVkKCkgfTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyTE9Ec1tpbmRleExPRF0gPSBidWZmZXJMT0Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBidWZmZXJMT0QubG9hZGVkLnByb21pc2UudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQgLSBidWZmZXJMT0Quc3RhcnQsIGJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlci5sb2coYGRlZmVycmVkYCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fbm9kZUluZGV4TE9EICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRBc3luYyh0aGlzLl9ub2RlQnVmZmVyTE9EcywgdGhpcy5fbm9kZUluZGV4TE9EKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX21hdGVyaWFsSW5kZXhMT0QgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZEFzeW5jKHRoaXMuX21hdGVyaWFsQnVmZmVyTE9EcywgdGhpcy5fbWF0ZXJpYWxJbmRleExPRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZEFzeW5jKHRoaXMuX2J1ZmZlckxPRHMsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBfbG9hZEJ1ZmZlckxPRChidWZmZXJMT0RzLCBpbmRleExPRCkge1xuICAgICAgICBjb25zdCBidWZmZXJMT0QgPSBidWZmZXJMT0RzW2luZGV4TE9EXTtcbiAgICAgICAgaWYgKGJ1ZmZlckxPRCkge1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmxvZyhgTG9hZGluZyBidWZmZXIgcmFuZ2UgWyR7YnVmZmVyTE9ELnN0YXJ0fS0ke2J1ZmZlckxPRC5lbmR9XWApO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmJpbi5yZWFkQXN5bmMoYnVmZmVyTE9ELnN0YXJ0LCBidWZmZXJMT0QuZW5kIC0gYnVmZmVyTE9ELnN0YXJ0ICsgMSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckxPRC5sb2FkZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1ZmZlckxPRC5sb2FkZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIExPRCBwcm9wZXJ0aWVzIGZyb20gbG93ZXN0IHRvIGhpZ2hlc3QuXG4gICAgICogQHBhcmFtIGNvbnRleHRcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gYXJyYXlcbiAgICAgKiBAcGFyYW0gaWRzXG4gICAgICovXG4gICAgX2dldExPRHMoY29udGV4dCwgcHJvcGVydHksIGFycmF5LCBpZHMpIHtcbiAgICAgICAgaWYgKHRoaXMubWF4TE9Ec1RvTG9hZCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYXhMT0RzVG9Mb2FkIG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm9cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gaWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9pZHMvJHtpZHNbaV19YCwgYXJyYXksIGlkc1tpXSkpO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMubGVuZ3RoID09PSB0aGlzLm1heExPRHNUb0xvYWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuICAgICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICB9XG4gICAgX2Rpc3Bvc2VUcmFuc2Zvcm1Ob2RlKGJhYnlsb25UcmFuc2Zvcm1Ob2RlKSB7XG4gICAgICAgIGNvbnN0IGJhYnlsb25NYXRlcmlhbHMgPSBbXTtcbiAgICAgICAgY29uc3QgYmFieWxvbk1hdGVyaWFsID0gYmFieWxvblRyYW5zZm9ybU5vZGUubWF0ZXJpYWw7XG4gICAgICAgIGlmIChiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbHMucHVzaChiYWJ5bG9uTWF0ZXJpYWwpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYmFieWxvbk1lc2ggb2YgYmFieWxvblRyYW5zZm9ybU5vZGUuZ2V0Q2hpbGRNZXNoZXMoKSkge1xuICAgICAgICAgICAgaWYgKGJhYnlsb25NZXNoLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFscy5wdXNoKGJhYnlsb25NZXNoLm1hdGVyaWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBiYWJ5bG9uVHJhbnNmb3JtTm9kZS5kaXNwb3NlKCk7XG4gICAgICAgIGNvbnN0IGJhYnlsb25NYXRlcmlhbHNUb0Rpc3Bvc2UgPSBiYWJ5bG9uTWF0ZXJpYWxzLmZpbHRlcigoYmFieWxvbk1hdGVyaWFsKSA9PiB0aGlzLl9sb2FkZXIuYmFieWxvblNjZW5lLm1lc2hlcy5ldmVyeSgobWVzaCkgPT4gbWVzaC5tYXRlcmlhbCAhPSBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zZU1hdGVyaWFscyhiYWJ5bG9uTWF0ZXJpYWxzVG9EaXNwb3NlKTtcbiAgICB9XG4gICAgX2Rpc3Bvc2VNYXRlcmlhbHMoYmFieWxvbk1hdGVyaWFscykge1xuICAgICAgICBjb25zdCBiYWJ5bG9uVGV4dHVyZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uTWF0ZXJpYWwgb2YgYmFieWxvbk1hdGVyaWFscykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uVGV4dHVyZSBvZiBiYWJ5bG9uTWF0ZXJpYWwuZ2V0QWN0aXZlVGV4dHVyZXMoKSkge1xuICAgICAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlc1tiYWJ5bG9uVGV4dHVyZS51bmlxdWVJZF0gPSBiYWJ5bG9uVGV4dHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB1bmlxdWVJZCBpbiBiYWJ5bG9uVGV4dHVyZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYmFieWxvbk1hdGVyaWFsIG9mIHRoaXMuX2xvYWRlci5iYWJ5bG9uU2NlbmUubWF0ZXJpYWxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhYnlsb25NYXRlcmlhbC5oYXNUZXh0dXJlKGJhYnlsb25UZXh0dXJlc1t1bmlxdWVJZF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBiYWJ5bG9uVGV4dHVyZXNbdW5pcXVlSWRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHVuaXF1ZUlkIGluIGJhYnlsb25UZXh0dXJlcykge1xuICAgICAgICAgICAgYmFieWxvblRleHR1cmVzW3VuaXF1ZUlkXS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5HTFRGTG9hZGVyLlJlZ2lzdGVyRXh0ZW5zaW9uKE5BTUUsIChsb2FkZXIpID0+IG5ldyBNU0ZUX2xvZChsb2FkZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1TRlRfbG9kLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_lod.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_minecraftMesh.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_minecraftMesh.js ***!
  \***********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MSFT_minecraftMesh: () => (/* binding */ MSFT_minecraftMesh)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"MSFT_minecraftMesh\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass MSFT_minecraftMesh {\n    /** @internal */\n    constructor(loader) {\n        /** @internal */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /** @internal */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtraAsync(context, material, this.name, (extraContext, extra) => {\n            if (extra) {\n                if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n                    throw new Error(`${extraContext}: Material type not supported`);\n                }\n                const promise = this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial);\n                if (babylonMaterial.needAlphaBlending()) {\n                    babylonMaterial.forceDepthWrite = true;\n                    babylonMaterial.separateCullingPass = true;\n                }\n                babylonMaterial.backFaceCulling = babylonMaterial.forceDepthWrite;\n                babylonMaterial.twoSidedLighting = true;\n                return promise;\n            }\n            return null;\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new MSFT_minecraftMesh(loader));\n//# sourceMappingURL=MSFT_minecraftMesh.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvTVNGVF9taW5lY3JhZnRNZXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRTtBQUM3QjtBQUM5QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVTtBQUN6QjtBQUNBLGlEQUFpRCxxRkFBVztBQUM1RCx1Q0FBdUMsYUFBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9NU0ZUX21pbmVjcmFmdE1lc2guanM/YzBlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQlJNYXRlcmlhbCB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0ZXJpYWxzL1BCUi9wYnJNYXRlcmlhbC5qc1wiO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gXCIuLi9nbFRGTG9hZGVyLmpzXCI7XG5jb25zdCBOQU1FID0gXCJNU0ZUX21pbmVjcmFmdE1lc2hcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjbGFzcyBNU0ZUX21pbmVjcmFmdE1lc2gge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgbG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dHJhQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dHJhQ29udGV4dCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgIGlmIChleHRyYSkge1xuICAgICAgICAgICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZXh0cmFDb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgIGlmIChiYWJ5bG9uTWF0ZXJpYWwubmVlZEFscGhhQmxlbmRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuZm9yY2VEZXB0aFdyaXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnNlcGFyYXRlQ3VsbGluZ1Bhc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYmFja0ZhY2VDdWxsaW5nID0gYmFieWxvbk1hdGVyaWFsLmZvcmNlRGVwdGhXcml0ZTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwudHdvU2lkZWRMaWdodGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuR0xURkxvYWRlci5SZWdpc3RlckV4dGVuc2lvbihOQU1FLCAobG9hZGVyKSA9PiBuZXcgTVNGVF9taW5lY3JhZnRNZXNoKGxvYWRlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TVNGVF9taW5lY3JhZnRNZXNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_minecraftMesh.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_sRGBFactors.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_sRGBFactors.js ***!
  \*********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MSFT_sRGBFactors: () => (/* binding */ MSFT_sRGBFactors)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__, _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst NAME = \"MSFT_sRGBFactors\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nclass MSFT_sRGBFactors {\n    /** @internal */\n    constructor(loader) {\n        /** @internal */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n    }\n    /** @internal */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return _glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.LoadExtraAsync(context, material, this.name, (extraContext, extra) => {\n            if (extra) {\n                if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_0__.PBRMaterial)) {\n                    throw new Error(`${extraContext}: Material type not supported`);\n                }\n                const promise = this._loader.loadMaterialPropertiesAsync(context, material, babylonMaterial);\n                const useExactSrgbConversions = babylonMaterial.getScene().getEngine().useExactSrgbConversions;\n                if (!babylonMaterial.albedoTexture) {\n                    babylonMaterial.albedoColor.toLinearSpaceToRef(babylonMaterial.albedoColor, useExactSrgbConversions);\n                }\n                if (!babylonMaterial.reflectivityTexture) {\n                    babylonMaterial.reflectivityColor.toLinearSpaceToRef(babylonMaterial.reflectivityColor, useExactSrgbConversions);\n                }\n                return promise;\n            }\n            return null;\n        });\n    }\n}\n_glTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader.RegisterExtension(NAME, (loader) => new MSFT_sRGBFactors(loader));\n//# sourceMappingURL=MSFT_sRGBFactors.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvTVNGVF9zUkdCRmFjdG9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkU7QUFDN0I7QUFDOUM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0RBQVU7QUFDekI7QUFDQSxpREFBaUQscUZBQVc7QUFDNUQsdUNBQXVDLGFBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzREFBVTtBQUNWLDRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9NU0ZUX3NSR0JGYWN0b3JzLmpzP2EyNjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUEJSTWF0ZXJpYWwgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGVyaWFscy9QQlIvcGJyTWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tIFwiLi4vZ2xURkxvYWRlci5qc1wiO1xuY29uc3QgTkFNRSA9IFwiTVNGVF9zUkdCRmFjdG9yc1wiO1xuLyoqIEBpbnRlcm5hbCAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGNsYXNzIE1TRlRfc1JHQkZhY3RvcnMge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2FkZXIpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMuX2xvYWRlci5pc0V4dGVuc2lvblVzZWQoTkFNRSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLl9sb2FkZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgbG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuTG9hZEV4dHJhQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIHRoaXMubmFtZSwgKGV4dHJhQ29udGV4dCwgZXh0cmEpID0+IHtcbiAgICAgICAgICAgIGlmIChleHRyYSkge1xuICAgICAgICAgICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZXh0cmFDb250ZXh0fTogTWF0ZXJpYWwgdHlwZSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9sb2FkZXIubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZUV4YWN0U3JnYkNvbnZlcnNpb25zID0gYmFieWxvbk1hdGVyaWFsLmdldFNjZW5lKCkuZ2V0RW5naW5lKCkudXNlRXhhY3RTcmdiQ29udmVyc2lvbnM7XG4gICAgICAgICAgICAgICAgaWYgKCFiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvQ29sb3IudG9MaW5lYXJTcGFjZVRvUmVmKGJhYnlsb25NYXRlcmlhbC5hbGJlZG9Db2xvciwgdXNlRXhhY3RTcmdiQ29udmVyc2lvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWJhYnlsb25NYXRlcmlhbC5yZWZsZWN0aXZpdHlUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5yZWZsZWN0aXZpdHlDb2xvci50b0xpbmVhclNwYWNlVG9SZWYoYmFieWxvbk1hdGVyaWFsLnJlZmxlY3Rpdml0eUNvbG9yLCB1c2VFeGFjdFNyZ2JDb252ZXJzaW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbkdMVEZMb2FkZXIuUmVnaXN0ZXJFeHRlbnNpb24oTkFNRSwgKGxvYWRlcikgPT4gbmV3IE1TRlRfc1JHQkZhY3RvcnMobG9hZGVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NU0ZUX3NSR0JGYWN0b3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_sRGBFactors.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/gltfPathToObjectConverter.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/gltfPathToObjectConverter.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFPathToObjectConverter: () => (/* binding */ GLTFPathToObjectConverter)\n/* harmony export */ });\n/**\n * A converter that takes a glTF Object Model JSON Pointer\n * and transforms it into an ObjectAccessorContainer, allowing\n * objects referenced in the glTF to be associated with their\n * respective Babylon.js objects.\n */\nclass GLTFPathToObjectConverter {\n    constructor(_gltf, _infoTree) {\n        this._gltf = _gltf;\n        this._infoTree = _infoTree;\n    }\n    /**\n     * The pointer string is represented by a [JSON pointer](https://datatracker.ietf.org/doc/html/rfc6901).\n     * <animationPointer> := /<rootNode>/<assetIndex>/<propertyPath>\n     * <rootNode> := \"nodes\" | \"materials\" | \"meshes\" | \"cameras\" | \"extensions\"\n     * <assetIndex> := <digit> | <name>\n     * <propertyPath> := <extensionPath> | <standardPath>\n     * <extensionPath> := \"extensions\"/<name>/<standardPath>\n     * <standardPath> := <name> | <name>/<standardPath>\n     * <name> := W+\n     * <digit> := D+\n     *\n     * Examples:\n     *  - \"/nodes/0/rotation\"\n     *  - \"/materials/2/emissiveFactor\"\n     *  - \"/materials/2/pbrMetallicRoughness/baseColorFactor\"\n     *  - \"/materials/2/extensions/KHR_materials_emissive_strength/emissiveStrength\"\n     *\n     * @param path The path to convert\n     * @returns The object and info associated with the path\n     */\n    convert(path) {\n        let objectTree = this._gltf;\n        let infoTree = this._infoTree;\n        let target = undefined;\n        if (!path.startsWith(\"/\")) {\n            throw new Error(\"Path must start with a /\");\n        }\n        const parts = path.split(\"/\");\n        parts.shift();\n        for (const part of parts) {\n            if (infoTree.__array__) {\n                infoTree = infoTree.__array__;\n            }\n            else {\n                infoTree = infoTree[part];\n                if (!infoTree) {\n                    throw new Error(`Path ${path} is invalid`);\n                }\n            }\n            if (objectTree === undefined) {\n                throw new Error(`Path ${path} is invalid`);\n            }\n            objectTree = objectTree[part];\n            if (infoTree.__target__) {\n                target = objectTree;\n            }\n        }\n        return {\n            object: target,\n            info: infoTree,\n        };\n    }\n}\n//# sourceMappingURL=gltfPathToObjectConverter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvZ2x0ZlBhdGhUb09iamVjdENvbnZlcnRlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxNQUFNO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxNQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvRXh0ZW5zaW9ucy9nbHRmUGF0aFRvT2JqZWN0Q29udmVydGVyLmpzPzIzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIGNvbnZlcnRlciB0aGF0IHRha2VzIGEgZ2xURiBPYmplY3QgTW9kZWwgSlNPTiBQb2ludGVyXG4gKiBhbmQgdHJhbnNmb3JtcyBpdCBpbnRvIGFuIE9iamVjdEFjY2Vzc29yQ29udGFpbmVyLCBhbGxvd2luZ1xuICogb2JqZWN0cyByZWZlcmVuY2VkIGluIHRoZSBnbFRGIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGVpclxuICogcmVzcGVjdGl2ZSBCYWJ5bG9uLmpzIG9iamVjdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRGUGF0aFRvT2JqZWN0Q29udmVydGVyIHtcbiAgICBjb25zdHJ1Y3RvcihfZ2x0ZiwgX2luZm9UcmVlKSB7XG4gICAgICAgIHRoaXMuX2dsdGYgPSBfZ2x0ZjtcbiAgICAgICAgdGhpcy5faW5mb1RyZWUgPSBfaW5mb1RyZWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBwb2ludGVyIHN0cmluZyBpcyByZXByZXNlbnRlZCBieSBhIFtKU09OIHBvaW50ZXJdKGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjNjkwMSkuXG4gICAgICogPGFuaW1hdGlvblBvaW50ZXI+IDo9IC88cm9vdE5vZGU+Lzxhc3NldEluZGV4Pi88cHJvcGVydHlQYXRoPlxuICAgICAqIDxyb290Tm9kZT4gOj0gXCJub2Rlc1wiIHwgXCJtYXRlcmlhbHNcIiB8IFwibWVzaGVzXCIgfCBcImNhbWVyYXNcIiB8IFwiZXh0ZW5zaW9uc1wiXG4gICAgICogPGFzc2V0SW5kZXg+IDo9IDxkaWdpdD4gfCA8bmFtZT5cbiAgICAgKiA8cHJvcGVydHlQYXRoPiA6PSA8ZXh0ZW5zaW9uUGF0aD4gfCA8c3RhbmRhcmRQYXRoPlxuICAgICAqIDxleHRlbnNpb25QYXRoPiA6PSBcImV4dGVuc2lvbnNcIi88bmFtZT4vPHN0YW5kYXJkUGF0aD5cbiAgICAgKiA8c3RhbmRhcmRQYXRoPiA6PSA8bmFtZT4gfCA8bmFtZT4vPHN0YW5kYXJkUGF0aD5cbiAgICAgKiA8bmFtZT4gOj0gVytcbiAgICAgKiA8ZGlnaXQ+IDo9IEQrXG4gICAgICpcbiAgICAgKiBFeGFtcGxlczpcbiAgICAgKiAgLSBcIi9ub2Rlcy8wL3JvdGF0aW9uXCJcbiAgICAgKiAgLSBcIi9tYXRlcmlhbHMvMi9lbWlzc2l2ZUZhY3RvclwiXG4gICAgICogIC0gXCIvbWF0ZXJpYWxzLzIvcGJyTWV0YWxsaWNSb3VnaG5lc3MvYmFzZUNvbG9yRmFjdG9yXCJcbiAgICAgKiAgLSBcIi9tYXRlcmlhbHMvMi9leHRlbnNpb25zL0tIUl9tYXRlcmlhbHNfZW1pc3NpdmVfc3RyZW5ndGgvZW1pc3NpdmVTdHJlbmd0aFwiXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCB0byBjb252ZXJ0XG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCBhbmQgaW5mbyBhc3NvY2lhdGVkIHdpdGggdGhlIHBhdGhcbiAgICAgKi9cbiAgICBjb252ZXJ0KHBhdGgpIHtcbiAgICAgICAgbGV0IG9iamVjdFRyZWUgPSB0aGlzLl9nbHRmO1xuICAgICAgICBsZXQgaW5mb1RyZWUgPSB0aGlzLl9pbmZvVHJlZTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXRoIG11c3Qgc3RhcnQgd2l0aCBhIC9cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgcGFydHMuc2hpZnQoKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgICBpZiAoaW5mb1RyZWUuX19hcnJheV9fKSB7XG4gICAgICAgICAgICAgICAgaW5mb1RyZWUgPSBpbmZvVHJlZS5fX2FycmF5X187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvVHJlZSA9IGluZm9UcmVlW3BhcnRdO1xuICAgICAgICAgICAgICAgIGlmICghaW5mb1RyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXRoICR7cGF0aH0gaXMgaW52YWxpZGApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmplY3RUcmVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhdGggJHtwYXRofSBpcyBpbnZhbGlkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmplY3RUcmVlID0gb2JqZWN0VHJlZVtwYXJ0XTtcbiAgICAgICAgICAgIGlmIChpbmZvVHJlZS5fX3RhcmdldF9fKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gb2JqZWN0VHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0YXJnZXQsXG4gICAgICAgICAgICBpbmZvOiBpbmZvVHJlZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbHRmUGF0aFRvT2JqZWN0Q29udmVydGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/gltfPathToObjectConverter.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/index.js ***!
  \**********************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _EXT_lights_image_based_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EXT_lights_image_based.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_lights_image_based.js\");\n/* harmony import */ var _EXT_mesh_gpu_instancing_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EXT_mesh_gpu_instancing.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_mesh_gpu_instancing.js\");\n/* harmony import */ var _EXT_meshopt_compression_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EXT_meshopt_compression.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_meshopt_compression.js\");\n/* harmony import */ var _EXT_texture_webp_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EXT_texture_webp.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_texture_webp.js\");\n/* harmony import */ var _KHR_draco_mesh_compression_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./KHR_draco_mesh_compression.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_draco_mesh_compression.js\");\n/* harmony import */ var _KHR_lights_punctual_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./KHR_lights_punctual.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_lights_punctual.js\");\n/* harmony import */ var _KHR_materials_pbrSpecularGlossiness_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./KHR_materials_pbrSpecularGlossiness.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_pbrSpecularGlossiness.js\");\n/* harmony import */ var _KHR_materials_unlit_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./KHR_materials_unlit.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_unlit.js\");\n/* harmony import */ var _KHR_materials_clearcoat_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./KHR_materials_clearcoat.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_clearcoat.js\");\n/* harmony import */ var _KHR_materials_iridescence_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./KHR_materials_iridescence.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_iridescence.js\");\n/* harmony import */ var _KHR_materials_anisotropy_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./KHR_materials_anisotropy.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_anisotropy.js\");\n/* harmony import */ var _KHR_materials_emissive_strength_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./KHR_materials_emissive_strength.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_emissive_strength.js\");\n/* harmony import */ var _KHR_materials_sheen_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./KHR_materials_sheen.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_sheen.js\");\n/* harmony import */ var _KHR_materials_specular_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./KHR_materials_specular.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_specular.js\");\n/* harmony import */ var _KHR_materials_ior_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./KHR_materials_ior.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_ior.js\");\n/* harmony import */ var _KHR_materials_variants_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./KHR_materials_variants.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_variants.js\");\n/* harmony import */ var _KHR_materials_transmission_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./KHR_materials_transmission.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_transmission.js\");\n/* harmony import */ var _KHR_materials_translucency_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./KHR_materials_translucency.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_translucency.js\");\n/* harmony import */ var _KHR_materials_volume_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./KHR_materials_volume.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_volume.js\");\n/* harmony import */ var _KHR_materials_dispersion_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./KHR_materials_dispersion.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_materials_dispersion.js\");\n/* harmony import */ var _KHR_mesh_quantization_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./KHR_mesh_quantization.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_mesh_quantization.js\");\n/* harmony import */ var _KHR_texture_basisu_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./KHR_texture_basisu.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_basisu.js\");\n/* harmony import */ var _KHR_texture_transform_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./KHR_texture_transform.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_texture_transform.js\");\n/* harmony import */ var _KHR_xmp_json_ld_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./KHR_xmp_json_ld.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_xmp_json_ld.js\");\n/* harmony import */ var _KHR_animation_pointer_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./KHR_animation_pointer.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_animation_pointer.js\");\n/* harmony import */ var _MSFT_audio_emitter_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./MSFT_audio_emitter.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_audio_emitter.js\");\n/* harmony import */ var _MSFT_lod_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./MSFT_lod.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_lod.js\");\n/* harmony import */ var _MSFT_minecraftMesh_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./MSFT_minecraftMesh.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_minecraftMesh.js\");\n/* harmony import */ var _MSFT_sRGBFactors_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./MSFT_sRGBFactors.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/MSFT_sRGBFactors.js\");\n/* harmony import */ var _KHR_interactivity_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./KHR_interactivity.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_interactivity.js\");\n/* harmony import */ var _ExtrasAsMetadata_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./ExtrasAsMetadata.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/ExtrasAsMetadata.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_EXT_lights_image_based_js__WEBPACK_IMPORTED_MODULE_0__, _EXT_mesh_gpu_instancing_js__WEBPACK_IMPORTED_MODULE_1__, _EXT_meshopt_compression_js__WEBPACK_IMPORTED_MODULE_2__, _EXT_texture_webp_js__WEBPACK_IMPORTED_MODULE_3__, _KHR_draco_mesh_compression_js__WEBPACK_IMPORTED_MODULE_4__, _KHR_lights_punctual_js__WEBPACK_IMPORTED_MODULE_5__, _KHR_materials_pbrSpecularGlossiness_js__WEBPACK_IMPORTED_MODULE_6__, _KHR_materials_unlit_js__WEBPACK_IMPORTED_MODULE_7__, _KHR_materials_clearcoat_js__WEBPACK_IMPORTED_MODULE_8__, _KHR_materials_iridescence_js__WEBPACK_IMPORTED_MODULE_9__, _KHR_materials_anisotropy_js__WEBPACK_IMPORTED_MODULE_10__, _KHR_materials_emissive_strength_js__WEBPACK_IMPORTED_MODULE_11__, _KHR_materials_sheen_js__WEBPACK_IMPORTED_MODULE_12__, _KHR_materials_specular_js__WEBPACK_IMPORTED_MODULE_13__, _KHR_materials_ior_js__WEBPACK_IMPORTED_MODULE_14__, _KHR_materials_variants_js__WEBPACK_IMPORTED_MODULE_15__, _KHR_materials_transmission_js__WEBPACK_IMPORTED_MODULE_16__, _KHR_materials_translucency_js__WEBPACK_IMPORTED_MODULE_17__, _KHR_materials_volume_js__WEBPACK_IMPORTED_MODULE_18__, _KHR_materials_dispersion_js__WEBPACK_IMPORTED_MODULE_19__, _KHR_mesh_quantization_js__WEBPACK_IMPORTED_MODULE_20__, _KHR_texture_basisu_js__WEBPACK_IMPORTED_MODULE_21__, _KHR_texture_transform_js__WEBPACK_IMPORTED_MODULE_22__, _KHR_xmp_json_ld_js__WEBPACK_IMPORTED_MODULE_23__, _KHR_animation_pointer_js__WEBPACK_IMPORTED_MODULE_24__, _MSFT_audio_emitter_js__WEBPACK_IMPORTED_MODULE_25__, _MSFT_lod_js__WEBPACK_IMPORTED_MODULE_26__, _MSFT_minecraftMesh_js__WEBPACK_IMPORTED_MODULE_27__, _MSFT_sRGBFactors_js__WEBPACK_IMPORTED_MODULE_28__, _KHR_interactivity_js__WEBPACK_IMPORTED_MODULE_29__, _ExtrasAsMetadata_js__WEBPACK_IMPORTED_MODULE_30__]);\n([_EXT_lights_image_based_js__WEBPACK_IMPORTED_MODULE_0__, _EXT_mesh_gpu_instancing_js__WEBPACK_IMPORTED_MODULE_1__, _EXT_meshopt_compression_js__WEBPACK_IMPORTED_MODULE_2__, _EXT_texture_webp_js__WEBPACK_IMPORTED_MODULE_3__, _KHR_draco_mesh_compression_js__WEBPACK_IMPORTED_MODULE_4__, _KHR_lights_punctual_js__WEBPACK_IMPORTED_MODULE_5__, _KHR_materials_pbrSpecularGlossiness_js__WEBPACK_IMPORTED_MODULE_6__, _KHR_materials_unlit_js__WEBPACK_IMPORTED_MODULE_7__, _KHR_materials_clearcoat_js__WEBPACK_IMPORTED_MODULE_8__, _KHR_materials_iridescence_js__WEBPACK_IMPORTED_MODULE_9__, _KHR_materials_anisotropy_js__WEBPACK_IMPORTED_MODULE_10__, _KHR_materials_emissive_strength_js__WEBPACK_IMPORTED_MODULE_11__, _KHR_materials_sheen_js__WEBPACK_IMPORTED_MODULE_12__, _KHR_materials_specular_js__WEBPACK_IMPORTED_MODULE_13__, _KHR_materials_ior_js__WEBPACK_IMPORTED_MODULE_14__, _KHR_materials_variants_js__WEBPACK_IMPORTED_MODULE_15__, _KHR_materials_transmission_js__WEBPACK_IMPORTED_MODULE_16__, _KHR_materials_translucency_js__WEBPACK_IMPORTED_MODULE_17__, _KHR_materials_volume_js__WEBPACK_IMPORTED_MODULE_18__, _KHR_materials_dispersion_js__WEBPACK_IMPORTED_MODULE_19__, _KHR_mesh_quantization_js__WEBPACK_IMPORTED_MODULE_20__, _KHR_texture_basisu_js__WEBPACK_IMPORTED_MODULE_21__, _KHR_texture_transform_js__WEBPACK_IMPORTED_MODULE_22__, _KHR_xmp_json_ld_js__WEBPACK_IMPORTED_MODULE_23__, _KHR_animation_pointer_js__WEBPACK_IMPORTED_MODULE_24__, _MSFT_audio_emitter_js__WEBPACK_IMPORTED_MODULE_25__, _MSFT_lod_js__WEBPACK_IMPORTED_MODULE_26__, _MSFT_minecraftMesh_js__WEBPACK_IMPORTED_MODULE_27__, _MSFT_sRGBFactors_js__WEBPACK_IMPORTED_MODULE_28__, _KHR_interactivity_js__WEBPACK_IMPORTED_MODULE_29__, _ExtrasAsMetadata_js__WEBPACK_IMPORTED_MODULE_30__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _EXT_lights_image_based_js__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _EXT_lights_image_based_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _EXT_mesh_gpu_instancing_js__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _EXT_mesh_gpu_instancing_js__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _EXT_meshopt_compression_js__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _EXT_meshopt_compression_js__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _EXT_texture_webp_js__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _EXT_texture_webp_js__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_draco_mesh_compression_js__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_draco_mesh_compression_js__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_lights_punctual_js__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_lights_punctual_js__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_pbrSpecularGlossiness_js__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_pbrSpecularGlossiness_js__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_unlit_js__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_unlit_js__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_clearcoat_js__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_clearcoat_js__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_iridescence_js__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_iridescence_js__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_anisotropy_js__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_anisotropy_js__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_emissive_strength_js__WEBPACK_IMPORTED_MODULE_11__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_emissive_strength_js__WEBPACK_IMPORTED_MODULE_11__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_sheen_js__WEBPACK_IMPORTED_MODULE_12__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_sheen_js__WEBPACK_IMPORTED_MODULE_12__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_specular_js__WEBPACK_IMPORTED_MODULE_13__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_specular_js__WEBPACK_IMPORTED_MODULE_13__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_ior_js__WEBPACK_IMPORTED_MODULE_14__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_ior_js__WEBPACK_IMPORTED_MODULE_14__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_variants_js__WEBPACK_IMPORTED_MODULE_15__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_variants_js__WEBPACK_IMPORTED_MODULE_15__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_transmission_js__WEBPACK_IMPORTED_MODULE_16__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_transmission_js__WEBPACK_IMPORTED_MODULE_16__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_translucency_js__WEBPACK_IMPORTED_MODULE_17__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_translucency_js__WEBPACK_IMPORTED_MODULE_17__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_volume_js__WEBPACK_IMPORTED_MODULE_18__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_volume_js__WEBPACK_IMPORTED_MODULE_18__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_materials_dispersion_js__WEBPACK_IMPORTED_MODULE_19__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_materials_dispersion_js__WEBPACK_IMPORTED_MODULE_19__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_mesh_quantization_js__WEBPACK_IMPORTED_MODULE_20__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_mesh_quantization_js__WEBPACK_IMPORTED_MODULE_20__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_texture_basisu_js__WEBPACK_IMPORTED_MODULE_21__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_texture_basisu_js__WEBPACK_IMPORTED_MODULE_21__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_texture_transform_js__WEBPACK_IMPORTED_MODULE_22__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_texture_transform_js__WEBPACK_IMPORTED_MODULE_22__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_xmp_json_ld_js__WEBPACK_IMPORTED_MODULE_23__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_xmp_json_ld_js__WEBPACK_IMPORTED_MODULE_23__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_animation_pointer_js__WEBPACK_IMPORTED_MODULE_24__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_animation_pointer_js__WEBPACK_IMPORTED_MODULE_24__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _MSFT_audio_emitter_js__WEBPACK_IMPORTED_MODULE_25__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _MSFT_audio_emitter_js__WEBPACK_IMPORTED_MODULE_25__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _MSFT_lod_js__WEBPACK_IMPORTED_MODULE_26__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _MSFT_lod_js__WEBPACK_IMPORTED_MODULE_26__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _MSFT_minecraftMesh_js__WEBPACK_IMPORTED_MODULE_27__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _MSFT_minecraftMesh_js__WEBPACK_IMPORTED_MODULE_27__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _MSFT_sRGBFactors_js__WEBPACK_IMPORTED_MODULE_28__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _MSFT_sRGBFactors_js__WEBPACK_IMPORTED_MODULE_28__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _KHR_interactivity_js__WEBPACK_IMPORTED_MODULE_29__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _KHR_interactivity_js__WEBPACK_IMPORTED_MODULE_29__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _ExtrasAsMetadata_js__WEBPACK_IMPORTED_MODULE_30__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _ExtrasAsMetadata_js__WEBPACK_IMPORTED_MODULE_30__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDQztBQUNBO0FBQ1A7QUFDVTtBQUNQO0FBQ2dCO0FBQ2hCO0FBQ0k7QUFDRTtBQUNEO0FBQ087QUFDWjtBQUNHO0FBQ0w7QUFDSztBQUNJO0FBQ0E7QUFDTjtBQUNJO0FBQ0g7QUFDSDtBQUNHO0FBQ047QUFDTTtBQUNIO0FBQ1Y7QUFDVTtBQUNGO0FBQ0M7QUFDRDtBQUN0QyxpQyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW5kZXguanM/NTc4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9FWFRfbGlnaHRzX2ltYWdlX2Jhc2VkLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9FWFRfbWVzaF9ncHVfaW5zdGFuY2luZy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vRVhUX21lc2hvcHRfY29tcHJlc3Npb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0VYVF90ZXh0dXJlX3dlYnAuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9LSFJfbGlnaHRzX3B1bmN0dWFsLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc191bmxpdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc19jbGVhcmNvYXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9tYXRlcmlhbHNfaXJpZGVzY2VuY2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9tYXRlcmlhbHNfYW5pc290cm9weS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc19lbWlzc2l2ZV9zdHJlbmd0aC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc19zaGVlbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc19zcGVjdWxhci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc19pb3IuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9tYXRlcmlhbHNfdmFyaWFudHMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9tYXRlcmlhbHNfdHJhbnNtaXNzaW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9LSFJfbWF0ZXJpYWxzX3RyYW5zbHVjZW5jeS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21hdGVyaWFsc192b2x1bWUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl9tYXRlcmlhbHNfZGlzcGVyc2lvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX21lc2hfcXVhbnRpemF0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9LSFJfdGV4dHVyZV9iYXNpc3UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0tIUl90ZXh0dXJlX3RyYW5zZm9ybS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX3htcF9qc29uX2xkLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9LSFJfYW5pbWF0aW9uX3BvaW50ZXIuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL01TRlRfYXVkaW9fZW1pdHRlci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vTVNGVF9sb2QuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL01TRlRfbWluZWNyYWZ0TWVzaC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vTVNGVF9zUkdCRmFjdG9ycy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vS0hSX2ludGVyYWN0aXZpdHkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0V4dHJhc0FzTWV0YWRhdGEuanNcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/index.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityFunctions.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityFunctions.js ***!
  \***************************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertGLTFToSerializedFlowGraph: () => (/* binding */ convertGLTFToSerializedFlowGraph)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Misc/guid.js */ \"@babylonjs/core/Misc/guid.js\");\n/* harmony import */ var _interactivityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactivityUtils.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityUtils.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/flowGraphConnection.js */ \"@babylonjs/core/FlowGraph/flowGraphConnection.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__, _interactivityUtils_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__]);\n([_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__, _interactivityUtils_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nfunction convertValueWithType(configObject, definition, context) {\n    if (configObject.type !== undefined) {\n        // get the type on the gltf definition\n        const type = definition.types && definition.types[configObject.type];\n        if (!type) {\n            throw new Error(`${context}: Unknown type: ${configObject.type}`);\n        }\n        const signature = type.signature;\n        if (!signature) {\n            throw new Error(`${context}: Type ${configObject.type} has no signature`);\n        }\n        const convertedType = _interactivityUtils_js__WEBPACK_IMPORTED_MODULE_1__.gltfTypeToBabylonType[signature];\n        return {\n            value: configObject.value,\n            className: convertedType,\n        };\n    }\n    else {\n        return configObject.value;\n    }\n}\nfunction convertConfiguration(gltfBlock, definition, id) {\n    const converted = {};\n    const configurationList = gltfBlock.configuration ?? [];\n    for (const configObject of configurationList) {\n        if (configObject.id === \"customEvent\") {\n            const customEvent = definition.customEvents && definition.customEvents[configObject.value];\n            if (!customEvent) {\n                throw new Error(`/extensions/KHR_interactivity/nodes/${id}: Unknown custom event: ${configObject.value}`);\n            }\n            converted.eventId = customEvent.id;\n            converted.eventData = customEvent.values.map((v) => v.id);\n        }\n        else if (configObject.id === \"variable\") {\n            const variable = definition.variables && definition.variables[configObject.value];\n            if (!variable) {\n                throw new Error(`/extensions/KHR_interactivity/nodes/${id}: Unknown variable: ${configObject.value}`);\n            }\n            converted.variableName = variable.id;\n        }\n        else if (configObject.id === \"path\") {\n            // Convert from a GLTF path to a reference to the Babylon.js object\n            const pathValue = configObject.value;\n            converted.path = pathValue;\n        }\n        else {\n            converted[configObject.id] = convertValueWithType(configObject, definition, `/extensions/KHR_interactivity/nodes/${id}`);\n        }\n    }\n    return converted;\n}\nfunction convertBlock(id, gltfBlock, definition) {\n    const className = _interactivityUtils_js__WEBPACK_IMPORTED_MODULE_1__.gltfToFlowGraphTypeMap[gltfBlock.type];\n    if (!className) {\n        throw new Error(`/extensions/KHR_interactivity/nodes/${id}: Unknown block type: ${gltfBlock.type}`);\n    }\n    const uniqueId = id.toString();\n    const config = convertConfiguration(gltfBlock, definition, uniqueId);\n    const metadata = gltfBlock.metadata;\n    const dataInputs = [];\n    const dataOutputs = [];\n    const signalInputs = [];\n    const signalOutputs = [];\n    return {\n        className,\n        config,\n        uniqueId,\n        metadata,\n        dataInputs,\n        dataOutputs,\n        signalInputs,\n        signalOutputs,\n    };\n}\n/**\n * @internal\n * Converts a glTF Interactivity Extension to a serialized flow graph.\n * @param gltf the interactivity data\n * @returns a serialized flow graph\n */\nfunction convertGLTFToSerializedFlowGraph(gltf) {\n    // create an empty serialized context to store the values of the connections\n    const context = {\n        uniqueId: (0,_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__.RandomGUID)(),\n        _userVariables: {},\n        _connectionValues: {},\n    };\n    const executionContexts = [context];\n    // Blocks converted to the flow graph json format\n    const flowGraphJsonBlocks = [];\n    for (let i = 0; i < gltf.nodes.length; i++) {\n        const gltfBlock = gltf.nodes[i];\n        const flowGraphJsonBlock = convertBlock(i, gltfBlock, gltf);\n        flowGraphJsonBlocks.push(flowGraphJsonBlock);\n    }\n    // Parse the connections\n    for (let i = 0; i < gltf.nodes.length; i++) {\n        const gltfBlock = gltf.nodes[i];\n        // get the block that was created in the previous step\n        const fgBlock = flowGraphJsonBlocks[i];\n        const gltfFlows = gltfBlock.flows ?? [];\n        // for each output flow of the gltf block\n        for (const flow of gltfFlows) {\n            const socketOutName = flow.id;\n            // create an output connection for the flow graph block\n            const socketOut = {\n                uniqueId: (0,_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__.RandomGUID)(),\n                name: socketOutName,\n                _connectionType: _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraphConnectionType.Output,\n                connectedPointIds: [],\n            };\n            fgBlock.signalOutputs.push(socketOut);\n            // get the input node of this flow\n            const nodeInId = flow.node;\n            const nodeInSocketName = flow.socket;\n            // find the corresponding flow graph node\n            const nodeIn = flowGraphJsonBlocks[nodeInId];\n            if (!nodeIn) {\n                throw new Error(`/extensions/KHR_interactivity/nodes/${i}: Could not find node with id ${nodeInId} that connects its input with with node ${i}'s output ${socketOutName}`);\n            }\n            // in all of the flow graph input connections, find the one with the same name as the socket\n            let socketIn = nodeIn.signalInputs.find((s) => s.name === nodeInSocketName);\n            // if the socket doesn't exist, create the input socket for the connection\n            if (!socketIn) {\n                socketIn = {\n                    uniqueId: (0,_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__.RandomGUID)(),\n                    name: nodeInSocketName,\n                    _connectionType: _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraphConnectionType.Input,\n                    connectedPointIds: [],\n                };\n                nodeIn.signalInputs.push(socketIn);\n            }\n            // connect the sockets\n            socketIn.connectedPointIds.push(socketOut.uniqueId);\n            socketOut.connectedPointIds.push(socketIn.uniqueId);\n        }\n        // for each input value of the gltf block\n        const gltfValues = gltfBlock.values ?? [];\n        for (const value of gltfValues) {\n            const socketInName = value.id;\n            // create an input data connection for the flow graph block\n            const socketIn = {\n                uniqueId: (0,_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__.RandomGUID)(),\n                name: socketInName,\n                _connectionType: _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraphConnectionType.Input,\n                connectedPointIds: [],\n            };\n            fgBlock.dataInputs.push(socketIn);\n            if (value.value !== undefined) {\n                // if the value is set on the socket itself, store it in the context\n                const convertedValue = convertValueWithType(value, gltf, `/extensions/KHR_interactivity/nodes/${i}`);\n                // convertBlockInputType(gltfBlock, value, convertedValue, `/extensions/KHR_interactivity/nodes/${i}`);\n                context._connectionValues[socketIn.uniqueId] = convertedValue;\n            }\n            else if (value.node !== undefined && value.socket !== undefined) {\n                // if the value is connected with the output data of another socket, connect the two\n                const nodeOutId = value.node;\n                const nodeOutSocketName = value.socket;\n                // find the flow graph node that owns that output socket\n                const nodeOut = flowGraphJsonBlocks[nodeOutId];\n                if (!nodeOut) {\n                    throw new Error(`/extensions/KHR_interactivity/nodes/${i}: Could not find node with id ${nodeOutId} that connects its output with node${i}'s input ${socketInName}`);\n                }\n                let socketOut = nodeOut.dataOutputs.find((s) => s.name === nodeOutSocketName);\n                // if the socket doesn't exist, create it\n                if (!socketOut) {\n                    socketOut = {\n                        uniqueId: (0,_babylonjs_core_Misc_guid_js__WEBPACK_IMPORTED_MODULE_0__.RandomGUID)(),\n                        name: nodeOutSocketName,\n                        _connectionType: _babylonjs_core_FlowGraph_flowGraphConnection_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraphConnectionType.Output,\n                        connectedPointIds: [],\n                    };\n                    nodeOut.dataOutputs.push(socketOut);\n                }\n                // connect the sockets\n                socketIn.connectedPointIds.push(socketOut.uniqueId);\n                socketOut.connectedPointIds.push(socketIn.uniqueId);\n            }\n            else {\n                throw new Error(`/extensions/KHR_interactivity/nodes/${i}: Invalid socket ${socketInName} in node ${i}`);\n            }\n        }\n    }\n    const variables = gltf.variables ?? [];\n    // Parse variables\n    for (let i = 0; i < variables.length; i++) {\n        const variable = variables[i];\n        const variableName = variable.id;\n        context._userVariables[variableName] = convertValueWithType(variable, gltf, `/extensions/KHR_interactivity/variables/${i}`);\n    }\n    return {\n        allBlocks: flowGraphJsonBlocks,\n        executionContexts,\n    };\n}\n//# sourceMappingURL=interactivityFunctions.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW50ZXJhY3Rpdml0eUZ1bmN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBEO0FBQzhCO0FBQ0c7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixRQUFRLGtCQUFrQixrQkFBa0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVEsU0FBUyxtQkFBbUI7QUFDbkU7QUFDQSw4QkFBOEIseUVBQXFCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEdBQUcsMEJBQTBCLG1CQUFtQjtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxHQUFHLHNCQUFzQixtQkFBbUI7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0hBQStILEdBQUc7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwRUFBc0I7QUFDNUM7QUFDQSwrREFBK0QsR0FBRyx3QkFBd0IsZUFBZTtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGtCQUFrQix3RUFBVTtBQUM1QiwwQkFBMEI7QUFDMUIsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0VBQVU7QUFDcEM7QUFDQSxpQ0FBaUMscUdBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxFQUFFLGdDQUFnQyxVQUFVLHlDQUF5QyxFQUFFLFlBQVksY0FBYztBQUN4TDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0VBQVU7QUFDeEM7QUFDQSxxQ0FBcUMscUdBQXVCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0VBQVU7QUFDcEM7QUFDQSxpQ0FBaUMscUdBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSEFBZ0gsRUFBRTtBQUNsSCxrSEFBa0gsRUFBRTtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsRUFBRSxnQ0FBZ0MsV0FBVyxvQ0FBb0MsRUFBRSxXQUFXLGFBQWE7QUFDdEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3RUFBVTtBQUM1QztBQUNBLHlDQUF5QyxxR0FBdUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEVBQUUsbUJBQW1CLGNBQWMsVUFBVSxFQUFFO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0E7QUFDQSwrSEFBK0gsRUFBRTtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRCIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW50ZXJhY3Rpdml0eUZ1bmN0aW9ucy5qcz9lMzhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJhbmRvbUdVSUQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvZ3VpZC5qc1wiO1xuaW1wb3J0IHsgZ2x0ZlRvRmxvd0dyYXBoVHlwZU1hcCwgZ2x0ZlR5cGVUb0JhYnlsb25UeXBlIH0gZnJvbSBcIi4vaW50ZXJhY3Rpdml0eVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhDb25uZWN0aW9uVHlwZSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL2Zsb3dHcmFwaENvbm5lY3Rpb24uanNcIjtcbmZ1bmN0aW9uIGNvbnZlcnRWYWx1ZVdpdGhUeXBlKGNvbmZpZ09iamVjdCwgZGVmaW5pdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChjb25maWdPYmplY3QudHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIGdldCB0aGUgdHlwZSBvbiB0aGUgZ2x0ZiBkZWZpbml0aW9uXG4gICAgICAgIGNvbnN0IHR5cGUgPSBkZWZpbml0aW9uLnR5cGVzICYmIGRlZmluaXRpb24udHlwZXNbY29uZmlnT2JqZWN0LnR5cGVdO1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogVW5rbm93biB0eXBlOiAke2NvbmZpZ09iamVjdC50eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHR5cGUuc2lnbmF0dXJlO1xuICAgICAgICBpZiAoIXNpZ25hdHVyZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBUeXBlICR7Y29uZmlnT2JqZWN0LnR5cGV9IGhhcyBubyBzaWduYXR1cmVgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb252ZXJ0ZWRUeXBlID0gZ2x0ZlR5cGVUb0JhYnlsb25UeXBlW3NpZ25hdHVyZV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogY29uZmlnT2JqZWN0LnZhbHVlLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBjb252ZXJ0ZWRUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ09iamVjdC52YWx1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb252ZXJ0Q29uZmlndXJhdGlvbihnbHRmQmxvY2ssIGRlZmluaXRpb24sIGlkKSB7XG4gICAgY29uc3QgY29udmVydGVkID0ge307XG4gICAgY29uc3QgY29uZmlndXJhdGlvbkxpc3QgPSBnbHRmQmxvY2suY29uZmlndXJhdGlvbiA/PyBbXTtcbiAgICBmb3IgKGNvbnN0IGNvbmZpZ09iamVjdCBvZiBjb25maWd1cmF0aW9uTGlzdCkge1xuICAgICAgICBpZiAoY29uZmlnT2JqZWN0LmlkID09PSBcImN1c3RvbUV2ZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZGVmaW5pdGlvbi5jdXN0b21FdmVudHMgJiYgZGVmaW5pdGlvbi5jdXN0b21FdmVudHNbY29uZmlnT2JqZWN0LnZhbHVlXTtcbiAgICAgICAgICAgIGlmICghY3VzdG9tRXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYC9leHRlbnNpb25zL0tIUl9pbnRlcmFjdGl2aXR5L25vZGVzLyR7aWR9OiBVbmtub3duIGN1c3RvbSBldmVudDogJHtjb25maWdPYmplY3QudmFsdWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb252ZXJ0ZWQuZXZlbnRJZCA9IGN1c3RvbUV2ZW50LmlkO1xuICAgICAgICAgICAgY29udmVydGVkLmV2ZW50RGF0YSA9IGN1c3RvbUV2ZW50LnZhbHVlcy5tYXAoKHYpID0+IHYuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbmZpZ09iamVjdC5pZCA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgICAgICAgICBjb25zdCB2YXJpYWJsZSA9IGRlZmluaXRpb24udmFyaWFibGVzICYmIGRlZmluaXRpb24udmFyaWFibGVzW2NvbmZpZ09iamVjdC52YWx1ZV07XG4gICAgICAgICAgICBpZiAoIXZhcmlhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAvZXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS9ub2Rlcy8ke2lkfTogVW5rbm93biB2YXJpYWJsZTogJHtjb25maWdPYmplY3QudmFsdWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb252ZXJ0ZWQudmFyaWFibGVOYW1lID0gdmFyaWFibGUuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnT2JqZWN0LmlkID09PSBcInBhdGhcIikge1xuICAgICAgICAgICAgLy8gQ29udmVydCBmcm9tIGEgR0xURiBwYXRoIHRvIGEgcmVmZXJlbmNlIHRvIHRoZSBCYWJ5bG9uLmpzIG9iamVjdFxuICAgICAgICAgICAgY29uc3QgcGF0aFZhbHVlID0gY29uZmlnT2JqZWN0LnZhbHVlO1xuICAgICAgICAgICAgY29udmVydGVkLnBhdGggPSBwYXRoVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb252ZXJ0ZWRbY29uZmlnT2JqZWN0LmlkXSA9IGNvbnZlcnRWYWx1ZVdpdGhUeXBlKGNvbmZpZ09iamVjdCwgZGVmaW5pdGlvbiwgYC9leHRlbnNpb25zL0tIUl9pbnRlcmFjdGl2aXR5L25vZGVzLyR7aWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnZlcnRlZDtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRCbG9jayhpZCwgZ2x0ZkJsb2NrLCBkZWZpbml0aW9uKSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gZ2x0ZlRvRmxvd0dyYXBoVHlwZU1hcFtnbHRmQmxvY2sudHlwZV07XG4gICAgaWYgKCFjbGFzc05hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAvZXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS9ub2Rlcy8ke2lkfTogVW5rbm93biBibG9jayB0eXBlOiAke2dsdGZCbG9jay50eXBlfWApO1xuICAgIH1cbiAgICBjb25zdCB1bmlxdWVJZCA9IGlkLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgY29uZmlnID0gY29udmVydENvbmZpZ3VyYXRpb24oZ2x0ZkJsb2NrLCBkZWZpbml0aW9uLCB1bmlxdWVJZCk7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBnbHRmQmxvY2subWV0YWRhdGE7XG4gICAgY29uc3QgZGF0YUlucHV0cyA9IFtdO1xuICAgIGNvbnN0IGRhdGFPdXRwdXRzID0gW107XG4gICAgY29uc3Qgc2lnbmFsSW5wdXRzID0gW107XG4gICAgY29uc3Qgc2lnbmFsT3V0cHV0cyA9IFtdO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsYXNzTmFtZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICB1bmlxdWVJZCxcbiAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgIGRhdGFJbnB1dHMsXG4gICAgICAgIGRhdGFPdXRwdXRzLFxuICAgICAgICBzaWduYWxJbnB1dHMsXG4gICAgICAgIHNpZ25hbE91dHB1dHMsXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBDb252ZXJ0cyBhIGdsVEYgSW50ZXJhY3Rpdml0eSBFeHRlbnNpb24gdG8gYSBzZXJpYWxpemVkIGZsb3cgZ3JhcGguXG4gKiBAcGFyYW0gZ2x0ZiB0aGUgaW50ZXJhY3Rpdml0eSBkYXRhXG4gKiBAcmV0dXJucyBhIHNlcmlhbGl6ZWQgZmxvdyBncmFwaFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEdMVEZUb1NlcmlhbGl6ZWRGbG93R3JhcGgoZ2x0Zikge1xuICAgIC8vIGNyZWF0ZSBhbiBlbXB0eSBzZXJpYWxpemVkIGNvbnRleHQgdG8gc3RvcmUgdGhlIHZhbHVlcyBvZiB0aGUgY29ubmVjdGlvbnNcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICB1bmlxdWVJZDogUmFuZG9tR1VJRCgpLFxuICAgICAgICBfdXNlclZhcmlhYmxlczoge30sXG4gICAgICAgIF9jb25uZWN0aW9uVmFsdWVzOiB7fSxcbiAgICB9O1xuICAgIGNvbnN0IGV4ZWN1dGlvbkNvbnRleHRzID0gW2NvbnRleHRdO1xuICAgIC8vIEJsb2NrcyBjb252ZXJ0ZWQgdG8gdGhlIGZsb3cgZ3JhcGgganNvbiBmb3JtYXRcbiAgICBjb25zdCBmbG93R3JhcGhKc29uQmxvY2tzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbHRmLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGdsdGZCbG9jayA9IGdsdGYubm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGZsb3dHcmFwaEpzb25CbG9jayA9IGNvbnZlcnRCbG9jayhpLCBnbHRmQmxvY2ssIGdsdGYpO1xuICAgICAgICBmbG93R3JhcGhKc29uQmxvY2tzLnB1c2goZmxvd0dyYXBoSnNvbkJsb2NrKTtcbiAgICB9XG4gICAgLy8gUGFyc2UgdGhlIGNvbm5lY3Rpb25zXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnbHRmLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGdsdGZCbG9jayA9IGdsdGYubm9kZXNbaV07XG4gICAgICAgIC8vIGdldCB0aGUgYmxvY2sgdGhhdCB3YXMgY3JlYXRlZCBpbiB0aGUgcHJldmlvdXMgc3RlcFxuICAgICAgICBjb25zdCBmZ0Jsb2NrID0gZmxvd0dyYXBoSnNvbkJsb2Nrc1tpXTtcbiAgICAgICAgY29uc3QgZ2x0ZkZsb3dzID0gZ2x0ZkJsb2NrLmZsb3dzID8/IFtdO1xuICAgICAgICAvLyBmb3IgZWFjaCBvdXRwdXQgZmxvdyBvZiB0aGUgZ2x0ZiBibG9ja1xuICAgICAgICBmb3IgKGNvbnN0IGZsb3cgb2YgZ2x0ZkZsb3dzKSB7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXRPdXROYW1lID0gZmxvdy5pZDtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBvdXRwdXQgY29ubmVjdGlvbiBmb3IgdGhlIGZsb3cgZ3JhcGggYmxvY2tcbiAgICAgICAgICAgIGNvbnN0IHNvY2tldE91dCA9IHtcbiAgICAgICAgICAgICAgICB1bmlxdWVJZDogUmFuZG9tR1VJRCgpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHNvY2tldE91dE5hbWUsXG4gICAgICAgICAgICAgICAgX2Nvbm5lY3Rpb25UeXBlOiBGbG93R3JhcGhDb25uZWN0aW9uVHlwZS5PdXRwdXQsXG4gICAgICAgICAgICAgICAgY29ubmVjdGVkUG9pbnRJZHM6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZnQmxvY2suc2lnbmFsT3V0cHV0cy5wdXNoKHNvY2tldE91dCk7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGlucHV0IG5vZGUgb2YgdGhpcyBmbG93XG4gICAgICAgICAgICBjb25zdCBub2RlSW5JZCA9IGZsb3cubm9kZTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVJblNvY2tldE5hbWUgPSBmbG93LnNvY2tldDtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgZmxvdyBncmFwaCBub2RlXG4gICAgICAgICAgICBjb25zdCBub2RlSW4gPSBmbG93R3JhcGhKc29uQmxvY2tzW25vZGVJbklkXTtcbiAgICAgICAgICAgIGlmICghbm9kZUluKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAvZXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS9ub2Rlcy8ke2l9OiBDb3VsZCBub3QgZmluZCBub2RlIHdpdGggaWQgJHtub2RlSW5JZH0gdGhhdCBjb25uZWN0cyBpdHMgaW5wdXQgd2l0aCB3aXRoIG5vZGUgJHtpfSdzIG91dHB1dCAke3NvY2tldE91dE5hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpbiBhbGwgb2YgdGhlIGZsb3cgZ3JhcGggaW5wdXQgY29ubmVjdGlvbnMsIGZpbmQgdGhlIG9uZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgdGhlIHNvY2tldFxuICAgICAgICAgICAgbGV0IHNvY2tldEluID0gbm9kZUluLnNpZ25hbElucHV0cy5maW5kKChzKSA9PiBzLm5hbWUgPT09IG5vZGVJblNvY2tldE5hbWUpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIHNvY2tldCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgdGhlIGlucHV0IHNvY2tldCBmb3IgdGhlIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIGlmICghc29ja2V0SW4pIHtcbiAgICAgICAgICAgICAgICBzb2NrZXRJbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlSWQ6IFJhbmRvbUdVSUQoKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbm9kZUluU29ja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgX2Nvbm5lY3Rpb25UeXBlOiBGbG93R3JhcGhDb25uZWN0aW9uVHlwZS5JbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGVkUG9pbnRJZHM6IFtdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbm9kZUluLnNpZ25hbElucHV0cy5wdXNoKHNvY2tldEluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbm5lY3QgdGhlIHNvY2tldHNcbiAgICAgICAgICAgIHNvY2tldEluLmNvbm5lY3RlZFBvaW50SWRzLnB1c2goc29ja2V0T3V0LnVuaXF1ZUlkKTtcbiAgICAgICAgICAgIHNvY2tldE91dC5jb25uZWN0ZWRQb2ludElkcy5wdXNoKHNvY2tldEluLnVuaXF1ZUlkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmb3IgZWFjaCBpbnB1dCB2YWx1ZSBvZiB0aGUgZ2x0ZiBibG9ja1xuICAgICAgICBjb25zdCBnbHRmVmFsdWVzID0gZ2x0ZkJsb2NrLnZhbHVlcyA/PyBbXTtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBnbHRmVmFsdWVzKSB7XG4gICAgICAgICAgICBjb25zdCBzb2NrZXRJbk5hbWUgPSB2YWx1ZS5pZDtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBpbnB1dCBkYXRhIGNvbm5lY3Rpb24gZm9yIHRoZSBmbG93IGdyYXBoIGJsb2NrXG4gICAgICAgICAgICBjb25zdCBzb2NrZXRJbiA9IHtcbiAgICAgICAgICAgICAgICB1bmlxdWVJZDogUmFuZG9tR1VJRCgpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHNvY2tldEluTmFtZSxcbiAgICAgICAgICAgICAgICBfY29ubmVjdGlvblR5cGU6IEZsb3dHcmFwaENvbm5lY3Rpb25UeXBlLklucHV0LFxuICAgICAgICAgICAgICAgIGNvbm5lY3RlZFBvaW50SWRzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmZ0Jsb2NrLmRhdGFJbnB1dHMucHVzaChzb2NrZXRJbik7XG4gICAgICAgICAgICBpZiAodmFsdWUudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2YWx1ZSBpcyBzZXQgb24gdGhlIHNvY2tldCBpdHNlbGYsIHN0b3JlIGl0IGluIHRoZSBjb250ZXh0XG4gICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkVmFsdWUgPSBjb252ZXJ0VmFsdWVXaXRoVHlwZSh2YWx1ZSwgZ2x0ZiwgYC9leHRlbnNpb25zL0tIUl9pbnRlcmFjdGl2aXR5L25vZGVzLyR7aX1gKTtcbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0QmxvY2tJbnB1dFR5cGUoZ2x0ZkJsb2NrLCB2YWx1ZSwgY29udmVydGVkVmFsdWUsIGAvZXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS9ub2Rlcy8ke2l9YCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fY29ubmVjdGlvblZhbHVlc1tzb2NrZXRJbi51bmlxdWVJZF0gPSBjb252ZXJ0ZWRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLm5vZGUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5zb2NrZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2YWx1ZSBpcyBjb25uZWN0ZWQgd2l0aCB0aGUgb3V0cHV0IGRhdGEgb2YgYW5vdGhlciBzb2NrZXQsIGNvbm5lY3QgdGhlIHR3b1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVPdXRJZCA9IHZhbHVlLm5vZGU7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZU91dFNvY2tldE5hbWUgPSB2YWx1ZS5zb2NrZXQ7XG4gICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgZmxvdyBncmFwaCBub2RlIHRoYXQgb3ducyB0aGF0IG91dHB1dCBzb2NrZXRcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlT3V0ID0gZmxvd0dyYXBoSnNvbkJsb2Nrc1tub2RlT3V0SWRdO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZU91dCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYC9leHRlbnNpb25zL0tIUl9pbnRlcmFjdGl2aXR5L25vZGVzLyR7aX06IENvdWxkIG5vdCBmaW5kIG5vZGUgd2l0aCBpZCAke25vZGVPdXRJZH0gdGhhdCBjb25uZWN0cyBpdHMgb3V0cHV0IHdpdGggbm9kZSR7aX0ncyBpbnB1dCAke3NvY2tldEluTmFtZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHNvY2tldE91dCA9IG5vZGVPdXQuZGF0YU91dHB1dHMuZmluZCgocykgPT4gcy5uYW1lID09PSBub2RlT3V0U29ja2V0TmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHNvY2tldCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcbiAgICAgICAgICAgICAgICBpZiAoIXNvY2tldE91dCkge1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXRPdXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJZDogUmFuZG9tR1VJRCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbm9kZU91dFNvY2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBfY29ubmVjdGlvblR5cGU6IEZsb3dHcmFwaENvbm5lY3Rpb25UeXBlLk91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZFBvaW50SWRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZU91dC5kYXRhT3V0cHV0cy5wdXNoKHNvY2tldE91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNvbm5lY3QgdGhlIHNvY2tldHNcbiAgICAgICAgICAgICAgICBzb2NrZXRJbi5jb25uZWN0ZWRQb2ludElkcy5wdXNoKHNvY2tldE91dC51bmlxdWVJZCk7XG4gICAgICAgICAgICAgICAgc29ja2V0T3V0LmNvbm5lY3RlZFBvaW50SWRzLnB1c2goc29ja2V0SW4udW5pcXVlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAvZXh0ZW5zaW9ucy9LSFJfaW50ZXJhY3Rpdml0eS9ub2Rlcy8ke2l9OiBJbnZhbGlkIHNvY2tldCAke3NvY2tldEluTmFtZX0gaW4gbm9kZSAke2l9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdmFyaWFibGVzID0gZ2x0Zi52YXJpYWJsZXMgPz8gW107XG4gICAgLy8gUGFyc2UgdmFyaWFibGVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFyaWFibGUgPSB2YXJpYWJsZXNbaV07XG4gICAgICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IHZhcmlhYmxlLmlkO1xuICAgICAgICBjb250ZXh0Ll91c2VyVmFyaWFibGVzW3ZhcmlhYmxlTmFtZV0gPSBjb252ZXJ0VmFsdWVXaXRoVHlwZSh2YXJpYWJsZSwgZ2x0ZiwgYC9leHRlbnNpb25zL0tIUl9pbnRlcmFjdGl2aXR5L3ZhcmlhYmxlcy8ke2l9YCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFsbEJsb2NrczogZmxvd0dyYXBoSnNvbkJsb2NrcyxcbiAgICAgICAgZXhlY3V0aW9uQ29udGV4dHMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aXZpdHlGdW5jdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityFunctions.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityPathToObjectConverter.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityPathToObjectConverter.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InteractivityPathToObjectConverter: () => (/* binding */ InteractivityPathToObjectConverter)\n/* harmony export */ });\n/* harmony import */ var _gltfPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gltfPathToObjectConverter.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/gltfPathToObjectConverter.js\");\n\n/**\n * Class to convert an interactivity pointer path to a smart object\n */\nclass InteractivityPathToObjectConverter extends _gltfPathToObjectConverter_js__WEBPACK_IMPORTED_MODULE_0__.GLTFPathToObjectConverter {\n    constructor(gltf) {\n        super(gltf, gltfTree);\n    }\n}\nconst nodesTree = {\n    __array__: {\n        __target__: true,\n        translation: {\n            type: \"Vector3\",\n            get: (node) => {\n                const babylonObject = node._babylonTransformNode;\n                return babylonObject.position;\n            },\n            set: (value, node) => {\n                const babylonObject = node._babylonTransformNode;\n                babylonObject.position = value;\n            },\n            getObject(node) {\n                return node._babylonTransformNode;\n            },\n        },\n    },\n};\nconst gltfTree = {\n    nodes: nodesTree,\n};\n//# sourceMappingURL=interactivityPathToObjectConverter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW50ZXJhY3Rpdml0eVBhdGhUb09iamVjdENvbnZlcnRlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRTtBQUMzRTtBQUNBO0FBQ0E7QUFDTyxpREFBaUQsb0ZBQXlCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9FeHRlbnNpb25zL2ludGVyYWN0aXZpdHlQYXRoVG9PYmplY3RDb252ZXJ0ZXIuanM/ODIxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTFRGUGF0aFRvT2JqZWN0Q29udmVydGVyIH0gZnJvbSBcIi4vZ2x0ZlBhdGhUb09iamVjdENvbnZlcnRlci5qc1wiO1xuLyoqXG4gKiBDbGFzcyB0byBjb252ZXJ0IGFuIGludGVyYWN0aXZpdHkgcG9pbnRlciBwYXRoIHRvIGEgc21hcnQgb2JqZWN0XG4gKi9cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGl2aXR5UGF0aFRvT2JqZWN0Q29udmVydGVyIGV4dGVuZHMgR0xURlBhdGhUb09iamVjdENvbnZlcnRlciB7XG4gICAgY29uc3RydWN0b3IoZ2x0Zikge1xuICAgICAgICBzdXBlcihnbHRmLCBnbHRmVHJlZSk7XG4gICAgfVxufVxuY29uc3Qgbm9kZXNUcmVlID0ge1xuICAgIF9fYXJyYXlfXzoge1xuICAgICAgICBfX3RhcmdldF9fOiB0cnVlLFxuICAgICAgICB0cmFuc2xhdGlvbjoge1xuICAgICAgICAgICAgdHlwZTogXCJWZWN0b3IzXCIsXG4gICAgICAgICAgICBnZXQ6IChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbk9iamVjdCA9IG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlO1xuICAgICAgICAgICAgICAgIHJldHVybiBiYWJ5bG9uT2JqZWN0LnBvc2l0aW9uO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogKHZhbHVlLCBub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbk9iamVjdCA9IG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlO1xuICAgICAgICAgICAgICAgIGJhYnlsb25PYmplY3QucG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRPYmplY3Qobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5jb25zdCBnbHRmVHJlZSA9IHtcbiAgICBub2Rlczogbm9kZXNUcmVlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aXZpdHlQYXRoVG9PYmplY3RDb252ZXJ0ZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityPathToObjectConverter.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityUtils.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityUtils.js ***!
  \***********************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gltfToFlowGraphTypeMap: () => (/* binding */ gltfToFlowGraphTypeMap),\n/* harmony export */   gltfTypeToBabylonType: () => (/* binding */ gltfTypeToBabylonType)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneReadyEventBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Event/flowGraphSceneReadyEventBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Event/flowGraphSceneReadyEventBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneTickEventBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Event/flowGraphSceneTickEventBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Event/flowGraphSceneTickEventBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphConsoleLogBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphTimerBlock_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphTimerBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphTimerBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSendCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSendCustomEventBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSendCustomEventBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Event_flowGraphReceiveCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Event/flowGraphReceiveCustomEventBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Event/flowGraphReceiveCustomEventBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphSequenceBlock_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphSequenceBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphSequenceBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Data/flowGraphGetPropertyBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Data/flowGraphGetPropertyBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSetPropertyBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSetPropertyBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Data/Math/flowGraphMathBlocks.js */ \"@babylonjs/core/FlowGraph/Blocks/Data/Math/flowGraphMathBlocks.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphDoNBlock_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphDoNBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphDoNBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetVariableBlock_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Data/flowGraphGetVariableBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Data/flowGraphGetVariableBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetVariableBlock_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSetVariableBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphSetVariableBlock.js\");\n/* harmony import */ var _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphWhileLoopBlock_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphWhileLoopBlock.js */ \"@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphWhileLoopBlock.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneReadyEventBlock_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneTickEventBlock_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphConsoleLogBlock_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphTimerBlock_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSendCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_FlowGraph_Blocks_Event_flowGraphReceiveCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphSequenceBlock_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphDoNBlock_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetVariableBlock_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetVariableBlock_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphWhileLoopBlock_js__WEBPACK_IMPORTED_MODULE_13__]);\n([_babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneReadyEventBlock_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneTickEventBlock_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphConsoleLogBlock_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphTimerBlock_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSendCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_FlowGraph_Blocks_Event_flowGraphReceiveCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphSequenceBlock_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphDoNBlock_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetVariableBlock_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetVariableBlock_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphWhileLoopBlock_js__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* eslint-disable @typescript-eslint/naming-convention */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst gltfToFlowGraphTypeMap = {\n    \"lifecycle/onStart\": _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneReadyEventBlock_js__WEBPACK_IMPORTED_MODULE_0__.FlowGraphSceneReadyEventBlock.ClassName,\n    \"lifecycle/onTick\": _babylonjs_core_FlowGraph_Blocks_Event_flowGraphSceneTickEventBlock_js__WEBPACK_IMPORTED_MODULE_1__.FlowGraphSceneTickEventBlock.ClassName,\n    log: _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphConsoleLogBlock_js__WEBPACK_IMPORTED_MODULE_2__.FlowGraphConsoleLogBlock.ClassName,\n    \"flow/delay\": _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphTimerBlock_js__WEBPACK_IMPORTED_MODULE_3__.FlowGraphTimerBlock.ClassName,\n    \"customEvent/send\": _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSendCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_4__.FlowGraphSendCustomEventBlock.ClassName,\n    \"customEvent/receive\": _babylonjs_core_FlowGraph_Blocks_Event_flowGraphReceiveCustomEventBlock_js__WEBPACK_IMPORTED_MODULE_5__.FlowGraphReceiveCustomEventBlock.ClassName,\n    \"flow/sequence\": _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphSequenceBlock_js__WEBPACK_IMPORTED_MODULE_6__.FlowGraphSequenceBlock.ClassName,\n    \"world/get\": _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_7__.FlowGraphGetPropertyBlock.ClassName,\n    \"world/set\": _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetPropertyBlock_js__WEBPACK_IMPORTED_MODULE_8__.FlowGraphSetPropertyBlock.ClassName,\n    \"flow/doN\": _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphDoNBlock_js__WEBPACK_IMPORTED_MODULE_10__.FlowGraphDoNBlock.ClassName,\n    \"variable/get\": _babylonjs_core_FlowGraph_Blocks_Data_flowGraphGetVariableBlock_js__WEBPACK_IMPORTED_MODULE_11__.FlowGraphGetVariableBlock.ClassName,\n    \"variable/set\": _babylonjs_core_FlowGraph_Blocks_Execution_flowGraphSetVariableBlock_js__WEBPACK_IMPORTED_MODULE_12__.FlowGraphSetVariableBlock.ClassName,\n    \"flow/whileLoop\": _babylonjs_core_FlowGraph_Blocks_Execution_ControlFlow_flowGraphWhileLoopBlock_js__WEBPACK_IMPORTED_MODULE_13__.FlowGraphWhileLoopBlock.ClassName,\n    \"math/random\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphRandomBlock.ClassName,\n    \"math/e\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphEBlock.ClassName,\n    \"math/pi\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphPiBlock.ClassName,\n    \"math/inf\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphInfBlock.ClassName,\n    \"math/nan\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphNaNBlock.ClassName,\n    \"math/abs\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAbsBlock.ClassName,\n    \"math/sign\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSignBlock.ClassName,\n    \"math/trunc\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphTruncBlock.ClassName,\n    \"math/floor\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphFloorBlock.ClassName,\n    \"math/ceil\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCeilBlock.ClassName,\n    \"math/fract\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphFractBlock.ClassName,\n    \"math/neg\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphNegBlock.ClassName,\n    \"math/add\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAddBlock.ClassName,\n    \"math/sub\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSubtractBlock.ClassName,\n    \"math/mul\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphMultiplyBlock.ClassName,\n    \"math/div\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphDivideBlock.ClassName,\n    \"math/rem\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphRemainderBlock.ClassName,\n    \"math/min\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphMinBlock.ClassName,\n    \"math/max\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphMaxBlock.ClassName,\n    \"math/clamp\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphClampBlock.ClassName,\n    \"math/saturate\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSaturateBlock.ClassName,\n    \"math/mix\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphInterpolateBlock.ClassName,\n    \"math/eq\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphEqBlock.ClassName,\n    \"math/lt\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLessThanBlock.ClassName,\n    \"math/le\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLessThanOrEqualBlock.ClassName,\n    \"math/gt\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphGreaterThanBlock.ClassName,\n    \"math/ge\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphGreaterThanOrEqualBlock.ClassName,\n    \"math/isnan\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphIsNanBlock.ClassName,\n    \"math/isinf\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphIsInfBlock.ClassName,\n    \"math/rad\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphDegToRadBlock.ClassName,\n    \"math/deg\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphRadToDegBlock.ClassName,\n    \"math/sin\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSinBlock.ClassName,\n    \"math/cos\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCosBlock.ClassName,\n    \"math/tan\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphTanBlock.ClassName,\n    \"math/asin\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAsinBlock.ClassName,\n    \"math/acos\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAcosBlock.ClassName,\n    \"math/atan\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAtanBlock.ClassName,\n    \"math/atan2\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAtan2Block.ClassName,\n    \"math/sinh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSinhBlock.ClassName,\n    \"math/cosh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCoshBlock.ClassName,\n    \"math/tanh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphTanhBlock.ClassName,\n    \"math/asinh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAsinhBlock.ClassName,\n    \"math/acosh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAcoshBlock.ClassName,\n    \"math/atanh\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphAtanhBlock.ClassName,\n    \"math/exp\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphExpBlock.ClassName,\n    \"math/log\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLogBlock.ClassName,\n    \"math/log2\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLog2Block.ClassName,\n    \"math/log10\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLog10Block.ClassName,\n    \"math/sqrt\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphSqrtBlock.ClassName,\n    \"math/cbrt\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCubeRootBlock.ClassName,\n    \"math/pow\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphPowBlock.ClassName,\n    \"math/length\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphLengthBlock.ClassName,\n    \"math/normalize\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphNormalizeBlock.ClassName,\n    \"math/dot\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphDotBlock.ClassName,\n    \"math/cross\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCrossBlock.ClassName,\n    \"math/rotate2d\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphRotate2DBlock.ClassName,\n    \"math/rotate3d\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphRotate3DBlock.ClassName,\n    \"math/transpose\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphTransposeBlock.ClassName,\n    \"math/determinant\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphDeterminantBlock.ClassName,\n    \"math/inverse\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphInvertMatrixBlock.ClassName,\n    \"math/matmul\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphMatMulBlock.ClassName,\n    \"math/not\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseNotBlock.ClassName,\n    \"math/and\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseAndBlock.ClassName,\n    \"math/or\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseOrBlock.ClassName,\n    \"math/xor\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseXorBlock.ClassName,\n    \"math/asr\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseRightShiftBlock.ClassName,\n    \"math/lsl\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphBitwiseLeftShiftBlock.ClassName,\n    \"math/clz\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCountLeadingZerosBlock.ClassName,\n    \"math/ctz\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCountTrailingZerosBlock.ClassName,\n    \"math/popcnt\": _babylonjs_core_FlowGraph_Blocks_Data_Math_flowGraphMathBlocks_js__WEBPACK_IMPORTED_MODULE_9__.FlowGraphCountOneBitsBlock.ClassName,\n};\nconst gltfTypeToBabylonType = {\n    float2: \"Vector2\",\n    float3: \"Vector3\",\n    float4: \"Vector4\",\n    float4x4: \"Matrix\",\n    int: \"FlowGraphInteger\",\n};\n//# sourceMappingURL=interactivityUtils.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW50ZXJhY3Rpdml0eVV0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3SDtBQUNGO0FBQ0o7QUFDRTtBQUNRO0FBQ0U7QUFDSjtBQUNYO0FBQ0s7QUFDbWhEO0FBQ3ZoRDtBQUNEO0FBQ0s7QUFDUTtBQUNySDtBQUNQLHlCQUF5QixrSUFBNkI7QUFDdEQsd0JBQXdCLGdJQUE0QjtBQUNwRCxTQUFTLDRIQUF3QjtBQUNqQyxrQkFBa0IsOEhBQW1CO0FBQ3JDLHdCQUF3QixzSUFBNkI7QUFDckQsMkJBQTJCLHdJQUFnQztBQUMzRCxxQkFBcUIsb0lBQXNCO0FBQzNDLGlCQUFpQix5SEFBeUI7QUFDMUMsaUJBQWlCLDhIQUF5QjtBQUMxQyxnQkFBZ0IsMkhBQWlCO0FBQ2pDLG9CQUFvQiwwSEFBeUI7QUFDN0Msb0JBQW9CLCtIQUF5QjtBQUM3QyxzQkFBc0IsdUlBQXVCO0FBQzdDLG1CQUFtQixtSEFBb0I7QUFDdkMsY0FBYyw4R0FBZTtBQUM3QixlQUFlLCtHQUFnQjtBQUMvQixnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGdCQUFnQixnSEFBaUI7QUFDakMsZ0JBQWdCLGdIQUFpQjtBQUNqQyxpQkFBaUIsaUhBQWtCO0FBQ25DLGtCQUFrQixrSEFBbUI7QUFDckMsa0JBQWtCLGtIQUFtQjtBQUNyQyxpQkFBaUIsaUhBQWtCO0FBQ25DLGtCQUFrQixrSEFBbUI7QUFDckMsZ0JBQWdCLGdIQUFpQjtBQUNqQyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGdCQUFnQixxSEFBc0I7QUFDdEMsZ0JBQWdCLHFIQUFzQjtBQUN0QyxnQkFBZ0IsbUhBQW9CO0FBQ3BDLGdCQUFnQixzSEFBdUI7QUFDdkMsZ0JBQWdCLGdIQUFpQjtBQUNqQyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGtCQUFrQixrSEFBbUI7QUFDckMscUJBQXFCLHFIQUFzQjtBQUMzQyxnQkFBZ0Isd0hBQXlCO0FBQ3pDLGVBQWUsK0dBQWdCO0FBQy9CLGVBQWUscUhBQXNCO0FBQ3JDLGVBQWUsNEhBQTZCO0FBQzVDLGVBQWUsd0hBQXlCO0FBQ3hDLGVBQWUsK0hBQWdDO0FBQy9DLGtCQUFrQixrSEFBbUI7QUFDckMsa0JBQWtCLGtIQUFtQjtBQUNyQyxnQkFBZ0IscUhBQXNCO0FBQ3RDLGdCQUFnQixxSEFBc0I7QUFDdEMsZ0JBQWdCLGdIQUFpQjtBQUNqQyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGdCQUFnQixnSEFBaUI7QUFDakMsaUJBQWlCLGlIQUFrQjtBQUNuQyxpQkFBaUIsaUhBQWtCO0FBQ25DLGlCQUFpQixpSEFBa0I7QUFDbkMsa0JBQWtCLGtIQUFtQjtBQUNyQyxpQkFBaUIsaUhBQWtCO0FBQ25DLGlCQUFpQixpSEFBa0I7QUFDbkMsaUJBQWlCLGlIQUFrQjtBQUNuQyxrQkFBa0Isa0hBQW1CO0FBQ3JDLGtCQUFrQixrSEFBbUI7QUFDckMsa0JBQWtCLGtIQUFtQjtBQUNyQyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGdCQUFnQixnSEFBaUI7QUFDakMsaUJBQWlCLGlIQUFrQjtBQUNuQyxrQkFBa0Isa0hBQW1CO0FBQ3JDLGlCQUFpQixpSEFBa0I7QUFDbkMsaUJBQWlCLHFIQUFzQjtBQUN2QyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLG1CQUFtQixtSEFBb0I7QUFDdkMsc0JBQXNCLHNIQUF1QjtBQUM3QyxnQkFBZ0IsZ0hBQWlCO0FBQ2pDLGtCQUFrQixrSEFBbUI7QUFDckMscUJBQXFCLHFIQUFzQjtBQUMzQyxxQkFBcUIscUhBQXNCO0FBQzNDLHNCQUFzQixzSEFBdUI7QUFDN0Msd0JBQXdCLHdIQUF5QjtBQUNqRCxvQkFBb0IseUhBQTBCO0FBQzlDLG1CQUFtQixtSEFBb0I7QUFDdkMsZ0JBQWdCLHVIQUF3QjtBQUN4QyxnQkFBZ0IsdUhBQXdCO0FBQ3hDLGVBQWUsc0hBQXVCO0FBQ3RDLGdCQUFnQix1SEFBd0I7QUFDeEMsZ0JBQWdCLDhIQUErQjtBQUMvQyxnQkFBZ0IsNkhBQThCO0FBQzlDLGdCQUFnQiw4SEFBK0I7QUFDL0MsZ0JBQWdCLCtIQUFnQztBQUNoRCxtQkFBbUIseUhBQTBCO0FBQzdDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL0V4dGVuc2lvbnMvaW50ZXJhY3Rpdml0eVV0aWxzLmpzP2Y2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5pbXBvcnQgeyBGbG93R3JhcGhTY2VuZVJlYWR5RXZlbnRCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FdmVudC9mbG93R3JhcGhTY2VuZVJlYWR5RXZlbnRCbG9jay5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoU2NlbmVUaWNrRXZlbnRCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FdmVudC9mbG93R3JhcGhTY2VuZVRpY2tFdmVudEJsb2NrLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhDb25zb2xlTG9nQmxvY2sgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0Zsb3dHcmFwaC9CbG9ja3MvRXhlY3V0aW9uL2Zsb3dHcmFwaENvbnNvbGVMb2dCbG9jay5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoVGltZXJCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FeGVjdXRpb24vQ29udHJvbEZsb3cvZmxvd0dyYXBoVGltZXJCbG9jay5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoU2VuZEN1c3RvbUV2ZW50QmxvY2sgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0Zsb3dHcmFwaC9CbG9ja3MvRXhlY3V0aW9uL2Zsb3dHcmFwaFNlbmRDdXN0b21FdmVudEJsb2NrLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhSZWNlaXZlQ3VzdG9tRXZlbnRCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FdmVudC9mbG93R3JhcGhSZWNlaXZlQ3VzdG9tRXZlbnRCbG9jay5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoU2VxdWVuY2VCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FeGVjdXRpb24vQ29udHJvbEZsb3cvZmxvd0dyYXBoU2VxdWVuY2VCbG9jay5qc1wiO1xuaW1wb3J0IHsgRmxvd0dyYXBoR2V0UHJvcGVydHlCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9EYXRhL2Zsb3dHcmFwaEdldFByb3BlcnR5QmxvY2suanNcIjtcbmltcG9ydCB7IEZsb3dHcmFwaFNldFByb3BlcnR5QmxvY2sgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0Zsb3dHcmFwaC9CbG9ja3MvRXhlY3V0aW9uL2Zsb3dHcmFwaFNldFByb3BlcnR5QmxvY2suanNcIjtcbmltcG9ydCB7IEZsb3dHcmFwaEFkZEJsb2NrLCBGbG93R3JhcGhSYW5kb21CbG9jaywgRmxvd0dyYXBoTGVzc1RoYW5CbG9jaywgRmxvd0dyYXBoTXVsdGlwbHlCbG9jaywgRmxvd0dyYXBoU3VidHJhY3RCbG9jaywgRmxvd0dyYXBoRG90QmxvY2ssIEZsb3dHcmFwaEVCbG9jaywgRmxvd0dyYXBoUGlCbG9jaywgRmxvd0dyYXBoSW5mQmxvY2ssIEZsb3dHcmFwaE5hTkJsb2NrLCBGbG93R3JhcGhBYnNCbG9jaywgRmxvd0dyYXBoU2lnbkJsb2NrLCBGbG93R3JhcGhUcnVuY0Jsb2NrLCBGbG93R3JhcGhGbG9vckJsb2NrLCBGbG93R3JhcGhDZWlsQmxvY2ssIEZsb3dHcmFwaEZyYWN0QmxvY2ssIEZsb3dHcmFwaE5lZ0Jsb2NrLCBGbG93R3JhcGhEaXZpZGVCbG9jaywgRmxvd0dyYXBoUmVtYWluZGVyQmxvY2ssIEZsb3dHcmFwaE1pbkJsb2NrLCBGbG93R3JhcGhNYXhCbG9jaywgRmxvd0dyYXBoQ2xhbXBCbG9jaywgRmxvd0dyYXBoU2F0dXJhdGVCbG9jaywgRmxvd0dyYXBoSW50ZXJwb2xhdGVCbG9jaywgRmxvd0dyYXBoRXFCbG9jaywgRmxvd0dyYXBoTGVzc1RoYW5PckVxdWFsQmxvY2ssIEZsb3dHcmFwaEdyZWF0ZXJUaGFuQmxvY2ssIEZsb3dHcmFwaEdyZWF0ZXJUaGFuT3JFcXVhbEJsb2NrLCBGbG93R3JhcGhJc05hbkJsb2NrLCBGbG93R3JhcGhJc0luZkJsb2NrLCBGbG93R3JhcGhEZWdUb1JhZEJsb2NrLCBGbG93R3JhcGhSYWRUb0RlZ0Jsb2NrLCBGbG93R3JhcGhTaW5CbG9jaywgRmxvd0dyYXBoQ29zQmxvY2ssIEZsb3dHcmFwaFRhbkJsb2NrLCBGbG93R3JhcGhBc2luQmxvY2ssIEZsb3dHcmFwaEFjb3NCbG9jaywgRmxvd0dyYXBoQXRhbkJsb2NrLCBGbG93R3JhcGhBdGFuMkJsb2NrLCBGbG93R3JhcGhTaW5oQmxvY2ssIEZsb3dHcmFwaENvc2hCbG9jaywgRmxvd0dyYXBoVGFuaEJsb2NrLCBGbG93R3JhcGhBc2luaEJsb2NrLCBGbG93R3JhcGhBY29zaEJsb2NrLCBGbG93R3JhcGhBdGFuaEJsb2NrLCBGbG93R3JhcGhFeHBCbG9jaywgRmxvd0dyYXBoTG9nMkJsb2NrLCBGbG93R3JhcGhMb2dCbG9jaywgRmxvd0dyYXBoTG9nMTBCbG9jaywgRmxvd0dyYXBoU3FydEJsb2NrLCBGbG93R3JhcGhDdWJlUm9vdEJsb2NrLCBGbG93R3JhcGhQb3dCbG9jaywgRmxvd0dyYXBoTGVuZ3RoQmxvY2ssIEZsb3dHcmFwaE5vcm1hbGl6ZUJsb2NrLCBGbG93R3JhcGhDcm9zc0Jsb2NrLCBGbG93R3JhcGhSb3RhdGUyREJsb2NrLCBGbG93R3JhcGhSb3RhdGUzREJsb2NrLCBGbG93R3JhcGhUcmFuc3Bvc2VCbG9jaywgRmxvd0dyYXBoRGV0ZXJtaW5hbnRCbG9jaywgRmxvd0dyYXBoSW52ZXJ0TWF0cml4QmxvY2ssIEZsb3dHcmFwaE1hdE11bEJsb2NrLCBGbG93R3JhcGhCaXR3aXNlTm90QmxvY2ssIEZsb3dHcmFwaEJpdHdpc2VBbmRCbG9jaywgRmxvd0dyYXBoQml0d2lzZU9yQmxvY2ssIEZsb3dHcmFwaEJpdHdpc2VYb3JCbG9jaywgRmxvd0dyYXBoQml0d2lzZVJpZ2h0U2hpZnRCbG9jaywgRmxvd0dyYXBoQml0d2lzZUxlZnRTaGlmdEJsb2NrLCBGbG93R3JhcGhDb3VudExlYWRpbmdaZXJvc0Jsb2NrLCBGbG93R3JhcGhDb3VudFRyYWlsaW5nWmVyb3NCbG9jaywgRmxvd0dyYXBoQ291bnRPbmVCaXRzQmxvY2ssIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9GbG93R3JhcGgvQmxvY2tzL0RhdGEvTWF0aC9mbG93R3JhcGhNYXRoQmxvY2tzLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhEb05CbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FeGVjdXRpb24vQ29udHJvbEZsb3cvZmxvd0dyYXBoRG9OQmxvY2suanNcIjtcbmltcG9ydCB7IEZsb3dHcmFwaEdldFZhcmlhYmxlQmxvY2sgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0Zsb3dHcmFwaC9CbG9ja3MvRGF0YS9mbG93R3JhcGhHZXRWYXJpYWJsZUJsb2NrLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhTZXRWYXJpYWJsZUJsb2NrIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9GbG93R3JhcGgvQmxvY2tzL0V4ZWN1dGlvbi9mbG93R3JhcGhTZXRWYXJpYWJsZUJsb2NrLmpzXCI7XG5pbXBvcnQgeyBGbG93R3JhcGhXaGlsZUxvb3BCbG9jayB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvRmxvd0dyYXBoL0Jsb2Nrcy9FeGVjdXRpb24vQ29udHJvbEZsb3cvZmxvd0dyYXBoV2hpbGVMb29wQmxvY2suanNcIjtcbmV4cG9ydCBjb25zdCBnbHRmVG9GbG93R3JhcGhUeXBlTWFwID0ge1xuICAgIFwibGlmZWN5Y2xlL29uU3RhcnRcIjogRmxvd0dyYXBoU2NlbmVSZWFkeUV2ZW50QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibGlmZWN5Y2xlL29uVGlja1wiOiBGbG93R3JhcGhTY2VuZVRpY2tFdmVudEJsb2NrLkNsYXNzTmFtZSxcbiAgICBsb2c6IEZsb3dHcmFwaENvbnNvbGVMb2dCbG9jay5DbGFzc05hbWUsXG4gICAgXCJmbG93L2RlbGF5XCI6IEZsb3dHcmFwaFRpbWVyQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwiY3VzdG9tRXZlbnQvc2VuZFwiOiBGbG93R3JhcGhTZW5kQ3VzdG9tRXZlbnRCbG9jay5DbGFzc05hbWUsXG4gICAgXCJjdXN0b21FdmVudC9yZWNlaXZlXCI6IEZsb3dHcmFwaFJlY2VpdmVDdXN0b21FdmVudEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcImZsb3cvc2VxdWVuY2VcIjogRmxvd0dyYXBoU2VxdWVuY2VCbG9jay5DbGFzc05hbWUsXG4gICAgXCJ3b3JsZC9nZXRcIjogRmxvd0dyYXBoR2V0UHJvcGVydHlCbG9jay5DbGFzc05hbWUsXG4gICAgXCJ3b3JsZC9zZXRcIjogRmxvd0dyYXBoU2V0UHJvcGVydHlCbG9jay5DbGFzc05hbWUsXG4gICAgXCJmbG93L2RvTlwiOiBGbG93R3JhcGhEb05CbG9jay5DbGFzc05hbWUsXG4gICAgXCJ2YXJpYWJsZS9nZXRcIjogRmxvd0dyYXBoR2V0VmFyaWFibGVCbG9jay5DbGFzc05hbWUsXG4gICAgXCJ2YXJpYWJsZS9zZXRcIjogRmxvd0dyYXBoU2V0VmFyaWFibGVCbG9jay5DbGFzc05hbWUsXG4gICAgXCJmbG93L3doaWxlTG9vcFwiOiBGbG93R3JhcGhXaGlsZUxvb3BCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3JhbmRvbVwiOiBGbG93R3JhcGhSYW5kb21CbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2VcIjogRmxvd0dyYXBoRUJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvcGlcIjogRmxvd0dyYXBoUGlCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2luZlwiOiBGbG93R3JhcGhJbmZCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL25hblwiOiBGbG93R3JhcGhOYU5CbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2Fic1wiOiBGbG93R3JhcGhBYnNCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3NpZ25cIjogRmxvd0dyYXBoU2lnbkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvdHJ1bmNcIjogRmxvd0dyYXBoVHJ1bmNCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2Zsb29yXCI6IEZsb3dHcmFwaEZsb29yQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jZWlsXCI6IEZsb3dHcmFwaENlaWxCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2ZyYWN0XCI6IEZsb3dHcmFwaEZyYWN0QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9uZWdcIjogRmxvd0dyYXBoTmVnQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9hZGRcIjogRmxvd0dyYXBoQWRkQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9zdWJcIjogRmxvd0dyYXBoU3VidHJhY3RCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL211bFwiOiBGbG93R3JhcGhNdWx0aXBseUJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvZGl2XCI6IEZsb3dHcmFwaERpdmlkZUJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvcmVtXCI6IEZsb3dHcmFwaFJlbWFpbmRlckJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvbWluXCI6IEZsb3dHcmFwaE1pbkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvbWF4XCI6IEZsb3dHcmFwaE1heEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvY2xhbXBcIjogRmxvd0dyYXBoQ2xhbXBCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3NhdHVyYXRlXCI6IEZsb3dHcmFwaFNhdHVyYXRlQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9taXhcIjogRmxvd0dyYXBoSW50ZXJwb2xhdGVCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2VxXCI6IEZsb3dHcmFwaEVxQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9sdFwiOiBGbG93R3JhcGhMZXNzVGhhbkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvbGVcIjogRmxvd0dyYXBoTGVzc1RoYW5PckVxdWFsQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9ndFwiOiBGbG93R3JhcGhHcmVhdGVyVGhhbkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvZ2VcIjogRmxvd0dyYXBoR3JlYXRlclRoYW5PckVxdWFsQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9pc25hblwiOiBGbG93R3JhcGhJc05hbkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvaXNpbmZcIjogRmxvd0dyYXBoSXNJbmZCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3JhZFwiOiBGbG93R3JhcGhEZWdUb1JhZEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvZGVnXCI6IEZsb3dHcmFwaFJhZFRvRGVnQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9zaW5cIjogRmxvd0dyYXBoU2luQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jb3NcIjogRmxvd0dyYXBoQ29zQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC90YW5cIjogRmxvd0dyYXBoVGFuQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9hc2luXCI6IEZsb3dHcmFwaEFzaW5CbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2Fjb3NcIjogRmxvd0dyYXBoQWNvc0Jsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvYXRhblwiOiBGbG93R3JhcGhBdGFuQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9hdGFuMlwiOiBGbG93R3JhcGhBdGFuMkJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvc2luaFwiOiBGbG93R3JhcGhTaW5oQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jb3NoXCI6IEZsb3dHcmFwaENvc2hCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3RhbmhcIjogRmxvd0dyYXBoVGFuaEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvYXNpbmhcIjogRmxvd0dyYXBoQXNpbmhCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL2Fjb3NoXCI6IEZsb3dHcmFwaEFjb3NoQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9hdGFuaFwiOiBGbG93R3JhcGhBdGFuaEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvZXhwXCI6IEZsb3dHcmFwaEV4cEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvbG9nXCI6IEZsb3dHcmFwaExvZ0Jsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvbG9nMlwiOiBGbG93R3JhcGhMb2cyQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9sb2cxMFwiOiBGbG93R3JhcGhMb2cxMEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvc3FydFwiOiBGbG93R3JhcGhTcXJ0QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jYnJ0XCI6IEZsb3dHcmFwaEN1YmVSb290QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9wb3dcIjogRmxvd0dyYXBoUG93QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9sZW5ndGhcIjogRmxvd0dyYXBoTGVuZ3RoQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9ub3JtYWxpemVcIjogRmxvd0dyYXBoTm9ybWFsaXplQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9kb3RcIjogRmxvd0dyYXBoRG90QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jcm9zc1wiOiBGbG93R3JhcGhDcm9zc0Jsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvcm90YXRlMmRcIjogRmxvd0dyYXBoUm90YXRlMkRCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL3JvdGF0ZTNkXCI6IEZsb3dHcmFwaFJvdGF0ZTNEQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC90cmFuc3Bvc2VcIjogRmxvd0dyYXBoVHJhbnNwb3NlQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9kZXRlcm1pbmFudFwiOiBGbG93R3JhcGhEZXRlcm1pbmFudEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvaW52ZXJzZVwiOiBGbG93R3JhcGhJbnZlcnRNYXRyaXhCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL21hdG11bFwiOiBGbG93R3JhcGhNYXRNdWxCbG9jay5DbGFzc05hbWUsXG4gICAgXCJtYXRoL25vdFwiOiBGbG93R3JhcGhCaXR3aXNlTm90QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9hbmRcIjogRmxvd0dyYXBoQml0d2lzZUFuZEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvb3JcIjogRmxvd0dyYXBoQml0d2lzZU9yQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC94b3JcIjogRmxvd0dyYXBoQml0d2lzZVhvckJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvYXNyXCI6IEZsb3dHcmFwaEJpdHdpc2VSaWdodFNoaWZ0QmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9sc2xcIjogRmxvd0dyYXBoQml0d2lzZUxlZnRTaGlmdEJsb2NrLkNsYXNzTmFtZSxcbiAgICBcIm1hdGgvY2x6XCI6IEZsb3dHcmFwaENvdW50TGVhZGluZ1plcm9zQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9jdHpcIjogRmxvd0dyYXBoQ291bnRUcmFpbGluZ1plcm9zQmxvY2suQ2xhc3NOYW1lLFxuICAgIFwibWF0aC9wb3BjbnRcIjogRmxvd0dyYXBoQ291bnRPbmVCaXRzQmxvY2suQ2xhc3NOYW1lLFxufTtcbmV4cG9ydCBjb25zdCBnbHRmVHlwZVRvQmFieWxvblR5cGUgPSB7XG4gICAgZmxvYXQyOiBcIlZlY3RvcjJcIixcbiAgICBmbG9hdDM6IFwiVmVjdG9yM1wiLFxuICAgIGZsb2F0NDogXCJWZWN0b3I0XCIsXG4gICAgZmxvYXQ0eDQ6IFwiTWF0cml4XCIsXG4gICAgaW50OiBcIkZsb3dHcmFwaEludGVnZXJcIixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdGl2aXR5VXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/interactivityUtils.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js ***!
  \****************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrayItem: () => (/* binding */ ArrayItem),\n/* harmony export */   GLTFLoader: () => (/* binding */ GLTFLoader)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Misc/deferred.js */ \"@babylonjs/core/Misc/deferred.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Maths/math.color.js */ \"@babylonjs/core/Maths/math.color.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\n/* harmony import */ var _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Cameras/camera.js */ \"@babylonjs/core/Cameras/camera.js\");\n/* harmony import */ var _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Cameras/freeCamera.js */ \"@babylonjs/core/Cameras/freeCamera.js\");\n/* harmony import */ var _babylonjs_core_Animations_animationKey_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babylonjs/core/Animations/animationKey.js */ \"@babylonjs/core/Animations/animationKey.js\");\n/* harmony import */ var _babylonjs_core_Animations_animationGroup_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/Animations/animationGroup.js */ \"@babylonjs/core/Animations/animationGroup.js\");\n/* harmony import */ var _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Bones/bone.js */ \"@babylonjs/core/Bones/bone.js\");\n/* harmony import */ var _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babylonjs/core/Bones/skeleton.js */ \"@babylonjs/core/Bones/skeleton.js\");\n/* harmony import */ var _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babylonjs/core/Materials/material.js */ \"@babylonjs/core/Materials/material.js\");\n/* harmony import */ var _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babylonjs/core/Materials/PBR/pbrMaterial.js */ \"@babylonjs/core/Materials/PBR/pbrMaterial.js\");\n/* harmony import */ var _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babylonjs/core/Materials/Textures/texture.js */ \"@babylonjs/core/Materials/Textures/texture.js\");\n/* harmony import */ var _babylonjs_core_Meshes_transformNode_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babylonjs/core/Meshes/transformNode.js */ \"@babylonjs/core/Meshes/transformNode.js\");\n/* harmony import */ var _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babylonjs/core/Buffers/buffer.js */ \"@babylonjs/core/Buffers/buffer.js\");\n/* harmony import */ var _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babylonjs/core/Meshes/geometry.js */ \"@babylonjs/core/Meshes/geometry.js\");\n/* harmony import */ var _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babylonjs/core/Meshes/abstractMesh.js */ \"@babylonjs/core/Meshes/abstractMesh.js\");\n/* harmony import */ var _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babylonjs/core/Meshes/mesh.js */ \"@babylonjs/core/Meshes/mesh.js\");\n/* harmony import */ var _babylonjs_core_Morph_morphTarget_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babylonjs/core/Morph/morphTarget.js */ \"@babylonjs/core/Morph/morphTarget.js\");\n/* harmony import */ var _babylonjs_core_Morph_morphTargetManager_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babylonjs/core/Morph/morphTargetManager.js */ \"@babylonjs/core/Morph/morphTargetManager.js\");\n/* harmony import */ var _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../glTFFileLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js\");\n/* harmony import */ var _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @babylonjs/core/Misc/fileTools.js */ \"@babylonjs/core/Misc/fileTools.js\");\n/* harmony import */ var _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @babylonjs/core/Misc/logger.js */ \"@babylonjs/core/Misc/logger.js\");\n/* harmony import */ var _babylonjs_core_Culling_boundingInfo_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @babylonjs/core/Culling/boundingInfo.js */ \"@babylonjs/core/Culling/boundingInfo.js\");\n/* harmony import */ var _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./glTFLoaderAnimation.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderAnimation.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Animations_animationKey_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Animations_animationGroup_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_Meshes_transformNode_js__WEBPACK_IMPORTED_MODULE_13__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__, _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_15__, _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_16__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_17__, _babylonjs_core_Morph_morphTarget_js__WEBPACK_IMPORTED_MODULE_18__, _babylonjs_core_Morph_morphTargetManager_js__WEBPACK_IMPORTED_MODULE_19__, _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__, _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__, _babylonjs_core_Culling_boundingInfo_js__WEBPACK_IMPORTED_MODULE_23__, _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__]);\n([_babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__, _babylonjs_core_Animations_animationKey_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Animations_animationGroup_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_8__, _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_9__, _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__, _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__, _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__, _babylonjs_core_Meshes_transformNode_js__WEBPACK_IMPORTED_MODULE_13__, _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__, _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_15__, _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_16__, _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_17__, _babylonjs_core_Morph_morphTarget_js__WEBPACK_IMPORTED_MODULE_18__, _babylonjs_core_Morph_morphTargetManager_js__WEBPACK_IMPORTED_MODULE_19__, _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__, _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__, _babylonjs_core_Culling_boundingInfo_js__WEBPACK_IMPORTED_MODULE_23__, _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://stackoverflow.com/a/48218209\nfunction mergeDeep(...objects) {\n    const isObject = (obj) => obj && typeof obj === \"object\";\n    return objects.reduce((prev, obj) => {\n        Object.keys(obj).forEach((key) => {\n            const pVal = prev[key];\n            const oVal = obj[key];\n            if (Array.isArray(pVal) && Array.isArray(oVal)) {\n                prev[key] = pVal.concat(...oVal);\n            }\n            else if (isObject(pVal) && isObject(oVal)) {\n                prev[key] = mergeDeep(pVal, oVal);\n            }\n            else {\n                prev[key] = oVal;\n            }\n        });\n        return prev;\n    }, {});\n}\n/**\n * Helper class for working with arrays when loading the glTF asset\n */\nclass ArrayItem {\n    /**\n     * Gets an item from the given array.\n     * @param context The context when loading the asset\n     * @param array The array to get the item from\n     * @param index The index to the array\n     * @returns The array item\n     */\n    static Get(context, array, index) {\n        if (!array || index == undefined || !array[index]) {\n            throw new Error(`${context}: Failed to find index (${index})`);\n        }\n        return array[index];\n    }\n    /**\n     * Gets an item from the given array or returns null if not available.\n     * @param array The array to get the item from\n     * @param index The index to the array\n     * @returns The array item or null\n     */\n    static TryGet(array, index) {\n        if (!array || index == undefined || !array[index]) {\n            return null;\n        }\n        return array[index];\n    }\n    /**\n     * Assign an `index` field to each item of the given array.\n     * @param array The array of items\n     */\n    static Assign(array) {\n        if (array) {\n            for (let index = 0; index < array.length; index++) {\n                array[index].index = index;\n            }\n        }\n    }\n}\n/**\n * The glTF 2.0 loader\n */\nclass GLTFLoader {\n    /**\n     * Registers a loader extension.\n     * @param name The name of the loader extension.\n     * @param factory The factory function that creates the loader extension.\n     */\n    static RegisterExtension(name, factory) {\n        if (GLTFLoader.UnregisterExtension(name)) {\n            _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`Extension with the name '${name}' already exists`);\n        }\n        GLTFLoader._RegisteredExtensions[name] = {\n            factory: factory,\n        };\n    }\n    /**\n     * Unregisters a loader extension.\n     * @param name The name of the loader extension.\n     * @returns A boolean indicating whether the extension has been unregistered\n     */\n    static UnregisterExtension(name) {\n        if (!GLTFLoader._RegisteredExtensions[name]) {\n            return false;\n        }\n        delete GLTFLoader._RegisteredExtensions[name];\n        return true;\n    }\n    /**\n     * The object that represents the glTF JSON.\n     */\n    get gltf() {\n        if (!this._gltf) {\n            throw new Error(\"glTF JSON is not available\");\n        }\n        return this._gltf;\n    }\n    /**\n     * The BIN chunk of a binary glTF.\n     */\n    get bin() {\n        return this._bin;\n    }\n    /**\n     * The parent file loader.\n     */\n    get parent() {\n        return this._parent;\n    }\n    /**\n     * The Babylon scene when loading the asset.\n     */\n    get babylonScene() {\n        if (!this._babylonScene) {\n            throw new Error(\"Scene is not available\");\n        }\n        return this._babylonScene;\n    }\n    /**\n     * The root Babylon node when loading the asset.\n     */\n    get rootBabylonMesh() {\n        return this._rootBabylonMesh;\n    }\n    /**\n     * The root url when loading the asset.\n     */\n    get rootUrl() {\n        return this._rootUrl;\n    }\n    /**\n     * @internal\n     */\n    constructor(parent) {\n        /** @internal */\n        this._completePromises = new Array();\n        /** @internal */\n        this._assetContainer = null;\n        /** Storage */\n        this._babylonLights = [];\n        /** @internal */\n        this._disableInstancedMesh = 0;\n        /** @internal */\n        this._allMaterialsDirtyRequired = false;\n        this._extensions = new Array();\n        this._disposed = false;\n        this._rootUrl = null;\n        this._fileName = null;\n        this._uniqueRootUrl = null;\n        this._bin = null;\n        this._rootBabylonMesh = null;\n        this._defaultBabylonMaterialData = {};\n        this._postSceneLoadActions = new Array();\n        this._parent = parent;\n    }\n    /** @internal */\n    dispose() {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        this._completePromises.length = 0;\n        this._extensions.forEach((extension) => extension.dispose && extension.dispose());\n        this._extensions.length = 0;\n        this._gltf = null; // TODO\n        this._bin = null;\n        this._babylonScene = null; // TODO\n        this._rootBabylonMesh = null;\n        this._defaultBabylonMaterialData = {};\n        this._postSceneLoadActions.length = 0;\n        this._parent.dispose();\n    }\n    /**\n     * @internal\n     */\n    importMeshAsync(meshesNames, scene, container, data, rootUrl, onProgress, fileName = \"\") {\n        return Promise.resolve().then(() => {\n            this._babylonScene = scene;\n            this._assetContainer = container;\n            this._loadData(data);\n            let nodes = null;\n            if (meshesNames) {\n                const nodeMap = {};\n                if (this._gltf.nodes) {\n                    for (const node of this._gltf.nodes) {\n                        if (node.name) {\n                            nodeMap[node.name] = node.index;\n                        }\n                    }\n                }\n                const names = meshesNames instanceof Array ? meshesNames : [meshesNames];\n                nodes = names.map((name) => {\n                    const node = nodeMap[name];\n                    if (node === undefined) {\n                        throw new Error(`Failed to find node '${name}'`);\n                    }\n                    return node;\n                });\n            }\n            return this._loadAsync(rootUrl, fileName, nodes, () => {\n                return {\n                    meshes: this._getMeshes(),\n                    particleSystems: [],\n                    skeletons: this._getSkeletons(),\n                    animationGroups: this._getAnimationGroups(),\n                    lights: this._babylonLights,\n                    transformNodes: this._getTransformNodes(),\n                    geometries: this._getGeometries(),\n                    spriteManagers: [],\n                };\n            });\n        });\n    }\n    /**\n     * @internal\n     */\n    loadAsync(scene, data, rootUrl, onProgress, fileName = \"\") {\n        return Promise.resolve().then(() => {\n            this._babylonScene = scene;\n            this._loadData(data);\n            return this._loadAsync(rootUrl, fileName, null, () => undefined);\n        });\n    }\n    _loadAsync(rootUrl, fileName, nodes, resultFunc) {\n        return Promise.resolve()\n            .then(() => {\n            this._rootUrl = rootUrl;\n            this._uniqueRootUrl = !rootUrl.startsWith(\"file:\") && fileName ? rootUrl : `${rootUrl}${Date.now()}/`;\n            this._fileName = fileName;\n            this._allMaterialsDirtyRequired = false;\n            this._loadExtensions();\n            this._checkExtensions();\n            const loadingToReadyCounterName = `${_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState[_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.LOADING]} => ${_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState[_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.READY]}`;\n            const loadingToCompleteCounterName = `${_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState[_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.LOADING]} => ${_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState[_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.COMPLETE]}`;\n            this._parent._startPerformanceCounter(loadingToReadyCounterName);\n            this._parent._startPerformanceCounter(loadingToCompleteCounterName);\n            this._parent._setState(_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.LOADING);\n            this._extensionsOnLoading();\n            const promises = new Array();\n            // Block the marking of materials dirty until the scene is loaded.\n            const oldBlockMaterialDirtyMechanism = this._babylonScene.blockMaterialDirtyMechanism;\n            this._babylonScene.blockMaterialDirtyMechanism = true;\n            if (!this.parent.loadOnlyMaterials) {\n                if (nodes) {\n                    promises.push(this.loadSceneAsync(\"/nodes\", { nodes: nodes, index: -1 }));\n                }\n                else if (this._gltf.scene != undefined || (this._gltf.scenes && this._gltf.scenes[0])) {\n                    const scene = ArrayItem.Get(`/scene`, this._gltf.scenes, this._gltf.scene || 0);\n                    promises.push(this.loadSceneAsync(`/scenes/${scene.index}`, scene));\n                }\n            }\n            if (!this.parent.skipMaterials && this.parent.loadAllMaterials && this._gltf.materials) {\n                for (let m = 0; m < this._gltf.materials.length; ++m) {\n                    const material = this._gltf.materials[m];\n                    const context = \"/materials/\" + m;\n                    const babylonDrawMode = _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.TriangleFillMode;\n                    promises.push(this._loadMaterialAsync(context, material, null, babylonDrawMode, () => { }));\n                }\n            }\n            // Restore the blocking of material dirty.\n            if (this._allMaterialsDirtyRequired) {\n                // This can happen if we add a light for instance as it will impact the whole scene.\n                // This automatically resets everything if needed.\n                this._babylonScene.blockMaterialDirtyMechanism = oldBlockMaterialDirtyMechanism;\n            }\n            else {\n                // By default a newly created material is dirty so there is no need to flag the full scene as dirty.\n                // For perf reasons, we then bypass blockMaterialDirtyMechanism as this would \"dirty\" the entire scene.\n                this._babylonScene._forceBlockMaterialDirtyMechanism(oldBlockMaterialDirtyMechanism);\n            }\n            if (this._parent.compileMaterials) {\n                promises.push(this._compileMaterialsAsync());\n            }\n            if (this._parent.compileShadowGenerators) {\n                promises.push(this._compileShadowGeneratorsAsync());\n            }\n            const resultPromise = Promise.all(promises).then(() => {\n                if (this._rootBabylonMesh && this._rootBabylonMesh !== this._parent.customRootNode) {\n                    this._rootBabylonMesh.setEnabled(true);\n                }\n                this._extensionsOnReady();\n                this._parent._setState(_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.READY);\n                this._startAnimations();\n                return resultFunc();\n            });\n            return resultPromise.then((result) => {\n                this._parent._endPerformanceCounter(loadingToReadyCounterName);\n                _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.SetImmediate(() => {\n                    if (!this._disposed) {\n                        Promise.all(this._completePromises).then(() => {\n                            this._parent._endPerformanceCounter(loadingToCompleteCounterName);\n                            this._parent._setState(_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderState.COMPLETE);\n                            this._parent.onCompleteObservable.notifyObservers(undefined);\n                            this._parent.onCompleteObservable.clear();\n                            this.dispose();\n                        }, (error) => {\n                            this._parent.onErrorObservable.notifyObservers(error);\n                            this._parent.onErrorObservable.clear();\n                            this.dispose();\n                        });\n                    }\n                });\n                return result;\n            });\n        })\n            .catch((error) => {\n            if (!this._disposed) {\n                this._parent.onErrorObservable.notifyObservers(error);\n                this._parent.onErrorObservable.clear();\n                this.dispose();\n            }\n            throw error;\n        });\n    }\n    _loadData(data) {\n        this._gltf = data.json;\n        this._setupData();\n        if (data.bin) {\n            const buffers = this._gltf.buffers;\n            if (buffers && buffers[0] && !buffers[0].uri) {\n                const binaryBuffer = buffers[0];\n                if (binaryBuffer.byteLength < data.bin.byteLength - 3 || binaryBuffer.byteLength > data.bin.byteLength) {\n                    _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`Binary buffer length (${binaryBuffer.byteLength}) from JSON does not match chunk length (${data.bin.byteLength})`);\n                }\n                this._bin = data.bin;\n            }\n            else {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(\"Unexpected BIN chunk\");\n            }\n        }\n    }\n    _setupData() {\n        ArrayItem.Assign(this._gltf.accessors);\n        ArrayItem.Assign(this._gltf.animations);\n        ArrayItem.Assign(this._gltf.buffers);\n        ArrayItem.Assign(this._gltf.bufferViews);\n        ArrayItem.Assign(this._gltf.cameras);\n        ArrayItem.Assign(this._gltf.images);\n        ArrayItem.Assign(this._gltf.materials);\n        ArrayItem.Assign(this._gltf.meshes);\n        ArrayItem.Assign(this._gltf.nodes);\n        ArrayItem.Assign(this._gltf.samplers);\n        ArrayItem.Assign(this._gltf.scenes);\n        ArrayItem.Assign(this._gltf.skins);\n        ArrayItem.Assign(this._gltf.textures);\n        if (this._gltf.nodes) {\n            const nodeParents = {};\n            for (const node of this._gltf.nodes) {\n                if (node.children) {\n                    for (const index of node.children) {\n                        nodeParents[index] = node.index;\n                    }\n                }\n            }\n            const rootNode = this._createRootNode();\n            for (const node of this._gltf.nodes) {\n                const parentIndex = nodeParents[node.index];\n                node.parent = parentIndex === undefined ? rootNode : this._gltf.nodes[parentIndex];\n            }\n        }\n    }\n    _loadExtensions() {\n        for (const name in GLTFLoader._RegisteredExtensions) {\n            const extension = GLTFLoader._RegisteredExtensions[name].factory(this);\n            if (extension.name !== name) {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`The name of the glTF loader extension instance does not match the registered name: ${extension.name} !== ${name}`);\n            }\n            this._extensions.push(extension);\n            this._parent.onExtensionLoadedObservable.notifyObservers(extension);\n        }\n        this._extensions.sort((a, b) => (a.order || Number.MAX_VALUE) - (b.order || Number.MAX_VALUE));\n        this._parent.onExtensionLoadedObservable.clear();\n    }\n    _checkExtensions() {\n        if (this._gltf.extensionsRequired) {\n            for (const name of this._gltf.extensionsRequired) {\n                const available = this._extensions.some((extension) => extension.name === name && extension.enabled);\n                if (!available) {\n                    throw new Error(`Required extension ${name} is not available`);\n                }\n            }\n        }\n    }\n    _createRootNode() {\n        if (this._parent.customRootNode !== undefined) {\n            this._rootBabylonMesh = this._parent.customRootNode;\n            return {\n                // eslint-disable-next-line @typescript-eslint/naming-convention\n                _babylonTransformNode: this._rootBabylonMesh === null ? undefined : this._rootBabylonMesh,\n                index: -1,\n            };\n        }\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const rootMesh = new _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_17__.Mesh(\"__root__\", this._babylonScene);\n        this._rootBabylonMesh = rootMesh;\n        this._rootBabylonMesh._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        this._rootBabylonMesh.setEnabled(false);\n        const rootNode = {\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            _babylonTransformNode: this._rootBabylonMesh,\n            index: -1,\n        };\n        switch (this._parent.coordinateSystemMode) {\n            case _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderCoordinateSystemMode.AUTO: {\n                if (!this._babylonScene.useRightHandedSystem) {\n                    rootNode.rotation = [0, 1, 0, 0];\n                    rootNode.scale = [1, 1, -1];\n                    GLTFLoader._LoadTransform(rootNode, this._rootBabylonMesh);\n                }\n                break;\n            }\n            case _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderCoordinateSystemMode.FORCE_RIGHT_HANDED: {\n                this._babylonScene.useRightHandedSystem = true;\n                break;\n            }\n            default: {\n                throw new Error(`Invalid coordinate system mode (${this._parent.coordinateSystemMode})`);\n            }\n        }\n        this._parent.onMeshLoadedObservable.notifyObservers(rootMesh);\n        return rootNode;\n    }\n    /**\n     * Loads a glTF scene.\n     * @param context The context when loading the asset\n     * @param scene The glTF scene property\n     * @returns A promise that resolves when the load is complete\n     */\n    loadSceneAsync(context, scene) {\n        const extensionPromise = this._extensionsLoadSceneAsync(context, scene);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        const promises = new Array();\n        this.logOpen(`${context} ${scene.name || \"\"}`);\n        if (scene.nodes) {\n            for (const index of scene.nodes) {\n                const node = ArrayItem.Get(`${context}/nodes/${index}`, this._gltf.nodes, index);\n                promises.push(this.loadNodeAsync(`/nodes/${node.index}`, node, (babylonMesh) => {\n                    babylonMesh.parent = this._rootBabylonMesh;\n                }));\n            }\n        }\n        for (const action of this._postSceneLoadActions) {\n            action();\n        }\n        promises.push(this._loadAnimationsAsync());\n        this.logClose();\n        return Promise.all(promises).then(() => { });\n    }\n    _forEachPrimitive(node, callback) {\n        if (node._primitiveBabylonMeshes) {\n            for (const babylonMesh of node._primitiveBabylonMeshes) {\n                callback(babylonMesh);\n            }\n        }\n    }\n    _getGeometries() {\n        const geometries = [];\n        const nodes = this._gltf.nodes;\n        if (nodes) {\n            for (const node of nodes) {\n                this._forEachPrimitive(node, (babylonMesh) => {\n                    const geometry = babylonMesh.geometry;\n                    if (geometry && geometries.indexOf(geometry) === -1) {\n                        geometries.push(geometry);\n                    }\n                });\n            }\n        }\n        return geometries;\n    }\n    _getMeshes() {\n        const meshes = [];\n        // Root mesh is always first, if available.\n        if (this._rootBabylonMesh instanceof _babylonjs_core_Meshes_abstractMesh_js__WEBPACK_IMPORTED_MODULE_16__.AbstractMesh) {\n            meshes.push(this._rootBabylonMesh);\n        }\n        const nodes = this._gltf.nodes;\n        if (nodes) {\n            for (const node of nodes) {\n                this._forEachPrimitive(node, (babylonMesh) => {\n                    meshes.push(babylonMesh);\n                });\n            }\n        }\n        return meshes;\n    }\n    _getTransformNodes() {\n        const transformNodes = [];\n        const nodes = this._gltf.nodes;\n        if (nodes) {\n            for (const node of nodes) {\n                if (node._babylonTransformNode && node._babylonTransformNode.getClassName() === \"TransformNode\") {\n                    transformNodes.push(node._babylonTransformNode);\n                }\n                if (node._babylonTransformNodeForSkin) {\n                    transformNodes.push(node._babylonTransformNodeForSkin);\n                }\n            }\n        }\n        return transformNodes;\n    }\n    _getSkeletons() {\n        const skeletons = [];\n        const skins = this._gltf.skins;\n        if (skins) {\n            for (const skin of skins) {\n                if (skin._data) {\n                    skeletons.push(skin._data.babylonSkeleton);\n                }\n            }\n        }\n        return skeletons;\n    }\n    _getAnimationGroups() {\n        const animationGroups = [];\n        const animations = this._gltf.animations;\n        if (animations) {\n            for (const animation of animations) {\n                if (animation._babylonAnimationGroup) {\n                    animationGroups.push(animation._babylonAnimationGroup);\n                }\n            }\n        }\n        return animationGroups;\n    }\n    _startAnimations() {\n        switch (this._parent.animationStartMode) {\n            case _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderAnimationStartMode.NONE: {\n                // do nothing\n                break;\n            }\n            case _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderAnimationStartMode.FIRST: {\n                const babylonAnimationGroups = this._getAnimationGroups();\n                if (babylonAnimationGroups.length !== 0) {\n                    babylonAnimationGroups[0].start(true);\n                }\n                break;\n            }\n            case _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFLoaderAnimationStartMode.ALL: {\n                const babylonAnimationGroups = this._getAnimationGroups();\n                for (const babylonAnimationGroup of babylonAnimationGroups) {\n                    babylonAnimationGroup.start(true);\n                }\n                break;\n            }\n            default: {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Error(`Invalid animation start mode (${this._parent.animationStartMode})`);\n                return;\n            }\n        }\n    }\n    /**\n     * Loads a glTF node.\n     * @param context The context when loading the asset\n     * @param node The glTF node property\n     * @param assign A function called synchronously after parsing the glTF properties\n     * @returns A promise that resolves with the loaded Babylon mesh when the load is complete\n     */\n    loadNodeAsync(context, node, assign = () => { }) {\n        const extensionPromise = this._extensionsLoadNodeAsync(context, node, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        if (node._babylonTransformNode) {\n            throw new Error(`${context}: Invalid recursive node hierarchy`);\n        }\n        const promises = new Array();\n        this.logOpen(`${context} ${node.name || \"\"}`);\n        const loadNode = (babylonTransformNode) => {\n            GLTFLoader.AddPointerMetadata(babylonTransformNode, context);\n            GLTFLoader._LoadTransform(node, babylonTransformNode);\n            if (node.camera != undefined) {\n                const camera = ArrayItem.Get(`${context}/camera`, this._gltf.cameras, node.camera);\n                promises.push(this.loadCameraAsync(`/cameras/${camera.index}`, camera, (babylonCamera) => {\n                    babylonCamera.parent = babylonTransformNode;\n                }));\n            }\n            if (node.children) {\n                for (const index of node.children) {\n                    const childNode = ArrayItem.Get(`${context}/children/${index}`, this._gltf.nodes, index);\n                    promises.push(this.loadNodeAsync(`/nodes/${childNode.index}`, childNode, (childBabylonMesh) => {\n                        childBabylonMesh.parent = babylonTransformNode;\n                    }));\n                }\n            }\n            assign(babylonTransformNode);\n        };\n        if (node.mesh == undefined || node.skin != undefined) {\n            const nodeName = node.name || `node${node.index}`;\n            this._babylonScene._blockEntityCollection = !!this._assetContainer;\n            const transformNode = new _babylonjs_core_Meshes_transformNode_js__WEBPACK_IMPORTED_MODULE_13__.TransformNode(nodeName, this._babylonScene);\n            transformNode._parentContainer = this._assetContainer;\n            this._babylonScene._blockEntityCollection = false;\n            if (node.mesh == undefined) {\n                node._babylonTransformNode = transformNode;\n            }\n            else {\n                node._babylonTransformNodeForSkin = transformNode;\n            }\n            loadNode(transformNode);\n        }\n        if (node.mesh != undefined) {\n            if (node.skin == undefined) {\n                const mesh = ArrayItem.Get(`${context}/mesh`, this._gltf.meshes, node.mesh);\n                promises.push(this._loadMeshAsync(`/meshes/${mesh.index}`, node, mesh, loadNode));\n            }\n            else {\n                // See https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins (second implementation note)\n                // This code path will place the skinned mesh as a sibling of the skeleton root node without loading the\n                // transform, which effectively ignores the transform of the skinned mesh, as per spec.\n                const mesh = ArrayItem.Get(`${context}/mesh`, this._gltf.meshes, node.mesh);\n                promises.push(this._loadMeshAsync(`/meshes/${mesh.index}`, node, mesh, (babylonTransformNode) => {\n                    const babylonTransformNodeForSkin = node._babylonTransformNodeForSkin;\n                    // Merge the metadata from the skin node to the skinned mesh in case a loader extension added metadata.\n                    babylonTransformNode.metadata = mergeDeep(babylonTransformNodeForSkin.metadata, babylonTransformNode.metadata || {});\n                    const skin = ArrayItem.Get(`${context}/skin`, this._gltf.skins, node.skin);\n                    promises.push(this._loadSkinAsync(`/skins/${skin.index}`, node, skin, (babylonSkeleton) => {\n                        this._forEachPrimitive(node, (babylonMesh) => {\n                            babylonMesh.skeleton = babylonSkeleton;\n                        });\n                        // Wait until all the nodes are parented before parenting the skinned mesh.\n                        this._postSceneLoadActions.push(() => {\n                            if (skin.skeleton != undefined) {\n                                // Place the skinned mesh node as a sibling of the skeleton root node.\n                                // Handle special case when the parent of the skeleton root is the skinned mesh.\n                                const parentNode = ArrayItem.Get(`/skins/${skin.index}/skeleton`, this._gltf.nodes, skin.skeleton).parent;\n                                if (node.index === parentNode.index) {\n                                    babylonTransformNode.parent = babylonTransformNodeForSkin.parent;\n                                }\n                                else {\n                                    babylonTransformNode.parent = parentNode._babylonTransformNode;\n                                }\n                            }\n                            else {\n                                babylonTransformNode.parent = this._rootBabylonMesh;\n                            }\n                            this._parent.onSkinLoadedObservable.notifyObservers({ node: babylonTransformNodeForSkin, skinnedNode: babylonTransformNode });\n                        });\n                    }));\n                }));\n            }\n        }\n        this.logClose();\n        return Promise.all(promises).then(() => {\n            this._forEachPrimitive(node, (babylonMesh) => {\n                if (babylonMesh.geometry && babylonMesh.geometry.useBoundingInfoFromGeometry) {\n                    // simply apply the world matrices to the bounding info - the extends are already ok\n                    babylonMesh._updateBoundingInfo();\n                }\n                else {\n                    babylonMesh.refreshBoundingInfo(true, true);\n                }\n            });\n            return node._babylonTransformNode;\n        });\n    }\n    _loadMeshAsync(context, node, mesh, assign) {\n        const primitives = mesh.primitives;\n        if (!primitives || !primitives.length) {\n            throw new Error(`${context}: Primitives are missing`);\n        }\n        if (primitives[0].index == undefined) {\n            ArrayItem.Assign(primitives);\n        }\n        const promises = new Array();\n        this.logOpen(`${context} ${mesh.name || \"\"}`);\n        const name = node.name || `node${node.index}`;\n        if (primitives.length === 1) {\n            const primitive = mesh.primitives[0];\n            promises.push(this._loadMeshPrimitiveAsync(`${context}/primitives/${primitive.index}`, name, node, mesh, primitive, (babylonMesh) => {\n                node._babylonTransformNode = babylonMesh;\n                node._primitiveBabylonMeshes = [babylonMesh];\n            }));\n        }\n        else {\n            this._babylonScene._blockEntityCollection = !!this._assetContainer;\n            node._babylonTransformNode = new _babylonjs_core_Meshes_transformNode_js__WEBPACK_IMPORTED_MODULE_13__.TransformNode(name, this._babylonScene);\n            node._babylonTransformNode._parentContainer = this._assetContainer;\n            this._babylonScene._blockEntityCollection = false;\n            node._primitiveBabylonMeshes = [];\n            for (const primitive of primitives) {\n                promises.push(this._loadMeshPrimitiveAsync(`${context}/primitives/${primitive.index}`, `${name}_primitive${primitive.index}`, node, mesh, primitive, (babylonMesh) => {\n                    babylonMesh.parent = node._babylonTransformNode;\n                    node._primitiveBabylonMeshes.push(babylonMesh);\n                }));\n            }\n        }\n        assign(node._babylonTransformNode);\n        this.logClose();\n        return Promise.all(promises).then(() => {\n            return node._babylonTransformNode;\n        });\n    }\n    /**\n     * @internal Define this method to modify the default behavior when loading data for mesh primitives.\n     * @param context The context when loading the asset\n     * @param name The mesh name when loading the asset\n     * @param node The glTF node when loading the asset\n     * @param mesh The glTF mesh when loading the asset\n     * @param primitive The glTF mesh primitive property\n     * @param assign A function called synchronously after parsing the glTF properties\n     * @returns A promise that resolves with the loaded mesh when the load is complete or null if not handled\n     */\n    _loadMeshPrimitiveAsync(context, name, node, mesh, primitive, assign) {\n        const extensionPromise = this._extensionsLoadMeshPrimitiveAsync(context, name, node, mesh, primitive, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        this.logOpen(`${context}`);\n        const shouldInstance = this._disableInstancedMesh === 0 && this._parent.createInstances && node.skin == undefined && !mesh.primitives[0].targets;\n        let babylonAbstractMesh;\n        let promise;\n        if (shouldInstance && primitive._instanceData) {\n            this._babylonScene._blockEntityCollection = !!this._assetContainer;\n            babylonAbstractMesh = primitive._instanceData.babylonSourceMesh.createInstance(name);\n            babylonAbstractMesh._parentContainer = this._assetContainer;\n            this._babylonScene._blockEntityCollection = false;\n            promise = primitive._instanceData.promise;\n        }\n        else {\n            const promises = new Array();\n            this._babylonScene._blockEntityCollection = !!this._assetContainer;\n            const babylonMesh = new _babylonjs_core_Meshes_mesh_js__WEBPACK_IMPORTED_MODULE_17__.Mesh(name, this._babylonScene);\n            babylonMesh._parentContainer = this._assetContainer;\n            this._babylonScene._blockEntityCollection = false;\n            babylonMesh.overrideMaterialSideOrientation = this._babylonScene.useRightHandedSystem ? _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.CounterClockWiseSideOrientation : _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.ClockWiseSideOrientation;\n            this._createMorphTargets(context, node, mesh, primitive, babylonMesh);\n            promises.push(this._loadVertexDataAsync(context, primitive, babylonMesh).then((babylonGeometry) => {\n                return this._loadMorphTargetsAsync(context, primitive, babylonMesh, babylonGeometry).then(() => {\n                    if (this._disposed) {\n                        return;\n                    }\n                    this._babylonScene._blockEntityCollection = !!this._assetContainer;\n                    babylonGeometry.applyToMesh(babylonMesh);\n                    babylonGeometry._parentContainer = this._assetContainer;\n                    this._babylonScene._blockEntityCollection = false;\n                });\n            }));\n            const babylonDrawMode = GLTFLoader._GetDrawMode(context, primitive.mode);\n            if (primitive.material == undefined) {\n                let babylonMaterial = this._defaultBabylonMaterialData[babylonDrawMode];\n                if (!babylonMaterial) {\n                    babylonMaterial = this._createDefaultMaterial(\"__GLTFLoader._default\", babylonDrawMode);\n                    this._parent.onMaterialLoadedObservable.notifyObservers(babylonMaterial);\n                    this._defaultBabylonMaterialData[babylonDrawMode] = babylonMaterial;\n                }\n                babylonMesh.material = babylonMaterial;\n            }\n            else if (!this.parent.skipMaterials) {\n                const material = ArrayItem.Get(`${context}/material`, this._gltf.materials, primitive.material);\n                promises.push(this._loadMaterialAsync(`/materials/${material.index}`, material, babylonMesh, babylonDrawMode, (babylonMaterial) => {\n                    babylonMesh.material = babylonMaterial;\n                }));\n            }\n            promise = Promise.all(promises);\n            if (shouldInstance) {\n                primitive._instanceData = {\n                    babylonSourceMesh: babylonMesh,\n                    promise: promise,\n                };\n            }\n            babylonAbstractMesh = babylonMesh;\n        }\n        GLTFLoader.AddPointerMetadata(babylonAbstractMesh, context);\n        this._parent.onMeshLoadedObservable.notifyObservers(babylonAbstractMesh);\n        assign(babylonAbstractMesh);\n        this.logClose();\n        return promise.then(() => {\n            return babylonAbstractMesh;\n        });\n    }\n    _loadVertexDataAsync(context, primitive, babylonMesh) {\n        const extensionPromise = this._extensionsLoadVertexDataAsync(context, primitive, babylonMesh);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        const attributes = primitive.attributes;\n        if (!attributes) {\n            throw new Error(`${context}: Attributes are missing`);\n        }\n        const promises = new Array();\n        const babylonGeometry = new _babylonjs_core_Meshes_geometry_js__WEBPACK_IMPORTED_MODULE_15__.Geometry(babylonMesh.name, this._babylonScene);\n        if (primitive.indices == undefined) {\n            babylonMesh.isUnIndexed = true;\n        }\n        else {\n            const accessor = ArrayItem.Get(`${context}/indices`, this._gltf.accessors, primitive.indices);\n            promises.push(this._loadIndicesAccessorAsync(`/accessors/${accessor.index}`, accessor).then((data) => {\n                babylonGeometry.setIndices(data);\n            }));\n        }\n        const loadAttribute = (name, kind, callback) => {\n            if (attributes[name] == undefined) {\n                return;\n            }\n            babylonMesh._delayInfo = babylonMesh._delayInfo || [];\n            if (babylonMesh._delayInfo.indexOf(kind) === -1) {\n                babylonMesh._delayInfo.push(kind);\n            }\n            const accessor = ArrayItem.Get(`${context}/attributes/${name}`, this._gltf.accessors, attributes[name]);\n            promises.push(this._loadVertexAccessorAsync(`/accessors/${accessor.index}`, accessor, kind).then((babylonVertexBuffer) => {\n                if (babylonVertexBuffer.getKind() === _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.PositionKind && !this.parent.alwaysComputeBoundingBox && !babylonMesh.skeleton) {\n                    if (accessor.min && accessor.max) {\n                        const min = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.TmpVectors.Vector3[0].copyFromFloats(...accessor.min);\n                        const max = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.TmpVectors.Vector3[1].copyFromFloats(...accessor.max);\n                        if (accessor.normalized && accessor.componentType !== 5126 /* AccessorComponentType.FLOAT */) {\n                            let divider = 1;\n                            switch (accessor.componentType) {\n                                case 5120 /* AccessorComponentType.BYTE */:\n                                    divider = 127.0;\n                                    break;\n                                case 5121 /* AccessorComponentType.UNSIGNED_BYTE */:\n                                    divider = 255.0;\n                                    break;\n                                case 5122 /* AccessorComponentType.SHORT */:\n                                    divider = 32767.0;\n                                    break;\n                                case 5123 /* AccessorComponentType.UNSIGNED_SHORT */:\n                                    divider = 65535.0;\n                                    break;\n                            }\n                            const oneOverDivider = 1 / divider;\n                            min.scaleInPlace(oneOverDivider);\n                            max.scaleInPlace(oneOverDivider);\n                        }\n                        babylonGeometry._boundingInfo = new _babylonjs_core_Culling_boundingInfo_js__WEBPACK_IMPORTED_MODULE_23__.BoundingInfo(min, max);\n                        babylonGeometry.useBoundingInfoFromGeometry = true;\n                    }\n                }\n                babylonGeometry.setVerticesBuffer(babylonVertexBuffer, accessor.count);\n            }));\n            if (kind == _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.MatricesIndicesExtraKind) {\n                babylonMesh.numBoneInfluencers = 8;\n            }\n            if (callback) {\n                callback(accessor);\n            }\n        };\n        loadAttribute(\"POSITION\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.PositionKind);\n        loadAttribute(\"NORMAL\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.NormalKind);\n        loadAttribute(\"TANGENT\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.TangentKind);\n        loadAttribute(\"TEXCOORD_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UVKind);\n        loadAttribute(\"TEXCOORD_1\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UV2Kind);\n        loadAttribute(\"TEXCOORD_2\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UV3Kind);\n        loadAttribute(\"TEXCOORD_3\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UV4Kind);\n        loadAttribute(\"TEXCOORD_4\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UV5Kind);\n        loadAttribute(\"TEXCOORD_5\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.UV6Kind);\n        loadAttribute(\"JOINTS_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.MatricesIndicesKind);\n        loadAttribute(\"WEIGHTS_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.MatricesWeightsKind);\n        loadAttribute(\"JOINTS_1\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.MatricesIndicesExtraKind);\n        loadAttribute(\"WEIGHTS_1\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.MatricesWeightsExtraKind);\n        loadAttribute(\"COLOR_0\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.ColorKind, (accessor) => {\n            if (accessor.type === \"VEC4\" /* AccessorType.VEC4 */) {\n                babylonMesh.hasVertexAlpha = true;\n            }\n        });\n        return Promise.all(promises).then(() => {\n            return babylonGeometry;\n        });\n    }\n    _createMorphTargets(context, node, mesh, primitive, babylonMesh) {\n        if (!primitive.targets) {\n            return;\n        }\n        if (node._numMorphTargets == undefined) {\n            node._numMorphTargets = primitive.targets.length;\n        }\n        else if (primitive.targets.length !== node._numMorphTargets) {\n            throw new Error(`${context}: Primitives do not have the same number of targets`);\n        }\n        const targetNames = mesh.extras ? mesh.extras.targetNames : null;\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        babylonMesh.morphTargetManager = new _babylonjs_core_Morph_morphTargetManager_js__WEBPACK_IMPORTED_MODULE_19__.MorphTargetManager(this._babylonScene);\n        babylonMesh.morphTargetManager._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        babylonMesh.morphTargetManager.areUpdatesFrozen = true;\n        for (let index = 0; index < primitive.targets.length; index++) {\n            const weight = node.weights ? node.weights[index] : mesh.weights ? mesh.weights[index] : 0;\n            const name = targetNames ? targetNames[index] : `morphTarget${index}`;\n            babylonMesh.morphTargetManager.addTarget(new _babylonjs_core_Morph_morphTarget_js__WEBPACK_IMPORTED_MODULE_18__.MorphTarget(name, weight, babylonMesh.getScene()));\n            // TODO: tell the target whether it has positions, normals, tangents\n        }\n    }\n    _loadMorphTargetsAsync(context, primitive, babylonMesh, babylonGeometry) {\n        if (!primitive.targets) {\n            return Promise.resolve();\n        }\n        const promises = new Array();\n        const morphTargetManager = babylonMesh.morphTargetManager;\n        for (let index = 0; index < morphTargetManager.numTargets; index++) {\n            const babylonMorphTarget = morphTargetManager.getTarget(index);\n            promises.push(this._loadMorphTargetVertexDataAsync(`${context}/targets/${index}`, babylonGeometry, primitive.targets[index], babylonMorphTarget));\n        }\n        return Promise.all(promises).then(() => {\n            morphTargetManager.areUpdatesFrozen = false;\n        });\n    }\n    _loadMorphTargetVertexDataAsync(context, babylonGeometry, attributes, babylonMorphTarget) {\n        const promises = new Array();\n        const loadAttribute = (attribute, kind, setData) => {\n            if (attributes[attribute] == undefined) {\n                return;\n            }\n            const babylonVertexBuffer = babylonGeometry.getVertexBuffer(kind);\n            if (!babylonVertexBuffer) {\n                return;\n            }\n            const accessor = ArrayItem.Get(`${context}/${attribute}`, this._gltf.accessors, attributes[attribute]);\n            promises.push(this._loadFloatAccessorAsync(`/accessors/${accessor.index}`, accessor).then((data) => {\n                setData(babylonVertexBuffer, data);\n            }));\n        };\n        loadAttribute(\"POSITION\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.PositionKind, (babylonVertexBuffer, data) => {\n            const positions = new Float32Array(data.length);\n            babylonVertexBuffer.forEach(data.length, (value, index) => {\n                positions[index] = data[index] + value;\n            });\n            babylonMorphTarget.setPositions(positions);\n        });\n        loadAttribute(\"NORMAL\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.NormalKind, (babylonVertexBuffer, data) => {\n            const normals = new Float32Array(data.length);\n            babylonVertexBuffer.forEach(normals.length, (value, index) => {\n                normals[index] = data[index] + value;\n            });\n            babylonMorphTarget.setNormals(normals);\n        });\n        loadAttribute(\"TANGENT\", _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.TangentKind, (babylonVertexBuffer, data) => {\n            const tangents = new Float32Array((data.length / 3) * 4);\n            let dataIndex = 0;\n            babylonVertexBuffer.forEach((data.length / 3) * 4, (value, index) => {\n                // Tangent data for morph targets is stored as xyz delta.\n                // The vertexData.tangent is stored as xyzw.\n                // So we need to skip every fourth vertexData.tangent.\n                if ((index + 1) % 4 !== 0) {\n                    tangents[dataIndex] = data[dataIndex] + value;\n                    dataIndex++;\n                }\n            });\n            babylonMorphTarget.setTangents(tangents);\n        });\n        return Promise.all(promises).then(() => { });\n    }\n    static _LoadTransform(node, babylonNode) {\n        // Ignore the TRS of skinned nodes.\n        // See https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins (second implementation note)\n        if (node.skin != undefined) {\n            return;\n        }\n        let position = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero();\n        let rotation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.Identity();\n        let scaling = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.One();\n        if (node.matrix) {\n            const matrix = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.FromArray(node.matrix);\n            matrix.decompose(scaling, rotation, position);\n        }\n        else {\n            if (node.translation) {\n                position = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.translation);\n            }\n            if (node.rotation) {\n                rotation = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(node.rotation);\n            }\n            if (node.scale) {\n                scaling = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.scale);\n            }\n        }\n        babylonNode.position = position;\n        babylonNode.rotationQuaternion = rotation;\n        babylonNode.scaling = scaling;\n    }\n    _loadSkinAsync(context, node, skin, assign) {\n        const extensionPromise = this._extensionsLoadSkinAsync(context, node, skin);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        if (skin._data) {\n            assign(skin._data.babylonSkeleton);\n            return skin._data.promise;\n        }\n        const skeletonId = `skeleton${skin.index}`;\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const babylonSkeleton = new _babylonjs_core_Bones_skeleton_js__WEBPACK_IMPORTED_MODULE_9__.Skeleton(skin.name || skeletonId, skeletonId, this._babylonScene);\n        babylonSkeleton._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        this._loadBones(context, skin, babylonSkeleton);\n        const promise = this._loadSkinInverseBindMatricesDataAsync(context, skin).then((inverseBindMatricesData) => {\n            this._updateBoneMatrices(babylonSkeleton, inverseBindMatricesData);\n        });\n        skin._data = {\n            babylonSkeleton: babylonSkeleton,\n            promise: promise,\n        };\n        assign(babylonSkeleton);\n        return promise;\n    }\n    _loadBones(context, skin, babylonSkeleton) {\n        if (skin.skeleton == undefined || this._parent.alwaysComputeSkeletonRootNode) {\n            const rootNode = this._findSkeletonRootNode(`${context}/joints`, skin.joints);\n            if (rootNode) {\n                if (skin.skeleton === undefined) {\n                    skin.skeleton = rootNode.index;\n                }\n                else {\n                    const isParent = (a, b) => {\n                        for (; b.parent; b = b.parent) {\n                            if (b.parent === a) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                    const skeletonNode = ArrayItem.Get(`${context}/skeleton`, this._gltf.nodes, skin.skeleton);\n                    if (skeletonNode !== rootNode && !isParent(skeletonNode, rootNode)) {\n                        _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}/skeleton: Overriding with nearest common ancestor as skeleton node is not a common root`);\n                        skin.skeleton = rootNode.index;\n                    }\n                }\n            }\n            else {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}: Failed to find common root`);\n            }\n        }\n        const babylonBones = {};\n        for (const index of skin.joints) {\n            const node = ArrayItem.Get(`${context}/joints/${index}`, this._gltf.nodes, index);\n            this._loadBone(node, skin, babylonSkeleton, babylonBones);\n        }\n    }\n    _findSkeletonRootNode(context, joints) {\n        if (joints.length === 0) {\n            return null;\n        }\n        const paths = {};\n        for (const index of joints) {\n            const path = [];\n            let node = ArrayItem.Get(`${context}/${index}`, this._gltf.nodes, index);\n            while (node.index !== -1) {\n                path.unshift(node);\n                node = node.parent;\n            }\n            paths[index] = path;\n        }\n        let rootNode = null;\n        for (let i = 0;; ++i) {\n            let path = paths[joints[0]];\n            if (i >= path.length) {\n                return rootNode;\n            }\n            const node = path[i];\n            for (let j = 1; j < joints.length; ++j) {\n                path = paths[joints[j]];\n                if (i >= path.length || node !== path[i]) {\n                    return rootNode;\n                }\n            }\n            rootNode = node;\n        }\n    }\n    _loadBone(node, skin, babylonSkeleton, babylonBones) {\n        let babylonBone = babylonBones[node.index];\n        if (babylonBone) {\n            return babylonBone;\n        }\n        let parentBabylonBone = null;\n        if (node.index !== skin.skeleton) {\n            if (node.parent && node.parent.index !== -1) {\n                parentBabylonBone = this._loadBone(node.parent, skin, babylonSkeleton, babylonBones);\n            }\n            else if (skin.skeleton !== undefined) {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`/skins/${skin.index}/skeleton: Skeleton node is not a common root`);\n            }\n        }\n        const boneIndex = skin.joints.indexOf(node.index);\n        babylonBone = new _babylonjs_core_Bones_bone_js__WEBPACK_IMPORTED_MODULE_8__.Bone(node.name || `joint${node.index}`, babylonSkeleton, parentBabylonBone, this._getNodeMatrix(node), null, null, boneIndex);\n        babylonBones[node.index] = babylonBone;\n        // Wait until the scene is loaded to ensure the transform nodes are loaded.\n        this._postSceneLoadActions.push(() => {\n            // Link the Babylon bone with the corresponding Babylon transform node.\n            // A glTF joint is a pointer to a glTF node in the glTF node hierarchy similar to Unity3D.\n            babylonBone.linkTransformNode(node._babylonTransformNode);\n        });\n        return babylonBone;\n    }\n    _loadSkinInverseBindMatricesDataAsync(context, skin) {\n        if (skin.inverseBindMatrices == undefined) {\n            return Promise.resolve(null);\n        }\n        const accessor = ArrayItem.Get(`${context}/inverseBindMatrices`, this._gltf.accessors, skin.inverseBindMatrices);\n        return this._loadFloatAccessorAsync(`/accessors/${accessor.index}`, accessor);\n    }\n    _updateBoneMatrices(babylonSkeleton, inverseBindMatricesData) {\n        for (const babylonBone of babylonSkeleton.bones) {\n            const baseMatrix = _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Identity();\n            const boneIndex = babylonBone._index;\n            if (inverseBindMatricesData && boneIndex !== -1) {\n                _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.FromArrayToRef(inverseBindMatricesData, boneIndex * 16, baseMatrix);\n                baseMatrix.invertToRef(baseMatrix);\n            }\n            const babylonParentBone = babylonBone.getParent();\n            if (babylonParentBone) {\n                baseMatrix.multiplyToRef(babylonParentBone.getAbsoluteInverseBindMatrix(), baseMatrix);\n            }\n            babylonBone.updateMatrix(baseMatrix, false, false);\n            babylonBone._updateAbsoluteBindMatrices(undefined, false);\n        }\n    }\n    _getNodeMatrix(node) {\n        return node.matrix\n            ? _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.FromArray(node.matrix)\n            : _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Matrix.Compose(node.scale ? _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.scale) : _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.One(), node.rotation ? _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(node.rotation) : _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.Identity(), node.translation ? _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(node.translation) : _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero());\n    }\n    /**\n     * Loads a glTF camera.\n     * @param context The context when loading the asset\n     * @param camera The glTF camera property\n     * @param assign A function called synchronously after parsing the glTF properties\n     * @returns A promise that resolves with the loaded Babylon camera when the load is complete\n     */\n    loadCameraAsync(context, camera, assign = () => { }) {\n        const extensionPromise = this._extensionsLoadCameraAsync(context, camera, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        const promises = new Array();\n        this.logOpen(`${context} ${camera.name || \"\"}`);\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const babylonCamera = new _babylonjs_core_Cameras_freeCamera_js__WEBPACK_IMPORTED_MODULE_5__.FreeCamera(camera.name || `camera${camera.index}`, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.Zero(), this._babylonScene, false);\n        babylonCamera._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        babylonCamera.ignoreParentScaling = true;\n        camera._babylonCamera = babylonCamera;\n        // Rotation by 180 as glTF has a different convention than Babylon.\n        babylonCamera.rotation.set(0, Math.PI, 0);\n        switch (camera.type) {\n            case \"perspective\" /* CameraType.PERSPECTIVE */: {\n                const perspective = camera.perspective;\n                if (!perspective) {\n                    throw new Error(`${context}: Camera perspective properties are missing`);\n                }\n                babylonCamera.fov = perspective.yfov;\n                babylonCamera.minZ = perspective.znear;\n                babylonCamera.maxZ = perspective.zfar || 0;\n                break;\n            }\n            case \"orthographic\" /* CameraType.ORTHOGRAPHIC */: {\n                if (!camera.orthographic) {\n                    throw new Error(`${context}: Camera orthographic properties are missing`);\n                }\n                babylonCamera.mode = _babylonjs_core_Cameras_camera_js__WEBPACK_IMPORTED_MODULE_4__.Camera.ORTHOGRAPHIC_CAMERA;\n                babylonCamera.orthoLeft = -camera.orthographic.xmag;\n                babylonCamera.orthoRight = camera.orthographic.xmag;\n                babylonCamera.orthoBottom = -camera.orthographic.ymag;\n                babylonCamera.orthoTop = camera.orthographic.ymag;\n                babylonCamera.minZ = camera.orthographic.znear;\n                babylonCamera.maxZ = camera.orthographic.zfar;\n                break;\n            }\n            default: {\n                throw new Error(`${context}: Invalid camera type (${camera.type})`);\n            }\n        }\n        GLTFLoader.AddPointerMetadata(babylonCamera, context);\n        this._parent.onCameraLoadedObservable.notifyObservers(babylonCamera);\n        assign(babylonCamera);\n        this.logClose();\n        return Promise.all(promises).then(() => {\n            return babylonCamera;\n        });\n    }\n    _loadAnimationsAsync() {\n        const animations = this._gltf.animations;\n        if (!animations) {\n            return Promise.resolve();\n        }\n        const promises = new Array();\n        for (let index = 0; index < animations.length; index++) {\n            const animation = animations[index];\n            promises.push(this.loadAnimationAsync(`/animations/${animation.index}`, animation).then((animationGroup) => {\n                // Delete the animation group if it ended up not having any animations in it.\n                if (animationGroup.targetedAnimations.length === 0) {\n                    animationGroup.dispose();\n                }\n            }));\n        }\n        return Promise.all(promises).then(() => { });\n    }\n    /**\n     * Loads a glTF animation.\n     * @param context The context when loading the asset\n     * @param animation The glTF animation property\n     * @returns A promise that resolves with the loaded Babylon animation group when the load is complete\n     */\n    loadAnimationAsync(context, animation) {\n        const promise = this._extensionsLoadAnimationAsync(context, animation);\n        if (promise) {\n            return promise;\n        }\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const babylonAnimationGroup = new _babylonjs_core_Animations_animationGroup_js__WEBPACK_IMPORTED_MODULE_7__.AnimationGroup(animation.name || `animation${animation.index}`, this._babylonScene);\n        babylonAnimationGroup._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        animation._babylonAnimationGroup = babylonAnimationGroup;\n        const promises = new Array();\n        ArrayItem.Assign(animation.channels);\n        ArrayItem.Assign(animation.samplers);\n        for (const channel of animation.channels) {\n            promises.push(this._loadAnimationChannelAsync(`${context}/channels/${channel.index}`, context, animation, channel, (babylonTarget, babylonAnimation) => {\n                babylonTarget.animations = babylonTarget.animations || [];\n                babylonTarget.animations.push(babylonAnimation);\n                babylonAnimationGroup.addTargetedAnimation(babylonAnimation, babylonTarget);\n            }));\n        }\n        return Promise.all(promises).then(() => {\n            babylonAnimationGroup.normalize(0);\n            return babylonAnimationGroup;\n        });\n    }\n    /**\n     * @hidden\n     * Loads a glTF animation channel.\n     * @param context The context when loading the asset\n     * @param animationContext The context of the animation when loading the asset\n     * @param animation The glTF animation property\n     * @param channel The glTF animation channel property\n     * @param onLoad Called for each animation loaded\n     * @returns A void promise that resolves when the load is complete\n     */\n    _loadAnimationChannelAsync(context, animationContext, animation, channel, onLoad) {\n        const promise = this._extensionsLoadAnimationChannelAsync(context, animationContext, animation, channel, onLoad);\n        if (promise) {\n            return promise;\n        }\n        if (channel.target.node == undefined) {\n            return Promise.resolve();\n        }\n        const targetNode = ArrayItem.Get(`${context}/target/node`, this._gltf.nodes, channel.target.node);\n        // Ignore animations that have no animation targets.\n        if ((channel.target.path === \"weights\" /* AnimationChannelTargetPath.WEIGHTS */ && !targetNode._numMorphTargets) ||\n            (channel.target.path !== \"weights\" /* AnimationChannelTargetPath.WEIGHTS */ && !targetNode._babylonTransformNode)) {\n            return Promise.resolve();\n        }\n        let properties;\n        switch (channel.target.path) {\n            case \"translation\" /* AnimationChannelTargetPath.TRANSLATION */: {\n                properties = _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__.nodeAnimationData.translation;\n                break;\n            }\n            case \"rotation\" /* AnimationChannelTargetPath.ROTATION */: {\n                properties = _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__.nodeAnimationData.rotation;\n                break;\n            }\n            case \"scale\" /* AnimationChannelTargetPath.SCALE */: {\n                properties = _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__.nodeAnimationData.scale;\n                break;\n            }\n            case \"weights\" /* AnimationChannelTargetPath.WEIGHTS */: {\n                properties = _glTFLoaderAnimation_js__WEBPACK_IMPORTED_MODULE_24__.nodeAnimationData.weights;\n                break;\n            }\n            default: {\n                throw new Error(`${context}/target/path: Invalid value (${channel.target.path})`);\n            }\n        }\n        const targetInfo = {\n            object: targetNode,\n            info: properties,\n        };\n        return this._loadAnimationChannelFromTargetInfoAsync(context, animationContext, animation, channel, targetInfo, onLoad);\n    }\n    /**\n     * @hidden\n     * Loads a glTF animation channel.\n     * @param context The context when loading the asset\n     * @param animationContext The context of the animation when loading the asset\n     * @param animation The glTF animation property\n     * @param channel The glTF animation channel property\n     * @param targetInfo The glTF target and properties\n     * @param onLoad Called for each animation loaded\n     * @returns A void promise that resolves when the load is complete\n     */\n    _loadAnimationChannelFromTargetInfoAsync(context, animationContext, animation, channel, targetInfo, onLoad) {\n        const fps = this.parent.targetFps;\n        const invfps = 1 / fps;\n        const sampler = ArrayItem.Get(`${context}/sampler`, animation.samplers, channel.sampler);\n        return this._loadAnimationSamplerAsync(`${animationContext}/samplers/${channel.sampler}`, sampler).then((data) => {\n            let numAnimations = 0;\n            const target = targetInfo.object;\n            const propertyInfos = targetInfo.info;\n            // Extract the corresponding values from the read value.\n            // GLTF values may be dispatched to several Babylon properties.\n            // For example, baseColorFactor [`r`, `g`, `b`, `a`] is dispatched to\n            // - albedoColor as Color3(`r`, `g`, `b`)\n            // - alpha as `a`\n            for (const propertyInfo of propertyInfos) {\n                const stride = propertyInfo.getStride(target);\n                const input = data.input;\n                const output = data.output;\n                const keys = new Array(input.length);\n                let outputOffset = 0;\n                switch (data.interpolation) {\n                    case \"STEP\" /* AnimationSamplerInterpolation.STEP */: {\n                        for (let index = 0; index < input.length; index++) {\n                            const value = propertyInfo.getValue(target, output, outputOffset, 1);\n                            outputOffset += stride;\n                            keys[index] = {\n                                frame: input[index] * fps,\n                                value: value,\n                                interpolation: _babylonjs_core_Animations_animationKey_js__WEBPACK_IMPORTED_MODULE_6__.AnimationKeyInterpolation.STEP,\n                            };\n                        }\n                        break;\n                    }\n                    case \"CUBICSPLINE\" /* AnimationSamplerInterpolation.CUBICSPLINE */: {\n                        for (let index = 0; index < input.length; index++) {\n                            const inTangent = propertyInfo.getValue(target, output, outputOffset, invfps);\n                            outputOffset += stride;\n                            const value = propertyInfo.getValue(target, output, outputOffset, 1);\n                            outputOffset += stride;\n                            const outTangent = propertyInfo.getValue(target, output, outputOffset, invfps);\n                            outputOffset += stride;\n                            keys[index] = {\n                                frame: input[index] * fps,\n                                inTangent: inTangent,\n                                value: value,\n                                outTangent: outTangent,\n                            };\n                        }\n                        break;\n                    }\n                    case \"LINEAR\" /* AnimationSamplerInterpolation.LINEAR */: {\n                        for (let index = 0; index < input.length; index++) {\n                            const value = propertyInfo.getValue(target, output, outputOffset, 1);\n                            outputOffset += stride;\n                            keys[index] = {\n                                frame: input[index] * fps,\n                                value: value,\n                            };\n                        }\n                        break;\n                    }\n                }\n                if (outputOffset > 0) {\n                    const name = `${animation.name || `animation${animation.index}`}_channel${channel.index}_${numAnimations}`;\n                    propertyInfo.buildAnimations(target, name, fps, keys, (babylonAnimatable, babylonAnimation) => {\n                        ++numAnimations;\n                        onLoad(babylonAnimatable, babylonAnimation);\n                    });\n                }\n            }\n        });\n    }\n    _loadAnimationSamplerAsync(context, sampler) {\n        if (sampler._data) {\n            return sampler._data;\n        }\n        const interpolation = sampler.interpolation || \"LINEAR\" /* AnimationSamplerInterpolation.LINEAR */;\n        switch (interpolation) {\n            case \"STEP\" /* AnimationSamplerInterpolation.STEP */:\n            case \"LINEAR\" /* AnimationSamplerInterpolation.LINEAR */:\n            case \"CUBICSPLINE\" /* AnimationSamplerInterpolation.CUBICSPLINE */: {\n                break;\n            }\n            default: {\n                throw new Error(`${context}/interpolation: Invalid value (${sampler.interpolation})`);\n            }\n        }\n        const inputAccessor = ArrayItem.Get(`${context}/input`, this._gltf.accessors, sampler.input);\n        const outputAccessor = ArrayItem.Get(`${context}/output`, this._gltf.accessors, sampler.output);\n        sampler._data = Promise.all([\n            this._loadFloatAccessorAsync(`/accessors/${inputAccessor.index}`, inputAccessor),\n            this._loadFloatAccessorAsync(`/accessors/${outputAccessor.index}`, outputAccessor),\n        ]).then(([inputData, outputData]) => {\n            return {\n                input: inputData,\n                interpolation: interpolation,\n                output: outputData,\n            };\n        });\n        return sampler._data;\n    }\n    /**\n     * Loads a glTF buffer.\n     * @param context The context when loading the asset\n     * @param buffer The glTF buffer property\n     * @param byteOffset The byte offset to use\n     * @param byteLength The byte length to use\n     * @returns A promise that resolves with the loaded data when the load is complete\n     */\n    loadBufferAsync(context, buffer, byteOffset, byteLength) {\n        const extensionPromise = this._extensionsLoadBufferAsync(context, buffer, byteOffset, byteLength);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        if (!buffer._data) {\n            if (buffer.uri) {\n                buffer._data = this.loadUriAsync(`${context}/uri`, buffer, buffer.uri);\n            }\n            else {\n                if (!this._bin) {\n                    throw new Error(`${context}: Uri is missing or the binary glTF is missing its binary chunk`);\n                }\n                buffer._data = this._bin.readAsync(0, buffer.byteLength);\n            }\n        }\n        return buffer._data.then((data) => {\n            try {\n                return new Uint8Array(data.buffer, data.byteOffset + byteOffset, byteLength);\n            }\n            catch (e) {\n                throw new Error(`${context}: ${e.message}`);\n            }\n        });\n    }\n    /**\n     * Loads a glTF buffer view.\n     * @param context The context when loading the asset\n     * @param bufferView The glTF buffer view property\n     * @returns A promise that resolves with the loaded data when the load is complete\n     */\n    loadBufferViewAsync(context, bufferView) {\n        const extensionPromise = this._extensionsLoadBufferViewAsync(context, bufferView);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        if (bufferView._data) {\n            return bufferView._data;\n        }\n        const buffer = ArrayItem.Get(`${context}/buffer`, this._gltf.buffers, bufferView.buffer);\n        bufferView._data = this.loadBufferAsync(`/buffers/${buffer.index}`, buffer, bufferView.byteOffset || 0, bufferView.byteLength);\n        return bufferView._data;\n    }\n    _loadAccessorAsync(context, accessor, constructor) {\n        if (accessor._data) {\n            return accessor._data;\n        }\n        const numComponents = GLTFLoader._GetNumComponents(context, accessor.type);\n        const byteStride = numComponents * _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.GetTypeByteLength(accessor.componentType);\n        const length = numComponents * accessor.count;\n        if (accessor.bufferView == undefined) {\n            accessor._data = Promise.resolve(new constructor(length));\n        }\n        else {\n            const bufferView = ArrayItem.Get(`${context}/bufferView`, this._gltf.bufferViews, accessor.bufferView);\n            accessor._data = this.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView).then((data) => {\n                if (accessor.componentType === 5126 /* AccessorComponentType.FLOAT */ && !accessor.normalized && (!bufferView.byteStride || bufferView.byteStride === byteStride)) {\n                    return GLTFLoader._GetTypedArray(context, accessor.componentType, data, accessor.byteOffset, length);\n                }\n                else {\n                    const typedArray = new constructor(length);\n                    _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.ForEach(data, accessor.byteOffset || 0, bufferView.byteStride || byteStride, numComponents, accessor.componentType, typedArray.length, accessor.normalized || false, (value, index) => {\n                        typedArray[index] = value;\n                    });\n                    return typedArray;\n                }\n            });\n        }\n        if (accessor.sparse) {\n            const sparse = accessor.sparse;\n            accessor._data = accessor._data.then((data) => {\n                const typedArray = data;\n                const indicesBufferView = ArrayItem.Get(`${context}/sparse/indices/bufferView`, this._gltf.bufferViews, sparse.indices.bufferView);\n                const valuesBufferView = ArrayItem.Get(`${context}/sparse/values/bufferView`, this._gltf.bufferViews, sparse.values.bufferView);\n                return Promise.all([\n                    this.loadBufferViewAsync(`/bufferViews/${indicesBufferView.index}`, indicesBufferView),\n                    this.loadBufferViewAsync(`/bufferViews/${valuesBufferView.index}`, valuesBufferView),\n                ]).then(([indicesData, valuesData]) => {\n                    const indices = GLTFLoader._GetTypedArray(`${context}/sparse/indices`, sparse.indices.componentType, indicesData, sparse.indices.byteOffset, sparse.count);\n                    const sparseLength = numComponents * sparse.count;\n                    let values;\n                    if (accessor.componentType === 5126 /* AccessorComponentType.FLOAT */ && !accessor.normalized) {\n                        values = GLTFLoader._GetTypedArray(`${context}/sparse/values`, accessor.componentType, valuesData, sparse.values.byteOffset, sparseLength);\n                    }\n                    else {\n                        const sparseData = GLTFLoader._GetTypedArray(`${context}/sparse/values`, accessor.componentType, valuesData, sparse.values.byteOffset, sparseLength);\n                        values = new constructor(sparseLength);\n                        _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.ForEach(sparseData, 0, byteStride, numComponents, accessor.componentType, values.length, accessor.normalized || false, (value, index) => {\n                            values[index] = value;\n                        });\n                    }\n                    let valuesIndex = 0;\n                    for (let indicesIndex = 0; indicesIndex < indices.length; indicesIndex++) {\n                        let dataIndex = indices[indicesIndex] * numComponents;\n                        for (let componentIndex = 0; componentIndex < numComponents; componentIndex++) {\n                            typedArray[dataIndex++] = values[valuesIndex++];\n                        }\n                    }\n                    return typedArray;\n                });\n            });\n        }\n        return accessor._data;\n    }\n    /**\n     * @internal\n     */\n    _loadFloatAccessorAsync(context, accessor) {\n        return this._loadAccessorAsync(context, accessor, Float32Array);\n    }\n    /**\n     * @internal\n     */\n    _loadIndicesAccessorAsync(context, accessor) {\n        if (accessor.type !== \"SCALAR\" /* AccessorType.SCALAR */) {\n            throw new Error(`${context}/type: Invalid value ${accessor.type}`);\n        }\n        if (accessor.componentType !== 5121 /* AccessorComponentType.UNSIGNED_BYTE */ &&\n            accessor.componentType !== 5123 /* AccessorComponentType.UNSIGNED_SHORT */ &&\n            accessor.componentType !== 5125 /* AccessorComponentType.UNSIGNED_INT */) {\n            throw new Error(`${context}/componentType: Invalid value ${accessor.componentType}`);\n        }\n        if (accessor._data) {\n            return accessor._data;\n        }\n        if (accessor.sparse) {\n            const constructor = GLTFLoader._GetTypedArrayConstructor(`${context}/componentType`, accessor.componentType);\n            accessor._data = this._loadAccessorAsync(context, accessor, constructor);\n        }\n        else {\n            const bufferView = ArrayItem.Get(`${context}/bufferView`, this._gltf.bufferViews, accessor.bufferView);\n            accessor._data = this.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView).then((data) => {\n                return GLTFLoader._GetTypedArray(context, accessor.componentType, data, accessor.byteOffset, accessor.count);\n            });\n        }\n        return accessor._data;\n    }\n    /**\n     * @internal\n     */\n    _loadVertexBufferViewAsync(bufferView) {\n        if (bufferView._babylonBuffer) {\n            return bufferView._babylonBuffer;\n        }\n        const engine = this._babylonScene.getEngine();\n        bufferView._babylonBuffer = this.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView).then((data) => {\n            return new _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.Buffer(engine, data, false);\n        });\n        return bufferView._babylonBuffer;\n    }\n    /**\n     * @internal\n     */\n    _loadVertexAccessorAsync(context, accessor, kind) {\n        if (accessor._babylonVertexBuffer?.[kind]) {\n            return accessor._babylonVertexBuffer[kind];\n        }\n        if (!accessor._babylonVertexBuffer) {\n            accessor._babylonVertexBuffer = {};\n        }\n        const engine = this._babylonScene.getEngine();\n        if (accessor.sparse || accessor.bufferView == undefined) {\n            accessor._babylonVertexBuffer[kind] = this._loadFloatAccessorAsync(context, accessor).then((data) => {\n                return new _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer(engine, data, kind, false);\n            });\n        }\n        else {\n            const bufferView = ArrayItem.Get(`${context}/bufferView`, this._gltf.bufferViews, accessor.bufferView);\n            accessor._babylonVertexBuffer[kind] = this._loadVertexBufferViewAsync(bufferView).then((babylonBuffer) => {\n                const numComponents = GLTFLoader._GetNumComponents(context, accessor.type);\n                return new _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer(engine, babylonBuffer, kind, false, undefined, bufferView.byteStride, undefined, accessor.byteOffset, numComponents, accessor.componentType, accessor.normalized, true, undefined, true);\n            });\n        }\n        return accessor._babylonVertexBuffer[kind];\n    }\n    _loadMaterialMetallicRoughnessPropertiesAsync(context, properties, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        if (properties) {\n            if (properties.baseColorFactor) {\n                babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(properties.baseColorFactor);\n                babylonMaterial.alpha = properties.baseColorFactor[3];\n            }\n            else {\n                babylonMaterial.albedoColor = _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.White();\n            }\n            babylonMaterial.metallic = properties.metallicFactor == undefined ? 1 : properties.metallicFactor;\n            babylonMaterial.roughness = properties.roughnessFactor == undefined ? 1 : properties.roughnessFactor;\n            if (properties.baseColorTexture) {\n                promises.push(this.loadTextureInfoAsync(`${context}/baseColorTexture`, properties.baseColorTexture, (texture) => {\n                    texture.name = `${babylonMaterial.name} (Base Color)`;\n                    babylonMaterial.albedoTexture = texture;\n                }));\n            }\n            if (properties.metallicRoughnessTexture) {\n                properties.metallicRoughnessTexture.nonColorData = true;\n                promises.push(this.loadTextureInfoAsync(`${context}/metallicRoughnessTexture`, properties.metallicRoughnessTexture, (texture) => {\n                    texture.name = `${babylonMaterial.name} (Metallic Roughness)`;\n                    babylonMaterial.metallicTexture = texture;\n                }));\n                babylonMaterial.useMetallnessFromMetallicTextureBlue = true;\n                babylonMaterial.useRoughnessFromMetallicTextureGreen = true;\n                babylonMaterial.useRoughnessFromMetallicTextureAlpha = false;\n            }\n        }\n        return Promise.all(promises).then(() => { });\n    }\n    /**\n     * @internal\n     */\n    _loadMaterialAsync(context, material, babylonMesh, babylonDrawMode, assign = () => { }) {\n        const extensionPromise = this._extensionsLoadMaterialAsync(context, material, babylonMesh, babylonDrawMode, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        material._data = material._data || {};\n        let babylonData = material._data[babylonDrawMode];\n        if (!babylonData) {\n            this.logOpen(`${context} ${material.name || \"\"}`);\n            const babylonMaterial = this.createMaterial(context, material, babylonDrawMode);\n            babylonData = {\n                babylonMaterial: babylonMaterial,\n                babylonMeshes: [],\n                promise: this.loadMaterialPropertiesAsync(context, material, babylonMaterial),\n            };\n            material._data[babylonDrawMode] = babylonData;\n            GLTFLoader.AddPointerMetadata(babylonMaterial, context);\n            this._parent.onMaterialLoadedObservable.notifyObservers(babylonMaterial);\n            this.logClose();\n        }\n        if (babylonMesh) {\n            babylonData.babylonMeshes.push(babylonMesh);\n            babylonMesh.onDisposeObservable.addOnce(() => {\n                const index = babylonData.babylonMeshes.indexOf(babylonMesh);\n                if (index !== -1) {\n                    babylonData.babylonMeshes.splice(index, 1);\n                }\n            });\n        }\n        assign(babylonData.babylonMaterial);\n        return babylonData.promise.then(() => {\n            return babylonData.babylonMaterial;\n        });\n    }\n    _createDefaultMaterial(name, babylonDrawMode) {\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const babylonMaterial = new _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial(name, this._babylonScene);\n        babylonMaterial._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        // Moved to mesh so user can change materials on gltf meshes: babylonMaterial.sideOrientation = this._babylonScene.useRightHandedSystem ? Material.CounterClockWiseSideOrientation : Material.ClockWiseSideOrientation;\n        babylonMaterial.fillMode = babylonDrawMode;\n        babylonMaterial.enableSpecularAntiAliasing = true;\n        babylonMaterial.useRadianceOverAlpha = !this._parent.transparencyAsCoverage;\n        babylonMaterial.useSpecularOverAlpha = !this._parent.transparencyAsCoverage;\n        babylonMaterial.transparencyMode = _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial.PBRMATERIAL_OPAQUE;\n        babylonMaterial.metallic = 1;\n        babylonMaterial.roughness = 1;\n        return babylonMaterial;\n    }\n    /**\n     * Creates a Babylon material from a glTF material.\n     * @param context The context when loading the asset\n     * @param material The glTF material property\n     * @param babylonDrawMode The draw mode for the Babylon material\n     * @returns The Babylon material\n     */\n    createMaterial(context, material, babylonDrawMode) {\n        const extensionPromise = this._extensionsCreateMaterial(context, material, babylonDrawMode);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        const name = material.name || `material${material.index}`;\n        const babylonMaterial = this._createDefaultMaterial(name, babylonDrawMode);\n        return babylonMaterial;\n    }\n    /**\n     * Loads properties from a glTF material into a Babylon material.\n     * @param context The context when loading the asset\n     * @param material The glTF material property\n     * @param babylonMaterial The Babylon material\n     * @returns A promise that resolves when the load is complete\n     */\n    loadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        const extensionPromise = this._extensionsLoadMaterialPropertiesAsync(context, material, babylonMaterial);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        const promises = new Array();\n        promises.push(this.loadMaterialBasePropertiesAsync(context, material, babylonMaterial));\n        if (material.pbrMetallicRoughness) {\n            promises.push(this._loadMaterialMetallicRoughnessPropertiesAsync(`${context}/pbrMetallicRoughness`, material.pbrMetallicRoughness, babylonMaterial));\n        }\n        this.loadMaterialAlphaProperties(context, material, babylonMaterial);\n        return Promise.all(promises).then(() => { });\n    }\n    /**\n     * Loads the normal, occlusion, and emissive properties from a glTF material into a Babylon material.\n     * @param context The context when loading the asset\n     * @param material The glTF material property\n     * @param babylonMaterial The Babylon material\n     * @returns A promise that resolves when the load is complete\n     */\n    loadMaterialBasePropertiesAsync(context, material, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const promises = new Array();\n        babylonMaterial.emissiveColor = material.emissiveFactor ? _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3.FromArray(material.emissiveFactor) : new _babylonjs_core_Maths_math_color_js__WEBPACK_IMPORTED_MODULE_2__.Color3(0, 0, 0);\n        if (material.doubleSided) {\n            babylonMaterial.backFaceCulling = false;\n            babylonMaterial.twoSidedLighting = true;\n        }\n        if (material.normalTexture) {\n            material.normalTexture.nonColorData = true;\n            promises.push(this.loadTextureInfoAsync(`${context}/normalTexture`, material.normalTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Normal)`;\n                babylonMaterial.bumpTexture = texture;\n            }));\n            babylonMaterial.invertNormalMapX = !this._babylonScene.useRightHandedSystem;\n            babylonMaterial.invertNormalMapY = this._babylonScene.useRightHandedSystem;\n            if (material.normalTexture.scale != undefined && babylonMaterial.bumpTexture) {\n                babylonMaterial.bumpTexture.level = material.normalTexture.scale;\n            }\n            babylonMaterial.forceIrradianceInFragment = true;\n        }\n        if (material.occlusionTexture) {\n            material.occlusionTexture.nonColorData = true;\n            promises.push(this.loadTextureInfoAsync(`${context}/occlusionTexture`, material.occlusionTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Occlusion)`;\n                babylonMaterial.ambientTexture = texture;\n            }));\n            babylonMaterial.useAmbientInGrayScale = true;\n            if (material.occlusionTexture.strength != undefined) {\n                babylonMaterial.ambientTextureStrength = material.occlusionTexture.strength;\n            }\n        }\n        if (material.emissiveTexture) {\n            promises.push(this.loadTextureInfoAsync(`${context}/emissiveTexture`, material.emissiveTexture, (texture) => {\n                texture.name = `${babylonMaterial.name} (Emissive)`;\n                babylonMaterial.emissiveTexture = texture;\n            }));\n        }\n        return Promise.all(promises).then(() => { });\n    }\n    /**\n     * Loads the alpha properties from a glTF material into a Babylon material.\n     * Must be called after the setting the albedo texture of the Babylon material when the material has an albedo texture.\n     * @param context The context when loading the asset\n     * @param material The glTF material property\n     * @param babylonMaterial The Babylon material\n     */\n    loadMaterialAlphaProperties(context, material, babylonMaterial) {\n        if (!(babylonMaterial instanceof _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial)) {\n            throw new Error(`${context}: Material type not supported`);\n        }\n        const alphaMode = material.alphaMode || \"OPAQUE\" /* MaterialAlphaMode.OPAQUE */;\n        switch (alphaMode) {\n            case \"OPAQUE\" /* MaterialAlphaMode.OPAQUE */: {\n                babylonMaterial.transparencyMode = _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial.PBRMATERIAL_OPAQUE;\n                babylonMaterial.alpha = 1.0; // Force alpha to 1.0 for opaque mode.\n                break;\n            }\n            case \"MASK\" /* MaterialAlphaMode.MASK */: {\n                babylonMaterial.transparencyMode = _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial.PBRMATERIAL_ALPHATEST;\n                babylonMaterial.alphaCutOff = material.alphaCutoff == undefined ? 0.5 : material.alphaCutoff;\n                if (babylonMaterial.albedoTexture) {\n                    babylonMaterial.albedoTexture.hasAlpha = true;\n                }\n                break;\n            }\n            case \"BLEND\" /* MaterialAlphaMode.BLEND */: {\n                babylonMaterial.transparencyMode = _babylonjs_core_Materials_PBR_pbrMaterial_js__WEBPACK_IMPORTED_MODULE_11__.PBRMaterial.PBRMATERIAL_ALPHABLEND;\n                if (babylonMaterial.albedoTexture) {\n                    babylonMaterial.albedoTexture.hasAlpha = true;\n                    babylonMaterial.useAlphaFromAlbedoTexture = true;\n                }\n                break;\n            }\n            default: {\n                throw new Error(`${context}/alphaMode: Invalid value (${material.alphaMode})`);\n            }\n        }\n    }\n    /**\n     * Loads a glTF texture info.\n     * @param context The context when loading the asset\n     * @param textureInfo The glTF texture info property\n     * @param assign A function called synchronously after parsing the glTF properties\n     * @returns A promise that resolves with the loaded Babylon texture when the load is complete\n     */\n    loadTextureInfoAsync(context, textureInfo, assign = () => { }) {\n        const extensionPromise = this._extensionsLoadTextureInfoAsync(context, textureInfo, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        this.logOpen(`${context}`);\n        if (textureInfo.texCoord >= 6) {\n            throw new Error(`${context}/texCoord: Invalid value (${textureInfo.texCoord})`);\n        }\n        const texture = ArrayItem.Get(`${context}/index`, this._gltf.textures, textureInfo.index);\n        texture._textureInfo = textureInfo;\n        const promise = this._loadTextureAsync(`/textures/${textureInfo.index}`, texture, (babylonTexture) => {\n            babylonTexture.coordinatesIndex = textureInfo.texCoord || 0;\n            GLTFLoader.AddPointerMetadata(babylonTexture, context);\n            this._parent.onTextureLoadedObservable.notifyObservers(babylonTexture);\n            assign(babylonTexture);\n        });\n        this.logClose();\n        return promise;\n    }\n    /**\n     * @internal\n     */\n    _loadTextureAsync(context, texture, assign = () => { }) {\n        const extensionPromise = this._extensionsLoadTextureAsync(context, texture, assign);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        this.logOpen(`${context} ${texture.name || \"\"}`);\n        const sampler = texture.sampler == undefined ? GLTFLoader.DefaultSampler : ArrayItem.Get(`${context}/sampler`, this._gltf.samplers, texture.sampler);\n        const image = ArrayItem.Get(`${context}/source`, this._gltf.images, texture.source);\n        const promise = this._createTextureAsync(context, sampler, image, assign, undefined, !texture._textureInfo.nonColorData);\n        this.logClose();\n        return promise;\n    }\n    /**\n     * @internal\n     */\n    _createTextureAsync(context, sampler, image, assign = () => { }, textureLoaderOptions, useSRGBBuffer) {\n        const samplerData = this._loadSampler(`/samplers/${sampler.index}`, sampler);\n        const promises = new Array();\n        const deferred = new _babylonjs_core_Misc_deferred_js__WEBPACK_IMPORTED_MODULE_0__.Deferred();\n        this._babylonScene._blockEntityCollection = !!this._assetContainer;\n        const textureCreationOptions = {\n            noMipmap: samplerData.noMipMaps,\n            invertY: false,\n            samplingMode: samplerData.samplingMode,\n            onLoad: () => {\n                if (!this._disposed) {\n                    deferred.resolve();\n                }\n            },\n            onError: (message, exception) => {\n                if (!this._disposed) {\n                    deferred.reject(new Error(`${context}: ${exception && exception.message ? exception.message : message || \"Failed to load texture\"}`));\n                }\n            },\n            mimeType: image.mimeType,\n            loaderOptions: textureLoaderOptions,\n            useSRGBBuffer: !!useSRGBBuffer && this._parent.useSRGBBuffers,\n        };\n        const babylonTexture = new _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture(null, this._babylonScene, textureCreationOptions);\n        babylonTexture._parentContainer = this._assetContainer;\n        this._babylonScene._blockEntityCollection = false;\n        promises.push(deferred.promise);\n        promises.push(this.loadImageAsync(`/images/${image.index}`, image).then((data) => {\n            const name = image.uri || `${this._fileName}#image${image.index}`;\n            const dataUrl = `data:${this._uniqueRootUrl}${name}`;\n            babylonTexture.updateURL(dataUrl, data);\n        }));\n        babylonTexture.wrapU = samplerData.wrapU;\n        babylonTexture.wrapV = samplerData.wrapV;\n        assign(babylonTexture);\n        return Promise.all(promises).then(() => {\n            return babylonTexture;\n        });\n    }\n    _loadSampler(context, sampler) {\n        if (!sampler._data) {\n            sampler._data = {\n                noMipMaps: sampler.minFilter === 9728 /* TextureMinFilter.NEAREST */ || sampler.minFilter === 9729 /* TextureMinFilter.LINEAR */,\n                samplingMode: GLTFLoader._GetTextureSamplingMode(context, sampler),\n                wrapU: GLTFLoader._GetTextureWrapMode(`${context}/wrapS`, sampler.wrapS),\n                wrapV: GLTFLoader._GetTextureWrapMode(`${context}/wrapT`, sampler.wrapT),\n            };\n        }\n        return sampler._data;\n    }\n    /**\n     * Loads a glTF image.\n     * @param context The context when loading the asset\n     * @param image The glTF image property\n     * @returns A promise that resolves with the loaded data when the load is complete\n     */\n    loadImageAsync(context, image) {\n        if (!image._data) {\n            this.logOpen(`${context} ${image.name || \"\"}`);\n            if (image.uri) {\n                image._data = this.loadUriAsync(`${context}/uri`, image, image.uri);\n            }\n            else {\n                const bufferView = ArrayItem.Get(`${context}/bufferView`, this._gltf.bufferViews, image.bufferView);\n                image._data = this.loadBufferViewAsync(`/bufferViews/${bufferView.index}`, bufferView);\n            }\n            this.logClose();\n        }\n        return image._data;\n    }\n    /**\n     * Loads a glTF uri.\n     * @param context The context when loading the asset\n     * @param property The glTF property associated with the uri\n     * @param uri The base64 or relative uri\n     * @returns A promise that resolves with the loaded data when the load is complete\n     */\n    loadUriAsync(context, property, uri) {\n        const extensionPromise = this._extensionsLoadUriAsync(context, property, uri);\n        if (extensionPromise) {\n            return extensionPromise;\n        }\n        if (!GLTFLoader._ValidateUri(uri)) {\n            throw new Error(`${context}: '${uri}' is invalid`);\n        }\n        if ((0,_babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__.IsBase64DataUrl)(uri)) {\n            const data = new Uint8Array((0,_babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__.DecodeBase64UrlToBinary)(uri));\n            this.log(`${context}: Decoded ${uri.substr(0, 64)}... (${data.length} bytes)`);\n            return Promise.resolve(data);\n        }\n        this.log(`${context}: Loading ${uri}`);\n        return this._parent.preprocessUrlAsync(this._rootUrl + uri).then((url) => {\n            return new Promise((resolve, reject) => {\n                this._parent._loadFile(this._babylonScene, url, (data) => {\n                    if (!this._disposed) {\n                        this.log(`${context}: Loaded ${uri} (${data.byteLength} bytes)`);\n                        resolve(new Uint8Array(data));\n                    }\n                }, true, (request) => {\n                    reject(new _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_21__.LoadFileError(`${context}: Failed to load '${uri}'${request ? \": \" + request.status + \" \" + request.statusText : \"\"}`, request));\n                });\n            });\n        });\n    }\n    /**\n     * Adds a JSON pointer to the _internalMetadata of the Babylon object at `<object>._internalMetadata.gltf.pointers`.\n     * @param babylonObject the Babylon object with _internalMetadata\n     * @param pointer the JSON pointer\n     */\n    static AddPointerMetadata(babylonObject, pointer) {\n        babylonObject.metadata = babylonObject.metadata || {};\n        const metadata = (babylonObject._internalMetadata = babylonObject._internalMetadata || {});\n        const gltf = (metadata.gltf = metadata.gltf || {});\n        const pointers = (gltf.pointers = gltf.pointers || []);\n        pointers.push(pointer);\n    }\n    static _GetTextureWrapMode(context, mode) {\n        // Set defaults if undefined\n        mode = mode == undefined ? 10497 /* TextureWrapMode.REPEAT */ : mode;\n        switch (mode) {\n            case 33071 /* TextureWrapMode.CLAMP_TO_EDGE */:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.CLAMP_ADDRESSMODE;\n            case 33648 /* TextureWrapMode.MIRRORED_REPEAT */:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.MIRROR_ADDRESSMODE;\n            case 10497 /* TextureWrapMode.REPEAT */:\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.WRAP_ADDRESSMODE;\n            default:\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}: Invalid value (${mode})`);\n                return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.WRAP_ADDRESSMODE;\n        }\n    }\n    static _GetTextureSamplingMode(context, sampler) {\n        // Set defaults if undefined\n        const magFilter = sampler.magFilter == undefined ? 9729 /* TextureMagFilter.LINEAR */ : sampler.magFilter;\n        const minFilter = sampler.minFilter == undefined ? 9987 /* TextureMinFilter.LINEAR_MIPMAP_LINEAR */ : sampler.minFilter;\n        if (magFilter === 9729 /* TextureMagFilter.LINEAR */) {\n            switch (minFilter) {\n                case 9728 /* TextureMinFilter.NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_NEAREST;\n                case 9729 /* TextureMinFilter.LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_LINEAR;\n                case 9984 /* TextureMinFilter.NEAREST_MIPMAP_NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_NEAREST_MIPNEAREST;\n                case 9985 /* TextureMinFilter.LINEAR_MIPMAP_NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_LINEAR_MIPNEAREST;\n                case 9986 /* TextureMinFilter.NEAREST_MIPMAP_LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_NEAREST_MIPLINEAR;\n                case 9987 /* TextureMinFilter.LINEAR_MIPMAP_LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_LINEAR_MIPLINEAR;\n                default:\n                    _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}/minFilter: Invalid value (${minFilter})`);\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.LINEAR_LINEAR_MIPLINEAR;\n            }\n        }\n        else {\n            if (magFilter !== 9728 /* TextureMagFilter.NEAREST */) {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}/magFilter: Invalid value (${magFilter})`);\n            }\n            switch (minFilter) {\n                case 9728 /* TextureMinFilter.NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_NEAREST;\n                case 9729 /* TextureMinFilter.LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_LINEAR;\n                case 9984 /* TextureMinFilter.NEAREST_MIPMAP_NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_NEAREST_MIPNEAREST;\n                case 9985 /* TextureMinFilter.LINEAR_MIPMAP_NEAREST */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_LINEAR_MIPNEAREST;\n                case 9986 /* TextureMinFilter.NEAREST_MIPMAP_LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_NEAREST_MIPLINEAR;\n                case 9987 /* TextureMinFilter.LINEAR_MIPMAP_LINEAR */:\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_LINEAR_MIPLINEAR;\n                default:\n                    _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}/minFilter: Invalid value (${minFilter})`);\n                    return _babylonjs_core_Materials_Textures_texture_js__WEBPACK_IMPORTED_MODULE_12__.Texture.NEAREST_NEAREST_MIPNEAREST;\n            }\n        }\n    }\n    static _GetTypedArrayConstructor(context, componentType) {\n        switch (componentType) {\n            case 5120 /* AccessorComponentType.BYTE */:\n                return Int8Array;\n            case 5121 /* AccessorComponentType.UNSIGNED_BYTE */:\n                return Uint8Array;\n            case 5122 /* AccessorComponentType.SHORT */:\n                return Int16Array;\n            case 5123 /* AccessorComponentType.UNSIGNED_SHORT */:\n                return Uint16Array;\n            case 5125 /* AccessorComponentType.UNSIGNED_INT */:\n                return Uint32Array;\n            case 5126 /* AccessorComponentType.FLOAT */:\n                return Float32Array;\n            default:\n                throw new Error(`${context}: Invalid component type ${componentType}`);\n        }\n    }\n    static _GetTypedArray(context, componentType, bufferView, byteOffset, length) {\n        const buffer = bufferView.buffer;\n        byteOffset = bufferView.byteOffset + (byteOffset || 0);\n        const constructor = GLTFLoader._GetTypedArrayConstructor(`${context}/componentType`, componentType);\n        const componentTypeLength = _babylonjs_core_Buffers_buffer_js__WEBPACK_IMPORTED_MODULE_14__.VertexBuffer.GetTypeByteLength(componentType);\n        if (byteOffset % componentTypeLength !== 0) {\n            // HACK: Copy the buffer if byte offset is not a multiple of component type byte length.\n            _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_22__.Logger.Warn(`${context}: Copying buffer as byte offset (${byteOffset}) is not a multiple of component type byte length (${componentTypeLength})`);\n            return new constructor(buffer.slice(byteOffset, byteOffset + length * componentTypeLength), 0);\n        }\n        return new constructor(buffer, byteOffset, length);\n    }\n    static _GetNumComponents(context, type) {\n        switch (type) {\n            case \"SCALAR\":\n                return 1;\n            case \"VEC2\":\n                return 2;\n            case \"VEC3\":\n                return 3;\n            case \"VEC4\":\n                return 4;\n            case \"MAT2\":\n                return 4;\n            case \"MAT3\":\n                return 9;\n            case \"MAT4\":\n                return 16;\n        }\n        throw new Error(`${context}: Invalid type (${type})`);\n    }\n    static _ValidateUri(uri) {\n        return _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_3__.Tools.IsBase64(uri) || uri.indexOf(\"..\") === -1;\n    }\n    /**\n     * @internal\n     */\n    static _GetDrawMode(context, mode) {\n        if (mode == undefined) {\n            mode = 4 /* MeshPrimitiveMode.TRIANGLES */;\n        }\n        switch (mode) {\n            case 0 /* MeshPrimitiveMode.POINTS */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.PointListDrawMode;\n            case 1 /* MeshPrimitiveMode.LINES */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.LineListDrawMode;\n            case 2 /* MeshPrimitiveMode.LINE_LOOP */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.LineLoopDrawMode;\n            case 3 /* MeshPrimitiveMode.LINE_STRIP */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.LineStripDrawMode;\n            case 4 /* MeshPrimitiveMode.TRIANGLES */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.TriangleFillMode;\n            case 5 /* MeshPrimitiveMode.TRIANGLE_STRIP */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.TriangleStripDrawMode;\n            case 6 /* MeshPrimitiveMode.TRIANGLE_FAN */:\n                return _babylonjs_core_Materials_material_js__WEBPACK_IMPORTED_MODULE_10__.Material.TriangleFanDrawMode;\n        }\n        throw new Error(`${context}: Invalid mesh primitive mode (${mode})`);\n    }\n    _compileMaterialsAsync() {\n        this._parent._startPerformanceCounter(\"Compile materials\");\n        const promises = new Array();\n        if (this._gltf.materials) {\n            for (const material of this._gltf.materials) {\n                if (material._data) {\n                    for (const babylonDrawMode in material._data) {\n                        const babylonData = material._data[babylonDrawMode];\n                        for (const babylonMesh of babylonData.babylonMeshes) {\n                            // Ensure nonUniformScaling is set if necessary.\n                            babylonMesh.computeWorldMatrix(true);\n                            const babylonMaterial = babylonData.babylonMaterial;\n                            promises.push(babylonMaterial.forceCompilationAsync(babylonMesh));\n                            promises.push(babylonMaterial.forceCompilationAsync(babylonMesh, { useInstances: true }));\n                            if (this._parent.useClipPlane) {\n                                promises.push(babylonMaterial.forceCompilationAsync(babylonMesh, { clipPlane: true }));\n                                promises.push(babylonMaterial.forceCompilationAsync(babylonMesh, { clipPlane: true, useInstances: true }));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return Promise.all(promises).then(() => {\n            this._parent._endPerformanceCounter(\"Compile materials\");\n        });\n    }\n    _compileShadowGeneratorsAsync() {\n        this._parent._startPerformanceCounter(\"Compile shadow generators\");\n        const promises = new Array();\n        const lights = this._babylonScene.lights;\n        for (const light of lights) {\n            const generator = light.getShadowGenerator();\n            if (generator) {\n                promises.push(generator.forceCompilationAsync());\n            }\n        }\n        return Promise.all(promises).then(() => {\n            this._parent._endPerformanceCounter(\"Compile shadow generators\");\n        });\n    }\n    _forEachExtensions(action) {\n        for (const extension of this._extensions) {\n            if (extension.enabled) {\n                action(extension);\n            }\n        }\n    }\n    _applyExtensions(property, functionName, actionAsync) {\n        for (const extension of this._extensions) {\n            if (extension.enabled) {\n                const id = `${extension.name}.${functionName}`;\n                const loaderProperty = property;\n                loaderProperty._activeLoaderExtensionFunctions = loaderProperty._activeLoaderExtensionFunctions || {};\n                const activeLoaderExtensionFunctions = loaderProperty._activeLoaderExtensionFunctions;\n                if (!activeLoaderExtensionFunctions[id]) {\n                    activeLoaderExtensionFunctions[id] = true;\n                    try {\n                        const result = actionAsync(extension);\n                        if (result) {\n                            return result;\n                        }\n                    }\n                    finally {\n                        delete activeLoaderExtensionFunctions[id];\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    _extensionsOnLoading() {\n        this._forEachExtensions((extension) => extension.onLoading && extension.onLoading());\n    }\n    _extensionsOnReady() {\n        this._forEachExtensions((extension) => extension.onReady && extension.onReady());\n    }\n    _extensionsLoadSceneAsync(context, scene) {\n        return this._applyExtensions(scene, \"loadScene\", (extension) => extension.loadSceneAsync && extension.loadSceneAsync(context, scene));\n    }\n    _extensionsLoadNodeAsync(context, node, assign) {\n        return this._applyExtensions(node, \"loadNode\", (extension) => extension.loadNodeAsync && extension.loadNodeAsync(context, node, assign));\n    }\n    _extensionsLoadCameraAsync(context, camera, assign) {\n        return this._applyExtensions(camera, \"loadCamera\", (extension) => extension.loadCameraAsync && extension.loadCameraAsync(context, camera, assign));\n    }\n    _extensionsLoadVertexDataAsync(context, primitive, babylonMesh) {\n        return this._applyExtensions(primitive, \"loadVertexData\", (extension) => extension._loadVertexDataAsync && extension._loadVertexDataAsync(context, primitive, babylonMesh));\n    }\n    _extensionsLoadMeshPrimitiveAsync(context, name, node, mesh, primitive, assign) {\n        return this._applyExtensions(primitive, \"loadMeshPrimitive\", (extension) => extension._loadMeshPrimitiveAsync && extension._loadMeshPrimitiveAsync(context, name, node, mesh, primitive, assign));\n    }\n    _extensionsLoadMaterialAsync(context, material, babylonMesh, babylonDrawMode, assign) {\n        return this._applyExtensions(material, \"loadMaterial\", (extension) => extension._loadMaterialAsync && extension._loadMaterialAsync(context, material, babylonMesh, babylonDrawMode, assign));\n    }\n    _extensionsCreateMaterial(context, material, babylonDrawMode) {\n        return this._applyExtensions(material, \"createMaterial\", (extension) => extension.createMaterial && extension.createMaterial(context, material, babylonDrawMode));\n    }\n    _extensionsLoadMaterialPropertiesAsync(context, material, babylonMaterial) {\n        return this._applyExtensions(material, \"loadMaterialProperties\", (extension) => extension.loadMaterialPropertiesAsync && extension.loadMaterialPropertiesAsync(context, material, babylonMaterial));\n    }\n    _extensionsLoadTextureInfoAsync(context, textureInfo, assign) {\n        return this._applyExtensions(textureInfo, \"loadTextureInfo\", (extension) => extension.loadTextureInfoAsync && extension.loadTextureInfoAsync(context, textureInfo, assign));\n    }\n    _extensionsLoadTextureAsync(context, texture, assign) {\n        return this._applyExtensions(texture, \"loadTexture\", (extension) => extension._loadTextureAsync && extension._loadTextureAsync(context, texture, assign));\n    }\n    _extensionsLoadAnimationAsync(context, animation) {\n        return this._applyExtensions(animation, \"loadAnimation\", (extension) => extension.loadAnimationAsync && extension.loadAnimationAsync(context, animation));\n    }\n    _extensionsLoadAnimationChannelAsync(context, animationContext, animation, channel, onLoad) {\n        return this._applyExtensions(animation, \"loadAnimationChannel\", (extension) => extension._loadAnimationChannelAsync && extension._loadAnimationChannelAsync(context, animationContext, animation, channel, onLoad));\n    }\n    _extensionsLoadSkinAsync(context, node, skin) {\n        return this._applyExtensions(skin, \"loadSkin\", (extension) => extension._loadSkinAsync && extension._loadSkinAsync(context, node, skin));\n    }\n    _extensionsLoadUriAsync(context, property, uri) {\n        return this._applyExtensions(property, \"loadUri\", (extension) => extension._loadUriAsync && extension._loadUriAsync(context, property, uri));\n    }\n    _extensionsLoadBufferViewAsync(context, bufferView) {\n        return this._applyExtensions(bufferView, \"loadBufferView\", (extension) => extension.loadBufferViewAsync && extension.loadBufferViewAsync(context, bufferView));\n    }\n    _extensionsLoadBufferAsync(context, buffer, byteOffset, byteLength) {\n        return this._applyExtensions(buffer, \"loadBuffer\", (extension) => extension.loadBufferAsync && extension.loadBufferAsync(context, buffer, byteOffset, byteLength));\n    }\n    /**\n     * Helper method called by a loader extension to load an glTF extension.\n     * @param context The context when loading the asset\n     * @param property The glTF property to load the extension from\n     * @param extensionName The name of the extension to load\n     * @param actionAsync The action to run\n     * @returns The promise returned by actionAsync or null if the extension does not exist\n     */\n    static LoadExtensionAsync(context, property, extensionName, actionAsync) {\n        if (!property.extensions) {\n            return null;\n        }\n        const extensions = property.extensions;\n        const extension = extensions[extensionName];\n        if (!extension) {\n            return null;\n        }\n        return actionAsync(`${context}/extensions/${extensionName}`, extension);\n    }\n    /**\n     * Helper method called by a loader extension to load a glTF extra.\n     * @param context The context when loading the asset\n     * @param property The glTF property to load the extra from\n     * @param extensionName The name of the extension to load\n     * @param actionAsync The action to run\n     * @returns The promise returned by actionAsync or null if the extra does not exist\n     */\n    static LoadExtraAsync(context, property, extensionName, actionAsync) {\n        if (!property.extras) {\n            return null;\n        }\n        const extras = property.extras;\n        const extra = extras[extensionName];\n        if (!extra) {\n            return null;\n        }\n        return actionAsync(`${context}/extras/${extensionName}`, extra);\n    }\n    /**\n     * Checks for presence of an extension.\n     * @param name The name of the extension to check\n     * @returns A boolean indicating the presence of the given extension name in `extensionsUsed`\n     */\n    isExtensionUsed(name) {\n        return !!this._gltf.extensionsUsed && this._gltf.extensionsUsed.indexOf(name) !== -1;\n    }\n    /**\n     * Increments the indentation level and logs a message.\n     * @param message The message to log\n     */\n    logOpen(message) {\n        this._parent._logOpen(message);\n    }\n    /**\n     * Decrements the indentation level.\n     */\n    logClose() {\n        this._parent._logClose();\n    }\n    /**\n     * Logs a message\n     * @param message The message to log\n     */\n    log(message) {\n        this._parent._log(message);\n    }\n    /**\n     * Starts a performance counter.\n     * @param counterName The name of the performance counter\n     */\n    startPerformanceCounter(counterName) {\n        this._parent._startPerformanceCounter(counterName);\n    }\n    /**\n     * Ends a performance counter.\n     * @param counterName The name of the performance counter\n     */\n    endPerformanceCounter(counterName) {\n        this._parent._endPerformanceCounter(counterName);\n    }\n}\nGLTFLoader._RegisteredExtensions = {};\n/**\n * The default glTF sampler.\n */\nGLTFLoader.DefaultSampler = { index: -1 };\n_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_20__.GLTFFileLoader._CreateGLTF2Loader = (parent) => new GLTFLoader(parent);\n//# sourceMappingURL=glTFLoader.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL2dsVEZMb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTREO0FBQ21DO0FBQ2xDO0FBQ1A7QUFDSztBQUNRO0FBQ29CO0FBQ1Q7QUFDekI7QUFDUTtBQUNJO0FBQ1U7QUFDSDtBQUNBO0FBQ0M7QUFDWDtBQUNRO0FBQ2hCO0FBQ2E7QUFDYztBQUNvRDtBQUN6QjtBQUNwRDtBQUNlO0FBQ1Y7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVEsMEJBQTBCLE1BQU07QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNCQUFzQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUVBQU0sa0NBQWtDLEtBQUs7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxLQUFLO0FBQ3JFO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixRQUFRLEVBQUUsV0FBVztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnRUFBZSxDQUFDLGdFQUFlLFdBQVcsS0FBSyxnRUFBZSxDQUFDLGdFQUFlLFFBQVE7QUFDdkksb0RBQW9ELGdFQUFlLENBQUMsZ0VBQWUsV0FBVyxLQUFLLGdFQUFlLENBQUMsZ0VBQWUsV0FBVztBQUM3STtBQUNBO0FBQ0EsbUNBQW1DLGdFQUFlO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLHlCQUF5QjtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsWUFBWTtBQUM3RTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaUNBQWlDO0FBQ2pFO0FBQ0E7QUFDQSw0Q0FBNEMsNEVBQVE7QUFDcEQsNkdBQTZHO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxnRUFBZTtBQUN0RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdFQUFlO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtRUFBTSwrQkFBK0Isd0JBQXdCLDJDQUEyQyxvQkFBb0I7QUFDaEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQU0sNEZBQTRGLGdCQUFnQixNQUFNLEtBQUs7QUFDN0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELE1BQU07QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpRUFBSTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrRUFBOEI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0VBQThCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLGtDQUFrQztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVMsRUFBRSxpQkFBaUI7QUFDcEQ7QUFDQTtBQUNBLDhDQUE4QyxRQUFRLFNBQVMsTUFBTTtBQUNyRSwyREFBMkQsV0FBVztBQUN0RTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsaUZBQVk7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDZFQUE0QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkVBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2RUFBNEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQU0sd0NBQXdDLGdDQUFnQztBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0Esd0JBQXdCLFNBQVMsRUFBRSxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsUUFBUTtBQUN4RCwrREFBK0QsYUFBYTtBQUM1RTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsUUFBUSxZQUFZLE1BQU07QUFDakYsK0RBQStELGdCQUFnQjtBQUMvRTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELFdBQVc7QUFDNUQ7QUFDQSxzQ0FBc0MsbUZBQWE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFFBQVE7QUFDdEQsNkRBQTZELFdBQVc7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxRQUFRO0FBQ3RELDZEQUE2RCxXQUFXO0FBQ3hFO0FBQ0E7QUFDQSx1SUFBdUk7QUFDdkksa0RBQWtELFFBQVE7QUFDMUQsZ0VBQWdFLFdBQVc7QUFDM0U7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLFdBQVc7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0Ysc0VBQXNFO0FBQ3hKLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUyxFQUFFLGdCQUFnQjtBQUNuRCx5Q0FBeUMsV0FBVztBQUNwRDtBQUNBO0FBQ0EsMERBQTBELFFBQVEsY0FBYyxnQkFBZ0I7QUFDaEc7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsbUZBQWE7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsUUFBUSxjQUFjLGdCQUFnQixNQUFNLEtBQUssWUFBWSxnQkFBZ0I7QUFDM0k7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpRUFBSTtBQUN4QztBQUNBO0FBQ0Esb0dBQW9HLDRFQUFRLG1DQUFtQyw0RUFBUTtBQUN2SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxRQUFRO0FBQzFELG9FQUFvRSxlQUFlO0FBQ25GO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0Esb0NBQW9DLHlFQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFFBQVE7QUFDdEQsdUVBQXVFLGVBQWU7QUFDdEY7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLFFBQVEsY0FBYyxLQUFLO0FBQ3pFLHNFQUFzRSxlQUFlO0FBQ3JGLHNEQUFzRCw0RUFBWTtBQUNsRTtBQUNBLG9DQUFvQyw0RUFBVTtBQUM5QyxvQ0FBb0MsNEVBQVU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxrRkFBWTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYix3QkFBd0IsNEVBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDRFQUFZO0FBQzlDLGdDQUFnQyw0RUFBWTtBQUM1QyxpQ0FBaUMsNEVBQVk7QUFDN0Msb0NBQW9DLDRFQUFZO0FBQ2hELG9DQUFvQyw0RUFBWTtBQUNoRCxvQ0FBb0MsNEVBQVk7QUFDaEQsb0NBQW9DLDRFQUFZO0FBQ2hELG9DQUFvQyw0RUFBWTtBQUNoRCxvQ0FBb0MsNEVBQVk7QUFDaEQsa0NBQWtDLDRFQUFZO0FBQzlDLG1DQUFtQyw0RUFBWTtBQUMvQyxrQ0FBa0MsNEVBQVk7QUFDOUMsbUNBQW1DLDRFQUFZO0FBQy9DLGlDQUFpQyw0RUFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsNEZBQWtCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrQ0FBa0M7QUFDOUQ7QUFDQSwwRUFBMEUsTUFBTTtBQUNoRix5REFBeUQsOEVBQVc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVDQUF1QztBQUNuRTtBQUNBLGtFQUFrRSxRQUFRLFdBQVcsTUFBTTtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxRQUFRLEdBQUcsVUFBVTtBQUNuRSxxRUFBcUUsZUFBZTtBQUNwRjtBQUNBLGFBQWE7QUFDYjtBQUNBLGtDQUFrQyw0RUFBWTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1QsZ0NBQWdDLDRFQUFZO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVCxpQ0FBaUMsNEVBQVk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1QsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlFQUFPO0FBQzlCLHVCQUF1Qiw0RUFBVTtBQUNqQyxzQkFBc0IseUVBQU87QUFDN0I7QUFDQSwyQkFBMkIsd0VBQU07QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUVBQU87QUFDbEM7QUFDQTtBQUNBLDJCQUEyQiw0RUFBVTtBQUNyQztBQUNBO0FBQ0EsMEJBQTBCLHlFQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxXQUFXO0FBQ2pEO0FBQ0Esb0NBQW9DLHVFQUFRO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELFFBQVE7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFVBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELFFBQVE7QUFDbEU7QUFDQSx3QkFBd0IsbUVBQU0sU0FBUyxRQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQU0sU0FBUyxRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLFFBQVEsVUFBVSxNQUFNO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFFBQVEsR0FBRyxNQUFNO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFNLGdCQUFnQixXQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrREFBSSxzQkFBc0IsV0FBVztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLFFBQVE7QUFDbEQsMERBQTBELGVBQWU7QUFDekU7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHdFQUFNO0FBQ3JDO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3RUFBTTtBQUNwQixjQUFjLHdFQUFNLHNCQUFzQix5RUFBTyx5QkFBeUIseUVBQU8sd0JBQXdCLDRFQUFVLDRCQUE0Qiw0RUFBVSxnQ0FBZ0MseUVBQU8sK0JBQStCLHlFQUFPO0FBQ3RPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTLEVBQUUsa0JBQWtCO0FBQ3JEO0FBQ0Esa0NBQWtDLDZFQUFVLHlCQUF5QixhQUFhLEdBQUcseUVBQU87QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsUUFBUTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQSxxQ0FBcUMscUVBQU07QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVEseUJBQXlCLFlBQVk7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwyQkFBMkI7QUFDdkQ7QUFDQSxpRUFBaUUsZ0JBQWdCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdGQUFjLCtCQUErQixnQkFBZ0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsUUFBUSxZQUFZLGNBQWM7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1RUFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVFQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUVBQWlCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1RUFBaUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVEsK0JBQStCLG9CQUFvQjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxRQUFRO0FBQ2pELGtEQUFrRCxpQkFBaUIsWUFBWSxnQkFBZ0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUdBQXlCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNCQUFzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhCQUE4QixnQkFBZ0IsRUFBRSxVQUFVLGNBQWMsR0FBRyxjQUFjO0FBQzdIO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVEsaUNBQWlDLHNCQUFzQjtBQUNsRztBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQsZ0RBQWdELFFBQVE7QUFDeEQ7QUFDQSx1REFBdUQsb0JBQW9CO0FBQzNFLHVEQUF1RCxxQkFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsUUFBUTtBQUM1RDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsUUFBUTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUSxJQUFJLFVBQVU7QUFDekQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFFBQVE7QUFDaEQsNERBQTRELGFBQWE7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNEVBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hELHNFQUFzRSxpQkFBaUI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0RUFBWTtBQUNoQztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsUUFBUTtBQUNuRSwwREFBMEQsUUFBUTtBQUNsRTtBQUNBLDZEQUE2RCx3QkFBd0I7QUFDckYsNkRBQTZELHVCQUF1QjtBQUNwRjtBQUNBLGlFQUFpRSxRQUFRO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxRQUFRO0FBQ3RFO0FBQ0E7QUFDQSx3RUFBd0UsUUFBUTtBQUNoRjtBQUNBLHdCQUF3Qiw0RUFBWTtBQUNwQztBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsK0NBQStDLCtCQUErQjtBQUM5RTtBQUNBLHFEQUFxRCxnQ0FBZ0M7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUSx1QkFBdUIsY0FBYztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixRQUFRLGdDQUFnQyx1QkFBdUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxRQUFRO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hELHNFQUFzRSxpQkFBaUI7QUFDdkY7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxpQkFBaUI7QUFDOUYsdUJBQXVCLHNFQUFNO0FBQzdCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNEVBQVk7QUFDdkMsYUFBYTtBQUNiO0FBQ0E7QUFDQSxnREFBZ0QsUUFBUTtBQUN4RDtBQUNBO0FBQ0EsMkJBQTJCLDRFQUFZO0FBQ3ZDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyx1RUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsdUVBQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsUUFBUTtBQUNuRSxzQ0FBc0Msc0JBQXNCO0FBQzVEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxRQUFRO0FBQ25FLHNDQUFzQyxzQkFBc0I7QUFDNUQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixTQUFTLEVBQUUsb0JBQW9CO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msc0ZBQVc7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsc0ZBQVc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZUFBZTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsUUFBUTtBQUN4RjtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxzRkFBVztBQUNwRCwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0Esa0VBQWtFLHVFQUFNLDBDQUEwQyx1RUFBTTtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsUUFBUTtBQUMvRCxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxRQUFRO0FBQy9ELGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFFBQVE7QUFDL0Qsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBLGFBQWE7QUFDYjtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0ZBQVc7QUFDcEQsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsc0ZBQVc7QUFDOUQsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxzRkFBVztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxzRkFBVztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxRQUFRLDZCQUE2QixtQkFBbUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBLCtCQUErQixRQUFRLDRCQUE0QixxQkFBcUI7QUFDeEY7QUFDQSx5Q0FBeUMsUUFBUTtBQUNqRDtBQUNBLDREQUE0RCxrQkFBa0I7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFNBQVMsRUFBRSxtQkFBbUI7QUFDdEQsb0dBQW9HLFFBQVE7QUFDNUcsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkUsMkRBQTJELGNBQWM7QUFDekU7QUFDQSw2QkFBNkIsc0VBQVE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpREFBaUQsUUFBUSxJQUFJLHlGQUF5RjtBQUN0SjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxtRkFBTztBQUMxQztBQUNBO0FBQ0E7QUFDQSxxREFBcUQsWUFBWTtBQUNqRSx5Q0FBeUMsZUFBZSxRQUFRLFlBQVk7QUFDNUUsb0NBQW9DLG9CQUFvQixFQUFFLEtBQUs7QUFDL0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsUUFBUTtBQUNqRSx5REFBeUQsUUFBUTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsU0FBUyxFQUFFLGlCQUFpQjtBQUN4RDtBQUNBLG1EQUFtRCxRQUFRO0FBQzNEO0FBQ0E7QUFDQSxvREFBb0QsUUFBUTtBQUM1RCx1RUFBdUUsaUJBQWlCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixRQUFRLEtBQUssSUFBSTtBQUNoRDtBQUNBLFlBQVksbUZBQWU7QUFDM0Isd0NBQXdDLDJGQUF1QjtBQUMvRCx3QkFBd0IsUUFBUSxZQUFZLGtCQUFrQixPQUFPLGFBQWE7QUFDbEY7QUFDQTtBQUNBLG9CQUFvQixRQUFRLFlBQVksSUFBSTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLFdBQVcsS0FBSyxHQUFHLGlCQUFpQjtBQUNoRjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLCtCQUErQiw2RUFBYSxJQUFJLFFBQVEsb0JBQW9CLElBQUksR0FBRyxnRUFBZ0U7QUFDbkosaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRztBQUNqRyx5REFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRkFBTztBQUM5QjtBQUNBLHVCQUF1QixtRkFBTztBQUM5QjtBQUNBLHVCQUF1QixtRkFBTztBQUM5QjtBQUNBLGdCQUFnQixtRUFBTSxTQUFTLFFBQVEsbUJBQW1CLEtBQUs7QUFDL0QsdUJBQXVCLG1GQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLDJCQUEyQixtRkFBTztBQUNsQztBQUNBLG9CQUFvQixtRUFBTSxTQUFTLFFBQVEsNkJBQTZCLFVBQVU7QUFDbEYsMkJBQTJCLG1GQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1FQUFNLFNBQVMsUUFBUSw2QkFBNkIsVUFBVTtBQUM5RTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSwyQkFBMkIsbUZBQU87QUFDbEM7QUFDQSxvQkFBb0IsbUVBQU0sU0FBUyxRQUFRLDZCQUE2QixVQUFVO0FBQ2xGLDJCQUEyQixtRkFBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUSwyQkFBMkIsY0FBYztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLFFBQVE7QUFDNUUsb0NBQW9DLDRFQUFZO0FBQ2hEO0FBQ0E7QUFDQSxZQUFZLG1FQUFNLFNBQVMsUUFBUSxtQ0FBbUMsV0FBVyxxREFBcUQsb0JBQW9CO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixRQUFRLGtCQUFrQixLQUFLO0FBQzFEO0FBQ0E7QUFDQSxlQUFlLGdFQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsdUJBQXVCLDRFQUFRO0FBQy9CO0FBQ0EsMkJBQTJCLFFBQVEsaUNBQWlDLEtBQUs7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRixvQkFBb0I7QUFDbkg7QUFDQSxtR0FBbUcsaUJBQWlCO0FBQ3BILG1HQUFtRyxxQ0FBcUM7QUFDeEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGVBQWUsR0FBRyxhQUFhO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixRQUFRLGNBQWMsY0FBYztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUSxVQUFVLGNBQWM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCLCtEQUFjO0FBQ2Qsc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9nbFRGTG9hZGVyLmpzP2ZjMjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvZGVmZXJyZWQuanNcIjtcbmltcG9ydCB7IFF1YXRlcm5pb24sIFZlY3RvcjMsIE1hdHJpeCwgVG1wVmVjdG9ycyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC52ZWN0b3IuanNcIjtcbmltcG9ydCB7IENvbG9yMyB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWF0aHMvbWF0aC5jb2xvci5qc1wiO1xuaW1wb3J0IHsgVG9vbHMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvdG9vbHMuanNcIjtcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQ2FtZXJhcy9jYW1lcmEuanNcIjtcbmltcG9ydCB7IEZyZWVDYW1lcmEgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL0NhbWVyYXMvZnJlZUNhbWVyYS5qc1wiO1xuaW1wb3J0IHsgQW5pbWF0aW9uS2V5SW50ZXJwb2xhdGlvbiB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQW5pbWF0aW9ucy9hbmltYXRpb25LZXkuanNcIjtcbmltcG9ydCB7IEFuaW1hdGlvbkdyb3VwIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9BbmltYXRpb25zL2FuaW1hdGlvbkdyb3VwLmpzXCI7XG5pbXBvcnQgeyBCb25lIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9Cb25lcy9ib25lLmpzXCI7XG5pbXBvcnQgeyBTa2VsZXRvbiB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQm9uZXMvc2tlbGV0b24uanNcIjtcbmltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvbWF0ZXJpYWwuanNcIjtcbmltcG9ydCB7IFBCUk1hdGVyaWFsIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvUEJSL3Bick1hdGVyaWFsLmpzXCI7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NYXRlcmlhbHMvVGV4dHVyZXMvdGV4dHVyZS5qc1wiO1xuaW1wb3J0IHsgVHJhbnNmb3JtTm9kZSB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTWVzaGVzL3RyYW5zZm9ybU5vZGUuanNcIjtcbmltcG9ydCB7IEJ1ZmZlciwgVmVydGV4QnVmZmVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9CdWZmZXJzL2J1ZmZlci5qc1wiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01lc2hlcy9nZW9tZXRyeS5qc1wiO1xuaW1wb3J0IHsgQWJzdHJhY3RNZXNoIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvYWJzdHJhY3RNZXNoLmpzXCI7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NZXNoZXMvbWVzaC5qc1wiO1xuaW1wb3J0IHsgTW9ycGhUYXJnZXQgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01vcnBoL21vcnBoVGFyZ2V0LmpzXCI7XG5pbXBvcnQgeyBNb3JwaFRhcmdldE1hbmFnZXIgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01vcnBoL21vcnBoVGFyZ2V0TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgR0xURkZpbGVMb2FkZXIsIEdMVEZMb2FkZXJTdGF0ZSwgR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlLCBHTFRGTG9hZGVyQW5pbWF0aW9uU3RhcnRNb2RlIH0gZnJvbSBcIi4uL2dsVEZGaWxlTG9hZGVyLmpzXCI7XG5pbXBvcnQgeyBEZWNvZGVCYXNlNjRVcmxUb0JpbmFyeSwgSXNCYXNlNjREYXRhVXJsLCBMb2FkRmlsZUVycm9yIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2ZpbGVUb29scy5qc1wiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2xvZ2dlci5qc1wiO1xuaW1wb3J0IHsgQm91bmRpbmdJbmZvIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9DdWxsaW5nL2JvdW5kaW5nSW5mby5qc1wiO1xuaW1wb3J0IHsgbm9kZUFuaW1hdGlvbkRhdGEgfSBmcm9tIFwiLi9nbFRGTG9hZGVyQW5pbWF0aW9uLmpzXCI7XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDgyMTgyMDlcbmZ1bmN0aW9uIG1lcmdlRGVlcCguLi5vYmplY3RzKSB7XG4gICAgY29uc3QgaXNPYmplY3QgPSAob2JqKSA9PiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIjtcbiAgICByZXR1cm4gb2JqZWN0cy5yZWR1Y2UoKHByZXYsIG9iaikgPT4ge1xuICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcFZhbCA9IHByZXZba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IG9WYWwgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBWYWwpICYmIEFycmF5LmlzQXJyYXkob1ZhbCkpIHtcbiAgICAgICAgICAgICAgICBwcmV2W2tleV0gPSBwVmFsLmNvbmNhdCguLi5vVmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzT2JqZWN0KHBWYWwpICYmIGlzT2JqZWN0KG9WYWwpKSB7XG4gICAgICAgICAgICAgICAgcHJldltrZXldID0gbWVyZ2VEZWVwKHBWYWwsIG9WYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldltrZXldID0gb1ZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgIH0sIHt9KTtcbn1cbi8qKlxuICogSGVscGVyIGNsYXNzIGZvciB3b3JraW5nIHdpdGggYXJyYXlzIHdoZW4gbG9hZGluZyB0aGUgZ2xURiBhc3NldFxuICovXG5leHBvcnQgY2xhc3MgQXJyYXlJdGVtIHtcbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGl0ZW0gZnJvbSB0aGUgZ2l2ZW4gYXJyYXkuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgdG8gZ2V0IHRoZSBpdGVtIGZyb21cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRvIHRoZSBhcnJheVxuICAgICAqIEByZXR1cm5zIFRoZSBhcnJheSBpdGVtXG4gICAgICovXG4gICAgc3RhdGljIEdldChjb250ZXh0LCBhcnJheSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKCFhcnJheSB8fCBpbmRleCA9PSB1bmRlZmluZWQgfHwgIWFycmF5W2luZGV4XSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBGYWlsZWQgdG8gZmluZCBpbmRleCAoJHtpbmRleH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycmF5W2luZGV4XTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBpdGVtIGZyb20gdGhlIGdpdmVuIGFycmF5IG9yIHJldHVybnMgbnVsbCBpZiBub3QgYXZhaWxhYmxlLlxuICAgICAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgdG8gZ2V0IHRoZSBpdGVtIGZyb21cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHRvIHRoZSBhcnJheVxuICAgICAqIEByZXR1cm5zIFRoZSBhcnJheSBpdGVtIG9yIG51bGxcbiAgICAgKi9cbiAgICBzdGF0aWMgVHJ5R2V0KGFycmF5LCBpbmRleCkge1xuICAgICAgICBpZiAoIWFycmF5IHx8IGluZGV4ID09IHVuZGVmaW5lZCB8fCAhYXJyYXlbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlbaW5kZXhdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3NpZ24gYW4gYGluZGV4YCBmaWVsZCB0byBlYWNoIGl0ZW0gb2YgdGhlIGdpdmVuIGFycmF5LlxuICAgICAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgb2YgaXRlbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgQXNzaWduKGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFycmF5Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGFycmF5W2luZGV4XS5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZ2xURiAyLjAgbG9hZGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRGTG9hZGVyIHtcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsb2FkZXIgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBsb2FkZXIgZXh0ZW5zaW9uLlxuICAgICAqIEBwYXJhbSBmYWN0b3J5IFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyB0aGUgbG9hZGVyIGV4dGVuc2lvbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgUmVnaXN0ZXJFeHRlbnNpb24obmFtZSwgZmFjdG9yeSkge1xuICAgICAgICBpZiAoR0xURkxvYWRlci5VbnJlZ2lzdGVyRXh0ZW5zaW9uKG5hbWUpKSB7XG4gICAgICAgICAgICBMb2dnZXIuV2FybihgRXh0ZW5zaW9uIHdpdGggdGhlIG5hbWUgJyR7bmFtZX0nIGFscmVhZHkgZXhpc3RzYCk7XG4gICAgICAgIH1cbiAgICAgICAgR0xURkxvYWRlci5fUmVnaXN0ZXJlZEV4dGVuc2lvbnNbbmFtZV0gPSB7XG4gICAgICAgICAgICBmYWN0b3J5OiBmYWN0b3J5LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBhIGxvYWRlciBleHRlbnNpb24uXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGxvYWRlciBleHRlbnNpb24uXG4gICAgICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgZXh0ZW5zaW9uIGhhcyBiZWVuIHVucmVnaXN0ZXJlZFxuICAgICAqL1xuICAgIHN0YXRpYyBVbnJlZ2lzdGVyRXh0ZW5zaW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKCFHTFRGTG9hZGVyLl9SZWdpc3RlcmVkRXh0ZW5zaW9uc1tuYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBHTFRGTG9hZGVyLl9SZWdpc3RlcmVkRXh0ZW5zaW9uc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBnbFRGIEpTT04uXG4gICAgICovXG4gICAgZ2V0IGdsdGYoKSB7XG4gICAgICAgIGlmICghdGhpcy5fZ2x0Zikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZ2xURiBKU09OIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsdGY7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBCSU4gY2h1bmsgb2YgYSBiaW5hcnkgZ2xURi5cbiAgICAgKi9cbiAgICBnZXQgYmluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmluO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcGFyZW50IGZpbGUgbG9hZGVyLlxuICAgICAqL1xuICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBCYWJ5bG9uIHNjZW5lIHdoZW4gbG9hZGluZyB0aGUgYXNzZXQuXG4gICAgICovXG4gICAgZ2V0IGJhYnlsb25TY2VuZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9iYWJ5bG9uU2NlbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNjZW5lIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhYnlsb25TY2VuZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJvb3QgQmFieWxvbiBub2RlIHdoZW4gbG9hZGluZyB0aGUgYXNzZXQuXG4gICAgICovXG4gICAgZ2V0IHJvb3RCYWJ5bG9uTWVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJvb3QgdXJsIHdoZW4gbG9hZGluZyB0aGUgYXNzZXQuXG4gICAgICovXG4gICAgZ2V0IHJvb3RVcmwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yb290VXJsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jb21wbGV0ZVByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fYXNzZXRDb250YWluZXIgPSBudWxsO1xuICAgICAgICAvKiogU3RvcmFnZSAqL1xuICAgICAgICB0aGlzLl9iYWJ5bG9uTGlnaHRzID0gW107XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fZGlzYWJsZUluc3RhbmNlZE1lc2ggPSAwO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2FsbE1hdGVyaWFsc0RpcnR5UmVxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZXh0ZW5zaW9ucyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yb290VXJsID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZmlsZU5hbWUgPSBudWxsO1xuICAgICAgICB0aGlzLl91bmlxdWVSb290VXJsID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYmluID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcm9vdEJhYnlsb25NZXNoID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZGVmYXVsdEJhYnlsb25NYXRlcmlhbERhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fcG9zdFNjZW5lTG9hZEFjdGlvbnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9jb21wbGV0ZVByb21pc2VzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2V4dGVuc2lvbnMuZm9yRWFjaCgoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24uZGlzcG9zZSAmJiBleHRlbnNpb24uZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fZXh0ZW5zaW9ucy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9nbHRmID0gbnVsbDsgLy8gVE9ET1xuICAgICAgICB0aGlzLl9iaW4gPSBudWxsO1xuICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUgPSBudWxsOyAvLyBUT0RPXG4gICAgICAgIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRCYWJ5bG9uTWF0ZXJpYWxEYXRhID0ge307XG4gICAgICAgIHRoaXMuX3Bvc3RTY2VuZUxvYWRBY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX3BhcmVudC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGltcG9ydE1lc2hBc3luYyhtZXNoZXNOYW1lcywgc2NlbmUsIGNvbnRhaW5lciwgZGF0YSwgcm9vdFVybCwgb25Qcm9ncmVzcywgZmlsZU5hbWUgPSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZSA9IHNjZW5lO1xuICAgICAgICAgICAgdGhpcy5fYXNzZXRDb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgICB0aGlzLl9sb2FkRGF0YShkYXRhKTtcbiAgICAgICAgICAgIGxldCBub2RlcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAobWVzaGVzTmFtZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlTWFwID0ge307XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2dsdGYubm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMuX2dsdGYubm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlTWFwW25vZGUubmFtZV0gPSBub2RlLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gbWVzaGVzTmFtZXMgaW5zdGFuY2VvZiBBcnJheSA/IG1lc2hlc05hbWVzIDogW21lc2hlc05hbWVzXTtcbiAgICAgICAgICAgICAgICBub2RlcyA9IG5hbWVzLm1hcCgobmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZU1hcFtuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmluZCBub2RlICcke25hbWV9J2ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRBc3luYyhyb290VXJsLCBmaWxlTmFtZSwgbm9kZXMsICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBtZXNoZXM6IHRoaXMuX2dldE1lc2hlcygpLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZVN5c3RlbXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBza2VsZXRvbnM6IHRoaXMuX2dldFNrZWxldG9ucygpLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25Hcm91cHM6IHRoaXMuX2dldEFuaW1hdGlvbkdyb3VwcygpLFxuICAgICAgICAgICAgICAgICAgICBsaWdodHM6IHRoaXMuX2JhYnlsb25MaWdodHMsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU5vZGVzOiB0aGlzLl9nZXRUcmFuc2Zvcm1Ob2RlcygpLFxuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzOiB0aGlzLl9nZXRHZW9tZXRyaWVzKCksXG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZU1hbmFnZXJzOiBbXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkQXN5bmMoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uUHJvZ3Jlc3MsIGZpbGVOYW1lID0gXCJcIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUgPSBzY2VuZTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWREYXRhKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRBc3luYyhyb290VXJsLCBmaWxlTmFtZSwgbnVsbCwgKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkQXN5bmMocm9vdFVybCwgZmlsZU5hbWUsIG5vZGVzLCByZXN1bHRGdW5jKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcm9vdFVybCA9IHJvb3RVcmw7XG4gICAgICAgICAgICB0aGlzLl91bmlxdWVSb290VXJsID0gIXJvb3RVcmwuc3RhcnRzV2l0aChcImZpbGU6XCIpICYmIGZpbGVOYW1lID8gcm9vdFVybCA6IGAke3Jvb3RVcmx9JHtEYXRlLm5vdygpfS9gO1xuICAgICAgICAgICAgdGhpcy5fZmlsZU5hbWUgPSBmaWxlTmFtZTtcbiAgICAgICAgICAgIHRoaXMuX2FsbE1hdGVyaWFsc0RpcnR5UmVxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRFeHRlbnNpb25zKCk7XG4gICAgICAgICAgICB0aGlzLl9jaGVja0V4dGVuc2lvbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdUb1JlYWR5Q291bnRlck5hbWUgPSBgJHtHTFRGTG9hZGVyU3RhdGVbR0xURkxvYWRlclN0YXRlLkxPQURJTkddfSA9PiAke0dMVEZMb2FkZXJTdGF0ZVtHTFRGTG9hZGVyU3RhdGUuUkVBRFldfWA7XG4gICAgICAgICAgICBjb25zdCBsb2FkaW5nVG9Db21wbGV0ZUNvdW50ZXJOYW1lID0gYCR7R0xURkxvYWRlclN0YXRlW0dMVEZMb2FkZXJTdGF0ZS5MT0FESU5HXX0gPT4gJHtHTFRGTG9hZGVyU3RhdGVbR0xURkxvYWRlclN0YXRlLkNPTVBMRVRFXX1gO1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50Ll9zdGFydFBlcmZvcm1hbmNlQ291bnRlcihsb2FkaW5nVG9SZWFkeUNvdW50ZXJOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudC5fc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXIobG9hZGluZ1RvQ29tcGxldGVDb3VudGVyTmFtZSk7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQuX3NldFN0YXRlKEdMVEZMb2FkZXJTdGF0ZS5MT0FESU5HKTtcbiAgICAgICAgICAgIHRoaXMuX2V4dGVuc2lvbnNPbkxvYWRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAvLyBCbG9jayB0aGUgbWFya2luZyBvZiBtYXRlcmlhbHMgZGlydHkgdW50aWwgdGhlIHNjZW5lIGlzIGxvYWRlZC5cbiAgICAgICAgICAgIGNvbnN0IG9sZEJsb2NrTWF0ZXJpYWxEaXJ0eU1lY2hhbmlzbSA9IHRoaXMuX2JhYnlsb25TY2VuZS5ibG9ja01hdGVyaWFsRGlydHlNZWNoYW5pc207XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuYmxvY2tNYXRlcmlhbERpcnR5TWVjaGFuaXNtID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQubG9hZE9ubHlNYXRlcmlhbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRTY2VuZUFzeW5jKFwiL25vZGVzXCIsIHsgbm9kZXM6IG5vZGVzLCBpbmRleDogLTEgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9nbHRmLnNjZW5lICE9IHVuZGVmaW5lZCB8fCAodGhpcy5fZ2x0Zi5zY2VuZXMgJiYgdGhpcy5fZ2x0Zi5zY2VuZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gQXJyYXlJdGVtLkdldChgL3NjZW5lYCwgdGhpcy5fZ2x0Zi5zY2VuZXMsIHRoaXMuX2dsdGYuc2NlbmUgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5sb2FkU2NlbmVBc3luYyhgL3NjZW5lcy8ke3NjZW5lLmluZGV4fWAsIHNjZW5lKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudC5za2lwTWF0ZXJpYWxzICYmIHRoaXMucGFyZW50LmxvYWRBbGxNYXRlcmlhbHMgJiYgdGhpcy5fZ2x0Zi5tYXRlcmlhbHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMuX2dsdGYubWF0ZXJpYWxzLmxlbmd0aDsgKyttKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5fZ2x0Zi5tYXRlcmlhbHNbbV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBcIi9tYXRlcmlhbHMvXCIgKyBtO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWJ5bG9uRHJhd01vZGUgPSBNYXRlcmlhbC5UcmlhbmdsZUZpbGxNb2RlO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRNYXRlcmlhbEFzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBudWxsLCBiYWJ5bG9uRHJhd01vZGUsICgpID0+IHsgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIGJsb2NraW5nIG9mIG1hdGVyaWFsIGRpcnR5LlxuICAgICAgICAgICAgaWYgKHRoaXMuX2FsbE1hdGVyaWFsc0RpcnR5UmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgd2UgYWRkIGEgbGlnaHQgZm9yIGluc3RhbmNlIGFzIGl0IHdpbGwgaW1wYWN0IHRoZSB3aG9sZSBzY2VuZS5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGF1dG9tYXRpY2FsbHkgcmVzZXRzIGV2ZXJ5dGhpbmcgaWYgbmVlZGVkLlxuICAgICAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5ibG9ja01hdGVyaWFsRGlydHlNZWNoYW5pc20gPSBvbGRCbG9ja01hdGVyaWFsRGlydHlNZWNoYW5pc207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBCeSBkZWZhdWx0IGEgbmV3bHkgY3JlYXRlZCBtYXRlcmlhbCBpcyBkaXJ0eSBzbyB0aGVyZSBpcyBubyBuZWVkIHRvIGZsYWcgdGhlIGZ1bGwgc2NlbmUgYXMgZGlydHkuXG4gICAgICAgICAgICAgICAgLy8gRm9yIHBlcmYgcmVhc29ucywgd2UgdGhlbiBieXBhc3MgYmxvY2tNYXRlcmlhbERpcnR5TWVjaGFuaXNtIGFzIHRoaXMgd291bGQgXCJkaXJ0eVwiIHRoZSBlbnRpcmUgc2NlbmUuXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFieWxvblNjZW5lLl9mb3JjZUJsb2NrTWF0ZXJpYWxEaXJ0eU1lY2hhbmlzbShvbGRCbG9ja01hdGVyaWFsRGlydHlNZWNoYW5pc20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudC5jb21waWxlTWF0ZXJpYWxzKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9jb21waWxlTWF0ZXJpYWxzQXN5bmMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50LmNvbXBpbGVTaGFkb3dHZW5lcmF0b3JzKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9jb21waWxlU2hhZG93R2VuZXJhdG9yc0FzeW5jKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0UHJvbWlzZSA9IFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcm9vdEJhYnlsb25NZXNoICYmIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaCAhPT0gdGhpcy5fcGFyZW50LmN1c3RvbVJvb3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaC5zZXRFbmFibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9leHRlbnNpb25zT25SZWFkeSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudC5fc2V0U3RhdGUoR0xURkxvYWRlclN0YXRlLlJFQURZKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0RnVuYygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0UHJvbWlzZS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQuX2VuZFBlcmZvcm1hbmNlQ291bnRlcihsb2FkaW5nVG9SZWFkeUNvdW50ZXJOYW1lKTtcbiAgICAgICAgICAgICAgICBUb29scy5TZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbCh0aGlzLl9jb21wbGV0ZVByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQuX2VuZFBlcmZvcm1hbmNlQ291bnRlcihsb2FkaW5nVG9Db21wbGV0ZUNvdW50ZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQuX3NldFN0YXRlKEdMVEZMb2FkZXJTdGF0ZS5DT01QTEVURSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50Lm9uQ29tcGxldGVPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudC5vbkNvbXBsZXRlT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50Lm9uRXJyb3JPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50Lm9uRXJyb3JPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQub25FcnJvck9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQub25FcnJvck9ic2VydmFibGUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWREYXRhKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZ2x0ZiA9IGRhdGEuanNvbjtcbiAgICAgICAgdGhpcy5fc2V0dXBEYXRhKCk7XG4gICAgICAgIGlmIChkYXRhLmJpbikge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVycyA9IHRoaXMuX2dsdGYuYnVmZmVycztcbiAgICAgICAgICAgIGlmIChidWZmZXJzICYmIGJ1ZmZlcnNbMF0gJiYgIWJ1ZmZlcnNbMF0udXJpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluYXJ5QnVmZmVyID0gYnVmZmVyc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoYmluYXJ5QnVmZmVyLmJ5dGVMZW5ndGggPCBkYXRhLmJpbi5ieXRlTGVuZ3RoIC0gMyB8fCBiaW5hcnlCdWZmZXIuYnl0ZUxlbmd0aCA+IGRhdGEuYmluLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLldhcm4oYEJpbmFyeSBidWZmZXIgbGVuZ3RoICgke2JpbmFyeUJ1ZmZlci5ieXRlTGVuZ3RofSkgZnJvbSBKU09OIGRvZXMgbm90IG1hdGNoIGNodW5rIGxlbmd0aCAoJHtkYXRhLmJpbi5ieXRlTGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fYmluID0gZGF0YS5iaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBMb2dnZXIuV2FybihcIlVuZXhwZWN0ZWQgQklOIGNodW5rXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9zZXR1cERhdGEoKSB7XG4gICAgICAgIEFycmF5SXRlbS5Bc3NpZ24odGhpcy5fZ2x0Zi5hY2Nlc3NvcnMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2dsdGYuYW5pbWF0aW9ucyk7XG4gICAgICAgIEFycmF5SXRlbS5Bc3NpZ24odGhpcy5fZ2x0Zi5idWZmZXJzKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbih0aGlzLl9nbHRmLmJ1ZmZlclZpZXdzKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbih0aGlzLl9nbHRmLmNhbWVyYXMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2dsdGYuaW1hZ2VzKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbih0aGlzLl9nbHRmLm1hdGVyaWFscyk7XG4gICAgICAgIEFycmF5SXRlbS5Bc3NpZ24odGhpcy5fZ2x0Zi5tZXNoZXMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2dsdGYubm9kZXMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2dsdGYuc2FtcGxlcnMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKHRoaXMuX2dsdGYuc2NlbmVzKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbih0aGlzLl9nbHRmLnNraW5zKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbih0aGlzLl9nbHRmLnRleHR1cmVzKTtcbiAgICAgICAgaWYgKHRoaXMuX2dsdGYubm9kZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVQYXJlbnRzID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcy5fZ2x0Zi5ub2Rlcykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW5kZXggb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVBhcmVudHNbaW5kZXhdID0gbm9kZS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGhpcy5fY3JlYXRlUm9vdE5vZGUoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLl9nbHRmLm5vZGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50SW5kZXggPSBub2RlUGFyZW50c1tub2RlLmluZGV4XTtcbiAgICAgICAgICAgICAgICBub2RlLnBhcmVudCA9IHBhcmVudEluZGV4ID09PSB1bmRlZmluZWQgPyByb290Tm9kZSA6IHRoaXMuX2dsdGYubm9kZXNbcGFyZW50SW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9sb2FkRXh0ZW5zaW9ucygpIHtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIEdMVEZMb2FkZXIuX1JlZ2lzdGVyZWRFeHRlbnNpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBHTFRGTG9hZGVyLl9SZWdpc3RlcmVkRXh0ZW5zaW9uc1tuYW1lXS5mYWN0b3J5KHRoaXMpO1xuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5uYW1lICE9PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgTG9nZ2VyLldhcm4oYFRoZSBuYW1lIG9mIHRoZSBnbFRGIGxvYWRlciBleHRlbnNpb24gaW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggdGhlIHJlZ2lzdGVyZWQgbmFtZTogJHtleHRlbnNpb24ubmFtZX0gIT09ICR7bmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2V4dGVuc2lvbnMucHVzaChleHRlbnNpb24pO1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50Lm9uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoZXh0ZW5zaW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9leHRlbnNpb25zLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyIHx8IE51bWJlci5NQVhfVkFMVUUpIC0gKGIub3JkZXIgfHwgTnVtYmVyLk1BWF9WQUxVRSkpO1xuICAgICAgICB0aGlzLl9wYXJlbnQub25FeHRlbnNpb25Mb2FkZWRPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgfVxuICAgIF9jaGVja0V4dGVuc2lvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9nbHRmLmV4dGVuc2lvbnNSZXF1aXJlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHRoaXMuX2dsdGYuZXh0ZW5zaW9uc1JlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gdGhpcy5fZXh0ZW5zaW9ucy5zb21lKChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5uYW1lID09PSBuYW1lICYmIGV4dGVuc2lvbi5lbmFibGVkKTtcbiAgICAgICAgICAgICAgICBpZiAoIWF2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlcXVpcmVkIGV4dGVuc2lvbiAke25hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NyZWF0ZVJvb3ROb2RlKCkge1xuICAgICAgICBpZiAodGhpcy5fcGFyZW50LmN1c3RvbVJvb3ROb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaCA9IHRoaXMuX3BhcmVudC5jdXN0b21Sb290Tm9kZTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgICAgICAgICAgICAgIF9iYWJ5bG9uVHJhbnNmb3JtTm9kZTogdGhpcy5fcm9vdEJhYnlsb25NZXNoID09PSBudWxsID8gdW5kZWZpbmVkIDogdGhpcy5fcm9vdEJhYnlsb25NZXNoLFxuICAgICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYmFieWxvblNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSAhIXRoaXMuX2Fzc2V0Q29udGFpbmVyO1xuICAgICAgICBjb25zdCByb290TWVzaCA9IG5ldyBNZXNoKFwiX19yb290X19cIiwgdGhpcy5fYmFieWxvblNjZW5lKTtcbiAgICAgICAgdGhpcy5fcm9vdEJhYnlsb25NZXNoID0gcm9vdE1lc2g7XG4gICAgICAgIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaC5fcGFyZW50Q29udGFpbmVyID0gdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaC5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgY29uc3Qgcm9vdE5vZGUgPSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgICAgICBfYmFieWxvblRyYW5zZm9ybU5vZGU6IHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaCxcbiAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9wYXJlbnQuY29vcmRpbmF0ZVN5c3RlbU1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlLkFVVE86IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2JhYnlsb25TY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSkge1xuICAgICAgICAgICAgICAgICAgICByb290Tm9kZS5yb3RhdGlvbiA9IFswLCAxLCAwLCAwXTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGUuc2NhbGUgPSBbMSwgMSwgLTFdO1xuICAgICAgICAgICAgICAgICAgICBHTFRGTG9hZGVyLl9Mb2FkVHJhbnNmb3JtKHJvb3ROb2RlLCB0aGlzLl9yb290QmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlLkZPUkNFX1JJR0hUX0hBTkRFRDoge1xuICAgICAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNvb3JkaW5hdGUgc3lzdGVtIG1vZGUgKCR7dGhpcy5fcGFyZW50LmNvb3JkaW5hdGVTeXN0ZW1Nb2RlfSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYXJlbnQub25NZXNoTG9hZGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMocm9vdE1lc2gpO1xuICAgICAgICByZXR1cm4gcm9vdE5vZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIGEgZ2xURiBzY2VuZS5cbiAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgY29udGV4dCB3aGVuIGxvYWRpbmcgdGhlIGFzc2V0XG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBnbFRGIHNjZW5lIHByb3BlcnR5XG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvblByb21pc2UgPSB0aGlzLl9leHRlbnNpb25zTG9hZFNjZW5lQXN5bmMoY29udGV4dCwgc2NlbmUpO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5sb2dPcGVuKGAke2NvbnRleHR9ICR7c2NlbmUubmFtZSB8fCBcIlwifWApO1xuICAgICAgICBpZiAoc2NlbmUubm9kZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5kZXggb2Ygc2NlbmUubm9kZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9ub2Rlcy8ke2luZGV4fWAsIHRoaXMuX2dsdGYubm9kZXMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMubG9hZE5vZGVBc3luYyhgL25vZGVzLyR7bm9kZS5pbmRleH1gLCBub2RlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2gucGFyZW50ID0gdGhpcy5fcm9vdEJhYnlsb25NZXNoO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiB0aGlzLl9wb3N0U2NlbmVMb2FkQWN0aW9ucykge1xuICAgICAgICAgICAgYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkQW5pbWF0aW9uc0FzeW5jKCkpO1xuICAgICAgICB0aGlzLmxvZ0Nsb3NlKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbiAgICBfZm9yRWFjaFByaW1pdGl2ZShub2RlLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAobm9kZS5fcHJpbWl0aXZlQmFieWxvbk1lc2hlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uTWVzaCBvZiBub2RlLl9wcmltaXRpdmVCYWJ5bG9uTWVzaGVzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRHZW9tZXRyaWVzKCkge1xuICAgICAgICBjb25zdCBnZW9tZXRyaWVzID0gW107XG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5fZ2x0Zi5ub2RlcztcbiAgICAgICAgaWYgKG5vZGVzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JFYWNoUHJpbWl0aXZlKG5vZGUsIChiYWJ5bG9uTWVzaCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGJhYnlsb25NZXNoLmdlb21ldHJ5O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnkgJiYgZ2VvbWV0cmllcy5pbmRleE9mKGdlb21ldHJ5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJpZXMucHVzaChnZW9tZXRyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2VvbWV0cmllcztcbiAgICB9XG4gICAgX2dldE1lc2hlcygpIHtcbiAgICAgICAgY29uc3QgbWVzaGVzID0gW107XG4gICAgICAgIC8vIFJvb3QgbWVzaCBpcyBhbHdheXMgZmlyc3QsIGlmIGF2YWlsYWJsZS5cbiAgICAgICAgaWYgKHRoaXMuX3Jvb3RCYWJ5bG9uTWVzaCBpbnN0YW5jZW9mIEFic3RyYWN0TWVzaCkge1xuICAgICAgICAgICAgbWVzaGVzLnB1c2godGhpcy5fcm9vdEJhYnlsb25NZXNoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuX2dsdGYubm9kZXM7XG4gICAgICAgIGlmIChub2Rlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZm9yRWFjaFByaW1pdGl2ZShub2RlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzaGVzLnB1c2goYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNoZXM7XG4gICAgfVxuICAgIF9nZXRUcmFuc2Zvcm1Ob2RlcygpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtTm9kZXMgPSBbXTtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLl9nbHRmLm5vZGVzO1xuICAgICAgICBpZiAobm9kZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZSAmJiBub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZS5nZXRDbGFzc05hbWUoKSA9PT0gXCJUcmFuc2Zvcm1Ob2RlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTm9kZXMucHVzaChub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZUZvclNraW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtTm9kZXMucHVzaChub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZUZvclNraW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtTm9kZXM7XG4gICAgfVxuICAgIF9nZXRTa2VsZXRvbnMoKSB7XG4gICAgICAgIGNvbnN0IHNrZWxldG9ucyA9IFtdO1xuICAgICAgICBjb25zdCBza2lucyA9IHRoaXMuX2dsdGYuc2tpbnM7XG4gICAgICAgIGlmIChza2lucykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBza2luIG9mIHNraW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraW4uX2RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2tlbGV0b25zLnB1c2goc2tpbi5fZGF0YS5iYWJ5bG9uU2tlbGV0b24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2tlbGV0b25zO1xuICAgIH1cbiAgICBfZ2V0QW5pbWF0aW9uR3JvdXBzKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb25Hcm91cHMgPSBbXTtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9ucyA9IHRoaXMuX2dsdGYuYW5pbWF0aW9ucztcbiAgICAgICAgaWYgKGFuaW1hdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYW5pbWF0aW9uIG9mIGFuaW1hdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLl9iYWJ5bG9uQW5pbWF0aW9uR3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uR3JvdXBzLnB1c2goYW5pbWF0aW9uLl9iYWJ5bG9uQW5pbWF0aW9uR3JvdXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5pbWF0aW9uR3JvdXBzO1xuICAgIH1cbiAgICBfc3RhcnRBbmltYXRpb25zKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX3BhcmVudC5hbmltYXRpb25TdGFydE1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZS5OT05FOiB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBHTFRGTG9hZGVyQW5pbWF0aW9uU3RhcnRNb2RlLkZJUlNUOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbkFuaW1hdGlvbkdyb3VwcyA9IHRoaXMuX2dldEFuaW1hdGlvbkdyb3VwcygpO1xuICAgICAgICAgICAgICAgIGlmIChiYWJ5bG9uQW5pbWF0aW9uR3JvdXBzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uR3JvdXBzWzBdLnN0YXJ0KHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZS5BTEw6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYWJ5bG9uQW5pbWF0aW9uR3JvdXBzID0gdGhpcy5fZ2V0QW5pbWF0aW9uR3JvdXBzKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAgb2YgYmFieWxvbkFuaW1hdGlvbkdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAuc3RhcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIExvZ2dlci5FcnJvcihgSW52YWxpZCBhbmltYXRpb24gc3RhcnQgbW9kZSAoJHt0aGlzLl9wYXJlbnQuYW5pbWF0aW9uU3RhcnRNb2RlfSlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBnbFRGIG5vZGUuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBub2RlIFRoZSBnbFRGIG5vZGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gYXNzaWduIEEgZnVuY3Rpb24gY2FsbGVkIHN5bmNocm9ub3VzbHkgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbG9hZGVkIEJhYnlsb24gbWVzaCB3aGVuIHRoZSBsb2FkIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgbG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24gPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkTm9kZUFzeW5jKGNvbnRleHQsIG5vZGUsIGFzc2lnbik7XG4gICAgICAgIGlmIChleHRlbnNpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5fYmFieWxvblRyYW5zZm9ybU5vZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogSW52YWxpZCByZWN1cnNpdmUgbm9kZSBoaWVyYXJjaHlgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmxvZ09wZW4oYCR7Y29udGV4dH0gJHtub2RlLm5hbWUgfHwgXCJcIn1gKTtcbiAgICAgICAgY29uc3QgbG9hZE5vZGUgPSAoYmFieWxvblRyYW5zZm9ybU5vZGUpID0+IHtcbiAgICAgICAgICAgIEdMVEZMb2FkZXIuQWRkUG9pbnRlck1ldGFkYXRhKGJhYnlsb25UcmFuc2Zvcm1Ob2RlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIEdMVEZMb2FkZXIuX0xvYWRUcmFuc2Zvcm0obm9kZSwgYmFieWxvblRyYW5zZm9ybU5vZGUpO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2FtZXJhICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbWVyYSA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vY2FtZXJhYCwgdGhpcy5fZ2x0Zi5jYW1lcmFzLCBub2RlLmNhbWVyYSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRDYW1lcmFBc3luYyhgL2NhbWVyYXMvJHtjYW1lcmEuaW5kZXh9YCwgY2FtZXJhLCAoYmFieWxvbkNhbWVyYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uQ2FtZXJhLnBhcmVudCA9IGJhYnlsb25UcmFuc2Zvcm1Ob2RlO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vY2hpbGRyZW4vJHtpbmRleH1gLCB0aGlzLl9nbHRmLm5vZGVzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5sb2FkTm9kZUFzeW5jKGAvbm9kZXMvJHtjaGlsZE5vZGUuaW5kZXh9YCwgY2hpbGROb2RlLCAoY2hpbGRCYWJ5bG9uTWVzaCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRCYWJ5bG9uTWVzaC5wYXJlbnQgPSBiYWJ5bG9uVHJhbnNmb3JtTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2lnbihiYWJ5bG9uVHJhbnNmb3JtTm9kZSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChub2RlLm1lc2ggPT0gdW5kZWZpbmVkIHx8IG5vZGUuc2tpbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVOYW1lID0gbm9kZS5uYW1lIHx8IGBub2RlJHtub2RlLmluZGV4fWA7XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1Ob2RlID0gbmV3IFRyYW5zZm9ybU5vZGUobm9kZU5hbWUsIHRoaXMuX2JhYnlsb25TY2VuZSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1Ob2RlLl9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAobm9kZS5tZXNoID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlID0gdHJhbnNmb3JtTm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlRm9yU2tpbiA9IHRyYW5zZm9ybU5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkTm9kZSh0cmFuc2Zvcm1Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5tZXNoICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuc2tpbiA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9tZXNoYCwgdGhpcy5fZ2x0Zi5tZXNoZXMsIG5vZGUubWVzaCk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTWVzaEFzeW5jKGAvbWVzaGVzLyR7bWVzaC5pbmRleH1gLCBub2RlLCBtZXNoLCBsb2FkTm9kZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNza2lucyAoc2Vjb25kIGltcGxlbWVudGF0aW9uIG5vdGUpXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2RlIHBhdGggd2lsbCBwbGFjZSB0aGUgc2tpbm5lZCBtZXNoIGFzIGEgc2libGluZyBvZiB0aGUgc2tlbGV0b24gcm9vdCBub2RlIHdpdGhvdXQgbG9hZGluZyB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0sIHdoaWNoIGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIHRyYW5zZm9ybSBvZiB0aGUgc2tpbm5lZCBtZXNoLCBhcyBwZXIgc3BlYy5cbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9tZXNoYCwgdGhpcy5fZ2x0Zi5tZXNoZXMsIG5vZGUubWVzaCk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTWVzaEFzeW5jKGAvbWVzaGVzLyR7bWVzaC5pbmRleH1gLCBub2RlLCBtZXNoLCAoYmFieWxvblRyYW5zZm9ybU5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFieWxvblRyYW5zZm9ybU5vZGVGb3JTa2luID0gbm9kZS5fYmFieWxvblRyYW5zZm9ybU5vZGVGb3JTa2luO1xuICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGUgbWV0YWRhdGEgZnJvbSB0aGUgc2tpbiBub2RlIHRvIHRoZSBza2lubmVkIG1lc2ggaW4gY2FzZSBhIGxvYWRlciBleHRlbnNpb24gYWRkZWQgbWV0YWRhdGEuXG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25UcmFuc2Zvcm1Ob2RlLm1ldGFkYXRhID0gbWVyZ2VEZWVwKGJhYnlsb25UcmFuc2Zvcm1Ob2RlRm9yU2tpbi5tZXRhZGF0YSwgYmFieWxvblRyYW5zZm9ybU5vZGUubWV0YWRhdGEgfHwge30pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBza2luID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9za2luYCwgdGhpcy5fZ2x0Zi5za2lucywgbm9kZS5za2luKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkU2tpbkFzeW5jKGAvc2tpbnMvJHtza2luLmluZGV4fWAsIG5vZGUsIHNraW4sIChiYWJ5bG9uU2tlbGV0b24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZvckVhY2hQcmltaXRpdmUobm9kZSwgKGJhYnlsb25NZXNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2guc2tlbGV0b24gPSBiYWJ5bG9uU2tlbGV0b247XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgYWxsIHRoZSBub2RlcyBhcmUgcGFyZW50ZWQgYmVmb3JlIHBhcmVudGluZyB0aGUgc2tpbm5lZCBtZXNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9zdFNjZW5lTG9hZEFjdGlvbnMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraW4uc2tlbGV0b24gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBsYWNlIHRoZSBza2lubmVkIG1lc2ggbm9kZSBhcyBhIHNpYmxpbmcgb2YgdGhlIHNrZWxldG9uIHJvb3Qgbm9kZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHNwZWNpYWwgY2FzZSB3aGVuIHRoZSBwYXJlbnQgb2YgdGhlIHNrZWxldG9uIHJvb3QgaXMgdGhlIHNraW5uZWQgbWVzaC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IEFycmF5SXRlbS5HZXQoYC9za2lucy8ke3NraW4uaW5kZXh9L3NrZWxldG9uYCwgdGhpcy5fZ2x0Zi5ub2Rlcywgc2tpbi5za2VsZXRvbikucGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5pbmRleCA9PT0gcGFyZW50Tm9kZS5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvblRyYW5zZm9ybU5vZGUucGFyZW50ID0gYmFieWxvblRyYW5zZm9ybU5vZGVGb3JTa2luLnBhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhYnlsb25UcmFuc2Zvcm1Ob2RlLnBhcmVudCA9IHBhcmVudE5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uVHJhbnNmb3JtTm9kZS5wYXJlbnQgPSB0aGlzLl9yb290QmFieWxvbk1lc2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudC5vblNraW5Mb2FkZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh7IG5vZGU6IGJhYnlsb25UcmFuc2Zvcm1Ob2RlRm9yU2tpbiwgc2tpbm5lZE5vZGU6IGJhYnlsb25UcmFuc2Zvcm1Ob2RlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dDbG9zZSgpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9yRWFjaFByaW1pdGl2ZShub2RlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYmFieWxvbk1lc2guZ2VvbWV0cnkgJiYgYmFieWxvbk1lc2guZ2VvbWV0cnkudXNlQm91bmRpbmdJbmZvRnJvbUdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNpbXBseSBhcHBseSB0aGUgd29ybGQgbWF0cmljZXMgdG8gdGhlIGJvdW5kaW5nIGluZm8gLSB0aGUgZXh0ZW5kcyBhcmUgYWxyZWFkeSBva1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWVzaC5fdXBkYXRlQm91bmRpbmdJbmZvKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWVzaC5yZWZyZXNoQm91bmRpbmdJbmZvKHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRNZXNoQXN5bmMoY29udGV4dCwgbm9kZSwgbWVzaCwgYXNzaWduKSB7XG4gICAgICAgIGNvbnN0IHByaW1pdGl2ZXMgPSBtZXNoLnByaW1pdGl2ZXM7XG4gICAgICAgIGlmICghcHJpbWl0aXZlcyB8fCAhcHJpbWl0aXZlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogUHJpbWl0aXZlcyBhcmUgbWlzc2luZ2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcmltaXRpdmVzWzBdLmluZGV4ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgQXJyYXlJdGVtLkFzc2lnbihwcmltaXRpdmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmxvZ09wZW4oYCR7Y29udGV4dH0gJHttZXNoLm5hbWUgfHwgXCJcIn1gKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IG5vZGUubmFtZSB8fCBgbm9kZSR7bm9kZS5pbmRleH1gO1xuICAgICAgICBpZiAocHJpbWl0aXZlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZSA9IG1lc2gucHJpbWl0aXZlc1swXTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZE1lc2hQcmltaXRpdmVBc3luYyhgJHtjb250ZXh0fS9wcmltaXRpdmVzLyR7cHJpbWl0aXZlLmluZGV4fWAsIG5hbWUsIG5vZGUsIG1lc2gsIHByaW1pdGl2ZSwgKGJhYnlsb25NZXNoKSA9PiB7XG4gICAgICAgICAgICAgICAgbm9kZS5fYmFieWxvblRyYW5zZm9ybU5vZGUgPSBiYWJ5bG9uTWVzaDtcbiAgICAgICAgICAgICAgICBub2RlLl9wcmltaXRpdmVCYWJ5bG9uTWVzaGVzID0gW2JhYnlsb25NZXNoXTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISF0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlID0gbmV3IFRyYW5zZm9ybU5vZGUobmFtZSwgdGhpcy5fYmFieWxvblNjZW5lKTtcbiAgICAgICAgICAgIG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlLl9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBub2RlLl9wcmltaXRpdmVCYWJ5bG9uTWVzaGVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByaW1pdGl2ZSBvZiBwcmltaXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTWVzaFByaW1pdGl2ZUFzeW5jKGAke2NvbnRleHR9L3ByaW1pdGl2ZXMvJHtwcmltaXRpdmUuaW5kZXh9YCwgYCR7bmFtZX1fcHJpbWl0aXZlJHtwcmltaXRpdmUuaW5kZXh9YCwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCAoYmFieWxvbk1lc2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2gucGFyZW50ID0gbm9kZS5fYmFieWxvblRyYW5zZm9ybU5vZGU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuX3ByaW1pdGl2ZUJhYnlsb25NZXNoZXMucHVzaChiYWJ5bG9uTWVzaCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZSk7XG4gICAgICAgIHRoaXMubG9nQ2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbCBEZWZpbmUgdGhpcyBtZXRob2QgdG8gbW9kaWZ5IHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdoZW4gbG9hZGluZyBkYXRhIGZvciBtZXNoIHByaW1pdGl2ZXMuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBtZXNoIG5hbWUgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBub2RlIFRoZSBnbFRGIG5vZGUgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBtZXNoIFRoZSBnbFRGIG1lc2ggd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBwcmltaXRpdmUgVGhlIGdsVEYgbWVzaCBwcmltaXRpdmUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gYXNzaWduIEEgZnVuY3Rpb24gY2FsbGVkIHN5bmNocm9ub3VzbHkgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbG9hZGVkIG1lc2ggd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZSBvciBudWxsIGlmIG5vdCBoYW5kbGVkXG4gICAgICovXG4gICAgX2xvYWRNZXNoUHJpbWl0aXZlQXN5bmMoY29udGV4dCwgbmFtZSwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCBhc3NpZ24pIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkTWVzaFByaW1pdGl2ZUFzeW5jKGNvbnRleHQsIG5hbWUsIG5vZGUsIG1lc2gsIHByaW1pdGl2ZSwgYXNzaWduKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvblByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nT3BlbihgJHtjb250ZXh0fWApO1xuICAgICAgICBjb25zdCBzaG91bGRJbnN0YW5jZSA9IHRoaXMuX2Rpc2FibGVJbnN0YW5jZWRNZXNoID09PSAwICYmIHRoaXMuX3BhcmVudC5jcmVhdGVJbnN0YW5jZXMgJiYgbm9kZS5za2luID09IHVuZGVmaW5lZCAmJiAhbWVzaC5wcmltaXRpdmVzWzBdLnRhcmdldHM7XG4gICAgICAgIGxldCBiYWJ5bG9uQWJzdHJhY3RNZXNoO1xuICAgICAgICBsZXQgcHJvbWlzZTtcbiAgICAgICAgaWYgKHNob3VsZEluc3RhbmNlICYmIHByaW1pdGl2ZS5faW5zdGFuY2VEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICBiYWJ5bG9uQWJzdHJhY3RNZXNoID0gcHJpbWl0aXZlLl9pbnN0YW5jZURhdGEuYmFieWxvblNvdXJjZU1lc2guY3JlYXRlSW5zdGFuY2UobmFtZSk7XG4gICAgICAgICAgICBiYWJ5bG9uQWJzdHJhY3RNZXNoLl9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBwcm9taXNlID0gcHJpbWl0aXZlLl9pbnN0YW5jZURhdGEucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCBiYWJ5bG9uTWVzaCA9IG5ldyBNZXNoKG5hbWUsIHRoaXMuX2JhYnlsb25TY2VuZSk7XG4gICAgICAgICAgICBiYWJ5bG9uTWVzaC5fcGFyZW50Q29udGFpbmVyID0gdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgYmFieWxvbk1lc2gub3ZlcnJpZGVNYXRlcmlhbFNpZGVPcmllbnRhdGlvbiA9IHRoaXMuX2JhYnlsb25TY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSA/IE1hdGVyaWFsLkNvdW50ZXJDbG9ja1dpc2VTaWRlT3JpZW50YXRpb24gOiBNYXRlcmlhbC5DbG9ja1dpc2VTaWRlT3JpZW50YXRpb247XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVNb3JwaFRhcmdldHMoY29udGV4dCwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCBiYWJ5bG9uTWVzaCk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dCwgcHJpbWl0aXZlLCBiYWJ5bG9uTWVzaCkudGhlbigoYmFieWxvbkdlb21ldHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRNb3JwaFRhcmdldHNBc3luYyhjb250ZXh0LCBwcmltaXRpdmUsIGJhYnlsb25NZXNoLCBiYWJ5bG9uR2VvbWV0cnkpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25HZW9tZXRyeS5hcHBseVRvTWVzaChiYWJ5bG9uTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25HZW9tZXRyeS5fcGFyZW50Q29udGFpbmVyID0gdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBiYWJ5bG9uRHJhd01vZGUgPSBHTFRGTG9hZGVyLl9HZXREcmF3TW9kZShjb250ZXh0LCBwcmltaXRpdmUubW9kZSk7XG4gICAgICAgICAgICBpZiAocHJpbWl0aXZlLm1hdGVyaWFsID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxldCBiYWJ5bG9uTWF0ZXJpYWwgPSB0aGlzLl9kZWZhdWx0QmFieWxvbk1hdGVyaWFsRGF0YVtiYWJ5bG9uRHJhd01vZGVdO1xuICAgICAgICAgICAgICAgIGlmICghYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbCA9IHRoaXMuX2NyZWF0ZURlZmF1bHRNYXRlcmlhbChcIl9fR0xURkxvYWRlci5fZGVmYXVsdFwiLCBiYWJ5bG9uRHJhd01vZGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRCYWJ5bG9uTWF0ZXJpYWxEYXRhW2JhYnlsb25EcmF3TW9kZV0gPSBiYWJ5bG9uTWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoLm1hdGVyaWFsID0gYmFieWxvbk1hdGVyaWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMucGFyZW50LnNraXBNYXRlcmlhbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vbWF0ZXJpYWxgLCB0aGlzLl9nbHRmLm1hdGVyaWFscywgcHJpbWl0aXZlLm1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRNYXRlcmlhbEFzeW5jKGAvbWF0ZXJpYWxzLyR7bWF0ZXJpYWwuaW5kZXh9YCwgbWF0ZXJpYWwsIGJhYnlsb25NZXNoLCBiYWJ5bG9uRHJhd01vZGUsIChiYWJ5bG9uTWF0ZXJpYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2gubWF0ZXJpYWwgPSBiYWJ5bG9uTWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvbWlzZSA9IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5faW5zdGFuY2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uU291cmNlTWVzaDogYmFieWxvbk1lc2gsXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhYnlsb25BYnN0cmFjdE1lc2ggPSBiYWJ5bG9uTWVzaDtcbiAgICAgICAgfVxuICAgICAgICBHTFRGTG9hZGVyLkFkZFBvaW50ZXJNZXRhZGF0YShiYWJ5bG9uQWJzdHJhY3RNZXNoLCBjb250ZXh0KTtcbiAgICAgICAgdGhpcy5fcGFyZW50Lm9uTWVzaExvYWRlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGJhYnlsb25BYnN0cmFjdE1lc2gpO1xuICAgICAgICBhc3NpZ24oYmFieWxvbkFic3RyYWN0TWVzaCk7XG4gICAgICAgIHRoaXMubG9nQ2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYmFieWxvbkFic3RyYWN0TWVzaDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkVmVydGV4RGF0YUFzeW5jKGNvbnRleHQsIHByaW1pdGl2ZSwgYmFieWxvbk1lc2gpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkVmVydGV4RGF0YUFzeW5jKGNvbnRleHQsIHByaW1pdGl2ZSwgYmFieWxvbk1lc2gpO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHByaW1pdGl2ZS5hdHRyaWJ1dGVzO1xuICAgICAgICBpZiAoIWF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogQXR0cmlidXRlcyBhcmUgbWlzc2luZ2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGNvbnN0IGJhYnlsb25HZW9tZXRyeSA9IG5ldyBHZW9tZXRyeShiYWJ5bG9uTWVzaC5uYW1lLCB0aGlzLl9iYWJ5bG9uU2NlbmUpO1xuICAgICAgICBpZiAocHJpbWl0aXZlLmluZGljZXMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiYWJ5bG9uTWVzaC5pc1VuSW5kZXhlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NvciA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vaW5kaWNlc2AsIHRoaXMuX2dsdGYuYWNjZXNzb3JzLCBwcmltaXRpdmUuaW5kaWNlcyk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRJbmRpY2VzQWNjZXNzb3JBc3luYyhgL2FjY2Vzc29ycy8ke2FjY2Vzc29yLmluZGV4fWAsIGFjY2Vzc29yKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgYmFieWxvbkdlb21ldHJ5LnNldEluZGljZXMoZGF0YSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9hZEF0dHJpYnV0ZSA9IChuYW1lLCBraW5kLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbbmFtZV0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmFieWxvbk1lc2guX2RlbGF5SW5mbyA9IGJhYnlsb25NZXNoLl9kZWxheUluZm8gfHwgW107XG4gICAgICAgICAgICBpZiAoYmFieWxvbk1lc2guX2RlbGF5SW5mby5pbmRleE9mKGtpbmQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoLl9kZWxheUluZm8ucHVzaChraW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc29yID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9hdHRyaWJ1dGVzLyR7bmFtZX1gLCB0aGlzLl9nbHRmLmFjY2Vzc29ycywgYXR0cmlidXRlc1tuYW1lXSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRWZXJ0ZXhBY2Nlc3NvckFzeW5jKGAvYWNjZXNzb3JzLyR7YWNjZXNzb3IuaW5kZXh9YCwgYWNjZXNzb3IsIGtpbmQpLnRoZW4oKGJhYnlsb25WZXJ0ZXhCdWZmZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYmFieWxvblZlcnRleEJ1ZmZlci5nZXRLaW5kKCkgPT09IFZlcnRleEJ1ZmZlci5Qb3NpdGlvbktpbmQgJiYgIXRoaXMucGFyZW50LmFsd2F5c0NvbXB1dGVCb3VuZGluZ0JveCAmJiAhYmFieWxvbk1lc2guc2tlbGV0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2Vzc29yLm1pbiAmJiBhY2Nlc3Nvci5tYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbiA9IFRtcFZlY3RvcnMuVmVjdG9yM1swXS5jb3B5RnJvbUZsb2F0cyguLi5hY2Nlc3Nvci5taW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gVG1wVmVjdG9ycy5WZWN0b3IzWzFdLmNvcHlGcm9tRmxvYXRzKC4uLmFjY2Vzc29yLm1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjZXNzb3Iubm9ybWFsaXplZCAmJiBhY2Nlc3Nvci5jb21wb25lbnRUeXBlICE9PSA1MTI2IC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5GTE9BVCAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaXZpZGVyID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFjY2Vzc29yLmNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MTIwIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5CWVRFICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlciA9IDEyNy4wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTEyMSAvKiBBY2Nlc3NvckNvbXBvbmVudFR5cGUuVU5TSUdORURfQllURSAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXIgPSAyNTUuMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxMjIgLyogQWNjZXNzb3JDb21wb25lbnRUeXBlLlNIT1JUICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlciA9IDMyNzY3LjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MTIzIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5VTlNJR05FRF9TSE9SVCAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXIgPSA2NTUzNS4wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZU92ZXJEaXZpZGVyID0gMSAvIGRpdmlkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLnNjYWxlSW5QbGFjZShvbmVPdmVyRGl2aWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4LnNjYWxlSW5QbGFjZShvbmVPdmVyRGl2aWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uR2VvbWV0cnkuX2JvdW5kaW5nSW5mbyA9IG5ldyBCb3VuZGluZ0luZm8obWluLCBtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbkdlb21ldHJ5LnVzZUJvdW5kaW5nSW5mb0Zyb21HZW9tZXRyeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmFieWxvbkdlb21ldHJ5LnNldFZlcnRpY2VzQnVmZmVyKGJhYnlsb25WZXJ0ZXhCdWZmZXIsIGFjY2Vzc29yLmNvdW50KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChraW5kID09IFZlcnRleEJ1ZmZlci5NYXRyaWNlc0luZGljZXNFeHRyYUtpbmQpIHtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWVzaC5udW1Cb25lSW5mbHVlbmNlcnMgPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soYWNjZXNzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiUE9TSVRJT05cIiwgVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJOT1JNQUxcIiwgVmVydGV4QnVmZmVyLk5vcm1hbEtpbmQpO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEFOR0VOVFwiLCBWZXJ0ZXhCdWZmZXIuVGFuZ2VudEtpbmQpO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEVYQ09PUkRfMFwiLCBWZXJ0ZXhCdWZmZXIuVVZLaW5kKTtcbiAgICAgICAgbG9hZEF0dHJpYnV0ZShcIlRFWENPT1JEXzFcIiwgVmVydGV4QnVmZmVyLlVWMktpbmQpO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEVYQ09PUkRfMlwiLCBWZXJ0ZXhCdWZmZXIuVVYzS2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJURVhDT09SRF8zXCIsIFZlcnRleEJ1ZmZlci5VVjRLaW5kKTtcbiAgICAgICAgbG9hZEF0dHJpYnV0ZShcIlRFWENPT1JEXzRcIiwgVmVydGV4QnVmZmVyLlVWNUtpbmQpO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEVYQ09PUkRfNVwiLCBWZXJ0ZXhCdWZmZXIuVVY2S2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJKT0lOVFNfMFwiLCBWZXJ0ZXhCdWZmZXIuTWF0cmljZXNJbmRpY2VzS2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJXRUlHSFRTXzBcIiwgVmVydGV4QnVmZmVyLk1hdHJpY2VzV2VpZ2h0c0tpbmQpO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiSk9JTlRTXzFcIiwgVmVydGV4QnVmZmVyLk1hdHJpY2VzSW5kaWNlc0V4dHJhS2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJXRUlHSFRTXzFcIiwgVmVydGV4QnVmZmVyLk1hdHJpY2VzV2VpZ2h0c0V4dHJhS2luZCk7XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJDT0xPUl8wXCIsIFZlcnRleEJ1ZmZlci5Db2xvcktpbmQsIChhY2Nlc3NvcikgPT4ge1xuICAgICAgICAgICAgaWYgKGFjY2Vzc29yLnR5cGUgPT09IFwiVkVDNFwiIC8qIEFjY2Vzc29yVHlwZS5WRUM0ICovKSB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1lc2guaGFzVmVydGV4QWxwaGEgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiYWJ5bG9uR2VvbWV0cnk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfY3JlYXRlTW9ycGhUYXJnZXRzKGNvbnRleHQsIG5vZGUsIG1lc2gsIHByaW1pdGl2ZSwgYmFieWxvbk1lc2gpIHtcbiAgICAgICAgaWYgKCFwcmltaXRpdmUudGFyZ2V0cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLl9udW1Nb3JwaFRhcmdldHMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBub2RlLl9udW1Nb3JwaFRhcmdldHMgPSBwcmltaXRpdmUudGFyZ2V0cy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJpbWl0aXZlLnRhcmdldHMubGVuZ3RoICE9PSBub2RlLl9udW1Nb3JwaFRhcmdldHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogUHJpbWl0aXZlcyBkbyBub3QgaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgdGFyZ2V0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldE5hbWVzID0gbWVzaC5leHRyYXMgPyBtZXNoLmV4dHJhcy50YXJnZXROYW1lcyA6IG51bGw7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISF0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgYmFieWxvbk1lc2gubW9ycGhUYXJnZXRNYW5hZ2VyID0gbmV3IE1vcnBoVGFyZ2V0TWFuYWdlcih0aGlzLl9iYWJ5bG9uU2NlbmUpO1xuICAgICAgICBiYWJ5bG9uTWVzaC5tb3JwaFRhcmdldE1hbmFnZXIuX3BhcmVudENvbnRhaW5lciA9IHRoaXMuX2Fzc2V0Q29udGFpbmVyO1xuICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICBiYWJ5bG9uTWVzaC5tb3JwaFRhcmdldE1hbmFnZXIuYXJlVXBkYXRlc0Zyb3plbiA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwcmltaXRpdmUudGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IHdlaWdodCA9IG5vZGUud2VpZ2h0cyA/IG5vZGUud2VpZ2h0c1tpbmRleF0gOiBtZXNoLndlaWdodHMgPyBtZXNoLndlaWdodHNbaW5kZXhdIDogMDtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0YXJnZXROYW1lcyA/IHRhcmdldE5hbWVzW2luZGV4XSA6IGBtb3JwaFRhcmdldCR7aW5kZXh9YDtcbiAgICAgICAgICAgIGJhYnlsb25NZXNoLm1vcnBoVGFyZ2V0TWFuYWdlci5hZGRUYXJnZXQobmV3IE1vcnBoVGFyZ2V0KG5hbWUsIHdlaWdodCwgYmFieWxvbk1lc2guZ2V0U2NlbmUoKSkpO1xuICAgICAgICAgICAgLy8gVE9ETzogdGVsbCB0aGUgdGFyZ2V0IHdoZXRoZXIgaXQgaGFzIHBvc2l0aW9ucywgbm9ybWFscywgdGFuZ2VudHNcbiAgICAgICAgfVxuICAgIH1cbiAgICBfbG9hZE1vcnBoVGFyZ2V0c0FzeW5jKGNvbnRleHQsIHByaW1pdGl2ZSwgYmFieWxvbk1lc2gsIGJhYnlsb25HZW9tZXRyeSkge1xuICAgICAgICBpZiAoIXByaW1pdGl2ZS50YXJnZXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgY29uc3QgbW9ycGhUYXJnZXRNYW5hZ2VyID0gYmFieWxvbk1lc2gubW9ycGhUYXJnZXRNYW5hZ2VyO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbW9ycGhUYXJnZXRNYW5hZ2VyLm51bVRhcmdldHM7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJhYnlsb25Nb3JwaFRhcmdldCA9IG1vcnBoVGFyZ2V0TWFuYWdlci5nZXRUYXJnZXQoaW5kZXgpO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTW9ycGhUYXJnZXRWZXJ0ZXhEYXRhQXN5bmMoYCR7Y29udGV4dH0vdGFyZ2V0cy8ke2luZGV4fWAsIGJhYnlsb25HZW9tZXRyeSwgcHJpbWl0aXZlLnRhcmdldHNbaW5kZXhdLCBiYWJ5bG9uTW9ycGhUYXJnZXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgbW9ycGhUYXJnZXRNYW5hZ2VyLmFyZVVwZGF0ZXNGcm96ZW4gPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkTW9ycGhUYXJnZXRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dCwgYmFieWxvbkdlb21ldHJ5LCBhdHRyaWJ1dGVzLCBiYWJ5bG9uTW9ycGhUYXJnZXQpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgY29uc3QgbG9hZEF0dHJpYnV0ZSA9IChhdHRyaWJ1dGUsIGtpbmQsIHNldERhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzW2F0dHJpYnV0ZV0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYmFieWxvblZlcnRleEJ1ZmZlciA9IGJhYnlsb25HZW9tZXRyeS5nZXRWZXJ0ZXhCdWZmZXIoa2luZCk7XG4gICAgICAgICAgICBpZiAoIWJhYnlsb25WZXJ0ZXhCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NvciA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vJHthdHRyaWJ1dGV9YCwgdGhpcy5fZ2x0Zi5hY2Nlc3NvcnMsIGF0dHJpYnV0ZXNbYXR0cmlidXRlXSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2xvYWRGbG9hdEFjY2Vzc29yQXN5bmMoYC9hY2Nlc3NvcnMvJHthY2Nlc3Nvci5pbmRleH1gLCBhY2Nlc3NvcikudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHNldERhdGEoYmFieWxvblZlcnRleEJ1ZmZlciwgZGF0YSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRBdHRyaWJ1dGUoXCJQT1NJVElPTlwiLCBWZXJ0ZXhCdWZmZXIuUG9zaXRpb25LaW5kLCAoYmFieWxvblZlcnRleEJ1ZmZlciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICBiYWJ5bG9uVmVydGV4QnVmZmVyLmZvckVhY2goZGF0YS5sZW5ndGgsICh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbaW5kZXhdID0gZGF0YVtpbmRleF0gKyB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFieWxvbk1vcnBoVGFyZ2V0LnNldFBvc2l0aW9ucyhwb3NpdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZEF0dHJpYnV0ZShcIk5PUk1BTFwiLCBWZXJ0ZXhCdWZmZXIuTm9ybWFsS2luZCwgKGJhYnlsb25WZXJ0ZXhCdWZmZXIsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgIGJhYnlsb25WZXJ0ZXhCdWZmZXIuZm9yRWFjaChub3JtYWxzLmxlbmd0aCwgKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaW5kZXhdID0gZGF0YVtpbmRleF0gKyB2YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFieWxvbk1vcnBoVGFyZ2V0LnNldE5vcm1hbHMobm9ybWFscyk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2FkQXR0cmlidXRlKFwiVEFOR0VOVFwiLCBWZXJ0ZXhCdWZmZXIuVGFuZ2VudEtpbmQsIChiYWJ5bG9uVmVydGV4QnVmZmVyLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YW5nZW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoKGRhdGEubGVuZ3RoIC8gMykgKiA0KTtcbiAgICAgICAgICAgIGxldCBkYXRhSW5kZXggPSAwO1xuICAgICAgICAgICAgYmFieWxvblZlcnRleEJ1ZmZlci5mb3JFYWNoKChkYXRhLmxlbmd0aCAvIDMpICogNCwgKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRhbmdlbnQgZGF0YSBmb3IgbW9ycGggdGFyZ2V0cyBpcyBzdG9yZWQgYXMgeHl6IGRlbHRhLlxuICAgICAgICAgICAgICAgIC8vIFRoZSB2ZXJ0ZXhEYXRhLnRhbmdlbnQgaXMgc3RvcmVkIGFzIHh5encuXG4gICAgICAgICAgICAgICAgLy8gU28gd2UgbmVlZCB0byBza2lwIGV2ZXJ5IGZvdXJ0aCB2ZXJ0ZXhEYXRhLnRhbmdlbnQuXG4gICAgICAgICAgICAgICAgaWYgKChpbmRleCArIDEpICUgNCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YW5nZW50c1tkYXRhSW5kZXhdID0gZGF0YVtkYXRhSW5kZXhdICsgdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFieWxvbk1vcnBoVGFyZ2V0LnNldFRhbmdlbnRzKHRhbmdlbnRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbiAgICBzdGF0aWMgX0xvYWRUcmFuc2Zvcm0obm9kZSwgYmFieWxvbk5vZGUpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBUUlMgb2Ygc2tpbm5lZCBub2Rlcy5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNza2lucyAoc2Vjb25kIGltcGxlbWVudGF0aW9uIG5vdGUpXG4gICAgICAgIGlmIChub2RlLnNraW4gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBvc2l0aW9uID0gVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIGxldCByb3RhdGlvbiA9IFF1YXRlcm5pb24uSWRlbnRpdHkoKTtcbiAgICAgICAgbGV0IHNjYWxpbmcgPSBWZWN0b3IzLk9uZSgpO1xuICAgICAgICBpZiAobm9kZS5tYXRyaXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeCA9IE1hdHJpeC5Gcm9tQXJyYXkobm9kZS5tYXRyaXgpO1xuICAgICAgICAgICAgbWF0cml4LmRlY29tcG9zZShzY2FsaW5nLCByb3RhdGlvbiwgcG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG5vZGUudHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IFZlY3RvcjMuRnJvbUFycmF5KG5vZGUudHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vZGUucm90YXRpb24pIHtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IFF1YXRlcm5pb24uRnJvbUFycmF5KG5vZGUucm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vZGUuc2NhbGUpIHtcbiAgICAgICAgICAgICAgICBzY2FsaW5nID0gVmVjdG9yMy5Gcm9tQXJyYXkobm9kZS5zY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYmFieWxvbk5vZGUucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgYmFieWxvbk5vZGUucm90YXRpb25RdWF0ZXJuaW9uID0gcm90YXRpb247XG4gICAgICAgIGJhYnlsb25Ob2RlLnNjYWxpbmcgPSBzY2FsaW5nO1xuICAgIH1cbiAgICBfbG9hZFNraW5Bc3luYyhjb250ZXh0LCBub2RlLCBza2luLCBhc3NpZ24pIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkU2tpbkFzeW5jKGNvbnRleHQsIG5vZGUsIHNraW4pO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraW4uX2RhdGEpIHtcbiAgICAgICAgICAgIGFzc2lnbihza2luLl9kYXRhLmJhYnlsb25Ta2VsZXRvbik7XG4gICAgICAgICAgICByZXR1cm4gc2tpbi5fZGF0YS5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNrZWxldG9uSWQgPSBgc2tlbGV0b24ke3NraW4uaW5kZXh9YDtcbiAgICAgICAgdGhpcy5fYmFieWxvblNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSAhIXRoaXMuX2Fzc2V0Q29udGFpbmVyO1xuICAgICAgICBjb25zdCBiYWJ5bG9uU2tlbGV0b24gPSBuZXcgU2tlbGV0b24oc2tpbi5uYW1lIHx8IHNrZWxldG9uSWQsIHNrZWxldG9uSWQsIHRoaXMuX2JhYnlsb25TY2VuZSk7XG4gICAgICAgIGJhYnlsb25Ta2VsZXRvbi5fcGFyZW50Q29udGFpbmVyID0gdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2xvYWRCb25lcyhjb250ZXh0LCBza2luLCBiYWJ5bG9uU2tlbGV0b24pO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fbG9hZFNraW5JbnZlcnNlQmluZE1hdHJpY2VzRGF0YUFzeW5jKGNvbnRleHQsIHNraW4pLnRoZW4oKGludmVyc2VCaW5kTWF0cmljZXNEYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVCb25lTWF0cmljZXMoYmFieWxvblNrZWxldG9uLCBpbnZlcnNlQmluZE1hdHJpY2VzRGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBza2luLl9kYXRhID0ge1xuICAgICAgICAgICAgYmFieWxvblNrZWxldG9uOiBiYWJ5bG9uU2tlbGV0b24sXG4gICAgICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICB9O1xuICAgICAgICBhc3NpZ24oYmFieWxvblNrZWxldG9uKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIF9sb2FkQm9uZXMoY29udGV4dCwgc2tpbiwgYmFieWxvblNrZWxldG9uKSB7XG4gICAgICAgIGlmIChza2luLnNrZWxldG9uID09IHVuZGVmaW5lZCB8fCB0aGlzLl9wYXJlbnQuYWx3YXlzQ29tcHV0ZVNrZWxldG9uUm9vdE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGhpcy5fZmluZFNrZWxldG9uUm9vdE5vZGUoYCR7Y29udGV4dH0vam9pbnRzYCwgc2tpbi5qb2ludHMpO1xuICAgICAgICAgICAgaWYgKHJvb3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraW4uc2tlbGV0b24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBza2luLnNrZWxldG9uID0gcm9vdE5vZGUuaW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1BhcmVudCA9IChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYi5wYXJlbnQ7IGIgPSBiLnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLnBhcmVudCA9PT0gYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNrZWxldG9uTm9kZSA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vc2tlbGV0b25gLCB0aGlzLl9nbHRmLm5vZGVzLCBza2luLnNrZWxldG9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNrZWxldG9uTm9kZSAhPT0gcm9vdE5vZGUgJiYgIWlzUGFyZW50KHNrZWxldG9uTm9kZSwgcm9vdE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuV2FybihgJHtjb250ZXh0fS9za2VsZXRvbjogT3ZlcnJpZGluZyB3aXRoIG5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIGFzIHNrZWxldG9uIG5vZGUgaXMgbm90IGEgY29tbW9uIHJvb3RgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW4uc2tlbGV0b24gPSByb290Tm9kZS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIExvZ2dlci5XYXJuKGAke2NvbnRleHR9OiBGYWlsZWQgdG8gZmluZCBjb21tb24gcm9vdGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhYnlsb25Cb25lcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIHNraW4uam9pbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9qb2ludHMvJHtpbmRleH1gLCB0aGlzLl9nbHRmLm5vZGVzLCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLl9sb2FkQm9uZShub2RlLCBza2luLCBiYWJ5bG9uU2tlbGV0b24sIGJhYnlsb25Cb25lcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2ZpbmRTa2VsZXRvblJvb3ROb2RlKGNvbnRleHQsIGpvaW50cykge1xuICAgICAgICBpZiAoam9pbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBqb2ludHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBbXTtcbiAgICAgICAgICAgIGxldCBub2RlID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS8ke2luZGV4fWAsIHRoaXMuX2dsdGYubm9kZXMsIGluZGV4KTtcbiAgICAgICAgICAgIHdoaWxlIChub2RlLmluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdChub2RlKTtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRoc1tpbmRleF0gPSBwYXRoO1xuICAgICAgICB9XG4gICAgICAgIGxldCByb290Tm9kZSA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOzsgKytpKSB7XG4gICAgICAgICAgICBsZXQgcGF0aCA9IHBhdGhzW2pvaW50c1swXV07XG4gICAgICAgICAgICBpZiAoaSA+PSBwYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb290Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBwYXRoW2ldO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBqb2ludHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aHNbam9pbnRzW2pdXTtcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBwYXRoLmxlbmd0aCB8fCBub2RlICE9PSBwYXRoW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290Tm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb290Tm9kZSA9IG5vZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2xvYWRCb25lKG5vZGUsIHNraW4sIGJhYnlsb25Ta2VsZXRvbiwgYmFieWxvbkJvbmVzKSB7XG4gICAgICAgIGxldCBiYWJ5bG9uQm9uZSA9IGJhYnlsb25Cb25lc1tub2RlLmluZGV4XTtcbiAgICAgICAgaWYgKGJhYnlsb25Cb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFieWxvbkJvbmU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudEJhYnlsb25Cb25lID0gbnVsbDtcbiAgICAgICAgaWYgKG5vZGUuaW5kZXggIT09IHNraW4uc2tlbGV0b24pIHtcbiAgICAgICAgICAgIGlmIChub2RlLnBhcmVudCAmJiBub2RlLnBhcmVudC5pbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRCYWJ5bG9uQm9uZSA9IHRoaXMuX2xvYWRCb25lKG5vZGUucGFyZW50LCBza2luLCBiYWJ5bG9uU2tlbGV0b24sIGJhYnlsb25Cb25lcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChza2luLnNrZWxldG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBMb2dnZXIuV2FybihgL3NraW5zLyR7c2tpbi5pbmRleH0vc2tlbGV0b246IFNrZWxldG9uIG5vZGUgaXMgbm90IGEgY29tbW9uIHJvb3RgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBib25lSW5kZXggPSBza2luLmpvaW50cy5pbmRleE9mKG5vZGUuaW5kZXgpO1xuICAgICAgICBiYWJ5bG9uQm9uZSA9IG5ldyBCb25lKG5vZGUubmFtZSB8fCBgam9pbnQke25vZGUuaW5kZXh9YCwgYmFieWxvblNrZWxldG9uLCBwYXJlbnRCYWJ5bG9uQm9uZSwgdGhpcy5fZ2V0Tm9kZU1hdHJpeChub2RlKSwgbnVsbCwgbnVsbCwgYm9uZUluZGV4KTtcbiAgICAgICAgYmFieWxvbkJvbmVzW25vZGUuaW5kZXhdID0gYmFieWxvbkJvbmU7XG4gICAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHNjZW5lIGlzIGxvYWRlZCB0byBlbnN1cmUgdGhlIHRyYW5zZm9ybSBub2RlcyBhcmUgbG9hZGVkLlxuICAgICAgICB0aGlzLl9wb3N0U2NlbmVMb2FkQWN0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIExpbmsgdGhlIEJhYnlsb24gYm9uZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIEJhYnlsb24gdHJhbnNmb3JtIG5vZGUuXG4gICAgICAgICAgICAvLyBBIGdsVEYgam9pbnQgaXMgYSBwb2ludGVyIHRvIGEgZ2xURiBub2RlIGluIHRoZSBnbFRGIG5vZGUgaGllcmFyY2h5IHNpbWlsYXIgdG8gVW5pdHkzRC5cbiAgICAgICAgICAgIGJhYnlsb25Cb25lLmxpbmtUcmFuc2Zvcm1Ob2RlKG5vZGUuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBiYWJ5bG9uQm9uZTtcbiAgICB9XG4gICAgX2xvYWRTa2luSW52ZXJzZUJpbmRNYXRyaWNlc0RhdGFBc3luYyhjb250ZXh0LCBza2luKSB7XG4gICAgICAgIGlmIChza2luLmludmVyc2VCaW5kTWF0cmljZXMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjY2Vzc29yID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9pbnZlcnNlQmluZE1hdHJpY2VzYCwgdGhpcy5fZ2x0Zi5hY2Nlc3NvcnMsIHNraW4uaW52ZXJzZUJpbmRNYXRyaWNlcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkRmxvYXRBY2Nlc3NvckFzeW5jKGAvYWNjZXNzb3JzLyR7YWNjZXNzb3IuaW5kZXh9YCwgYWNjZXNzb3IpO1xuICAgIH1cbiAgICBfdXBkYXRlQm9uZU1hdHJpY2VzKGJhYnlsb25Ta2VsZXRvbiwgaW52ZXJzZUJpbmRNYXRyaWNlc0RhdGEpIHtcbiAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uQm9uZSBvZiBiYWJ5bG9uU2tlbGV0b24uYm9uZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VNYXRyaXggPSBNYXRyaXguSWRlbnRpdHkoKTtcbiAgICAgICAgICAgIGNvbnN0IGJvbmVJbmRleCA9IGJhYnlsb25Cb25lLl9pbmRleDtcbiAgICAgICAgICAgIGlmIChpbnZlcnNlQmluZE1hdHJpY2VzRGF0YSAmJiBib25lSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgTWF0cml4LkZyb21BcnJheVRvUmVmKGludmVyc2VCaW5kTWF0cmljZXNEYXRhLCBib25lSW5kZXggKiAxNiwgYmFzZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgYmFzZU1hdHJpeC5pbnZlcnRUb1JlZihiYXNlTWF0cml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJhYnlsb25QYXJlbnRCb25lID0gYmFieWxvbkJvbmUuZ2V0UGFyZW50KCk7XG4gICAgICAgICAgICBpZiAoYmFieWxvblBhcmVudEJvbmUpIHtcbiAgICAgICAgICAgICAgICBiYXNlTWF0cml4Lm11bHRpcGx5VG9SZWYoYmFieWxvblBhcmVudEJvbmUuZ2V0QWJzb2x1dGVJbnZlcnNlQmluZE1hdHJpeCgpLCBiYXNlTWF0cml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhYnlsb25Cb25lLnVwZGF0ZU1hdHJpeChiYXNlTWF0cml4LCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgYmFieWxvbkJvbmUuX3VwZGF0ZUFic29sdXRlQmluZE1hdHJpY2VzKHVuZGVmaW5lZCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXROb2RlTWF0cml4KG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUubWF0cml4XG4gICAgICAgICAgICA/IE1hdHJpeC5Gcm9tQXJyYXkobm9kZS5tYXRyaXgpXG4gICAgICAgICAgICA6IE1hdHJpeC5Db21wb3NlKG5vZGUuc2NhbGUgPyBWZWN0b3IzLkZyb21BcnJheShub2RlLnNjYWxlKSA6IFZlY3RvcjMuT25lKCksIG5vZGUucm90YXRpb24gPyBRdWF0ZXJuaW9uLkZyb21BcnJheShub2RlLnJvdGF0aW9uKSA6IFF1YXRlcm5pb24uSWRlbnRpdHkoKSwgbm9kZS50cmFuc2xhdGlvbiA/IFZlY3RvcjMuRnJvbUFycmF5KG5vZGUudHJhbnNsYXRpb24pIDogVmVjdG9yMy5aZXJvKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgY2FtZXJhLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gY2FtZXJhIFRoZSBnbFRGIGNhbWVyYSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBhc3NpZ24gQSBmdW5jdGlvbiBjYWxsZWQgc3luY2hyb25vdXNseSBhZnRlciBwYXJzaW5nIHRoZSBnbFRGIHByb3BlcnRpZXNcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBsb2FkZWQgQmFieWxvbiBjYW1lcmEgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRDYW1lcmFBc3luYyhjb250ZXh0LCBjYW1lcmEsIGFzc2lnbiA9ICgpID0+IHsgfSkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25Qcm9taXNlID0gdGhpcy5fZXh0ZW5zaW9uc0xvYWRDYW1lcmFBc3luYyhjb250ZXh0LCBjYW1lcmEsIGFzc2lnbik7XG4gICAgICAgIGlmIChleHRlbnNpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLmxvZ09wZW4oYCR7Y29udGV4dH0gJHtjYW1lcmEubmFtZSB8fCBcIlwifWApO1xuICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9ICEhdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgIGNvbnN0IGJhYnlsb25DYW1lcmEgPSBuZXcgRnJlZUNhbWVyYShjYW1lcmEubmFtZSB8fCBgY2FtZXJhJHtjYW1lcmEuaW5kZXh9YCwgVmVjdG9yMy5aZXJvKCksIHRoaXMuX2JhYnlsb25TY2VuZSwgZmFsc2UpO1xuICAgICAgICBiYWJ5bG9uQ2FtZXJhLl9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5fYmFieWxvblNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgYmFieWxvbkNhbWVyYS5pZ25vcmVQYXJlbnRTY2FsaW5nID0gdHJ1ZTtcbiAgICAgICAgY2FtZXJhLl9iYWJ5bG9uQ2FtZXJhID0gYmFieWxvbkNhbWVyYTtcbiAgICAgICAgLy8gUm90YXRpb24gYnkgMTgwIGFzIGdsVEYgaGFzIGEgZGlmZmVyZW50IGNvbnZlbnRpb24gdGhhbiBCYWJ5bG9uLlxuICAgICAgICBiYWJ5bG9uQ2FtZXJhLnJvdGF0aW9uLnNldCgwLCBNYXRoLlBJLCAwKTtcbiAgICAgICAgc3dpdGNoIChjYW1lcmEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInBlcnNwZWN0aXZlXCIgLyogQ2FtZXJhVHlwZS5QRVJTUEVDVElWRSAqLzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNwZWN0aXZlID0gY2FtZXJhLnBlcnNwZWN0aXZlO1xuICAgICAgICAgICAgICAgIGlmICghcGVyc3BlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBDYW1lcmEgcGVyc3BlY3RpdmUgcHJvcGVydGllcyBhcmUgbWlzc2luZ2ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBiYWJ5bG9uQ2FtZXJhLmZvdiA9IHBlcnNwZWN0aXZlLnlmb3Y7XG4gICAgICAgICAgICAgICAgYmFieWxvbkNhbWVyYS5taW5aID0gcGVyc3BlY3RpdmUuem5lYXI7XG4gICAgICAgICAgICAgICAgYmFieWxvbkNhbWVyYS5tYXhaID0gcGVyc3BlY3RpdmUuemZhciB8fCAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIm9ydGhvZ3JhcGhpY1wiIC8qIENhbWVyYVR5cGUuT1JUSE9HUkFQSElDICovOiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW1lcmEub3J0aG9ncmFwaGljKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogQ2FtZXJhIG9ydGhvZ3JhcGhpYyBwcm9wZXJ0aWVzIGFyZSBtaXNzaW5nYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhYnlsb25DYW1lcmEubW9kZSA9IENhbWVyYS5PUlRIT0dSQVBISUNfQ0FNRVJBO1xuICAgICAgICAgICAgICAgIGJhYnlsb25DYW1lcmEub3J0aG9MZWZ0ID0gLWNhbWVyYS5vcnRob2dyYXBoaWMueG1hZztcbiAgICAgICAgICAgICAgICBiYWJ5bG9uQ2FtZXJhLm9ydGhvUmlnaHQgPSBjYW1lcmEub3J0aG9ncmFwaGljLnhtYWc7XG4gICAgICAgICAgICAgICAgYmFieWxvbkNhbWVyYS5vcnRob0JvdHRvbSA9IC1jYW1lcmEub3J0aG9ncmFwaGljLnltYWc7XG4gICAgICAgICAgICAgICAgYmFieWxvbkNhbWVyYS5vcnRob1RvcCA9IGNhbWVyYS5vcnRob2dyYXBoaWMueW1hZztcbiAgICAgICAgICAgICAgICBiYWJ5bG9uQ2FtZXJhLm1pblogPSBjYW1lcmEub3J0aG9ncmFwaGljLnpuZWFyO1xuICAgICAgICAgICAgICAgIGJhYnlsb25DYW1lcmEubWF4WiA9IGNhbWVyYS5vcnRob2dyYXBoaWMuemZhcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IEludmFsaWQgY2FtZXJhIHR5cGUgKCR7Y2FtZXJhLnR5cGV9KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIEdMVEZMb2FkZXIuQWRkUG9pbnRlck1ldGFkYXRhKGJhYnlsb25DYW1lcmEsIGNvbnRleHQpO1xuICAgICAgICB0aGlzLl9wYXJlbnQub25DYW1lcmFMb2FkZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhiYWJ5bG9uQ2FtZXJhKTtcbiAgICAgICAgYXNzaWduKGJhYnlsb25DYW1lcmEpO1xuICAgICAgICB0aGlzLmxvZ0Nsb3NlKCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYmFieWxvbkNhbWVyYTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9sb2FkQW5pbWF0aW9uc0FzeW5jKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gdGhpcy5fZ2x0Zi5hbmltYXRpb25zO1xuICAgICAgICBpZiAoIWFuaW1hdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYW5pbWF0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRBbmltYXRpb25Bc3luYyhgL2FuaW1hdGlvbnMvJHthbmltYXRpb24uaW5kZXh9YCwgYW5pbWF0aW9uKS50aGVuKChhbmltYXRpb25Hcm91cCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgYW5pbWF0aW9uIGdyb3VwIGlmIGl0IGVuZGVkIHVwIG5vdCBoYXZpbmcgYW55IGFuaW1hdGlvbnMgaW4gaXQuXG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkdyb3VwLnRhcmdldGVkQW5pbWF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uR3JvdXAuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4geyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBnbFRGIGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgY29udGV4dCB3aGVuIGxvYWRpbmcgdGhlIGFzc2V0XG4gICAgICogQHBhcmFtIGFuaW1hdGlvbiBUaGUgZ2xURiBhbmltYXRpb24gcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBsb2FkZWQgQmFieWxvbiBhbmltYXRpb24gZ3JvdXAgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRBbmltYXRpb25Bc3luYyhjb250ZXh0LCBhbmltYXRpb24pIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkQW5pbWF0aW9uQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uKTtcbiAgICAgICAgaWYgKHByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISF0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYmFieWxvbkFuaW1hdGlvbkdyb3VwID0gbmV3IEFuaW1hdGlvbkdyb3VwKGFuaW1hdGlvbi5uYW1lIHx8IGBhbmltYXRpb24ke2FuaW1hdGlvbi5pbmRleH1gLCB0aGlzLl9iYWJ5bG9uU2NlbmUpO1xuICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAuX3BhcmVudENvbnRhaW5lciA9IHRoaXMuX2Fzc2V0Q29udGFpbmVyO1xuICAgICAgICB0aGlzLl9iYWJ5bG9uU2NlbmUuX2Jsb2NrRW50aXR5Q29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICBhbmltYXRpb24uX2JhYnlsb25BbmltYXRpb25Hcm91cCA9IGJhYnlsb25BbmltYXRpb25Hcm91cDtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgQXJyYXlJdGVtLkFzc2lnbihhbmltYXRpb24uY2hhbm5lbHMpO1xuICAgICAgICBBcnJheUl0ZW0uQXNzaWduKGFuaW1hdGlvbi5zYW1wbGVycyk7XG4gICAgICAgIGZvciAoY29uc3QgY2hhbm5lbCBvZiBhbmltYXRpb24uY2hhbm5lbHMpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fbG9hZEFuaW1hdGlvbkNoYW5uZWxBc3luYyhgJHtjb250ZXh0fS9jaGFubmVscy8ke2NoYW5uZWwuaW5kZXh9YCwgY29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCAoYmFieWxvblRhcmdldCwgYmFieWxvbkFuaW1hdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJhYnlsb25UYXJnZXQuYW5pbWF0aW9ucyA9IGJhYnlsb25UYXJnZXQuYW5pbWF0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uVGFyZ2V0LmFuaW1hdGlvbnMucHVzaChiYWJ5bG9uQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uR3JvdXAuYWRkVGFyZ2V0ZWRBbmltYXRpb24oYmFieWxvbkFuaW1hdGlvbiwgYmFieWxvblRhcmdldCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGJhYnlsb25BbmltYXRpb25Hcm91cC5ub3JtYWxpemUoMCk7XG4gICAgICAgICAgICByZXR1cm4gYmFieWxvbkFuaW1hdGlvbkdyb3VwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGhpZGRlblxuICAgICAqIExvYWRzIGEgZ2xURiBhbmltYXRpb24gY2hhbm5lbC5cbiAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgY29udGV4dCB3aGVuIGxvYWRpbmcgdGhlIGFzc2V0XG4gICAgICogQHBhcmFtIGFuaW1hdGlvbkNvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGFuaW1hdGlvbiB3aGVuIGxvYWRpbmcgdGhlIGFzc2V0XG4gICAgICogQHBhcmFtIGFuaW1hdGlvbiBUaGUgZ2xURiBhbmltYXRpb24gcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gY2hhbm5lbCBUaGUgZ2xURiBhbmltYXRpb24gY2hhbm5lbCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBvbkxvYWQgQ2FsbGVkIGZvciBlYWNoIGFuaW1hdGlvbiBsb2FkZWRcbiAgICAgKiBAcmV0dXJucyBBIHZvaWQgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGxvYWQgaXMgY29tcGxldGVcbiAgICAgKi9cbiAgICBfbG9hZEFuaW1hdGlvbkNoYW5uZWxBc3luYyhjb250ZXh0LCBhbmltYXRpb25Db250ZXh0LCBhbmltYXRpb24sIGNoYW5uZWwsIG9uTG9hZCkge1xuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fZXh0ZW5zaW9uc0xvYWRBbmltYXRpb25DaGFubmVsQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCBvbkxvYWQpO1xuICAgICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWwudGFyZ2V0Lm5vZGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vdGFyZ2V0L25vZGVgLCB0aGlzLl9nbHRmLm5vZGVzLCBjaGFubmVsLnRhcmdldC5ub2RlKTtcbiAgICAgICAgLy8gSWdub3JlIGFuaW1hdGlvbnMgdGhhdCBoYXZlIG5vIGFuaW1hdGlvbiB0YXJnZXRzLlxuICAgICAgICBpZiAoKGNoYW5uZWwudGFyZ2V0LnBhdGggPT09IFwid2VpZ2h0c1wiIC8qIEFuaW1hdGlvbkNoYW5uZWxUYXJnZXRQYXRoLldFSUdIVFMgKi8gJiYgIXRhcmdldE5vZGUuX251bU1vcnBoVGFyZ2V0cykgfHxcbiAgICAgICAgICAgIChjaGFubmVsLnRhcmdldC5wYXRoICE9PSBcIndlaWdodHNcIiAvKiBBbmltYXRpb25DaGFubmVsVGFyZ2V0UGF0aC5XRUlHSFRTICovICYmICF0YXJnZXROb2RlLl9iYWJ5bG9uVHJhbnNmb3JtTm9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJvcGVydGllcztcbiAgICAgICAgc3dpdGNoIChjaGFubmVsLnRhcmdldC5wYXRoKSB7XG4gICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb25cIiAvKiBBbmltYXRpb25DaGFubmVsVGFyZ2V0UGF0aC5UUkFOU0xBVElPTiAqLzoge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBub2RlQW5pbWF0aW9uRGF0YS50cmFuc2xhdGlvbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJyb3RhdGlvblwiIC8qIEFuaW1hdGlvbkNoYW5uZWxUYXJnZXRQYXRoLlJPVEFUSU9OICovOiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IG5vZGVBbmltYXRpb25EYXRhLnJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInNjYWxlXCIgLyogQW5pbWF0aW9uQ2hhbm5lbFRhcmdldFBhdGguU0NBTEUgKi86IHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gbm9kZUFuaW1hdGlvbkRhdGEuc2NhbGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwid2VpZ2h0c1wiIC8qIEFuaW1hdGlvbkNoYW5uZWxUYXJnZXRQYXRoLldFSUdIVFMgKi86IHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gbm9kZUFuaW1hdGlvbkRhdGEud2VpZ2h0cztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH0vdGFyZ2V0L3BhdGg6IEludmFsaWQgdmFsdWUgKCR7Y2hhbm5lbC50YXJnZXQucGF0aH0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0SW5mbyA9IHtcbiAgICAgICAgICAgIG9iamVjdDogdGFyZ2V0Tm9kZSxcbiAgICAgICAgICAgIGluZm86IHByb3BlcnRpZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2FkQW5pbWF0aW9uQ2hhbm5lbEZyb21UYXJnZXRJbmZvQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCB0YXJnZXRJbmZvLCBvbkxvYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogTG9hZHMgYSBnbFRGIGFuaW1hdGlvbiBjaGFubmVsLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgYW5pbWF0aW9uIHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uIFRoZSBnbFRGIGFuaW1hdGlvbiBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBjaGFubmVsIFRoZSBnbFRGIGFuaW1hdGlvbiBjaGFubmVsIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHRhcmdldEluZm8gVGhlIGdsVEYgdGFyZ2V0IGFuZCBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIG9uTG9hZCBDYWxsZWQgZm9yIGVhY2ggYW5pbWF0aW9uIGxvYWRlZFxuICAgICAqIEByZXR1cm5zIEEgdm9pZCBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIF9sb2FkQW5pbWF0aW9uQ2hhbm5lbEZyb21UYXJnZXRJbmZvQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCB0YXJnZXRJbmZvLCBvbkxvYWQpIHtcbiAgICAgICAgY29uc3QgZnBzID0gdGhpcy5wYXJlbnQudGFyZ2V0RnBzO1xuICAgICAgICBjb25zdCBpbnZmcHMgPSAxIC8gZnBzO1xuICAgICAgICBjb25zdCBzYW1wbGVyID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9zYW1wbGVyYCwgYW5pbWF0aW9uLnNhbXBsZXJzLCBjaGFubmVsLnNhbXBsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZEFuaW1hdGlvblNhbXBsZXJBc3luYyhgJHthbmltYXRpb25Db250ZXh0fS9zYW1wbGVycy8ke2NoYW5uZWwuc2FtcGxlcn1gLCBzYW1wbGVyKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgbnVtQW5pbWF0aW9ucyA9IDA7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRJbmZvLm9iamVjdDtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5SW5mb3MgPSB0YXJnZXRJbmZvLmluZm87XG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBmcm9tIHRoZSByZWFkIHZhbHVlLlxuICAgICAgICAgICAgLy8gR0xURiB2YWx1ZXMgbWF5IGJlIGRpc3BhdGNoZWQgdG8gc2V2ZXJhbCBCYWJ5bG9uIHByb3BlcnRpZXMuXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgYmFzZUNvbG9yRmFjdG9yIFtgcmAsIGBnYCwgYGJgLCBgYWBdIGlzIGRpc3BhdGNoZWQgdG9cbiAgICAgICAgICAgIC8vIC0gYWxiZWRvQ29sb3IgYXMgQ29sb3IzKGByYCwgYGdgLCBgYmApXG4gICAgICAgICAgICAvLyAtIGFscGhhIGFzIGBhYFxuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eUluZm8gb2YgcHJvcGVydHlJbmZvcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmlkZSA9IHByb3BlcnR5SW5mby5nZXRTdHJpZGUodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRhdGEuaW5wdXQ7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gZGF0YS5vdXRwdXQ7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBBcnJheShpbnB1dC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGxldCBvdXRwdXRPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5pbnRlcnBvbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTVEVQXCIgLyogQW5pbWF0aW9uU2FtcGxlckludGVycG9sYXRpb24uU1RFUCAqLzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGlucHV0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydHlJbmZvLmdldFZhbHVlKHRhcmdldCwgb3V0cHV0LCBvdXRwdXRPZmZzZXQsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dE9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5c1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lOiBpbnB1dFtpbmRleF0gKiBmcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGlvbjogQW5pbWF0aW9uS2V5SW50ZXJwb2xhdGlvbi5TVEVQLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQ1VCSUNTUExJTkVcIiAvKiBBbmltYXRpb25TYW1wbGVySW50ZXJwb2xhdGlvbi5DVUJJQ1NQTElORSAqLzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGlucHV0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluVGFuZ2VudCA9IHByb3BlcnR5SW5mby5nZXRWYWx1ZSh0YXJnZXQsIG91dHB1dCwgb3V0cHV0T2Zmc2V0LCBpbnZmcHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dE9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wZXJ0eUluZm8uZ2V0VmFsdWUodGFyZ2V0LCBvdXRwdXQsIG91dHB1dE9mZnNldCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0T2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRUYW5nZW50ID0gcHJvcGVydHlJbmZvLmdldFZhbHVlKHRhcmdldCwgb3V0cHV0LCBvdXRwdXRPZmZzZXQsIGludmZwcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0T2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWU6IGlucHV0W2luZGV4XSAqIGZwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5UYW5nZW50OiBpblRhbmdlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0VGFuZ2VudDogb3V0VGFuZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkxJTkVBUlwiIC8qIEFuaW1hdGlvblNhbXBsZXJJbnRlcnBvbGF0aW9uLkxJTkVBUiAqLzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGlucHV0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcGVydHlJbmZvLmdldFZhbHVlKHRhcmdldCwgb3V0cHV0LCBvdXRwdXRPZmZzZXQsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dE9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5c1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lOiBpbnB1dFtpbmRleF0gKiBmcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dE9mZnNldCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke2FuaW1hdGlvbi5uYW1lIHx8IGBhbmltYXRpb24ke2FuaW1hdGlvbi5pbmRleH1gfV9jaGFubmVsJHtjaGFubmVsLmluZGV4fV8ke251bUFuaW1hdGlvbnN9YDtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlJbmZvLmJ1aWxkQW5pbWF0aW9ucyh0YXJnZXQsIG5hbWUsIGZwcywga2V5cywgKGJhYnlsb25BbmltYXRhYmxlLCBiYWJ5bG9uQW5pbWF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK251bUFuaW1hdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWQoYmFieWxvbkFuaW1hdGFibGUsIGJhYnlsb25BbmltYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfbG9hZEFuaW1hdGlvblNhbXBsZXJBc3luYyhjb250ZXh0LCBzYW1wbGVyKSB7XG4gICAgICAgIGlmIChzYW1wbGVyLl9kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlci5fZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0aW9uID0gc2FtcGxlci5pbnRlcnBvbGF0aW9uIHx8IFwiTElORUFSXCIgLyogQW5pbWF0aW9uU2FtcGxlckludGVycG9sYXRpb24uTElORUFSICovO1xuICAgICAgICBzd2l0Y2ggKGludGVycG9sYXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgXCJTVEVQXCIgLyogQW5pbWF0aW9uU2FtcGxlckludGVycG9sYXRpb24uU1RFUCAqLzpcbiAgICAgICAgICAgIGNhc2UgXCJMSU5FQVJcIiAvKiBBbmltYXRpb25TYW1wbGVySW50ZXJwb2xhdGlvbi5MSU5FQVIgKi86XG4gICAgICAgICAgICBjYXNlIFwiQ1VCSUNTUExJTkVcIiAvKiBBbmltYXRpb25TYW1wbGVySW50ZXJwb2xhdGlvbi5DVUJJQ1NQTElORSAqLzoge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fS9pbnRlcnBvbGF0aW9uOiBJbnZhbGlkIHZhbHVlICgke3NhbXBsZXIuaW50ZXJwb2xhdGlvbn0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5wdXRBY2Nlc3NvciA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vaW5wdXRgLCB0aGlzLl9nbHRmLmFjY2Vzc29ycywgc2FtcGxlci5pbnB1dCk7XG4gICAgICAgIGNvbnN0IG91dHB1dEFjY2Vzc29yID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9vdXRwdXRgLCB0aGlzLl9nbHRmLmFjY2Vzc29ycywgc2FtcGxlci5vdXRwdXQpO1xuICAgICAgICBzYW1wbGVyLl9kYXRhID0gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGhpcy5fbG9hZEZsb2F0QWNjZXNzb3JBc3luYyhgL2FjY2Vzc29ycy8ke2lucHV0QWNjZXNzb3IuaW5kZXh9YCwgaW5wdXRBY2Nlc3NvciksXG4gICAgICAgICAgICB0aGlzLl9sb2FkRmxvYXRBY2Nlc3NvckFzeW5jKGAvYWNjZXNzb3JzLyR7b3V0cHV0QWNjZXNzb3IuaW5kZXh9YCwgb3V0cHV0QWNjZXNzb3IpLFxuICAgICAgICBdKS50aGVuKChbaW5wdXREYXRhLCBvdXRwdXREYXRhXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXREYXRhLFxuICAgICAgICAgICAgICAgIGludGVycG9sYXRpb246IGludGVycG9sYXRpb24sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBvdXRwdXREYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzYW1wbGVyLl9kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgYnVmZmVyLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gYnVmZmVyIFRoZSBnbFRGIGJ1ZmZlciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBieXRlT2Zmc2V0IFRoZSBieXRlIG9mZnNldCB0byB1c2VcbiAgICAgKiBAcGFyYW0gYnl0ZUxlbmd0aCBUaGUgYnl0ZSBsZW5ndGggdG8gdXNlXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbG9hZGVkIGRhdGEgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRCdWZmZXJBc3luYyhjb250ZXh0LCBidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkQnVmZmVyQXN5bmMoY29udGV4dCwgYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvblByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYnVmZmVyLl9kYXRhKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLnVyaSkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlci5fZGF0YSA9IHRoaXMubG9hZFVyaUFzeW5jKGAke2NvbnRleHR9L3VyaWAsIGJ1ZmZlciwgYnVmZmVyLnVyaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Jpbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IFVyaSBpcyBtaXNzaW5nIG9yIHRoZSBiaW5hcnkgZ2xURiBpcyBtaXNzaW5nIGl0cyBiaW5hcnkgY2h1bmtgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnVmZmVyLl9kYXRhID0gdGhpcy5fYmluLnJlYWRBc3luYygwLCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZmZlci5fZGF0YS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgYnVmZmVyIHZpZXcuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBidWZmZXJWaWV3IFRoZSBnbFRGIGJ1ZmZlciB2aWV3IHByb3BlcnR5XG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbG9hZGVkIGRhdGEgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRCdWZmZXJWaWV3QXN5bmMoY29udGV4dCwgYnVmZmVyVmlldykge1xuICAgICAgICBjb25zdCBleHRlbnNpb25Qcm9taXNlID0gdGhpcy5fZXh0ZW5zaW9uc0xvYWRCdWZmZXJWaWV3QXN5bmMoY29udGV4dCwgYnVmZmVyVmlldyk7XG4gICAgICAgIGlmIChleHRlbnNpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVmZmVyVmlldy5fZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlclZpZXcuX2RhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnVmZmVyID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9idWZmZXJgLCB0aGlzLl9nbHRmLmJ1ZmZlcnMsIGJ1ZmZlclZpZXcuYnVmZmVyKTtcbiAgICAgICAgYnVmZmVyVmlldy5fZGF0YSA9IHRoaXMubG9hZEJ1ZmZlckFzeW5jKGAvYnVmZmVycy8ke2J1ZmZlci5pbmRleH1gLCBidWZmZXIsIGJ1ZmZlclZpZXcuYnl0ZU9mZnNldCB8fCAwLCBidWZmZXJWaWV3LmJ5dGVMZW5ndGgpO1xuICAgICAgICByZXR1cm4gYnVmZmVyVmlldy5fZGF0YTtcbiAgICB9XG4gICAgX2xvYWRBY2Nlc3NvckFzeW5jKGNvbnRleHQsIGFjY2Vzc29yLCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAoYWNjZXNzb3IuX2RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2Nlc3Nvci5fZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudW1Db21wb25lbnRzID0gR0xURkxvYWRlci5fR2V0TnVtQ29tcG9uZW50cyhjb250ZXh0LCBhY2Nlc3Nvci50eXBlKTtcbiAgICAgICAgY29uc3QgYnl0ZVN0cmlkZSA9IG51bUNvbXBvbmVudHMgKiBWZXJ0ZXhCdWZmZXIuR2V0VHlwZUJ5dGVMZW5ndGgoYWNjZXNzb3IuY29tcG9uZW50VHlwZSk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IG51bUNvbXBvbmVudHMgKiBhY2Nlc3Nvci5jb3VudDtcbiAgICAgICAgaWYgKGFjY2Vzc29yLmJ1ZmZlclZpZXcgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhY2Nlc3Nvci5fZGF0YSA9IFByb21pc2UucmVzb2x2ZShuZXcgY29uc3RydWN0b3IobGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBidWZmZXJWaWV3ID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9idWZmZXJWaWV3YCwgdGhpcy5fZ2x0Zi5idWZmZXJWaWV3cywgYWNjZXNzb3IuYnVmZmVyVmlldyk7XG4gICAgICAgICAgICBhY2Nlc3Nvci5fZGF0YSA9IHRoaXMubG9hZEJ1ZmZlclZpZXdBc3luYyhgL2J1ZmZlclZpZXdzLyR7YnVmZmVyVmlldy5pbmRleH1gLCBidWZmZXJWaWV3KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjY2Vzc29yLmNvbXBvbmVudFR5cGUgPT09IDUxMjYgLyogQWNjZXNzb3JDb21wb25lbnRUeXBlLkZMT0FUICovICYmICFhY2Nlc3Nvci5ub3JtYWxpemVkICYmICghYnVmZmVyVmlldy5ieXRlU3RyaWRlIHx8IGJ1ZmZlclZpZXcuYnl0ZVN0cmlkZSA9PT0gYnl0ZVN0cmlkZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdMVEZMb2FkZXIuX0dldFR5cGVkQXJyYXkoY29udGV4dCwgYWNjZXNzb3IuY29tcG9uZW50VHlwZSwgZGF0YSwgYWNjZXNzb3IuYnl0ZU9mZnNldCwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkQXJyYXkgPSBuZXcgY29uc3RydWN0b3IobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgVmVydGV4QnVmZmVyLkZvckVhY2goZGF0YSwgYWNjZXNzb3IuYnl0ZU9mZnNldCB8fCAwLCBidWZmZXJWaWV3LmJ5dGVTdHJpZGUgfHwgYnl0ZVN0cmlkZSwgbnVtQ29tcG9uZW50cywgYWNjZXNzb3IuY29tcG9uZW50VHlwZSwgdHlwZWRBcnJheS5sZW5ndGgsIGFjY2Vzc29yLm5vcm1hbGl6ZWQgfHwgZmFsc2UsICh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVkQXJyYXlbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZWRBcnJheTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzb3Iuc3BhcnNlKSB7XG4gICAgICAgICAgICBjb25zdCBzcGFyc2UgPSBhY2Nlc3Nvci5zcGFyc2U7XG4gICAgICAgICAgICBhY2Nlc3Nvci5fZGF0YSA9IGFjY2Vzc29yLl9kYXRhLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEFycmF5ID0gZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2VzQnVmZmVyVmlldyA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vc3BhcnNlL2luZGljZXMvYnVmZmVyVmlld2AsIHRoaXMuX2dsdGYuYnVmZmVyVmlld3MsIHNwYXJzZS5pbmRpY2VzLmJ1ZmZlclZpZXcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlc0J1ZmZlclZpZXcgPSBBcnJheUl0ZW0uR2V0KGAke2NvbnRleHR9L3NwYXJzZS92YWx1ZXMvYnVmZmVyVmlld2AsIHRoaXMuX2dsdGYuYnVmZmVyVmlld3MsIHNwYXJzZS52YWx1ZXMuYnVmZmVyVmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQnVmZmVyVmlld0FzeW5jKGAvYnVmZmVyVmlld3MvJHtpbmRpY2VzQnVmZmVyVmlldy5pbmRleH1gLCBpbmRpY2VzQnVmZmVyVmlldyksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZEJ1ZmZlclZpZXdBc3luYyhgL2J1ZmZlclZpZXdzLyR7dmFsdWVzQnVmZmVyVmlldy5pbmRleH1gLCB2YWx1ZXNCdWZmZXJWaWV3KSxcbiAgICAgICAgICAgICAgICBdKS50aGVuKChbaW5kaWNlc0RhdGEsIHZhbHVlc0RhdGFdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGljZXMgPSBHTFRGTG9hZGVyLl9HZXRUeXBlZEFycmF5KGAke2NvbnRleHR9L3NwYXJzZS9pbmRpY2VzYCwgc3BhcnNlLmluZGljZXMuY29tcG9uZW50VHlwZSwgaW5kaWNlc0RhdGEsIHNwYXJzZS5pbmRpY2VzLmJ5dGVPZmZzZXQsIHNwYXJzZS5jb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwYXJzZUxlbmd0aCA9IG51bUNvbXBvbmVudHMgKiBzcGFyc2UuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3Nvci5jb21wb25lbnRUeXBlID09PSA1MTI2IC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5GTE9BVCAqLyAmJiAhYWNjZXNzb3Iubm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gR0xURkxvYWRlci5fR2V0VHlwZWRBcnJheShgJHtjb250ZXh0fS9zcGFyc2UvdmFsdWVzYCwgYWNjZXNzb3IuY29tcG9uZW50VHlwZSwgdmFsdWVzRGF0YSwgc3BhcnNlLnZhbHVlcy5ieXRlT2Zmc2V0LCBzcGFyc2VMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhcnNlRGF0YSA9IEdMVEZMb2FkZXIuX0dldFR5cGVkQXJyYXkoYCR7Y29udGV4dH0vc3BhcnNlL3ZhbHVlc2AsIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUsIHZhbHVlc0RhdGEsIHNwYXJzZS52YWx1ZXMuYnl0ZU9mZnNldCwgc3BhcnNlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IG5ldyBjb25zdHJ1Y3RvcihzcGFyc2VMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4QnVmZmVyLkZvckVhY2goc3BhcnNlRGF0YSwgMCwgYnl0ZVN0cmlkZSwgbnVtQ29tcG9uZW50cywgYWNjZXNzb3IuY29tcG9uZW50VHlwZSwgdmFsdWVzLmxlbmd0aCwgYWNjZXNzb3Iubm9ybWFsaXplZCB8fCBmYWxzZSwgKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZXNJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGljZXNJbmRleCA9IDA7IGluZGljZXNJbmRleCA8IGluZGljZXMubGVuZ3RoOyBpbmRpY2VzSW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGFJbmRleCA9IGluZGljZXNbaW5kaWNlc0luZGV4XSAqIG51bUNvbXBvbmVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnRJbmRleCA9IDA7IGNvbXBvbmVudEluZGV4IDwgbnVtQ29tcG9uZW50czsgY29tcG9uZW50SW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVkQXJyYXlbZGF0YUluZGV4KytdID0gdmFsdWVzW3ZhbHVlc0luZGV4KytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlZEFycmF5O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY2Vzc29yLl9kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfbG9hZEZsb2F0QWNjZXNzb3JBc3luYyhjb250ZXh0LCBhY2Nlc3Nvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9hZEFjY2Vzc29yQXN5bmMoY29udGV4dCwgYWNjZXNzb3IsIEZsb2F0MzJBcnJheSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sb2FkSW5kaWNlc0FjY2Vzc29yQXN5bmMoY29udGV4dCwgYWNjZXNzb3IpIHtcbiAgICAgICAgaWYgKGFjY2Vzc29yLnR5cGUgIT09IFwiU0NBTEFSXCIgLyogQWNjZXNzb3JUeXBlLlNDQUxBUiAqLykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9L3R5cGU6IEludmFsaWQgdmFsdWUgJHthY2Nlc3Nvci50eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY2Nlc3Nvci5jb21wb25lbnRUeXBlICE9PSA1MTIxIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5VTlNJR05FRF9CWVRFICovICYmXG4gICAgICAgICAgICBhY2Nlc3Nvci5jb21wb25lbnRUeXBlICE9PSA1MTIzIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5VTlNJR05FRF9TSE9SVCAqLyAmJlxuICAgICAgICAgICAgYWNjZXNzb3IuY29tcG9uZW50VHlwZSAhPT0gNTEyNSAvKiBBY2Nlc3NvckNvbXBvbmVudFR5cGUuVU5TSUdORURfSU5UICovKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH0vY29tcG9uZW50VHlwZTogSW52YWxpZCB2YWx1ZSAke2FjY2Vzc29yLmNvbXBvbmVudFR5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjY2Vzc29yLl9kYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjZXNzb3IuX2RhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjY2Vzc29yLnNwYXJzZSkge1xuICAgICAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSBHTFRGTG9hZGVyLl9HZXRUeXBlZEFycmF5Q29uc3RydWN0b3IoYCR7Y29udGV4dH0vY29tcG9uZW50VHlwZWAsIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUpO1xuICAgICAgICAgICAgYWNjZXNzb3IuX2RhdGEgPSB0aGlzLl9sb2FkQWNjZXNzb3JBc3luYyhjb250ZXh0LCBhY2Nlc3NvciwgY29uc3RydWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyVmlldyA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vYnVmZmVyVmlld2AsIHRoaXMuX2dsdGYuYnVmZmVyVmlld3MsIGFjY2Vzc29yLmJ1ZmZlclZpZXcpO1xuICAgICAgICAgICAgYWNjZXNzb3IuX2RhdGEgPSB0aGlzLmxvYWRCdWZmZXJWaWV3QXN5bmMoYC9idWZmZXJWaWV3cy8ke2J1ZmZlclZpZXcuaW5kZXh9YCwgYnVmZmVyVmlldykudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBHTFRGTG9hZGVyLl9HZXRUeXBlZEFycmF5KGNvbnRleHQsIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUsIGRhdGEsIGFjY2Vzc29yLmJ5dGVPZmZzZXQsIGFjY2Vzc29yLmNvdW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2Nlc3Nvci5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvYWRWZXJ0ZXhCdWZmZXJWaWV3QXN5bmMoYnVmZmVyVmlldykge1xuICAgICAgICBpZiAoYnVmZmVyVmlldy5fYmFieWxvbkJ1ZmZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlclZpZXcuX2JhYnlsb25CdWZmZXI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fYmFieWxvblNjZW5lLmdldEVuZ2luZSgpO1xuICAgICAgICBidWZmZXJWaWV3Ll9iYWJ5bG9uQnVmZmVyID0gdGhpcy5sb2FkQnVmZmVyVmlld0FzeW5jKGAvYnVmZmVyVmlld3MvJHtidWZmZXJWaWV3LmluZGV4fWAsIGJ1ZmZlclZpZXcpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyKGVuZ2luZSwgZGF0YSwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlclZpZXcuX2JhYnlsb25CdWZmZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sb2FkVmVydGV4QWNjZXNzb3JBc3luYyhjb250ZXh0LCBhY2Nlc3Nvciwga2luZCkge1xuICAgICAgICBpZiAoYWNjZXNzb3IuX2JhYnlsb25WZXJ0ZXhCdWZmZXI/LltraW5kXSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc29yLl9iYWJ5bG9uVmVydGV4QnVmZmVyW2tpbmRdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWNjZXNzb3IuX2JhYnlsb25WZXJ0ZXhCdWZmZXIpIHtcbiAgICAgICAgICAgIGFjY2Vzc29yLl9iYWJ5bG9uVmVydGV4QnVmZmVyID0ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5fYmFieWxvblNjZW5lLmdldEVuZ2luZSgpO1xuICAgICAgICBpZiAoYWNjZXNzb3Iuc3BhcnNlIHx8IGFjY2Vzc29yLmJ1ZmZlclZpZXcgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhY2Nlc3Nvci5fYmFieWxvblZlcnRleEJ1ZmZlcltraW5kXSA9IHRoaXMuX2xvYWRGbG9hdEFjY2Vzc29yQXN5bmMoY29udGV4dCwgYWNjZXNzb3IpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlcnRleEJ1ZmZlcihlbmdpbmUsIGRhdGEsIGtpbmQsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYnVmZmVyVmlldyA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vYnVmZmVyVmlld2AsIHRoaXMuX2dsdGYuYnVmZmVyVmlld3MsIGFjY2Vzc29yLmJ1ZmZlclZpZXcpO1xuICAgICAgICAgICAgYWNjZXNzb3IuX2JhYnlsb25WZXJ0ZXhCdWZmZXJba2luZF0gPSB0aGlzLl9sb2FkVmVydGV4QnVmZmVyVmlld0FzeW5jKGJ1ZmZlclZpZXcpLnRoZW4oKGJhYnlsb25CdWZmZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBudW1Db21wb25lbnRzID0gR0xURkxvYWRlci5fR2V0TnVtQ29tcG9uZW50cyhjb250ZXh0LCBhY2Nlc3Nvci50eXBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlcnRleEJ1ZmZlcihlbmdpbmUsIGJhYnlsb25CdWZmZXIsIGtpbmQsIGZhbHNlLCB1bmRlZmluZWQsIGJ1ZmZlclZpZXcuYnl0ZVN0cmlkZSwgdW5kZWZpbmVkLCBhY2Nlc3Nvci5ieXRlT2Zmc2V0LCBudW1Db21wb25lbnRzLCBhY2Nlc3Nvci5jb21wb25lbnRUeXBlLCBhY2Nlc3Nvci5ub3JtYWxpemVkLCB0cnVlLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY2Vzc29yLl9iYWJ5bG9uVmVydGV4QnVmZmVyW2tpbmRdO1xuICAgIH1cbiAgICBfbG9hZE1hdGVyaWFsTWV0YWxsaWNSb3VnaG5lc3NQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgcHJvcGVydGllcywgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuYmFzZUNvbG9yRmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFsYmVkb0NvbG9yID0gQ29sb3IzLkZyb21BcnJheShwcm9wZXJ0aWVzLmJhc2VDb2xvckZhY3Rvcik7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFscGhhID0gcHJvcGVydGllcy5iYXNlQ29sb3JGYWN0b3JbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuYWxiZWRvQ29sb3IgPSBDb2xvcjMuV2hpdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5tZXRhbGxpYyA9IHByb3BlcnRpZXMubWV0YWxsaWNGYWN0b3IgPT0gdW5kZWZpbmVkID8gMSA6IHByb3BlcnRpZXMubWV0YWxsaWNGYWN0b3I7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwucm91Z2huZXNzID0gcHJvcGVydGllcy5yb3VnaG5lc3NGYWN0b3IgPT0gdW5kZWZpbmVkID8gMSA6IHByb3BlcnRpZXMucm91Z2huZXNzRmFjdG9yO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuYmFzZUNvbG9yVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9iYXNlQ29sb3JUZXh0dXJlYCwgcHJvcGVydGllcy5iYXNlQ29sb3JUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKEJhc2UgQ29sb3IpYDtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLm5vbkNvbG9yRGF0YSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L21ldGFsbGljUm91Z2huZXNzVGV4dHVyZWAsIHByb3BlcnRpZXMubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKE1ldGFsbGljIFJvdWdobmVzcylgO1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwubWV0YWxsaWNUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnVzZU1ldGFsbG5lc3NGcm9tTWV0YWxsaWNUZXh0dXJlQmx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnVzZVJvdWdobmVzc0Zyb21NZXRhbGxpY1RleHR1cmVHcmVlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnVzZVJvdWdobmVzc0Zyb21NZXRhbGxpY1RleHR1cmVBbHBoYSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfbG9hZE1hdGVyaWFsQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NZXNoLCBiYWJ5bG9uRHJhd01vZGUsIGFzc2lnbiA9ICgpID0+IHsgfSkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25Qcm9taXNlID0gdGhpcy5fZXh0ZW5zaW9uc0xvYWRNYXRlcmlhbEFzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWVzaCwgYmFieWxvbkRyYXdNb2RlLCBhc3NpZ24pO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgbWF0ZXJpYWwuX2RhdGEgPSBtYXRlcmlhbC5fZGF0YSB8fCB7fTtcbiAgICAgICAgbGV0IGJhYnlsb25EYXRhID0gbWF0ZXJpYWwuX2RhdGFbYmFieWxvbkRyYXdNb2RlXTtcbiAgICAgICAgaWYgKCFiYWJ5bG9uRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sb2dPcGVuKGAke2NvbnRleHR9ICR7bWF0ZXJpYWwubmFtZSB8fCBcIlwifWApO1xuICAgICAgICAgICAgY29uc3QgYmFieWxvbk1hdGVyaWFsID0gdGhpcy5jcmVhdGVNYXRlcmlhbChjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlKTtcbiAgICAgICAgICAgIGJhYnlsb25EYXRhID0ge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbDogYmFieWxvbk1hdGVyaWFsLFxuICAgICAgICAgICAgICAgIGJhYnlsb25NZXNoZXM6IFtdLFxuICAgICAgICAgICAgICAgIHByb21pc2U6IHRoaXMubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1hdGVyaWFsLl9kYXRhW2JhYnlsb25EcmF3TW9kZV0gPSBiYWJ5bG9uRGF0YTtcbiAgICAgICAgICAgIEdMVEZMb2FkZXIuQWRkUG9pbnRlck1ldGFkYXRhKGJhYnlsb25NYXRlcmlhbCwgY29udGV4dCk7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgICAgICB0aGlzLmxvZ0Nsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhYnlsb25NZXNoKSB7XG4gICAgICAgICAgICBiYWJ5bG9uRGF0YS5iYWJ5bG9uTWVzaGVzLnB1c2goYmFieWxvbk1lc2gpO1xuICAgICAgICAgICAgYmFieWxvbk1lc2gub25EaXNwb3NlT2JzZXJ2YWJsZS5hZGRPbmNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGJhYnlsb25EYXRhLmJhYnlsb25NZXNoZXMuaW5kZXhPZihiYWJ5bG9uTWVzaCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uRGF0YS5iYWJ5bG9uTWVzaGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGJhYnlsb25EYXRhLmJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgIHJldHVybiBiYWJ5bG9uRGF0YS5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJhYnlsb25EYXRhLmJhYnlsb25NYXRlcmlhbDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9jcmVhdGVEZWZhdWx0TWF0ZXJpYWwobmFtZSwgYmFieWxvbkRyYXdNb2RlKSB7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISF0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYmFieWxvbk1hdGVyaWFsID0gbmV3IFBCUk1hdGVyaWFsKG5hbWUsIHRoaXMuX2JhYnlsb25TY2VuZSk7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5fcGFyZW50Q29udGFpbmVyID0gdGhpcy5fYXNzZXRDb250YWluZXI7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIC8vIE1vdmVkIHRvIG1lc2ggc28gdXNlciBjYW4gY2hhbmdlIG1hdGVyaWFscyBvbiBnbHRmIG1lc2hlczogYmFieWxvbk1hdGVyaWFsLnNpZGVPcmllbnRhdGlvbiA9IHRoaXMuX2JhYnlsb25TY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSA/IE1hdGVyaWFsLkNvdW50ZXJDbG9ja1dpc2VTaWRlT3JpZW50YXRpb24gOiBNYXRlcmlhbC5DbG9ja1dpc2VTaWRlT3JpZW50YXRpb247XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC5maWxsTW9kZSA9IGJhYnlsb25EcmF3TW9kZTtcbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLmVuYWJsZVNwZWN1bGFyQW50aUFsaWFzaW5nID0gdHJ1ZTtcbiAgICAgICAgYmFieWxvbk1hdGVyaWFsLnVzZVJhZGlhbmNlT3ZlckFscGhhID0gIXRoaXMuX3BhcmVudC50cmFuc3BhcmVuY3lBc0NvdmVyYWdlO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwudXNlU3BlY3VsYXJPdmVyQWxwaGEgPSAhdGhpcy5fcGFyZW50LnRyYW5zcGFyZW5jeUFzQ292ZXJhZ2U7XG4gICAgICAgIGJhYnlsb25NYXRlcmlhbC50cmFuc3BhcmVuY3lNb2RlID0gUEJSTWF0ZXJpYWwuUEJSTUFURVJJQUxfT1BBUVVFO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwubWV0YWxsaWMgPSAxO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwucm91Z2huZXNzID0gMTtcbiAgICAgICAgcmV0dXJuIGJhYnlsb25NYXRlcmlhbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIEJhYnlsb24gbWF0ZXJpYWwgZnJvbSBhIGdsVEYgbWF0ZXJpYWwuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBUaGUgZ2xURiBtYXRlcmlhbCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBiYWJ5bG9uRHJhd01vZGUgVGhlIGRyYXcgbW9kZSBmb3IgdGhlIEJhYnlsb24gbWF0ZXJpYWxcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFieWxvbiBtYXRlcmlhbFxuICAgICAqL1xuICAgIGNyZWF0ZU1hdGVyaWFsKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uRHJhd01vZGUpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNDcmVhdGVNYXRlcmlhbChjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbkRyYXdNb2RlKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvblByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSBtYXRlcmlhbC5uYW1lIHx8IGBtYXRlcmlhbCR7bWF0ZXJpYWwuaW5kZXh9YDtcbiAgICAgICAgY29uc3QgYmFieWxvbk1hdGVyaWFsID0gdGhpcy5fY3JlYXRlRGVmYXVsdE1hdGVyaWFsKG5hbWUsIGJhYnlsb25EcmF3TW9kZSk7XG4gICAgICAgIHJldHVybiBiYWJ5bG9uTWF0ZXJpYWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHByb3BlcnRpZXMgZnJvbSBhIGdsVEYgbWF0ZXJpYWwgaW50byBhIEJhYnlsb24gbWF0ZXJpYWwuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBUaGUgZ2xURiBtYXRlcmlhbCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBiYWJ5bG9uTWF0ZXJpYWwgVGhlIEJhYnlsb24gbWF0ZXJpYWxcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBsb2FkIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgbG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jKGNvbnRleHQsIG1hdGVyaWFsLCBiYWJ5bG9uTWF0ZXJpYWwpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCk7XG4gICAgICAgIGlmIChleHRlbnNpb25Qcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMubG9hZE1hdGVyaWFsQmFzZVByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSk7XG4gICAgICAgIGlmIChtYXRlcmlhbC5wYnJNZXRhbGxpY1JvdWdobmVzcykge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9sb2FkTWF0ZXJpYWxNZXRhbGxpY1JvdWdobmVzc1Byb3BlcnRpZXNBc3luYyhgJHtjb250ZXh0fS9wYnJNZXRhbGxpY1JvdWdobmVzc2AsIG1hdGVyaWFsLnBick1ldGFsbGljUm91Z2huZXNzLCBiYWJ5bG9uTWF0ZXJpYWwpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvYWRNYXRlcmlhbEFscGhhUHJvcGVydGllcyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHsgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBub3JtYWwsIG9jY2x1c2lvbiwgYW5kIGVtaXNzaXZlIHByb3BlcnRpZXMgZnJvbSBhIGdsVEYgbWF0ZXJpYWwgaW50byBhIEJhYnlsb24gbWF0ZXJpYWwuXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBUaGUgZ2xURiBtYXRlcmlhbCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSBiYWJ5bG9uTWF0ZXJpYWwgVGhlIEJhYnlsb24gbWF0ZXJpYWxcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBsb2FkIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgbG9hZE1hdGVyaWFsQmFzZVByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuZW1pc3NpdmVDb2xvciA9IG1hdGVyaWFsLmVtaXNzaXZlRmFjdG9yID8gQ29sb3IzLkZyb21BcnJheShtYXRlcmlhbC5lbWlzc2l2ZUZhY3RvcikgOiBuZXcgQ29sb3IzKDAsIDAsIDApO1xuICAgICAgICBpZiAobWF0ZXJpYWwuZG91YmxlU2lkZWQpIHtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC50d29TaWRlZExpZ2h0aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWwubm9ybWFsVGV4dHVyZSkge1xuICAgICAgICAgICAgbWF0ZXJpYWwubm9ybWFsVGV4dHVyZS5ub25Db2xvckRhdGEgPSB0cnVlO1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRUZXh0dXJlSW5mb0FzeW5jKGAke2NvbnRleHR9L25vcm1hbFRleHR1cmVgLCBtYXRlcmlhbC5ub3JtYWxUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoTm9ybWFsKWA7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmJ1bXBUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5pbnZlcnROb3JtYWxNYXBYID0gIXRoaXMuX2JhYnlsb25TY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbTtcbiAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5pbnZlcnROb3JtYWxNYXBZID0gdGhpcy5fYmFieWxvblNjZW5lLnVzZVJpZ2h0SGFuZGVkU3lzdGVtO1xuICAgICAgICAgICAgaWYgKG1hdGVyaWFsLm5vcm1hbFRleHR1cmUuc2NhbGUgIT0gdW5kZWZpbmVkICYmIGJhYnlsb25NYXRlcmlhbC5idW1wVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5idW1wVGV4dHVyZS5sZXZlbCA9IG1hdGVyaWFsLm5vcm1hbFRleHR1cmUuc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuZm9yY2VJcnJhZGlhbmNlSW5GcmFnbWVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsLm9jY2x1c2lvblRleHR1cmUpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLm9jY2x1c2lvblRleHR1cmUubm9uQ29sb3JEYXRhID0gdHJ1ZTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5sb2FkVGV4dHVyZUluZm9Bc3luYyhgJHtjb250ZXh0fS9vY2NsdXNpb25UZXh0dXJlYCwgbWF0ZXJpYWwub2NjbHVzaW9uVGV4dHVyZSwgKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBgJHtiYWJ5bG9uTWF0ZXJpYWwubmFtZX0gKE9jY2x1c2lvbilgO1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5hbWJpZW50VGV4dHVyZSA9IHRleHR1cmU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwudXNlQW1iaWVudEluR3JheVNjYWxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbC5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5hbWJpZW50VGV4dHVyZVN0cmVuZ3RoID0gbWF0ZXJpYWwub2NjbHVzaW9uVGV4dHVyZS5zdHJlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMubG9hZFRleHR1cmVJbmZvQXN5bmMoYCR7Y29udGV4dH0vZW1pc3NpdmVUZXh0dXJlYCwgbWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlLCAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHR1cmUubmFtZSA9IGAke2JhYnlsb25NYXRlcmlhbC5uYW1lfSAoRW1pc3NpdmUpYDtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4geyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGFscGhhIHByb3BlcnRpZXMgZnJvbSBhIGdsVEYgbWF0ZXJpYWwgaW50byBhIEJhYnlsb24gbWF0ZXJpYWwuXG4gICAgICogTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHNldHRpbmcgdGhlIGFsYmVkbyB0ZXh0dXJlIG9mIHRoZSBCYWJ5bG9uIG1hdGVyaWFsIHdoZW4gdGhlIG1hdGVyaWFsIGhhcyBhbiBhbGJlZG8gdGV4dHVyZS5cbiAgICAgKiBAcGFyYW0gY29udGV4dCBUaGUgY29udGV4dCB3aGVuIGxvYWRpbmcgdGhlIGFzc2V0XG4gICAgICogQHBhcmFtIG1hdGVyaWFsIFRoZSBnbFRGIG1hdGVyaWFsIHByb3BlcnR5XG4gICAgICogQHBhcmFtIGJhYnlsb25NYXRlcmlhbCBUaGUgQmFieWxvbiBtYXRlcmlhbFxuICAgICAqL1xuICAgIGxvYWRNYXRlcmlhbEFscGhhUHJvcGVydGllcyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIGlmICghKGJhYnlsb25NYXRlcmlhbCBpbnN0YW5jZW9mIFBCUk1hdGVyaWFsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBNYXRlcmlhbCB0eXBlIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbHBoYU1vZGUgPSBtYXRlcmlhbC5hbHBoYU1vZGUgfHwgXCJPUEFRVUVcIiAvKiBNYXRlcmlhbEFscGhhTW9kZS5PUEFRVUUgKi87XG4gICAgICAgIHN3aXRjaCAoYWxwaGFNb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwiT1BBUVVFXCIgLyogTWF0ZXJpYWxBbHBoYU1vZGUuT1BBUVVFICovOiB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnRyYW5zcGFyZW5jeU1vZGUgPSBQQlJNYXRlcmlhbC5QQlJNQVRFUklBTF9PUEFRVUU7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFscGhhID0gMS4wOyAvLyBGb3JjZSBhbHBoYSB0byAxLjAgZm9yIG9wYXF1ZSBtb2RlLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIk1BU0tcIiAvKiBNYXRlcmlhbEFscGhhTW9kZS5NQVNLICovOiB7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLnRyYW5zcGFyZW5jeU1vZGUgPSBQQlJNYXRlcmlhbC5QQlJNQVRFUklBTF9BTFBIQVRFU1Q7XG4gICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFscGhhQ3V0T2ZmID0gbWF0ZXJpYWwuYWxwaGFDdXRvZmYgPT0gdW5kZWZpbmVkID8gMC41IDogbWF0ZXJpYWwuYWxwaGFDdXRvZmY7XG4gICAgICAgICAgICAgICAgaWYgKGJhYnlsb25NYXRlcmlhbC5hbGJlZG9UZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC5hbGJlZG9UZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiQkxFTkRcIiAvKiBNYXRlcmlhbEFscGhhTW9kZS5CTEVORCAqLzoge1xuICAgICAgICAgICAgICAgIGJhYnlsb25NYXRlcmlhbC50cmFuc3BhcmVuY3lNb2RlID0gUEJSTWF0ZXJpYWwuUEJSTUFURVJJQUxfQUxQSEFCTEVORDtcbiAgICAgICAgICAgICAgICBpZiAoYmFieWxvbk1hdGVyaWFsLmFsYmVkb1RleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1hdGVyaWFsLmFsYmVkb1RleHR1cmUuaGFzQWxwaGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBiYWJ5bG9uTWF0ZXJpYWwudXNlQWxwaGFGcm9tQWxiZWRvVGV4dHVyZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fS9hbHBoYU1vZGU6IEludmFsaWQgdmFsdWUgKCR7bWF0ZXJpYWwuYWxwaGFNb2RlfSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgdGV4dHVyZSBpbmZvLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gdGV4dHVyZUluZm8gVGhlIGdsVEYgdGV4dHVyZSBpbmZvIHByb3BlcnR5XG4gICAgICogQHBhcmFtIGFzc2lnbiBBIGZ1bmN0aW9uIGNhbGxlZCBzeW5jaHJvbm91c2x5IGFmdGVyIHBhcnNpbmcgdGhlIGdsVEYgcHJvcGVydGllc1xuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGxvYWRlZCBCYWJ5bG9uIHRleHR1cmUgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRUZXh0dXJlSW5mb0FzeW5jKGNvbnRleHQsIHRleHR1cmVJbmZvLCBhc3NpZ24gPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uUHJvbWlzZSA9IHRoaXMuX2V4dGVuc2lvbnNMb2FkVGV4dHVyZUluZm9Bc3luYyhjb250ZXh0LCB0ZXh0dXJlSW5mbywgYXNzaWduKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvblByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nT3BlbihgJHtjb250ZXh0fWApO1xuICAgICAgICBpZiAodGV4dHVyZUluZm8udGV4Q29vcmQgPj0gNikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9L3RleENvb3JkOiBJbnZhbGlkIHZhbHVlICgke3RleHR1cmVJbmZvLnRleENvb3JkfSlgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ZXh0dXJlID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9pbmRleGAsIHRoaXMuX2dsdGYudGV4dHVyZXMsIHRleHR1cmVJbmZvLmluZGV4KTtcbiAgICAgICAgdGV4dHVyZS5fdGV4dHVyZUluZm8gPSB0ZXh0dXJlSW5mbztcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2xvYWRUZXh0dXJlQXN5bmMoYC90ZXh0dXJlcy8ke3RleHR1cmVJbmZvLmluZGV4fWAsIHRleHR1cmUsIChiYWJ5bG9uVGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgYmFieWxvblRleHR1cmUuY29vcmRpbmF0ZXNJbmRleCA9IHRleHR1cmVJbmZvLnRleENvb3JkIHx8IDA7XG4gICAgICAgICAgICBHTFRGTG9hZGVyLkFkZFBvaW50ZXJNZXRhZGF0YShiYWJ5bG9uVGV4dHVyZSwgY29udGV4dCk7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQub25UZXh0dXJlTG9hZGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoYmFieWxvblRleHR1cmUpO1xuICAgICAgICAgICAgYXNzaWduKGJhYnlsb25UZXh0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubG9nQ2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sb2FkVGV4dHVyZUFzeW5jKGNvbnRleHQsIHRleHR1cmUsIGFzc2lnbiA9ICgpID0+IHsgfSkge1xuICAgICAgICBjb25zdCBleHRlbnNpb25Qcm9taXNlID0gdGhpcy5fZXh0ZW5zaW9uc0xvYWRUZXh0dXJlQXN5bmMoY29udGV4dCwgdGV4dHVyZSwgYXNzaWduKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvblByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb25Qcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nT3BlbihgJHtjb250ZXh0fSAke3RleHR1cmUubmFtZSB8fCBcIlwifWApO1xuICAgICAgICBjb25zdCBzYW1wbGVyID0gdGV4dHVyZS5zYW1wbGVyID09IHVuZGVmaW5lZCA/IEdMVEZMb2FkZXIuRGVmYXVsdFNhbXBsZXIgOiBBcnJheUl0ZW0uR2V0KGAke2NvbnRleHR9L3NhbXBsZXJgLCB0aGlzLl9nbHRmLnNhbXBsZXJzLCB0ZXh0dXJlLnNhbXBsZXIpO1xuICAgICAgICBjb25zdCBpbWFnZSA9IEFycmF5SXRlbS5HZXQoYCR7Y29udGV4dH0vc291cmNlYCwgdGhpcy5fZ2x0Zi5pbWFnZXMsIHRleHR1cmUuc291cmNlKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2NyZWF0ZVRleHR1cmVBc3luYyhjb250ZXh0LCBzYW1wbGVyLCBpbWFnZSwgYXNzaWduLCB1bmRlZmluZWQsICF0ZXh0dXJlLl90ZXh0dXJlSW5mby5ub25Db2xvckRhdGEpO1xuICAgICAgICB0aGlzLmxvZ0Nsb3NlKCk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfY3JlYXRlVGV4dHVyZUFzeW5jKGNvbnRleHQsIHNhbXBsZXIsIGltYWdlLCBhc3NpZ24gPSAoKSA9PiB7IH0sIHRleHR1cmVMb2FkZXJPcHRpb25zLCB1c2VTUkdCQnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IHNhbXBsZXJEYXRhID0gdGhpcy5fbG9hZFNhbXBsZXIoYC9zYW1wbGVycy8ke3NhbXBsZXIuaW5kZXh9YCwgc2FtcGxlcik7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRoaXMuX2JhYnlsb25TY2VuZS5fYmxvY2tFbnRpdHlDb2xsZWN0aW9uID0gISF0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgdGV4dHVyZUNyZWF0aW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG5vTWlwbWFwOiBzYW1wbGVyRGF0YS5ub01pcE1hcHMsXG4gICAgICAgICAgICBpbnZlcnRZOiBmYWxzZSxcbiAgICAgICAgICAgIHNhbXBsaW5nTW9kZTogc2FtcGxlckRhdGEuc2FtcGxpbmdNb2RlLFxuICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChtZXNzYWdlLCBleGNlcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoYCR7Y29udGV4dH06ICR7ZXhjZXB0aW9uICYmIGV4Y2VwdGlvbi5tZXNzYWdlID8gZXhjZXB0aW9uLm1lc3NhZ2UgOiBtZXNzYWdlIHx8IFwiRmFpbGVkIHRvIGxvYWQgdGV4dHVyZVwifWApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWltZVR5cGU6IGltYWdlLm1pbWVUeXBlLFxuICAgICAgICAgICAgbG9hZGVyT3B0aW9uczogdGV4dHVyZUxvYWRlck9wdGlvbnMsXG4gICAgICAgICAgICB1c2VTUkdCQnVmZmVyOiAhIXVzZVNSR0JCdWZmZXIgJiYgdGhpcy5fcGFyZW50LnVzZVNSR0JCdWZmZXJzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBiYWJ5bG9uVGV4dHVyZSA9IG5ldyBUZXh0dXJlKG51bGwsIHRoaXMuX2JhYnlsb25TY2VuZSwgdGV4dHVyZUNyZWF0aW9uT3B0aW9ucyk7XG4gICAgICAgIGJhYnlsb25UZXh0dXJlLl9wYXJlbnRDb250YWluZXIgPSB0aGlzLl9hc3NldENvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5fYmFieWxvblNjZW5lLl9ibG9ja0VudGl0eUNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgcHJvbWlzZXMucHVzaChkZWZlcnJlZC5wcm9taXNlKTtcbiAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRJbWFnZUFzeW5jKGAvaW1hZ2VzLyR7aW1hZ2UuaW5kZXh9YCwgaW1hZ2UpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpbWFnZS51cmkgfHwgYCR7dGhpcy5fZmlsZU5hbWV9I2ltYWdlJHtpbWFnZS5pbmRleH1gO1xuICAgICAgICAgICAgY29uc3QgZGF0YVVybCA9IGBkYXRhOiR7dGhpcy5fdW5pcXVlUm9vdFVybH0ke25hbWV9YDtcbiAgICAgICAgICAgIGJhYnlsb25UZXh0dXJlLnVwZGF0ZVVSTChkYXRhVXJsLCBkYXRhKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBiYWJ5bG9uVGV4dHVyZS53cmFwVSA9IHNhbXBsZXJEYXRhLndyYXBVO1xuICAgICAgICBiYWJ5bG9uVGV4dHVyZS53cmFwViA9IHNhbXBsZXJEYXRhLndyYXBWO1xuICAgICAgICBhc3NpZ24oYmFieWxvblRleHR1cmUpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJhYnlsb25UZXh0dXJlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2xvYWRTYW1wbGVyKGNvbnRleHQsIHNhbXBsZXIpIHtcbiAgICAgICAgaWYgKCFzYW1wbGVyLl9kYXRhKSB7XG4gICAgICAgICAgICBzYW1wbGVyLl9kYXRhID0ge1xuICAgICAgICAgICAgICAgIG5vTWlwTWFwczogc2FtcGxlci5taW5GaWx0ZXIgPT09IDk3MjggLyogVGV4dHVyZU1pbkZpbHRlci5ORUFSRVNUICovIHx8IHNhbXBsZXIubWluRmlsdGVyID09PSA5NzI5IC8qIFRleHR1cmVNaW5GaWx0ZXIuTElORUFSICovLFxuICAgICAgICAgICAgICAgIHNhbXBsaW5nTW9kZTogR0xURkxvYWRlci5fR2V0VGV4dHVyZVNhbXBsaW5nTW9kZShjb250ZXh0LCBzYW1wbGVyKSxcbiAgICAgICAgICAgICAgICB3cmFwVTogR0xURkxvYWRlci5fR2V0VGV4dHVyZVdyYXBNb2RlKGAke2NvbnRleHR9L3dyYXBTYCwgc2FtcGxlci53cmFwUyksXG4gICAgICAgICAgICAgICAgd3JhcFY6IEdMVEZMb2FkZXIuX0dldFRleHR1cmVXcmFwTW9kZShgJHtjb250ZXh0fS93cmFwVGAsIHNhbXBsZXIud3JhcFQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2FtcGxlci5fZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBnbFRGIGltYWdlLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gaW1hZ2UgVGhlIGdsVEYgaW1hZ2UgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBsb2FkZWQgZGF0YSB3aGVuIHRoZSBsb2FkIGlzIGNvbXBsZXRlXG4gICAgICovXG4gICAgbG9hZEltYWdlQXN5bmMoY29udGV4dCwgaW1hZ2UpIHtcbiAgICAgICAgaWYgKCFpbWFnZS5fZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5sb2dPcGVuKGAke2NvbnRleHR9ICR7aW1hZ2UubmFtZSB8fCBcIlwifWApO1xuICAgICAgICAgICAgaWYgKGltYWdlLnVyaSkge1xuICAgICAgICAgICAgICAgIGltYWdlLl9kYXRhID0gdGhpcy5sb2FkVXJpQXN5bmMoYCR7Y29udGV4dH0vdXJpYCwgaW1hZ2UsIGltYWdlLnVyaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJWaWV3ID0gQXJyYXlJdGVtLkdldChgJHtjb250ZXh0fS9idWZmZXJWaWV3YCwgdGhpcy5fZ2x0Zi5idWZmZXJWaWV3cywgaW1hZ2UuYnVmZmVyVmlldyk7XG4gICAgICAgICAgICAgICAgaW1hZ2UuX2RhdGEgPSB0aGlzLmxvYWRCdWZmZXJWaWV3QXN5bmMoYC9idWZmZXJWaWV3cy8ke2J1ZmZlclZpZXcuaW5kZXh9YCwgYnVmZmVyVmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxvZ0Nsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGltYWdlLl9kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgdXJpLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gcHJvcGVydHkgVGhlIGdsVEYgcHJvcGVydHkgYXNzb2NpYXRlZCB3aXRoIHRoZSB1cmlcbiAgICAgKiBAcGFyYW0gdXJpIFRoZSBiYXNlNjQgb3IgcmVsYXRpdmUgdXJpXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgbG9hZGVkIGRhdGEgd2hlbiB0aGUgbG9hZCBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGxvYWRVcmlBc3luYyhjb250ZXh0LCBwcm9wZXJ0eSwgdXJpKSB7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvblByb21pc2UgPSB0aGlzLl9leHRlbnNpb25zTG9hZFVyaUFzeW5jKGNvbnRleHQsIHByb3BlcnR5LCB1cmkpO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFHTFRGTG9hZGVyLl9WYWxpZGF0ZVVyaSh1cmkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06ICcke3VyaX0nIGlzIGludmFsaWRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSXNCYXNlNjREYXRhVXJsKHVyaSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShEZWNvZGVCYXNlNjRVcmxUb0JpbmFyeSh1cmkpKTtcbiAgICAgICAgICAgIHRoaXMubG9nKGAke2NvbnRleHR9OiBEZWNvZGVkICR7dXJpLnN1YnN0cigwLCA2NCl9Li4uICgke2RhdGEubGVuZ3RofSBieXRlcylgKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2coYCR7Y29udGV4dH06IExvYWRpbmcgJHt1cml9YCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucHJlcHJvY2Vzc1VybEFzeW5jKHRoaXMuX3Jvb3RVcmwgKyB1cmkpLnRoZW4oKHVybCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXJlbnQuX2xvYWRGaWxlKHRoaXMuX2JhYnlsb25TY2VuZSwgdXJsLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZyhgJHtjb250ZXh0fTogTG9hZGVkICR7dXJpfSAoJHtkYXRhLmJ5dGVMZW5ndGh9IGJ5dGVzKWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB0cnVlLCAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IExvYWRGaWxlRXJyb3IoYCR7Y29udGV4dH06IEZhaWxlZCB0byBsb2FkICcke3VyaX0nJHtyZXF1ZXN0ID8gXCI6IFwiICsgcmVxdWVzdC5zdGF0dXMgKyBcIiBcIiArIHJlcXVlc3Quc3RhdHVzVGV4dCA6IFwiXCJ9YCwgcmVxdWVzdCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgSlNPTiBwb2ludGVyIHRvIHRoZSBfaW50ZXJuYWxNZXRhZGF0YSBvZiB0aGUgQmFieWxvbiBvYmplY3QgYXQgYDxvYmplY3Q+Ll9pbnRlcm5hbE1ldGFkYXRhLmdsdGYucG9pbnRlcnNgLlxuICAgICAqIEBwYXJhbSBiYWJ5bG9uT2JqZWN0IHRoZSBCYWJ5bG9uIG9iamVjdCB3aXRoIF9pbnRlcm5hbE1ldGFkYXRhXG4gICAgICogQHBhcmFtIHBvaW50ZXIgdGhlIEpTT04gcG9pbnRlclxuICAgICAqL1xuICAgIHN0YXRpYyBBZGRQb2ludGVyTWV0YWRhdGEoYmFieWxvbk9iamVjdCwgcG9pbnRlcikge1xuICAgICAgICBiYWJ5bG9uT2JqZWN0Lm1ldGFkYXRhID0gYmFieWxvbk9iamVjdC5tZXRhZGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSAoYmFieWxvbk9iamVjdC5faW50ZXJuYWxNZXRhZGF0YSA9IGJhYnlsb25PYmplY3QuX2ludGVybmFsTWV0YWRhdGEgfHwge30pO1xuICAgICAgICBjb25zdCBnbHRmID0gKG1ldGFkYXRhLmdsdGYgPSBtZXRhZGF0YS5nbHRmIHx8IHt9KTtcbiAgICAgICAgY29uc3QgcG9pbnRlcnMgPSAoZ2x0Zi5wb2ludGVycyA9IGdsdGYucG9pbnRlcnMgfHwgW10pO1xuICAgICAgICBwb2ludGVycy5wdXNoKHBvaW50ZXIpO1xuICAgIH1cbiAgICBzdGF0aWMgX0dldFRleHR1cmVXcmFwTW9kZShjb250ZXh0LCBtb2RlKSB7XG4gICAgICAgIC8vIFNldCBkZWZhdWx0cyBpZiB1bmRlZmluZWRcbiAgICAgICAgbW9kZSA9IG1vZGUgPT0gdW5kZWZpbmVkID8gMTA0OTcgLyogVGV4dHVyZVdyYXBNb2RlLlJFUEVBVCAqLyA6IG1vZGU7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSAzMzA3MSAvKiBUZXh0dXJlV3JhcE1vZGUuQ0xBTVBfVE9fRURHRSAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5DTEFNUF9BRERSRVNTTU9ERTtcbiAgICAgICAgICAgIGNhc2UgMzM2NDggLyogVGV4dHVyZVdyYXBNb2RlLk1JUlJPUkVEX1JFUEVBVCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5NSVJST1JfQUREUkVTU01PREU7XG4gICAgICAgICAgICBjYXNlIDEwNDk3IC8qIFRleHR1cmVXcmFwTW9kZS5SRVBFQVQgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuV1JBUF9BRERSRVNTTU9ERTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTG9nZ2VyLldhcm4oYCR7Y29udGV4dH06IEludmFsaWQgdmFsdWUgKCR7bW9kZX0pYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuV1JBUF9BRERSRVNTTU9ERTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgX0dldFRleHR1cmVTYW1wbGluZ01vZGUoY29udGV4dCwgc2FtcGxlcikge1xuICAgICAgICAvLyBTZXQgZGVmYXVsdHMgaWYgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IG1hZ0ZpbHRlciA9IHNhbXBsZXIubWFnRmlsdGVyID09IHVuZGVmaW5lZCA/IDk3MjkgLyogVGV4dHVyZU1hZ0ZpbHRlci5MSU5FQVIgKi8gOiBzYW1wbGVyLm1hZ0ZpbHRlcjtcbiAgICAgICAgY29uc3QgbWluRmlsdGVyID0gc2FtcGxlci5taW5GaWx0ZXIgPT0gdW5kZWZpbmVkID8gOTk4NyAvKiBUZXh0dXJlTWluRmlsdGVyLkxJTkVBUl9NSVBNQVBfTElORUFSICovIDogc2FtcGxlci5taW5GaWx0ZXI7XG4gICAgICAgIGlmIChtYWdGaWx0ZXIgPT09IDk3MjkgLyogVGV4dHVyZU1hZ0ZpbHRlci5MSU5FQVIgKi8pIHtcbiAgICAgICAgICAgIHN3aXRjaCAobWluRmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA5NzI4IC8qIFRleHR1cmVNaW5GaWx0ZXIuTkVBUkVTVCAqLzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuTElORUFSX05FQVJFU1Q7XG4gICAgICAgICAgICAgICAgY2FzZSA5NzI5IC8qIFRleHR1cmVNaW5GaWx0ZXIuTElORUFSICovOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5MSU5FQVJfTElORUFSO1xuICAgICAgICAgICAgICAgIGNhc2UgOTk4NCAvKiBUZXh0dXJlTWluRmlsdGVyLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLkxJTkVBUl9ORUFSRVNUX01JUE5FQVJFU1Q7XG4gICAgICAgICAgICAgICAgY2FzZSA5OTg1IC8qIFRleHR1cmVNaW5GaWx0ZXIuTElORUFSX01JUE1BUF9ORUFSRVNUICovOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5MSU5FQVJfTElORUFSX01JUE5FQVJFU1Q7XG4gICAgICAgICAgICAgICAgY2FzZSA5OTg2IC8qIFRleHR1cmVNaW5GaWx0ZXIuTkVBUkVTVF9NSVBNQVBfTElORUFSICovOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5MSU5FQVJfTkVBUkVTVF9NSVBMSU5FQVI7XG4gICAgICAgICAgICAgICAgY2FzZSA5OTg3IC8qIFRleHR1cmVNaW5GaWx0ZXIuTElORUFSX01JUE1BUF9MSU5FQVIgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLkxJTkVBUl9MSU5FQVJfTUlQTElORUFSO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5XYXJuKGAke2NvbnRleHR9L21pbkZpbHRlcjogSW52YWxpZCB2YWx1ZSAoJHttaW5GaWx0ZXJ9KWApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGV4dHVyZS5MSU5FQVJfTElORUFSX01JUExJTkVBUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtYWdGaWx0ZXIgIT09IDk3MjggLyogVGV4dHVyZU1hZ0ZpbHRlci5ORUFSRVNUICovKSB7XG4gICAgICAgICAgICAgICAgTG9nZ2VyLldhcm4oYCR7Y29udGV4dH0vbWFnRmlsdGVyOiBJbnZhbGlkIHZhbHVlICgke21hZ0ZpbHRlcn0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKG1pbkZpbHRlcikge1xuICAgICAgICAgICAgICAgIGNhc2UgOTcyOCAvKiBUZXh0dXJlTWluRmlsdGVyLk5FQVJFU1QgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfTkVBUkVTVDtcbiAgICAgICAgICAgICAgICBjYXNlIDk3MjkgLyogVGV4dHVyZU1pbkZpbHRlci5MSU5FQVIgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfTElORUFSO1xuICAgICAgICAgICAgICAgIGNhc2UgOTk4NCAvKiBUZXh0dXJlTWluRmlsdGVyLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfTkVBUkVTVF9NSVBORUFSRVNUO1xuICAgICAgICAgICAgICAgIGNhc2UgOTk4NSAvKiBUZXh0dXJlTWluRmlsdGVyLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCAqLzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuTkVBUkVTVF9MSU5FQVJfTUlQTkVBUkVTVDtcbiAgICAgICAgICAgICAgICBjYXNlIDk5ODYgLyogVGV4dHVyZU1pbkZpbHRlci5ORUFSRVNUX01JUE1BUF9MSU5FQVIgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfTkVBUkVTVF9NSVBMSU5FQVI7XG4gICAgICAgICAgICAgICAgY2FzZSA5OTg3IC8qIFRleHR1cmVNaW5GaWx0ZXIuTElORUFSX01JUE1BUF9MSU5FQVIgKi86XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0dXJlLk5FQVJFU1RfTElORUFSX01JUExJTkVBUjtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuV2FybihgJHtjb250ZXh0fS9taW5GaWx0ZXI6IEludmFsaWQgdmFsdWUgKCR7bWluRmlsdGVyfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHR1cmUuTkVBUkVTVF9ORUFSRVNUX01JUE5FQVJFU1Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIF9HZXRUeXBlZEFycmF5Q29uc3RydWN0b3IoY29udGV4dCwgY29tcG9uZW50VHlwZSkge1xuICAgICAgICBzd2l0Y2ggKGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgNTEyMCAvKiBBY2Nlc3NvckNvbXBvbmVudFR5cGUuQllURSAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gSW50OEFycmF5O1xuICAgICAgICAgICAgY2FzZSA1MTIxIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5VTlNJR05FRF9CWVRFICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBVaW50OEFycmF5O1xuICAgICAgICAgICAgY2FzZSA1MTIyIC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5TSE9SVCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gSW50MTZBcnJheTtcbiAgICAgICAgICAgIGNhc2UgNTEyMyAvKiBBY2Nlc3NvckNvbXBvbmVudFR5cGUuVU5TSUdORURfU0hPUlQgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVpbnQxNkFycmF5O1xuICAgICAgICAgICAgY2FzZSA1MTI1IC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5VTlNJR05FRF9JTlQgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVpbnQzMkFycmF5O1xuICAgICAgICAgICAgY2FzZSA1MTI2IC8qIEFjY2Vzc29yQ29tcG9uZW50VHlwZS5GTE9BVCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRmxvYXQzMkFycmF5O1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29udGV4dH06IEludmFsaWQgY29tcG9uZW50IHR5cGUgJHtjb21wb25lbnRUeXBlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBfR2V0VHlwZWRBcnJheShjb250ZXh0LCBjb21wb25lbnRUeXBlLCBidWZmZXJWaWV3LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYnVmZmVyVmlldy5idWZmZXI7XG4gICAgICAgIGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyAoYnl0ZU9mZnNldCB8fCAwKTtcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSBHTFRGTG9hZGVyLl9HZXRUeXBlZEFycmF5Q29uc3RydWN0b3IoYCR7Y29udGV4dH0vY29tcG9uZW50VHlwZWAsIGNvbXBvbmVudFR5cGUpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRUeXBlTGVuZ3RoID0gVmVydGV4QnVmZmVyLkdldFR5cGVCeXRlTGVuZ3RoKGNvbXBvbmVudFR5cGUpO1xuICAgICAgICBpZiAoYnl0ZU9mZnNldCAlIGNvbXBvbmVudFR5cGVMZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIC8vIEhBQ0s6IENvcHkgdGhlIGJ1ZmZlciBpZiBieXRlIG9mZnNldCBpcyBub3QgYSBtdWx0aXBsZSBvZiBjb21wb25lbnQgdHlwZSBieXRlIGxlbmd0aC5cbiAgICAgICAgICAgIExvZ2dlci5XYXJuKGAke2NvbnRleHR9OiBDb3B5aW5nIGJ1ZmZlciBhcyBieXRlIG9mZnNldCAoJHtieXRlT2Zmc2V0fSkgaXMgbm90IGEgbXVsdGlwbGUgb2YgY29tcG9uZW50IHR5cGUgYnl0ZSBsZW5ndGggKCR7Y29tcG9uZW50VHlwZUxlbmd0aH0pYCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGNvbnN0cnVjdG9yKGJ1ZmZlci5zbGljZShieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgbGVuZ3RoICogY29tcG9uZW50VHlwZUxlbmd0aCksIDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgY29uc3RydWN0b3IoYnVmZmVyLCBieXRlT2Zmc2V0LCBsZW5ndGgpO1xuICAgIH1cbiAgICBzdGF0aWMgX0dldE51bUNvbXBvbmVudHMoY29udGV4dCwgdHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJTQ0FMQVJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGNhc2UgXCJWRUMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICBjYXNlIFwiVkVDM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSBcIlZFQzRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgIGNhc2UgXCJNQVQyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICBjYXNlIFwiTUFUM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICAgICAgY2FzZSBcIk1BVDRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTY7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnRleHR9OiBJbnZhbGlkIHR5cGUgKCR7dHlwZX0pYCk7XG4gICAgfVxuICAgIHN0YXRpYyBfVmFsaWRhdGVVcmkodXJpKSB7XG4gICAgICAgIHJldHVybiBUb29scy5Jc0Jhc2U2NCh1cmkpIHx8IHVyaS5pbmRleE9mKFwiLi5cIikgPT09IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBzdGF0aWMgX0dldERyYXdNb2RlKGNvbnRleHQsIG1vZGUpIHtcbiAgICAgICAgaWYgKG1vZGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtb2RlID0gNCAvKiBNZXNoUHJpbWl0aXZlTW9kZS5UUklBTkdMRVMgKi87XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDAgLyogTWVzaFByaW1pdGl2ZU1vZGUuUE9JTlRTICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRlcmlhbC5Qb2ludExpc3REcmF3TW9kZTtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBNZXNoUHJpbWl0aXZlTW9kZS5MSU5FUyAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0ZXJpYWwuTGluZUxpc3REcmF3TW9kZTtcbiAgICAgICAgICAgIGNhc2UgMiAvKiBNZXNoUHJpbWl0aXZlTW9kZS5MSU5FX0xPT1AgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGVyaWFsLkxpbmVMb29wRHJhd01vZGU7XG4gICAgICAgICAgICBjYXNlIDMgLyogTWVzaFByaW1pdGl2ZU1vZGUuTElORV9TVFJJUCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0ZXJpYWwuTGluZVN0cmlwRHJhd01vZGU7XG4gICAgICAgICAgICBjYXNlIDQgLyogTWVzaFByaW1pdGl2ZU1vZGUuVFJJQU5HTEVTICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRlcmlhbC5UcmlhbmdsZUZpbGxNb2RlO1xuICAgICAgICAgICAgY2FzZSA1IC8qIE1lc2hQcmltaXRpdmVNb2RlLlRSSUFOR0xFX1NUUklQICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRlcmlhbC5UcmlhbmdsZVN0cmlwRHJhd01vZGU7XG4gICAgICAgICAgICBjYXNlIDYgLyogTWVzaFByaW1pdGl2ZU1vZGUuVFJJQU5HTEVfRkFOICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRlcmlhbC5UcmlhbmdsZUZhbkRyYXdNb2RlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjb250ZXh0fTogSW52YWxpZCBtZXNoIHByaW1pdGl2ZSBtb2RlICgke21vZGV9KWApO1xuICAgIH1cbiAgICBfY29tcGlsZU1hdGVyaWFsc0FzeW5jKCkge1xuICAgICAgICB0aGlzLl9wYXJlbnQuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyKFwiQ29tcGlsZSBtYXRlcmlhbHNcIik7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGlmICh0aGlzLl9nbHRmLm1hdGVyaWFscykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBtYXRlcmlhbCBvZiB0aGlzLl9nbHRmLm1hdGVyaWFscykge1xuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5fZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJhYnlsb25EcmF3TW9kZSBpbiBtYXRlcmlhbC5fZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbkRhdGEgPSBtYXRlcmlhbC5fZGF0YVtiYWJ5bG9uRHJhd01vZGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBiYWJ5bG9uTWVzaCBvZiBiYWJ5bG9uRGF0YS5iYWJ5bG9uTWVzaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIG5vblVuaWZvcm1TY2FsaW5nIGlzIHNldCBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFieWxvbk1lc2guY29tcHV0ZVdvcmxkTWF0cml4KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhYnlsb25NYXRlcmlhbCA9IGJhYnlsb25EYXRhLmJhYnlsb25NYXRlcmlhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGJhYnlsb25NYXRlcmlhbC5mb3JjZUNvbXBpbGF0aW9uQXN5bmMoYmFieWxvbk1lc2gpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGJhYnlsb25NYXRlcmlhbC5mb3JjZUNvbXBpbGF0aW9uQXN5bmMoYmFieWxvbk1lc2gsIHsgdXNlSW5zdGFuY2VzOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50LnVzZUNsaXBQbGFuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGJhYnlsb25NYXRlcmlhbC5mb3JjZUNvbXBpbGF0aW9uQXN5bmMoYmFieWxvbk1lc2gsIHsgY2xpcFBsYW5lOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChiYWJ5bG9uTWF0ZXJpYWwuZm9yY2VDb21waWxhdGlvbkFzeW5jKGJhYnlsb25NZXNoLCB7IGNsaXBQbGFuZTogdHJ1ZSwgdXNlSW5zdGFuY2VzOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudC5fZW5kUGVyZm9ybWFuY2VDb3VudGVyKFwiQ29tcGlsZSBtYXRlcmlhbHNcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfY29tcGlsZVNoYWRvd0dlbmVyYXRvcnNBc3luYygpIHtcbiAgICAgICAgdGhpcy5fcGFyZW50Ll9zdGFydFBlcmZvcm1hbmNlQ291bnRlcihcIkNvbXBpbGUgc2hhZG93IGdlbmVyYXRvcnNcIik7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGNvbnN0IGxpZ2h0cyA9IHRoaXMuX2JhYnlsb25TY2VuZS5saWdodHM7XG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2YgbGlnaHRzKSB7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSBsaWdodC5nZXRTaGFkb3dHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGdlbmVyYXRvci5mb3JjZUNvbXBpbGF0aW9uQXN5bmMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudC5fZW5kUGVyZm9ybWFuY2VDb3VudGVyKFwiQ29tcGlsZSBzaGFkb3cgZ2VuZXJhdG9yc1wiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9mb3JFYWNoRXh0ZW5zaW9ucyhhY3Rpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBleHRlbnNpb24gb2YgdGhpcy5fZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbi5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uKGV4dGVuc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FwcGx5RXh0ZW5zaW9ucyhwcm9wZXJ0eSwgZnVuY3Rpb25OYW1lLCBhY3Rpb25Bc3luYykge1xuICAgICAgICBmb3IgKGNvbnN0IGV4dGVuc2lvbiBvZiB0aGlzLl9leHRlbnNpb25zKSB7XG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGAke2V4dGVuc2lvbi5uYW1lfS4ke2Z1bmN0aW9uTmFtZX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlclByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgICAgICAgICAgICAgbG9hZGVyUHJvcGVydHkuX2FjdGl2ZUxvYWRlckV4dGVuc2lvbkZ1bmN0aW9ucyA9IGxvYWRlclByb3BlcnR5Ll9hY3RpdmVMb2FkZXJFeHRlbnNpb25GdW5jdGlvbnMgfHwge307XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlTG9hZGVyRXh0ZW5zaW9uRnVuY3Rpb25zID0gbG9hZGVyUHJvcGVydHkuX2FjdGl2ZUxvYWRlckV4dGVuc2lvbkZ1bmN0aW9ucztcbiAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZUxvYWRlckV4dGVuc2lvbkZ1bmN0aW9uc1tpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTG9hZGVyRXh0ZW5zaW9uRnVuY3Rpb25zW2lkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhY3Rpb25Bc3luYyhleHRlbnNpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYWN0aXZlTG9hZGVyRXh0ZW5zaW9uRnVuY3Rpb25zW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNPbkxvYWRpbmcoKSB7XG4gICAgICAgIHRoaXMuX2ZvckVhY2hFeHRlbnNpb25zKChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5vbkxvYWRpbmcgJiYgZXh0ZW5zaW9uLm9uTG9hZGluZygpKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNPblJlYWR5KCkge1xuICAgICAgICB0aGlzLl9mb3JFYWNoRXh0ZW5zaW9ucygoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24ub25SZWFkeSAmJiBleHRlbnNpb24ub25SZWFkeSgpKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNMb2FkU2NlbmVBc3luYyhjb250ZXh0LCBzY2VuZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKHNjZW5lLCBcImxvYWRTY2VuZVwiLCAoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24ubG9hZFNjZW5lQXN5bmMgJiYgZXh0ZW5zaW9uLmxvYWRTY2VuZUFzeW5jKGNvbnRleHQsIHNjZW5lKSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zTG9hZE5vZGVBc3luYyhjb250ZXh0LCBub2RlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5RXh0ZW5zaW9ucyhub2RlLCBcImxvYWROb2RlXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5sb2FkTm9kZUFzeW5jICYmIGV4dGVuc2lvbi5sb2FkTm9kZUFzeW5jKGNvbnRleHQsIG5vZGUsIGFzc2lnbikpO1xuICAgIH1cbiAgICBfZXh0ZW5zaW9uc0xvYWRDYW1lcmFBc3luYyhjb250ZXh0LCBjYW1lcmEsIGFzc2lnbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKGNhbWVyYSwgXCJsb2FkQ2FtZXJhXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5sb2FkQ2FtZXJhQXN5bmMgJiYgZXh0ZW5zaW9uLmxvYWRDYW1lcmFBc3luYyhjb250ZXh0LCBjYW1lcmEsIGFzc2lnbikpO1xuICAgIH1cbiAgICBfZXh0ZW5zaW9uc0xvYWRWZXJ0ZXhEYXRhQXN5bmMoY29udGV4dCwgcHJpbWl0aXZlLCBiYWJ5bG9uTWVzaCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKHByaW1pdGl2ZSwgXCJsb2FkVmVydGV4RGF0YVwiLCAoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24uX2xvYWRWZXJ0ZXhEYXRhQXN5bmMgJiYgZXh0ZW5zaW9uLl9sb2FkVmVydGV4RGF0YUFzeW5jKGNvbnRleHQsIHByaW1pdGl2ZSwgYmFieWxvbk1lc2gpKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNMb2FkTWVzaFByaW1pdGl2ZUFzeW5jKGNvbnRleHQsIG5hbWUsIG5vZGUsIG1lc2gsIHByaW1pdGl2ZSwgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMocHJpbWl0aXZlLCBcImxvYWRNZXNoUHJpbWl0aXZlXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5fbG9hZE1lc2hQcmltaXRpdmVBc3luYyAmJiBleHRlbnNpb24uX2xvYWRNZXNoUHJpbWl0aXZlQXN5bmMoY29udGV4dCwgbmFtZSwgbm9kZSwgbWVzaCwgcHJpbWl0aXZlLCBhc3NpZ24pKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNMb2FkTWF0ZXJpYWxBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1lc2gsIGJhYnlsb25EcmF3TW9kZSwgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMobWF0ZXJpYWwsIFwibG9hZE1hdGVyaWFsXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5fbG9hZE1hdGVyaWFsQXN5bmMgJiYgZXh0ZW5zaW9uLl9sb2FkTWF0ZXJpYWxBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1lc2gsIGJhYnlsb25EcmF3TW9kZSwgYXNzaWduKSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zQ3JlYXRlTWF0ZXJpYWwoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKG1hdGVyaWFsLCBcImNyZWF0ZU1hdGVyaWFsXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5jcmVhdGVNYXRlcmlhbCAmJiBleHRlbnNpb24uY3JlYXRlTWF0ZXJpYWwoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25EcmF3TW9kZSkpO1xuICAgIH1cbiAgICBfZXh0ZW5zaW9uc0xvYWRNYXRlcmlhbFByb3BlcnRpZXNBc3luYyhjb250ZXh0LCBtYXRlcmlhbCwgYmFieWxvbk1hdGVyaWFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMobWF0ZXJpYWwsIFwibG9hZE1hdGVyaWFsUHJvcGVydGllc1wiLCAoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24ubG9hZE1hdGVyaWFsUHJvcGVydGllc0FzeW5jICYmIGV4dGVuc2lvbi5sb2FkTWF0ZXJpYWxQcm9wZXJ0aWVzQXN5bmMoY29udGV4dCwgbWF0ZXJpYWwsIGJhYnlsb25NYXRlcmlhbCkpO1xuICAgIH1cbiAgICBfZXh0ZW5zaW9uc0xvYWRUZXh0dXJlSW5mb0FzeW5jKGNvbnRleHQsIHRleHR1cmVJbmZvLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5RXh0ZW5zaW9ucyh0ZXh0dXJlSW5mbywgXCJsb2FkVGV4dHVyZUluZm9cIiwgKGV4dGVuc2lvbikgPT4gZXh0ZW5zaW9uLmxvYWRUZXh0dXJlSW5mb0FzeW5jICYmIGV4dGVuc2lvbi5sb2FkVGV4dHVyZUluZm9Bc3luYyhjb250ZXh0LCB0ZXh0dXJlSW5mbywgYXNzaWduKSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zTG9hZFRleHR1cmVBc3luYyhjb250ZXh0LCB0ZXh0dXJlLCBhc3NpZ24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5RXh0ZW5zaW9ucyh0ZXh0dXJlLCBcImxvYWRUZXh0dXJlXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5fbG9hZFRleHR1cmVBc3luYyAmJiBleHRlbnNpb24uX2xvYWRUZXh0dXJlQXN5bmMoY29udGV4dCwgdGV4dHVyZSwgYXNzaWduKSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zTG9hZEFuaW1hdGlvbkFzeW5jKGNvbnRleHQsIGFuaW1hdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKGFuaW1hdGlvbiwgXCJsb2FkQW5pbWF0aW9uXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5sb2FkQW5pbWF0aW9uQXN5bmMgJiYgZXh0ZW5zaW9uLmxvYWRBbmltYXRpb25Bc3luYyhjb250ZXh0LCBhbmltYXRpb24pKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNMb2FkQW5pbWF0aW9uQ2hhbm5lbEFzeW5jKGNvbnRleHQsIGFuaW1hdGlvbkNvbnRleHQsIGFuaW1hdGlvbiwgY2hhbm5lbCwgb25Mb2FkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMoYW5pbWF0aW9uLCBcImxvYWRBbmltYXRpb25DaGFubmVsXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5fbG9hZEFuaW1hdGlvbkNoYW5uZWxBc3luYyAmJiBleHRlbnNpb24uX2xvYWRBbmltYXRpb25DaGFubmVsQXN5bmMoY29udGV4dCwgYW5pbWF0aW9uQ29udGV4dCwgYW5pbWF0aW9uLCBjaGFubmVsLCBvbkxvYWQpKTtcbiAgICB9XG4gICAgX2V4dGVuc2lvbnNMb2FkU2tpbkFzeW5jKGNvbnRleHQsIG5vZGUsIHNraW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5RXh0ZW5zaW9ucyhza2luLCBcImxvYWRTa2luXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5fbG9hZFNraW5Bc3luYyAmJiBleHRlbnNpb24uX2xvYWRTa2luQXN5bmMoY29udGV4dCwgbm9kZSwgc2tpbikpO1xuICAgIH1cbiAgICBfZXh0ZW5zaW9uc0xvYWRVcmlBc3luYyhjb250ZXh0LCBwcm9wZXJ0eSwgdXJpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMocHJvcGVydHksIFwibG9hZFVyaVwiLCAoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24uX2xvYWRVcmlBc3luYyAmJiBleHRlbnNpb24uX2xvYWRVcmlBc3luYyhjb250ZXh0LCBwcm9wZXJ0eSwgdXJpKSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zTG9hZEJ1ZmZlclZpZXdBc3luYyhjb250ZXh0LCBidWZmZXJWaWV3KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseUV4dGVuc2lvbnMoYnVmZmVyVmlldywgXCJsb2FkQnVmZmVyVmlld1wiLCAoZXh0ZW5zaW9uKSA9PiBleHRlbnNpb24ubG9hZEJ1ZmZlclZpZXdBc3luYyAmJiBleHRlbnNpb24ubG9hZEJ1ZmZlclZpZXdBc3luYyhjb250ZXh0LCBidWZmZXJWaWV3KSk7XG4gICAgfVxuICAgIF9leHRlbnNpb25zTG9hZEJ1ZmZlckFzeW5jKGNvbnRleHQsIGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlFeHRlbnNpb25zKGJ1ZmZlciwgXCJsb2FkQnVmZmVyXCIsIChleHRlbnNpb24pID0+IGV4dGVuc2lvbi5sb2FkQnVmZmVyQXN5bmMgJiYgZXh0ZW5zaW9uLmxvYWRCdWZmZXJBc3luYyhjb250ZXh0LCBidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBjYWxsZWQgYnkgYSBsb2FkZXIgZXh0ZW5zaW9uIHRvIGxvYWQgYW4gZ2xURiBleHRlbnNpb24uXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgd2hlbiBsb2FkaW5nIHRoZSBhc3NldFxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eSBUaGUgZ2xURiBwcm9wZXJ0eSB0byBsb2FkIHRoZSBleHRlbnNpb24gZnJvbVxuICAgICAqIEBwYXJhbSBleHRlbnNpb25OYW1lIFRoZSBuYW1lIG9mIHRoZSBleHRlbnNpb24gdG8gbG9hZFxuICAgICAqIEBwYXJhbSBhY3Rpb25Bc3luYyBUaGUgYWN0aW9uIHRvIHJ1blxuICAgICAqIEByZXR1cm5zIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IGFjdGlvbkFzeW5jIG9yIG51bGwgaWYgdGhlIGV4dGVuc2lvbiBkb2VzIG5vdCBleGlzdFxuICAgICAqL1xuICAgIHN0YXRpYyBMb2FkRXh0ZW5zaW9uQXN5bmMoY29udGV4dCwgcHJvcGVydHksIGV4dGVuc2lvbk5hbWUsIGFjdGlvbkFzeW5jKSB7XG4gICAgICAgIGlmICghcHJvcGVydHkuZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHByb3BlcnR5LmV4dGVuc2lvbnM7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGV4dGVuc2lvbnNbZXh0ZW5zaW9uTmFtZV07XG4gICAgICAgIGlmICghZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aW9uQXN5bmMoYCR7Y29udGV4dH0vZXh0ZW5zaW9ucy8ke2V4dGVuc2lvbk5hbWV9YCwgZXh0ZW5zaW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCBjYWxsZWQgYnkgYSBsb2FkZXIgZXh0ZW5zaW9uIHRvIGxvYWQgYSBnbFRGIGV4dHJhLlxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBjb250ZXh0IHdoZW4gbG9hZGluZyB0aGUgYXNzZXRcbiAgICAgKiBAcGFyYW0gcHJvcGVydHkgVGhlIGdsVEYgcHJvcGVydHkgdG8gbG9hZCB0aGUgZXh0cmEgZnJvbVxuICAgICAqIEBwYXJhbSBleHRlbnNpb25OYW1lIFRoZSBuYW1lIG9mIHRoZSBleHRlbnNpb24gdG8gbG9hZFxuICAgICAqIEBwYXJhbSBhY3Rpb25Bc3luYyBUaGUgYWN0aW9uIHRvIHJ1blxuICAgICAqIEByZXR1cm5zIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IGFjdGlvbkFzeW5jIG9yIG51bGwgaWYgdGhlIGV4dHJhIGRvZXMgbm90IGV4aXN0XG4gICAgICovXG4gICAgc3RhdGljIExvYWRFeHRyYUFzeW5jKGNvbnRleHQsIHByb3BlcnR5LCBleHRlbnNpb25OYW1lLCBhY3Rpb25Bc3luYykge1xuICAgICAgICBpZiAoIXByb3BlcnR5LmV4dHJhcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXh0cmFzID0gcHJvcGVydHkuZXh0cmFzO1xuICAgICAgICBjb25zdCBleHRyYSA9IGV4dHJhc1tleHRlbnNpb25OYW1lXTtcbiAgICAgICAgaWYgKCFleHRyYSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbkFzeW5jKGAke2NvbnRleHR9L2V4dHJhcy8ke2V4dGVuc2lvbk5hbWV9YCwgZXh0cmEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZm9yIHByZXNlbmNlIG9mIGFuIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgZXh0ZW5zaW9uIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgdGhlIHByZXNlbmNlIG9mIHRoZSBnaXZlbiBleHRlbnNpb24gbmFtZSBpbiBgZXh0ZW5zaW9uc1VzZWRgXG4gICAgICovXG4gICAgaXNFeHRlbnNpb25Vc2VkKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZ2x0Zi5leHRlbnNpb25zVXNlZCAmJiB0aGlzLl9nbHRmLmV4dGVuc2lvbnNVc2VkLmluZGV4T2YobmFtZSkgIT09IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIHRoZSBpbmRlbnRhdGlvbiBsZXZlbCBhbmQgbG9ncyBhIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nXG4gICAgICovXG4gICAgbG9nT3BlbihtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuX3BhcmVudC5fbG9nT3BlbihtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjcmVtZW50cyB0aGUgaW5kZW50YXRpb24gbGV2ZWwuXG4gICAgICovXG4gICAgbG9nQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BhcmVudC5fbG9nQ2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2dcbiAgICAgKi9cbiAgICBsb2cobWVzc2FnZSkge1xuICAgICAgICB0aGlzLl9wYXJlbnQuX2xvZyhtZXNzYWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGEgcGVyZm9ybWFuY2UgY291bnRlci5cbiAgICAgKiBAcGFyYW0gY291bnRlck5hbWUgVGhlIG5hbWUgb2YgdGhlIHBlcmZvcm1hbmNlIGNvdW50ZXJcbiAgICAgKi9cbiAgICBzdGFydFBlcmZvcm1hbmNlQ291bnRlcihjb3VudGVyTmFtZSkge1xuICAgICAgICB0aGlzLl9wYXJlbnQuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyKGNvdW50ZXJOYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5kcyBhIHBlcmZvcm1hbmNlIGNvdW50ZXIuXG4gICAgICogQHBhcmFtIGNvdW50ZXJOYW1lIFRoZSBuYW1lIG9mIHRoZSBwZXJmb3JtYW5jZSBjb3VudGVyXG4gICAgICovXG4gICAgZW5kUGVyZm9ybWFuY2VDb3VudGVyKGNvdW50ZXJOYW1lKSB7XG4gICAgICAgIHRoaXMuX3BhcmVudC5fZW5kUGVyZm9ybWFuY2VDb3VudGVyKGNvdW50ZXJOYW1lKTtcbiAgICB9XG59XG5HTFRGTG9hZGVyLl9SZWdpc3RlcmVkRXh0ZW5zaW9ucyA9IHt9O1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBnbFRGIHNhbXBsZXIuXG4gKi9cbkdMVEZMb2FkZXIuRGVmYXVsdFNhbXBsZXIgPSB7IGluZGV4OiAtMSB9O1xuR0xURkZpbGVMb2FkZXIuX0NyZWF0ZUdMVEYyTG9hZGVyID0gKHBhcmVudCkgPT4gbmV3IEdMVEZMb2FkZXIocGFyZW50KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsVEZMb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderAnimation.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderAnimation.js ***!
  \*************************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnimationPropertyInfo: () => (/* binding */ AnimationPropertyInfo),\n/* harmony export */   TransformNodeAnimationPropertyInfo: () => (/* binding */ TransformNodeAnimationPropertyInfo),\n/* harmony export */   WeightAnimationPropertyInfo: () => (/* binding */ WeightAnimationPropertyInfo),\n/* harmony export */   getQuaternion: () => (/* binding */ getQuaternion),\n/* harmony export */   getVector3: () => (/* binding */ getVector3),\n/* harmony export */   getWeights: () => (/* binding */ getWeights),\n/* harmony export */   nodeAnimationData: () => (/* binding */ nodeAnimationData)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Animations/animation.js */ \"@babylonjs/core/Animations/animation.js\");\n/* harmony import */ var _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Maths/math.vector.js */ \"@babylonjs/core/Maths/math.vector.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n/** @internal */\nfunction getVector3(_target, source, offset, scale) {\n    return _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Vector3.FromArray(source, offset).scaleInPlace(scale);\n}\n/** @internal */\nfunction getQuaternion(_target, source, offset, scale) {\n    return _babylonjs_core_Maths_math_vector_js__WEBPACK_IMPORTED_MODULE_1__.Quaternion.FromArray(source, offset).scaleInPlace(scale);\n}\n/** @internal */\nfunction getWeights(target, source, offset, scale) {\n    const value = new Array(target._numMorphTargets);\n    for (let i = 0; i < value.length; i++) {\n        value[i] = source[offset++] * scale;\n    }\n    return value;\n}\n/** @internal */\nclass AnimationPropertyInfo {\n    /** @internal */\n    constructor(type, name, getValue, getStride) {\n        this.type = type;\n        this.name = name;\n        this.getValue = getValue;\n        this.getStride = getStride;\n    }\n    _buildAnimation(name, fps, keys) {\n        const babylonAnimation = new _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation(name, this.name, fps, this.type);\n        babylonAnimation.setKeys(keys);\n        return babylonAnimation;\n    }\n}\n/** @internal */\nclass TransformNodeAnimationPropertyInfo extends AnimationPropertyInfo {\n    /** @internal */\n    buildAnimations(target, name, fps, keys, callback) {\n        callback(target._babylonTransformNode, this._buildAnimation(name, fps, keys));\n    }\n}\n/** @internal */\nclass WeightAnimationPropertyInfo extends AnimationPropertyInfo {\n    buildAnimations(target, name, fps, keys, callback) {\n        if (target._numMorphTargets) {\n            for (let targetIndex = 0; targetIndex < target._numMorphTargets; targetIndex++) {\n                const babylonAnimation = new _babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation(`${name}_${targetIndex}`, this.name, fps, this.type);\n                babylonAnimation.setKeys(keys.map((key) => ({\n                    frame: key.frame,\n                    inTangent: key.inTangent ? key.inTangent[targetIndex] : undefined,\n                    value: key.value[targetIndex],\n                    outTangent: key.outTangent ? key.outTangent[targetIndex] : undefined,\n                    interpolation: key.interpolation,\n                })));\n                if (target._primitiveBabylonMeshes) {\n                    for (const babylonMesh of target._primitiveBabylonMeshes) {\n                        if (babylonMesh.morphTargetManager) {\n                            const morphTarget = babylonMesh.morphTargetManager.getTarget(targetIndex);\n                            const babylonAnimationClone = babylonAnimation.clone();\n                            morphTarget.animations.push(babylonAnimationClone);\n                            callback(morphTarget, babylonAnimationClone);\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n/** @internal */\nconst nodeAnimationData = {\n    translation: [new TransformNodeAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR3, \"position\", getVector3, () => 3)],\n    rotation: [new TransformNodeAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_QUATERNION, \"rotationQuaternion\", getQuaternion, () => 4)],\n    scale: [new TransformNodeAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_VECTOR3, \"scaling\", getVector3, () => 3)],\n    weights: [new WeightAnimationPropertyInfo(_babylonjs_core_Animations_animation_js__WEBPACK_IMPORTED_MODULE_0__.Animation.ANIMATIONTYPE_FLOAT, \"influence\", getWeights, (target) => target._numMorphTargets)],\n};\n//# sourceMappingURL=glTFLoaderAnimation.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL2dsVEZMb2FkZXJBbmltYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9FO0FBQ087QUFDM0U7QUFDTztBQUNQLFdBQVcseUVBQU87QUFDbEI7QUFDQTtBQUNPO0FBQ1AsV0FBVyw0RUFBVTtBQUNyQjtBQUNBO0FBQ087QUFDUDtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4RUFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxzQ0FBc0MsdUNBQXVDO0FBQzdFLDZDQUE2Qyw4RUFBUyxJQUFJLEtBQUssR0FBRyxZQUFZO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHlEQUF5RCw4RUFBUztBQUNsRSxzREFBc0QsOEVBQVM7QUFDL0QsbURBQW1ELDhFQUFTO0FBQzVELDhDQUE4Qyw4RUFBUztBQUN2RDtBQUNBLCtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvZ2xURkxvYWRlckFuaW1hdGlvbi5qcz84YTE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvQW5pbWF0aW9ucy9hbmltYXRpb24uanNcIjtcbmltcG9ydCB7IFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01hdGhzL21hdGgudmVjdG9yLmpzXCI7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVjdG9yMyhfdGFyZ2V0LCBzb3VyY2UsIG9mZnNldCwgc2NhbGUpIHtcbiAgICByZXR1cm4gVmVjdG9yMy5Gcm9tQXJyYXkoc291cmNlLCBvZmZzZXQpLnNjYWxlSW5QbGFjZShzY2FsZSk7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVhdGVybmlvbihfdGFyZ2V0LCBzb3VyY2UsIG9mZnNldCwgc2NhbGUpIHtcbiAgICByZXR1cm4gUXVhdGVybmlvbi5Gcm9tQXJyYXkoc291cmNlLCBvZmZzZXQpLnNjYWxlSW5QbGFjZShzY2FsZSk7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2VpZ2h0cyh0YXJnZXQsIHNvdXJjZSwgb2Zmc2V0LCBzY2FsZSkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IEFycmF5KHRhcmdldC5fbnVtTW9ycGhUYXJnZXRzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlW2ldID0gc291cmNlW29mZnNldCsrXSAqIHNjYWxlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uUHJvcGVydHlJbmZvIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IodHlwZSwgbmFtZSwgZ2V0VmFsdWUsIGdldFN0cmlkZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmdldFZhbHVlID0gZ2V0VmFsdWU7XG4gICAgICAgIHRoaXMuZ2V0U3RyaWRlID0gZ2V0U3RyaWRlO1xuICAgIH1cbiAgICBfYnVpbGRBbmltYXRpb24obmFtZSwgZnBzLCBrZXlzKSB7XG4gICAgICAgIGNvbnN0IGJhYnlsb25BbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKG5hbWUsIHRoaXMubmFtZSwgZnBzLCB0aGlzLnR5cGUpO1xuICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uLnNldEtleXMoa2V5cyk7XG4gICAgICAgIHJldHVybiBiYWJ5bG9uQW5pbWF0aW9uO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1Ob2RlQW5pbWF0aW9uUHJvcGVydHlJbmZvIGV4dGVuZHMgQW5pbWF0aW9uUHJvcGVydHlJbmZvIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgYnVpbGRBbmltYXRpb25zKHRhcmdldCwgbmFtZSwgZnBzLCBrZXlzLCBjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayh0YXJnZXQuX2JhYnlsb25UcmFuc2Zvcm1Ob2RlLCB0aGlzLl9idWlsZEFuaW1hdGlvbihuYW1lLCBmcHMsIGtleXMpKTtcbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgV2VpZ2h0QW5pbWF0aW9uUHJvcGVydHlJbmZvIGV4dGVuZHMgQW5pbWF0aW9uUHJvcGVydHlJbmZvIHtcbiAgICBidWlsZEFuaW1hdGlvbnModGFyZ2V0LCBuYW1lLCBmcHMsIGtleXMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0YXJnZXQuX251bU1vcnBoVGFyZ2V0cykge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFyZ2V0SW5kZXggPSAwOyB0YXJnZXRJbmRleCA8IHRhcmdldC5fbnVtTW9ycGhUYXJnZXRzOyB0YXJnZXRJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieWxvbkFuaW1hdGlvbiA9IG5ldyBBbmltYXRpb24oYCR7bmFtZX1fJHt0YXJnZXRJbmRleH1gLCB0aGlzLm5hbWUsIGZwcywgdGhpcy50eXBlKTtcbiAgICAgICAgICAgICAgICBiYWJ5bG9uQW5pbWF0aW9uLnNldEtleXMoa2V5cy5tYXAoKGtleSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWU6IGtleS5mcmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW5UYW5nZW50OiBrZXkuaW5UYW5nZW50ID8ga2V5LmluVGFuZ2VudFt0YXJnZXRJbmRleF0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBrZXkudmFsdWVbdGFyZ2V0SW5kZXhdLFxuICAgICAgICAgICAgICAgICAgICBvdXRUYW5nZW50OiBrZXkub3V0VGFuZ2VudCA/IGtleS5vdXRUYW5nZW50W3RhcmdldEluZGV4XSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGlvbjoga2V5LmludGVycG9sYXRpb24sXG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Ll9wcmltaXRpdmVCYWJ5bG9uTWVzaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmFieWxvbk1lc2ggb2YgdGFyZ2V0Ll9wcmltaXRpdmVCYWJ5bG9uTWVzaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFieWxvbk1lc2gubW9ycGhUYXJnZXRNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhUYXJnZXQgPSBiYWJ5bG9uTWVzaC5tb3JwaFRhcmdldE1hbmFnZXIuZ2V0VGFyZ2V0KHRhcmdldEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWJ5bG9uQW5pbWF0aW9uQ2xvbmUgPSBiYWJ5bG9uQW5pbWF0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9ycGhUYXJnZXQuYW5pbWF0aW9ucy5wdXNoKGJhYnlsb25BbmltYXRpb25DbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobW9ycGhUYXJnZXQsIGJhYnlsb25BbmltYXRpb25DbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3Qgbm9kZUFuaW1hdGlvbkRhdGEgPSB7XG4gICAgdHJhbnNsYXRpb246IFtuZXcgVHJhbnNmb3JtTm9kZUFuaW1hdGlvblByb3BlcnR5SW5mbyhBbmltYXRpb24uQU5JTUFUSU9OVFlQRV9WRUNUT1IzLCBcInBvc2l0aW9uXCIsIGdldFZlY3RvcjMsICgpID0+IDMpXSxcbiAgICByb3RhdGlvbjogW25ldyBUcmFuc2Zvcm1Ob2RlQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1FVQVRFUk5JT04sIFwicm90YXRpb25RdWF0ZXJuaW9uXCIsIGdldFF1YXRlcm5pb24sICgpID0+IDQpXSxcbiAgICBzY2FsZTogW25ldyBUcmFuc2Zvcm1Ob2RlQW5pbWF0aW9uUHJvcGVydHlJbmZvKEFuaW1hdGlvbi5BTklNQVRJT05UWVBFX1ZFQ1RPUjMsIFwic2NhbGluZ1wiLCBnZXRWZWN0b3IzLCAoKSA9PiAzKV0sXG4gICAgd2VpZ2h0czogW25ldyBXZWlnaHRBbmltYXRpb25Qcm9wZXJ0eUluZm8oQW5pbWF0aW9uLkFOSU1BVElPTlRZUEVfRkxPQVQsIFwiaW5mbHVlbmNlXCIsIGdldFdlaWdodHMsICh0YXJnZXQpID0+IHRhcmdldC5fbnVtTW9ycGhUYXJnZXRzKV0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2xURkxvYWRlckFuaW1hdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderAnimation.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderExtension.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderExtension.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceMappingURL=glTFLoaderExtension.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL2dsVEZMb2FkZXJFeHRlbnNpb24uanMiLCJtYXBwaW5ncyI6IjtBQUFVO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9nbFRGTG9hZGVyRXh0ZW5zaW9uLmpzPzdlZWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHt9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2xURkxvYWRlckV4dGVuc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderExtension.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderInterfaces.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderInterfaces.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceMappingURL=glTFLoaderInterfaces.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL2dsVEZMb2FkZXJJbnRlcmZhY2VzLmpzIiwibWFwcGluZ3MiOiI7QUFBVTtBQUNWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vM2Qtb2ZmaWNlLXZpZXdlci8uL25vZGVfbW9kdWxlcy9AYmFieWxvbmpzL2xvYWRlcnMvZ2xURi8yLjAvZ2xURkxvYWRlckludGVyZmFjZXMuanM/MWQzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbFRGTG9hZGVySW50ZXJmYWNlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderInterfaces.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/2.0/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/2.0/index.js ***!
  \***********************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoader.js\");\n/* harmony import */ var _glTFLoaderExtension_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glTFLoaderExtension.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderExtension.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoaderExtension_js__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoaderExtension_js__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./glTFLoaderInterfaces.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/glTFLoaderInterfaces.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoaderInterfaces_js__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _Extensions_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Extensions/index.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/Extensions/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _Extensions_index_js__WEBPACK_IMPORTED_MODULE_3__]);\n([_glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__, _Extensions_index_js__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFLoader_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _Extensions_index_js__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _Extensions_index_js__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* eslint-disable import/no-internal-modules */\n\n\n\n\n//# sourceMappingURL=index.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvMi4wL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDZ0M7QUFDUztBQUNDO0FBQ0o7QUFDdEMsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGLzIuMC9pbmRleC5qcz84NDY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1pbnRlcm5hbC1tb2R1bGVzICovXG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTG9hZGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTG9hZGVyRXh0ZW5zaW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGTG9hZGVySW50ZXJmYWNlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vRXh0ZW5zaW9ucy9pbmRleC5qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/2.0/index.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js ***!
  \****************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFFileLoader: () => (/* binding */ GLTFFileLoader),\n/* harmony export */   GLTFLoaderAnimationStartMode: () => (/* binding */ GLTFLoaderAnimationStartMode),\n/* harmony export */   GLTFLoaderCoordinateSystemMode: () => (/* binding */ GLTFLoaderCoordinateSystemMode),\n/* harmony export */   GLTFLoaderState: () => (/* binding */ GLTFLoaderState)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Misc/observable.js */ \"@babylonjs/core/Misc/observable.js\");\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\n/* harmony import */ var _babylonjs_core_Loading_sceneLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babylonjs/core/Loading/sceneLoader.js */ \"@babylonjs/core/Loading/sceneLoader.js\");\n/* harmony import */ var _babylonjs_core_assetContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babylonjs/core/assetContainer.js */ \"@babylonjs/core/assetContainer.js\");\n/* harmony import */ var _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babylonjs/core/Misc/logger.js */ \"@babylonjs/core/Misc/logger.js\");\n/* harmony import */ var _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babylonjs/core/Misc/dataReader.js */ \"@babylonjs/core/Misc/dataReader.js\");\n/* harmony import */ var _glTFValidation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./glTFValidation.js */ \"./node_modules/@babylonjs/loaders/glTF/glTFValidation.js\");\n/* harmony import */ var _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babylonjs/core/Misc/fileTools.js */ \"@babylonjs/core/Misc/fileTools.js\");\n/* harmony import */ var _babylonjs_core_Misc_error_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babylonjs/core/Misc/error.js */ \"@babylonjs/core/Misc/error.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Loading_sceneLoader_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_assetContainer_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__, _glTFValidation_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Misc_error_js__WEBPACK_IMPORTED_MODULE_8__]);\n([_babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__, _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__, _babylonjs_core_Loading_sceneLoader_js__WEBPACK_IMPORTED_MODULE_2__, _babylonjs_core_assetContainer_js__WEBPACK_IMPORTED_MODULE_3__, _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__, _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__, _glTFValidation_js__WEBPACK_IMPORTED_MODULE_6__, _babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_7__, _babylonjs_core_Misc_error_js__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nfunction readAsync(arrayBuffer, byteOffset, byteLength) {\n    try {\n        return Promise.resolve(new Uint8Array(arrayBuffer, byteOffset, byteLength));\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n}\nfunction readViewAsync(arrayBufferView, byteOffset, byteLength) {\n    try {\n        if (byteOffset < 0 || byteOffset >= arrayBufferView.byteLength) {\n            throw new RangeError(\"Offset is out of range.\");\n        }\n        if (byteOffset + byteLength > arrayBufferView.byteLength) {\n            throw new RangeError(\"Length is out of range.\");\n        }\n        return Promise.resolve(new Uint8Array(arrayBufferView.buffer, arrayBufferView.byteOffset + byteOffset, byteLength));\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n}\n/**\n * Mode that determines the coordinate system to use.\n */\nvar GLTFLoaderCoordinateSystemMode;\n(function (GLTFLoaderCoordinateSystemMode) {\n    /**\n     * Automatically convert the glTF right-handed data to the appropriate system based on the current coordinate system mode of the scene.\n     */\n    GLTFLoaderCoordinateSystemMode[GLTFLoaderCoordinateSystemMode[\"AUTO\"] = 0] = \"AUTO\";\n    /**\n     * Sets the useRightHandedSystem flag on the scene.\n     */\n    GLTFLoaderCoordinateSystemMode[GLTFLoaderCoordinateSystemMode[\"FORCE_RIGHT_HANDED\"] = 1] = \"FORCE_RIGHT_HANDED\";\n})(GLTFLoaderCoordinateSystemMode || (GLTFLoaderCoordinateSystemMode = {}));\n/**\n * Mode that determines what animations will start.\n */\nvar GLTFLoaderAnimationStartMode;\n(function (GLTFLoaderAnimationStartMode) {\n    /**\n     * No animation will start.\n     */\n    GLTFLoaderAnimationStartMode[GLTFLoaderAnimationStartMode[\"NONE\"] = 0] = \"NONE\";\n    /**\n     * The first animation will start.\n     */\n    GLTFLoaderAnimationStartMode[GLTFLoaderAnimationStartMode[\"FIRST\"] = 1] = \"FIRST\";\n    /**\n     * All animations will start.\n     */\n    GLTFLoaderAnimationStartMode[GLTFLoaderAnimationStartMode[\"ALL\"] = 2] = \"ALL\";\n})(GLTFLoaderAnimationStartMode || (GLTFLoaderAnimationStartMode = {}));\n/**\n * Loader state.\n */\nvar GLTFLoaderState;\n(function (GLTFLoaderState) {\n    /**\n     * The asset is loading.\n     */\n    GLTFLoaderState[GLTFLoaderState[\"LOADING\"] = 0] = \"LOADING\";\n    /**\n     * The asset is ready for rendering.\n     */\n    GLTFLoaderState[GLTFLoaderState[\"READY\"] = 1] = \"READY\";\n    /**\n     * The asset is completely loaded.\n     */\n    GLTFLoaderState[GLTFLoaderState[\"COMPLETE\"] = 2] = \"COMPLETE\";\n})(GLTFLoaderState || (GLTFLoaderState = {}));\n/**\n * File loader for loading glTF files into a scene.\n */\nclass GLTFFileLoader {\n    constructor() {\n        // --------------\n        // Common options\n        // --------------\n        /**\n         * Raised when the asset has been parsed\n         */\n        this.onParsedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        // ----------\n        // V2 options\n        // ----------\n        /**\n         * The coordinate system mode. Defaults to AUTO.\n         */\n        this.coordinateSystemMode = GLTFLoaderCoordinateSystemMode.AUTO;\n        /**\n         * The animation start mode. Defaults to FIRST.\n         */\n        this.animationStartMode = GLTFLoaderAnimationStartMode.FIRST;\n        /**\n         * Defines if the loader should compile materials before raising the success callback. Defaults to false.\n         */\n        this.compileMaterials = false;\n        /**\n         * Defines if the loader should also compile materials with clip planes. Defaults to false.\n         */\n        this.useClipPlane = false;\n        /**\n         * Defines if the loader should compile shadow generators before raising the success callback. Defaults to false.\n         */\n        this.compileShadowGenerators = false;\n        /**\n         * Defines if the Alpha blended materials are only applied as coverage.\n         * If false, (default) The luminance of each pixel will reduce its opacity to simulate the behaviour of most physical materials.\n         * If true, no extra effects are applied to transparent pixels.\n         */\n        this.transparencyAsCoverage = false;\n        /**\n         * Defines if the loader should use range requests when load binary glTF files from HTTP.\n         * Enabling will disable offline support and glTF validator.\n         * Defaults to false.\n         */\n        this.useRangeRequests = false;\n        /**\n         * Defines if the loader should create instances when multiple glTF nodes point to the same glTF mesh. Defaults to true.\n         */\n        this.createInstances = true;\n        /**\n         * Defines if the loader should always compute the bounding boxes of meshes and not use the min/max values from the position accessor. Defaults to false.\n         */\n        this.alwaysComputeBoundingBox = false;\n        /**\n         * If true, load all materials defined in the file, even if not used by any mesh. Defaults to false.\n         */\n        this.loadAllMaterials = false;\n        /**\n         * If true, load only the materials defined in the file. Defaults to false.\n         */\n        this.loadOnlyMaterials = false;\n        /**\n         * If true, do not load any materials defined in the file. Defaults to false.\n         */\n        this.skipMaterials = false;\n        /**\n         * If true, load the color (gamma encoded) textures into sRGB buffers (if supported by the GPU), which will yield more accurate results when sampling the texture. Defaults to true.\n         */\n        this.useSRGBBuffers = true;\n        /**\n         * When loading glTF animations, which are defined in seconds, target them to this FPS. Defaults to 60.\n         */\n        this.targetFps = 60;\n        /**\n         * Defines if the loader should always compute the nearest common ancestor of the skeleton joints instead of using `skin.skeleton`. Defaults to false.\n         * Set this to true if loading assets with invalid `skin.skeleton` values.\n         */\n        this.alwaysComputeSkeletonRootNode = false;\n        /**\n         * Function called before loading a url referenced by the asset.\n         * @param url url referenced by the asset\n         * @returns Async url to load\n         */\n        this.preprocessUrlAsync = (url) => Promise.resolve(url);\n        /**\n         * Observable raised when the loader creates a mesh after parsing the glTF properties of the mesh.\n         * Note that the observable is raised as soon as the mesh object is created, meaning some data may not have been setup yet for this mesh (vertex data, morph targets, material, ...)\n         */\n        this.onMeshLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Callback raised when the loader creates a skin after parsing the glTF properties of the skin node.\n         * @see https://doc.babylonjs.com/features/featuresDeepDive/importers/glTF/glTFSkinning#ignoring-the-transform-of-the-skinned-mesh\n         * @param node - the transform node that corresponds to the original glTF skin node used for animations\n         * @param skinnedNode - the transform node that is the skinned mesh itself or the parent of the skinned meshes\n         */\n        this.onSkinLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when the loader creates a texture after parsing the glTF properties of the texture.\n         */\n        this.onTextureLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when the loader creates a material after parsing the glTF properties of the material.\n         */\n        this.onMaterialLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when the loader creates a camera after parsing the glTF properties of the camera.\n         */\n        this.onCameraLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when the asset is completely loaded, immediately before the loader is disposed.\n         * For assets with LODs, raised when all of the LODs are complete.\n         * For assets without LODs, raised when the model is complete, immediately after the loader resolves the returned promise.\n         */\n        this.onCompleteObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised when an error occurs.\n         */\n        this.onErrorObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised after the loader is disposed.\n         */\n        this.onDisposeObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Observable raised after a loader extension is created.\n         * Set additional options for a loader extension in this event.\n         */\n        this.onExtensionLoadedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        /**\n         * Defines if the loader should validate the asset.\n         */\n        this.validate = false;\n        /**\n         * Observable raised after validation when validate is set to true. The event data is the result of the validation.\n         */\n        this.onValidatedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        this._loader = null;\n        this._state = null;\n        this._requests = new Array();\n        /**\n         * Name of the loader (\"gltf\")\n         */\n        this.name = \"gltf\";\n        /** @internal */\n        this.extensions = {\n            \".gltf\": { isBinary: false },\n            \".glb\": { isBinary: true },\n        };\n        /**\n         * Observable raised when the loader state changes.\n         */\n        this.onLoaderStateChangedObservable = new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable();\n        this._logIndentLevel = 0;\n        this._loggingEnabled = false;\n        /** @internal */\n        this._log = this._logDisabled;\n        this._capturePerformanceCounters = false;\n        /** @internal */\n        this._startPerformanceCounter = this._startPerformanceCounterDisabled;\n        /** @internal */\n        this._endPerformanceCounter = this._endPerformanceCounterDisabled;\n    }\n    /**\n     * Raised when the asset has been parsed\n     */\n    set onParsed(callback) {\n        if (this._onParsedObserver) {\n            this.onParsedObservable.remove(this._onParsedObserver);\n        }\n        this._onParsedObserver = this.onParsedObservable.add(callback);\n    }\n    /**\n     * Callback raised when the loader creates a mesh after parsing the glTF properties of the mesh.\n     * Note that the callback is called as soon as the mesh object is created, meaning some data may not have been setup yet for this mesh (vertex data, morph targets, material, ...)\n     */\n    set onMeshLoaded(callback) {\n        if (this._onMeshLoadedObserver) {\n            this.onMeshLoadedObservable.remove(this._onMeshLoadedObserver);\n        }\n        this._onMeshLoadedObserver = this.onMeshLoadedObservable.add(callback);\n    }\n    /**\n     * Callback raised when the loader creates a texture after parsing the glTF properties of the texture.\n     */\n    set onTextureLoaded(callback) {\n        if (this._onTextureLoadedObserver) {\n            this.onTextureLoadedObservable.remove(this._onTextureLoadedObserver);\n        }\n        this._onTextureLoadedObserver = this.onTextureLoadedObservable.add(callback);\n    }\n    /**\n     * Callback raised when the loader creates a material after parsing the glTF properties of the material.\n     */\n    set onMaterialLoaded(callback) {\n        if (this._onMaterialLoadedObserver) {\n            this.onMaterialLoadedObservable.remove(this._onMaterialLoadedObserver);\n        }\n        this._onMaterialLoadedObserver = this.onMaterialLoadedObservable.add(callback);\n    }\n    /**\n     * Callback raised when the loader creates a camera after parsing the glTF properties of the camera.\n     */\n    set onCameraLoaded(callback) {\n        if (this._onCameraLoadedObserver) {\n            this.onCameraLoadedObservable.remove(this._onCameraLoadedObserver);\n        }\n        this._onCameraLoadedObserver = this.onCameraLoadedObservable.add(callback);\n    }\n    /**\n     * Callback raised when the asset is completely loaded, immediately before the loader is disposed.\n     * For assets with LODs, raised when all of the LODs are complete.\n     * For assets without LODs, raised when the model is complete, immediately after the loader resolves the returned promise.\n     */\n    set onComplete(callback) {\n        if (this._onCompleteObserver) {\n            this.onCompleteObservable.remove(this._onCompleteObserver);\n        }\n        this._onCompleteObserver = this.onCompleteObservable.add(callback);\n    }\n    /**\n     * Callback raised when an error occurs.\n     */\n    set onError(callback) {\n        if (this._onErrorObserver) {\n            this.onErrorObservable.remove(this._onErrorObserver);\n        }\n        this._onErrorObserver = this.onErrorObservable.add(callback);\n    }\n    /**\n     * Callback raised after the loader is disposed.\n     */\n    set onDispose(callback) {\n        if (this._onDisposeObserver) {\n            this.onDisposeObservable.remove(this._onDisposeObserver);\n        }\n        this._onDisposeObserver = this.onDisposeObservable.add(callback);\n    }\n    /**\n     * Callback raised after a loader extension is created.\n     */\n    set onExtensionLoaded(callback) {\n        if (this._onExtensionLoadedObserver) {\n            this.onExtensionLoadedObservable.remove(this._onExtensionLoadedObserver);\n        }\n        this._onExtensionLoadedObserver = this.onExtensionLoadedObservable.add(callback);\n    }\n    /**\n     * Defines if the loader logging is enabled.\n     */\n    get loggingEnabled() {\n        return this._loggingEnabled;\n    }\n    set loggingEnabled(value) {\n        if (this._loggingEnabled === value) {\n            return;\n        }\n        this._loggingEnabled = value;\n        if (this._loggingEnabled) {\n            this._log = this._logEnabled;\n        }\n        else {\n            this._log = this._logDisabled;\n        }\n    }\n    /**\n     * Defines if the loader should capture performance counters.\n     */\n    get capturePerformanceCounters() {\n        return this._capturePerformanceCounters;\n    }\n    set capturePerformanceCounters(value) {\n        if (this._capturePerformanceCounters === value) {\n            return;\n        }\n        this._capturePerformanceCounters = value;\n        if (this._capturePerformanceCounters) {\n            this._startPerformanceCounter = this._startPerformanceCounterEnabled;\n            this._endPerformanceCounter = this._endPerformanceCounterEnabled;\n        }\n        else {\n            this._startPerformanceCounter = this._startPerformanceCounterDisabled;\n            this._endPerformanceCounter = this._endPerformanceCounterDisabled;\n        }\n    }\n    /**\n     * Callback raised after a loader extension is created.\n     */\n    set onValidated(callback) {\n        if (this._onValidatedObserver) {\n            this.onValidatedObservable.remove(this._onValidatedObserver);\n        }\n        this._onValidatedObserver = this.onValidatedObservable.add(callback);\n    }\n    /**\n     * Disposes the loader, releases resources during load, and cancels any outstanding requests.\n     */\n    dispose() {\n        if (this._loader) {\n            this._loader.dispose();\n            this._loader = null;\n        }\n        for (const request of this._requests) {\n            request.abort();\n        }\n        this._requests.length = 0;\n        delete this._progressCallback;\n        this.preprocessUrlAsync = (url) => Promise.resolve(url);\n        this.onMeshLoadedObservable.clear();\n        this.onSkinLoadedObservable.clear();\n        this.onTextureLoadedObservable.clear();\n        this.onMaterialLoadedObservable.clear();\n        this.onCameraLoadedObservable.clear();\n        this.onCompleteObservable.clear();\n        this.onExtensionLoadedObservable.clear();\n        this.onDisposeObservable.notifyObservers(undefined);\n        this.onDisposeObservable.clear();\n    }\n    /**\n     * @internal\n     */\n    loadFile(scene, fileOrUrl, rootUrl, onSuccess, onProgress, useArrayBuffer, onError, name) {\n        if (ArrayBuffer.isView(fileOrUrl)) {\n            this._loadBinary(scene, fileOrUrl, rootUrl, onSuccess, onError, name);\n            return null;\n        }\n        this._progressCallback = onProgress;\n        const fileName = fileOrUrl.name || _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.GetFilename(fileOrUrl);\n        if (useArrayBuffer) {\n            if (this.useRangeRequests) {\n                if (this.validate) {\n                    _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__.Logger.Warn(\"glTF validation is not supported when range requests are enabled\");\n                }\n                const fileRequest = {\n                    abort: () => { },\n                    onCompleteObservable: new _babylonjs_core_Misc_observable_js__WEBPACK_IMPORTED_MODULE_0__.Observable(),\n                };\n                const dataBuffer = {\n                    readAsync: (byteOffset, byteLength) => {\n                        return new Promise((resolve, reject) => {\n                            this._loadFile(scene, fileOrUrl, (data) => {\n                                resolve(new Uint8Array(data));\n                            }, true, (error) => {\n                                reject(error);\n                            }, (webRequest) => {\n                                webRequest.setRequestHeader(\"Range\", `bytes=${byteOffset}-${byteOffset + byteLength - 1}`);\n                            });\n                        });\n                    },\n                    byteLength: 0,\n                };\n                this._unpackBinaryAsync(new _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__.DataReader(dataBuffer)).then((loaderData) => {\n                    fileRequest.onCompleteObservable.notifyObservers(fileRequest);\n                    onSuccess(loaderData);\n                }, onError ? (error) => onError(undefined, error) : undefined);\n                return fileRequest;\n            }\n            return this._loadFile(scene, fileOrUrl, (data) => {\n                this._validate(scene, new Uint8Array(data, 0, data.byteLength), rootUrl, fileName);\n                this._unpackBinaryAsync(new _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__.DataReader({\n                    readAsync: (byteOffset, byteLength) => readAsync(data, byteOffset, byteLength),\n                    byteLength: data.byteLength,\n                })).then((loaderData) => {\n                    onSuccess(loaderData);\n                }, onError ? (error) => onError(undefined, error) : undefined);\n            }, true, onError);\n        }\n        else {\n            return this._loadFile(scene, fileOrUrl, (data) => {\n                this._validate(scene, data, rootUrl, fileName);\n                onSuccess({ json: this._parseJson(data) });\n            }, false, onError);\n        }\n    }\n    _loadBinary(scene, data, rootUrl, onSuccess, onError, fileName) {\n        this._validate(scene, new Uint8Array(data.buffer, data.byteOffset, data.byteLength), rootUrl, fileName);\n        this._unpackBinaryAsync(new _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__.DataReader({\n            readAsync: (byteOffset, byteLength) => readViewAsync(data, byteOffset, byteLength),\n            byteLength: data.byteLength,\n        })).then((loaderData) => {\n            onSuccess(loaderData);\n        }, onError ? (error) => onError(undefined, error) : undefined);\n    }\n    /**\n     * @internal\n     */\n    importMeshAsync(meshesNames, scene, data, rootUrl, onProgress, fileName) {\n        return Promise.resolve().then(() => {\n            this.onParsedObservable.notifyObservers(data);\n            this.onParsedObservable.clear();\n            this._log(`Loading ${fileName || \"\"}`);\n            this._loader = this._getLoader(data);\n            return this._loader.importMeshAsync(meshesNames, scene, null, data, rootUrl, onProgress, fileName);\n        });\n    }\n    /**\n     * @internal\n     */\n    loadAsync(scene, data, rootUrl, onProgress, fileName) {\n        return Promise.resolve().then(() => {\n            this.onParsedObservable.notifyObservers(data);\n            this.onParsedObservable.clear();\n            this._log(`Loading ${fileName || \"\"}`);\n            this._loader = this._getLoader(data);\n            return this._loader.loadAsync(scene, data, rootUrl, onProgress, fileName);\n        });\n    }\n    /**\n     * @internal\n     */\n    loadAssetContainerAsync(scene, data, rootUrl, onProgress, fileName) {\n        return Promise.resolve().then(() => {\n            this.onParsedObservable.notifyObservers(data);\n            this.onParsedObservable.clear();\n            this._log(`Loading ${fileName || \"\"}`);\n            this._loader = this._getLoader(data);\n            // Prepare the asset container.\n            const container = new _babylonjs_core_assetContainer_js__WEBPACK_IMPORTED_MODULE_3__.AssetContainer(scene);\n            // Get materials/textures when loading to add to container\n            const materials = [];\n            this.onMaterialLoadedObservable.add((material) => {\n                materials.push(material);\n            });\n            const textures = [];\n            this.onTextureLoadedObservable.add((texture) => {\n                textures.push(texture);\n            });\n            const cameras = [];\n            this.onCameraLoadedObservable.add((camera) => {\n                cameras.push(camera);\n            });\n            const morphTargetManagers = [];\n            this.onMeshLoadedObservable.add((mesh) => {\n                if (mesh.morphTargetManager) {\n                    morphTargetManagers.push(mesh.morphTargetManager);\n                }\n            });\n            return this._loader.importMeshAsync(null, scene, container, data, rootUrl, onProgress, fileName).then((result) => {\n                Array.prototype.push.apply(container.geometries, result.geometries);\n                Array.prototype.push.apply(container.meshes, result.meshes);\n                Array.prototype.push.apply(container.particleSystems, result.particleSystems);\n                Array.prototype.push.apply(container.skeletons, result.skeletons);\n                Array.prototype.push.apply(container.animationGroups, result.animationGroups);\n                Array.prototype.push.apply(container.materials, materials);\n                Array.prototype.push.apply(container.textures, textures);\n                Array.prototype.push.apply(container.lights, result.lights);\n                Array.prototype.push.apply(container.transformNodes, result.transformNodes);\n                Array.prototype.push.apply(container.cameras, cameras);\n                Array.prototype.push.apply(container.morphTargetManagers, morphTargetManagers);\n                return container;\n            });\n        });\n    }\n    /**\n     * @internal\n     */\n    canDirectLoad(data) {\n        return ((data.indexOf(\"asset\") !== -1 && data.indexOf(\"version\") !== -1) ||\n            data.startsWith(\"data:base64,\" + GLTFFileLoader._MagicBase64Encoded) || // this is technically incorrect, but will continue to support for backcompat.\n            data.startsWith(\"data:;base64,\" + GLTFFileLoader._MagicBase64Encoded) ||\n            data.startsWith(\"data:application/octet-stream;base64,\" + GLTFFileLoader._MagicBase64Encoded) ||\n            data.startsWith(\"data:model/gltf-binary;base64,\" + GLTFFileLoader._MagicBase64Encoded));\n    }\n    /**\n     * @internal\n     */\n    directLoad(scene, data) {\n        if (data.startsWith(\"base64,\" + GLTFFileLoader._MagicBase64Encoded) || // this is technically incorrect, but will continue to support for backcompat.\n            data.startsWith(\";base64,\" + GLTFFileLoader._MagicBase64Encoded) ||\n            data.startsWith(\"application/octet-stream;base64,\" + GLTFFileLoader._MagicBase64Encoded) ||\n            data.startsWith(\"model/gltf-binary;base64,\" + GLTFFileLoader._MagicBase64Encoded)) {\n            const arrayBuffer = (0,_babylonjs_core_Misc_fileTools_js__WEBPACK_IMPORTED_MODULE_7__.DecodeBase64UrlToBinary)(data);\n            this._validate(scene, new Uint8Array(arrayBuffer, 0, arrayBuffer.byteLength));\n            return this._unpackBinaryAsync(new _babylonjs_core_Misc_dataReader_js__WEBPACK_IMPORTED_MODULE_5__.DataReader({\n                readAsync: (byteOffset, byteLength) => readAsync(arrayBuffer, byteOffset, byteLength),\n                byteLength: arrayBuffer.byteLength,\n            }));\n        }\n        this._validate(scene, data);\n        return Promise.resolve({ json: this._parseJson(data) });\n    }\n    /** @internal */\n    createPlugin() {\n        return new GLTFFileLoader();\n    }\n    /**\n     * The loader state or null if the loader is not active.\n     */\n    get loaderState() {\n        return this._state;\n    }\n    /**\n     * Returns a promise that resolves when the asset is completely loaded.\n     * @returns a promise that resolves when the asset is completely loaded.\n     */\n    whenCompleteAsync() {\n        return new Promise((resolve, reject) => {\n            this.onCompleteObservable.addOnce(() => {\n                resolve();\n            });\n            this.onErrorObservable.addOnce((reason) => {\n                reject(reason);\n            });\n        });\n    }\n    /**\n     * @internal\n     */\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.onLoaderStateChangedObservable.notifyObservers(this._state);\n        this._log(GLTFLoaderState[this._state]);\n    }\n    /**\n     * @internal\n     */\n    _loadFile(scene, fileOrUrl, onSuccess, useArrayBuffer, onError, onOpened) {\n        const request = scene._loadFile(fileOrUrl, onSuccess, (event) => {\n            this._onProgress(event, request);\n        }, true, useArrayBuffer, onError, onOpened);\n        request.onCompleteObservable.add((request) => {\n            this._requests.splice(this._requests.indexOf(request), 1);\n        });\n        this._requests.push(request);\n        return request;\n    }\n    _onProgress(event, request) {\n        if (!this._progressCallback) {\n            return;\n        }\n        request._lengthComputable = event.lengthComputable;\n        request._loaded = event.loaded;\n        request._total = event.total;\n        let lengthComputable = true;\n        let loaded = 0;\n        let total = 0;\n        for (const request of this._requests) {\n            if (request._lengthComputable === undefined || request._loaded === undefined || request._total === undefined) {\n                return;\n            }\n            lengthComputable = lengthComputable && request._lengthComputable;\n            loaded += request._loaded;\n            total += request._total;\n        }\n        this._progressCallback({\n            lengthComputable: lengthComputable,\n            loaded: loaded,\n            total: lengthComputable ? total : 0,\n        });\n    }\n    _validate(scene, data, rootUrl = \"\", fileName = \"\") {\n        if (!this.validate) {\n            return;\n        }\n        this._startPerformanceCounter(\"Validate JSON\");\n        _glTFValidation_js__WEBPACK_IMPORTED_MODULE_6__.GLTFValidation.ValidateAsync(data, rootUrl, fileName, (uri) => {\n            return this.preprocessUrlAsync(rootUrl + uri).then((url) => {\n                return scene._loadFileAsync(url, undefined, true, true).then((data) => {\n                    return new Uint8Array(data, 0, data.byteLength);\n                });\n            });\n        }).then((result) => {\n            this._endPerformanceCounter(\"Validate JSON\");\n            this.onValidatedObservable.notifyObservers(result);\n            this.onValidatedObservable.clear();\n        }, (reason) => {\n            this._endPerformanceCounter(\"Validate JSON\");\n            _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.Warn(`Failed to validate: ${reason.message}`);\n            this.onValidatedObservable.clear();\n        });\n    }\n    _getLoader(loaderData) {\n        const asset = loaderData.json.asset || {};\n        this._log(`Asset version: ${asset.version}`);\n        asset.minVersion && this._log(`Asset minimum version: ${asset.minVersion}`);\n        asset.generator && this._log(`Asset generator: ${asset.generator}`);\n        const version = GLTFFileLoader._parseVersion(asset.version);\n        if (!version) {\n            throw new Error(\"Invalid version: \" + asset.version);\n        }\n        if (asset.minVersion !== undefined) {\n            const minVersion = GLTFFileLoader._parseVersion(asset.minVersion);\n            if (!minVersion) {\n                throw new Error(\"Invalid minimum version: \" + asset.minVersion);\n            }\n            if (GLTFFileLoader._compareVersion(minVersion, { major: 2, minor: 0 }) > 0) {\n                throw new Error(\"Incompatible minimum version: \" + asset.minVersion);\n            }\n        }\n        const createLoaders = {\n            1: GLTFFileLoader._CreateGLTF1Loader,\n            2: GLTFFileLoader._CreateGLTF2Loader,\n        };\n        const createLoader = createLoaders[version.major];\n        if (!createLoader) {\n            throw new Error(\"Unsupported version: \" + asset.version);\n        }\n        return createLoader(this);\n    }\n    _parseJson(json) {\n        this._startPerformanceCounter(\"Parse JSON\");\n        this._log(`JSON length: ${json.length}`);\n        const parsed = JSON.parse(json);\n        this._endPerformanceCounter(\"Parse JSON\");\n        return parsed;\n    }\n    _unpackBinaryAsync(dataReader) {\n        this._startPerformanceCounter(\"Unpack Binary\");\n        // Read magic + version + length + json length + json format\n        return dataReader.loadAsync(20).then(() => {\n            const Binary = {\n                Magic: 0x46546c67,\n            };\n            const magic = dataReader.readUint32();\n            if (magic !== Binary.Magic) {\n                throw new _babylonjs_core_Misc_error_js__WEBPACK_IMPORTED_MODULE_8__.RuntimeError(\"Unexpected magic: \" + magic, _babylonjs_core_Misc_error_js__WEBPACK_IMPORTED_MODULE_8__.ErrorCodes.GLTFLoaderUnexpectedMagicError);\n            }\n            const version = dataReader.readUint32();\n            if (this.loggingEnabled) {\n                this._log(`Binary version: ${version}`);\n            }\n            const length = dataReader.readUint32();\n            if (!this.useRangeRequests && length !== dataReader.buffer.byteLength) {\n                _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__.Logger.Warn(`Length in header does not match actual data length: ${length} != ${dataReader.buffer.byteLength}`);\n            }\n            let unpacked;\n            switch (version) {\n                case 1: {\n                    unpacked = this._unpackBinaryV1Async(dataReader, length);\n                    break;\n                }\n                case 2: {\n                    unpacked = this._unpackBinaryV2Async(dataReader, length);\n                    break;\n                }\n                default: {\n                    throw new Error(\"Unsupported version: \" + version);\n                }\n            }\n            this._endPerformanceCounter(\"Unpack Binary\");\n            return unpacked;\n        });\n    }\n    _unpackBinaryV1Async(dataReader, length) {\n        const ContentFormat = {\n            JSON: 0,\n        };\n        const contentLength = dataReader.readUint32();\n        const contentFormat = dataReader.readUint32();\n        if (contentFormat !== ContentFormat.JSON) {\n            throw new Error(`Unexpected content format: ${contentFormat}`);\n        }\n        const bodyLength = length - dataReader.byteOffset;\n        const data = { json: this._parseJson(dataReader.readString(contentLength)), bin: null };\n        if (bodyLength !== 0) {\n            const startByteOffset = dataReader.byteOffset;\n            data.bin = {\n                readAsync: (byteOffset, byteLength) => dataReader.buffer.readAsync(startByteOffset + byteOffset, byteLength),\n                byteLength: bodyLength,\n            };\n        }\n        return Promise.resolve(data);\n    }\n    _unpackBinaryV2Async(dataReader, length) {\n        const ChunkFormat = {\n            JSON: 0x4e4f534a,\n            BIN: 0x004e4942,\n        };\n        // Read the JSON chunk header.\n        const chunkLength = dataReader.readUint32();\n        const chunkFormat = dataReader.readUint32();\n        if (chunkFormat !== ChunkFormat.JSON) {\n            throw new Error(\"First chunk format is not JSON\");\n        }\n        // Bail if there are no other chunks.\n        if (dataReader.byteOffset + chunkLength === length) {\n            return dataReader.loadAsync(chunkLength).then(() => {\n                return { json: this._parseJson(dataReader.readString(chunkLength)), bin: null };\n            });\n        }\n        // Read the JSON chunk and the length and type of the next chunk.\n        return dataReader.loadAsync(chunkLength + 8).then(() => {\n            const data = { json: this._parseJson(dataReader.readString(chunkLength)), bin: null };\n            const readAsync = () => {\n                const chunkLength = dataReader.readUint32();\n                const chunkFormat = dataReader.readUint32();\n                switch (chunkFormat) {\n                    case ChunkFormat.JSON: {\n                        throw new Error(\"Unexpected JSON chunk\");\n                    }\n                    case ChunkFormat.BIN: {\n                        const startByteOffset = dataReader.byteOffset;\n                        data.bin = {\n                            readAsync: (byteOffset, byteLength) => dataReader.buffer.readAsync(startByteOffset + byteOffset, byteLength),\n                            byteLength: chunkLength,\n                        };\n                        dataReader.skipBytes(chunkLength);\n                        break;\n                    }\n                    default: {\n                        // ignore unrecognized chunkFormat\n                        dataReader.skipBytes(chunkLength);\n                        break;\n                    }\n                }\n                if (dataReader.byteOffset !== length) {\n                    return dataReader.loadAsync(8).then(readAsync);\n                }\n                return Promise.resolve(data);\n            };\n            return readAsync();\n        });\n    }\n    static _parseVersion(version) {\n        if (version === \"1.0\" || version === \"1.0.1\") {\n            return {\n                major: 1,\n                minor: 0,\n            };\n        }\n        const match = (version + \"\").match(/^(\\d+)\\.(\\d+)/);\n        if (!match) {\n            return null;\n        }\n        return {\n            major: parseInt(match[1]),\n            minor: parseInt(match[2]),\n        };\n    }\n    static _compareVersion(a, b) {\n        if (a.major > b.major) {\n            return 1;\n        }\n        if (a.major < b.major) {\n            return -1;\n        }\n        if (a.minor > b.minor) {\n            return 1;\n        }\n        if (a.minor < b.minor) {\n            return -1;\n        }\n        return 0;\n    }\n    /**\n     * @internal\n     */\n    _logOpen(message) {\n        this._log(message);\n        this._logIndentLevel++;\n    }\n    /** @internal */\n    _logClose() {\n        --this._logIndentLevel;\n    }\n    _logEnabled(message) {\n        const spaces = GLTFFileLoader._logSpaces.substr(0, this._logIndentLevel * 2);\n        _babylonjs_core_Misc_logger_js__WEBPACK_IMPORTED_MODULE_4__.Logger.Log(`${spaces}${message}`);\n    }\n    _logDisabled(message) { }\n    _startPerformanceCounterEnabled(counterName) {\n        _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.StartPerformanceCounter(counterName);\n    }\n    _startPerformanceCounterDisabled(counterName) { }\n    _endPerformanceCounterEnabled(counterName) {\n        _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_1__.Tools.EndPerformanceCounter(counterName);\n    }\n    _endPerformanceCounterDisabled(counterName) { }\n}\n// ----------\n// V1 options\n// ----------\n/**\n * Set this property to false to disable incremental loading which delays the loader from calling the success callback until after loading the meshes and shaders.\n * Textures always loads asynchronously. For example, the success callback can compute the bounding information of the loaded meshes when incremental loading is disabled.\n * Defaults to true.\n * @internal\n */\nGLTFFileLoader.IncrementalLoading = true;\n/**\n * Set this property to true in order to work with homogeneous coordinates, available with some converters and exporters.\n * Defaults to false. See https://en.wikipedia.org/wiki/Homogeneous_coordinates.\n * @internal\n */\nGLTFFileLoader.HomogeneousCoordinates = false;\nGLTFFileLoader._MagicBase64Encoded = \"Z2xURg\"; // \"glTF\" base64 encoded (without the quotes!)\nGLTFFileLoader._logSpaces = \"                                \";\nif (_babylonjs_core_Loading_sceneLoader_js__WEBPACK_IMPORTED_MODULE_2__.SceneLoader) {\n    _babylonjs_core_Loading_sceneLoader_js__WEBPACK_IMPORTED_MODULE_2__.SceneLoader.RegisterPlugin(new GLTFFileLoader());\n}\n//# sourceMappingURL=glTFFileLoader.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvZ2xURkZpbGVMb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRTtBQUNWO0FBQ2U7QUFDRjtBQUNYO0FBQ1E7QUFDWDtBQUN1QjtBQUNIO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdFQUF3RTtBQUN6RTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvRUFBb0U7QUFDckU7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMENBQTBDO0FBQzNDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMEVBQVU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDBFQUFVO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywwRUFBVTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEVBQVU7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDBFQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwRUFBVTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBFQUFVO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywwRUFBVTtBQUMvQztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMEVBQVU7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMEVBQVU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMEVBQVU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QyxzQkFBc0IsZ0JBQWdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDBFQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxnRUFBSztBQUNoRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0VBQU07QUFDMUI7QUFDQTtBQUNBLG9DQUFvQztBQUNwQyw4Q0FBOEMsMEVBQVU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsNkJBQTZCO0FBQzdCLDhFQUE4RSxXQUFXLEdBQUcsNEJBQTRCO0FBQ3hILDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw0Q0FBNEMsMEVBQVU7QUFDdEQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywwRUFBVTtBQUN0RDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw2QkFBNkI7QUFDekQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDBFQUFVO0FBQzlDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQSxrQ0FBa0MsNkVBQWM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQywyREFBMkQ7QUFDM0Qsb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixzREFBc0Q7QUFDdEQsK0NBQStDO0FBQy9DLGdDQUFnQywwRkFBdUI7QUFDdkQ7QUFDQSwrQ0FBK0MsMEVBQVU7QUFDekQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUNBQWlDLDZCQUE2QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFlBQVksZ0VBQUssNkJBQTZCLGVBQWU7QUFDN0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGNBQWM7QUFDbEQsZ0VBQWdFLGlCQUFpQjtBQUNqRix5REFBeUQsZ0JBQWdCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxvQkFBb0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFlBQVk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUVBQVksK0JBQStCLHFFQUFVO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrRUFBTSw2REFBNkQsUUFBUSxLQUFLLDZCQUE2QjtBQUM3SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsY0FBYztBQUN4RTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFNLFFBQVEsT0FBTyxFQUFFLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnRUFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBLElBQUksK0VBQVc7QUFDZixJQUFJLCtFQUFXO0FBQ2Y7QUFDQSwwQyIsInNvdXJjZXMiOlsid2VicGFjazovLzNkLW9mZmljZS12aWV3ZXIvLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvZ2xURkZpbGVMb2FkZXIuanM/NjExNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL29ic2VydmFibGUuanNcIjtcbmltcG9ydCB7IFRvb2xzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL3Rvb2xzLmpzXCI7XG5pbXBvcnQgeyBTY2VuZUxvYWRlciB9IGZyb20gXCJAYmFieWxvbmpzL2NvcmUvTG9hZGluZy9zY2VuZUxvYWRlci5qc1wiO1xuaW1wb3J0IHsgQXNzZXRDb250YWluZXIgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL2Fzc2V0Q29udGFpbmVyLmpzXCI7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvbG9nZ2VyLmpzXCI7XG5pbXBvcnQgeyBEYXRhUmVhZGVyIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2RhdGFSZWFkZXIuanNcIjtcbmltcG9ydCB7IEdMVEZWYWxpZGF0aW9uIH0gZnJvbSBcIi4vZ2xURlZhbGlkYXRpb24uanNcIjtcbmltcG9ydCB7IERlY29kZUJhc2U2NFVybFRvQmluYXJ5IH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2ZpbGVUb29scy5qc1wiO1xuaW1wb3J0IHsgUnVudGltZUVycm9yLCBFcnJvckNvZGVzIH0gZnJvbSBcIkBiYWJ5bG9uanMvY29yZS9NaXNjL2Vycm9yLmpzXCI7XG5mdW5jdGlvbiByZWFkQXN5bmMoYXJyYXlCdWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWFkVmlld0FzeW5jKGFycmF5QnVmZmVyVmlldywgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBieXRlT2Zmc2V0ID49IGFycmF5QnVmZmVyVmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk9mZnNldCBpcyBvdXQgb2YgcmFuZ2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCA+IGFycmF5QnVmZmVyVmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkxlbmd0aCBpcyBvdXQgb2YgcmFuZ2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXJWaWV3LmJ1ZmZlciwgYXJyYXlCdWZmZXJWaWV3LmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICB9XG59XG4vKipcbiAqIE1vZGUgdGhhdCBkZXRlcm1pbmVzIHRoZSBjb29yZGluYXRlIHN5c3RlbSB0byB1c2UuXG4gKi9cbmV4cG9ydCB2YXIgR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlO1xuKGZ1bmN0aW9uIChHTFRGTG9hZGVyQ29vcmRpbmF0ZVN5c3RlbU1vZGUpIHtcbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IGNvbnZlcnQgdGhlIGdsVEYgcmlnaHQtaGFuZGVkIGRhdGEgdG8gdGhlIGFwcHJvcHJpYXRlIHN5c3RlbSBiYXNlZCBvbiB0aGUgY3VycmVudCBjb29yZGluYXRlIHN5c3RlbSBtb2RlIG9mIHRoZSBzY2VuZS5cbiAgICAgKi9cbiAgICBHTFRGTG9hZGVyQ29vcmRpbmF0ZVN5c3RlbU1vZGVbR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlW1wiQVVUT1wiXSA9IDBdID0gXCJBVVRPXCI7XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdXNlUmlnaHRIYW5kZWRTeXN0ZW0gZmxhZyBvbiB0aGUgc2NlbmUuXG4gICAgICovXG4gICAgR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlW0dMVEZMb2FkZXJDb29yZGluYXRlU3lzdGVtTW9kZVtcIkZPUkNFX1JJR0hUX0hBTkRFRFwiXSA9IDFdID0gXCJGT1JDRV9SSUdIVF9IQU5ERURcIjtcbn0pKEdMVEZMb2FkZXJDb29yZGluYXRlU3lzdGVtTW9kZSB8fCAoR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlID0ge30pKTtcbi8qKlxuICogTW9kZSB0aGF0IGRldGVybWluZXMgd2hhdCBhbmltYXRpb25zIHdpbGwgc3RhcnQuXG4gKi9cbmV4cG9ydCB2YXIgR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZTtcbihmdW5jdGlvbiAoR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZSkge1xuICAgIC8qKlxuICAgICAqIE5vIGFuaW1hdGlvbiB3aWxsIHN0YXJ0LlxuICAgICAqL1xuICAgIEdMVEZMb2FkZXJBbmltYXRpb25TdGFydE1vZGVbR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZVtcIk5PTkVcIl0gPSAwXSA9IFwiTk9ORVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBmaXJzdCBhbmltYXRpb24gd2lsbCBzdGFydC5cbiAgICAgKi9cbiAgICBHTFRGTG9hZGVyQW5pbWF0aW9uU3RhcnRNb2RlW0dMVEZMb2FkZXJBbmltYXRpb25TdGFydE1vZGVbXCJGSVJTVFwiXSA9IDFdID0gXCJGSVJTVFwiO1xuICAgIC8qKlxuICAgICAqIEFsbCBhbmltYXRpb25zIHdpbGwgc3RhcnQuXG4gICAgICovXG4gICAgR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZVtHTFRGTG9hZGVyQW5pbWF0aW9uU3RhcnRNb2RlW1wiQUxMXCJdID0gMl0gPSBcIkFMTFwiO1xufSkoR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZSB8fCAoR0xURkxvYWRlckFuaW1hdGlvblN0YXJ0TW9kZSA9IHt9KSk7XG4vKipcbiAqIExvYWRlciBzdGF0ZS5cbiAqL1xuZXhwb3J0IHZhciBHTFRGTG9hZGVyU3RhdGU7XG4oZnVuY3Rpb24gKEdMVEZMb2FkZXJTdGF0ZSkge1xuICAgIC8qKlxuICAgICAqIFRoZSBhc3NldCBpcyBsb2FkaW5nLlxuICAgICAqL1xuICAgIEdMVEZMb2FkZXJTdGF0ZVtHTFRGTG9hZGVyU3RhdGVbXCJMT0FESU5HXCJdID0gMF0gPSBcIkxPQURJTkdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgYXNzZXQgaXMgcmVhZHkgZm9yIHJlbmRlcmluZy5cbiAgICAgKi9cbiAgICBHTFRGTG9hZGVyU3RhdGVbR0xURkxvYWRlclN0YXRlW1wiUkVBRFlcIl0gPSAxXSA9IFwiUkVBRFlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgYXNzZXQgaXMgY29tcGxldGVseSBsb2FkZWQuXG4gICAgICovXG4gICAgR0xURkxvYWRlclN0YXRlW0dMVEZMb2FkZXJTdGF0ZVtcIkNPTVBMRVRFXCJdID0gMl0gPSBcIkNPTVBMRVRFXCI7XG59KShHTFRGTG9hZGVyU3RhdGUgfHwgKEdMVEZMb2FkZXJTdGF0ZSA9IHt9KSk7XG4vKipcbiAqIEZpbGUgbG9hZGVyIGZvciBsb2FkaW5nIGdsVEYgZmlsZXMgaW50byBhIHNjZW5lLlxuICovXG5leHBvcnQgY2xhc3MgR0xURkZpbGVMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBDb21tb24gb3B0aW9uc1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLVxuICAgICAgICAvKipcbiAgICAgICAgICogUmFpc2VkIHdoZW4gdGhlIGFzc2V0IGhhcyBiZWVuIHBhcnNlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vblBhcnNlZE9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICAvLyAtLS0tLS0tLS0tXG4gICAgICAgIC8vIFYyIG9wdGlvbnNcbiAgICAgICAgLy8gLS0tLS0tLS0tLVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgc3lzdGVtIG1vZGUuIERlZmF1bHRzIHRvIEFVVE8uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvb3JkaW5hdGVTeXN0ZW1Nb2RlID0gR0xURkxvYWRlckNvb3JkaW5hdGVTeXN0ZW1Nb2RlLkFVVE87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYW5pbWF0aW9uIHN0YXJ0IG1vZGUuIERlZmF1bHRzIHRvIEZJUlNULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmltYXRpb25TdGFydE1vZGUgPSBHTFRGTG9hZGVyQW5pbWF0aW9uU3RhcnRNb2RlLkZJUlNUO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB0aGUgbG9hZGVyIHNob3VsZCBjb21waWxlIG1hdGVyaWFscyBiZWZvcmUgcmFpc2luZyB0aGUgc3VjY2VzcyBjYWxsYmFjay4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbXBpbGVNYXRlcmlhbHMgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgdGhlIGxvYWRlciBzaG91bGQgYWxzbyBjb21waWxlIG1hdGVyaWFscyB3aXRoIGNsaXAgcGxhbmVzLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXNlQ2xpcFBsYW5lID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGlmIHRoZSBsb2FkZXIgc2hvdWxkIGNvbXBpbGUgc2hhZG93IGdlbmVyYXRvcnMgYmVmb3JlIHJhaXNpbmcgdGhlIHN1Y2Nlc3MgY2FsbGJhY2suIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb21waWxlU2hhZG93R2VuZXJhdG9ycyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB0aGUgQWxwaGEgYmxlbmRlZCBtYXRlcmlhbHMgYXJlIG9ubHkgYXBwbGllZCBhcyBjb3ZlcmFnZS5cbiAgICAgICAgICogSWYgZmFsc2UsIChkZWZhdWx0KSBUaGUgbHVtaW5hbmNlIG9mIGVhY2ggcGl4ZWwgd2lsbCByZWR1Y2UgaXRzIG9wYWNpdHkgdG8gc2ltdWxhdGUgdGhlIGJlaGF2aW91ciBvZiBtb3N0IHBoeXNpY2FsIG1hdGVyaWFscy5cbiAgICAgICAgICogSWYgdHJ1ZSwgbm8gZXh0cmEgZWZmZWN0cyBhcmUgYXBwbGllZCB0byB0cmFuc3BhcmVudCBwaXhlbHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyYW5zcGFyZW5jeUFzQ292ZXJhZ2UgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgdGhlIGxvYWRlciBzaG91bGQgdXNlIHJhbmdlIHJlcXVlc3RzIHdoZW4gbG9hZCBiaW5hcnkgZ2xURiBmaWxlcyBmcm9tIEhUVFAuXG4gICAgICAgICAqIEVuYWJsaW5nIHdpbGwgZGlzYWJsZSBvZmZsaW5lIHN1cHBvcnQgYW5kIGdsVEYgdmFsaWRhdG9yLlxuICAgICAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXNlUmFuZ2VSZXF1ZXN0cyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB0aGUgbG9hZGVyIHNob3VsZCBjcmVhdGUgaW5zdGFuY2VzIHdoZW4gbXVsdGlwbGUgZ2xURiBub2RlcyBwb2ludCB0byB0aGUgc2FtZSBnbFRGIG1lc2guIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNyZWF0ZUluc3RhbmNlcyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGlmIHRoZSBsb2FkZXIgc2hvdWxkIGFsd2F5cyBjb21wdXRlIHRoZSBib3VuZGluZyBib3hlcyBvZiBtZXNoZXMgYW5kIG5vdCB1c2UgdGhlIG1pbi9tYXggdmFsdWVzIGZyb20gdGhlIHBvc2l0aW9uIGFjY2Vzc29yLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWx3YXlzQ29tcHV0ZUJvdW5kaW5nQm94ID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBsb2FkIGFsbCBtYXRlcmlhbHMgZGVmaW5lZCBpbiB0aGUgZmlsZSwgZXZlbiBpZiBub3QgdXNlZCBieSBhbnkgbWVzaC4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxvYWRBbGxNYXRlcmlhbHMgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGxvYWQgb25seSB0aGUgbWF0ZXJpYWxzIGRlZmluZWQgaW4gdGhlIGZpbGUuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sb2FkT25seU1hdGVyaWFscyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgZG8gbm90IGxvYWQgYW55IG1hdGVyaWFscyBkZWZpbmVkIGluIHRoZSBmaWxlLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2tpcE1hdGVyaWFscyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgbG9hZCB0aGUgY29sb3IgKGdhbW1hIGVuY29kZWQpIHRleHR1cmVzIGludG8gc1JHQiBidWZmZXJzIChpZiBzdXBwb3J0ZWQgYnkgdGhlIEdQVSksIHdoaWNoIHdpbGwgeWllbGQgbW9yZSBhY2N1cmF0ZSByZXN1bHRzIHdoZW4gc2FtcGxpbmcgdGhlIHRleHR1cmUuIERlZmF1bHRzIHRvIHRydWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVzZVNSR0JCdWZmZXJzID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gbG9hZGluZyBnbFRGIGFuaW1hdGlvbnMsIHdoaWNoIGFyZSBkZWZpbmVkIGluIHNlY29uZHMsIHRhcmdldCB0aGVtIHRvIHRoaXMgRlBTLiBEZWZhdWx0cyB0byA2MC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0RnBzID0gNjA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGlmIHRoZSBsb2FkZXIgc2hvdWxkIGFsd2F5cyBjb21wdXRlIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBvZiB0aGUgc2tlbGV0b24gam9pbnRzIGluc3RlYWQgb2YgdXNpbmcgYHNraW4uc2tlbGV0b25gLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgICogU2V0IHRoaXMgdG8gdHJ1ZSBpZiBsb2FkaW5nIGFzc2V0cyB3aXRoIGludmFsaWQgYHNraW4uc2tlbGV0b25gIHZhbHVlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWx3YXlzQ29tcHV0ZVNrZWxldG9uUm9vdE5vZGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbG9hZGluZyBhIHVybCByZWZlcmVuY2VkIGJ5IHRoZSBhc3NldC5cbiAgICAgICAgICogQHBhcmFtIHVybCB1cmwgcmVmZXJlbmNlZCBieSB0aGUgYXNzZXRcbiAgICAgICAgICogQHJldHVybnMgQXN5bmMgdXJsIHRvIGxvYWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJlcHJvY2Vzc1VybEFzeW5jID0gKHVybCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVybCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIHRoZSBsb2FkZXIgY3JlYXRlcyBhIG1lc2ggYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSBtZXNoLlxuICAgICAgICAgKiBOb3RlIHRoYXQgdGhlIG9ic2VydmFibGUgaXMgcmFpc2VkIGFzIHNvb24gYXMgdGhlIG1lc2ggb2JqZWN0IGlzIGNyZWF0ZWQsIG1lYW5pbmcgc29tZSBkYXRhIG1heSBub3QgaGF2ZSBiZWVuIHNldHVwIHlldCBmb3IgdGhpcyBtZXNoICh2ZXJ0ZXggZGF0YSwgbW9ycGggdGFyZ2V0cywgbWF0ZXJpYWwsIC4uLilcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25NZXNoTG9hZGVkT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsYmFjayByYWlzZWQgd2hlbiB0aGUgbG9hZGVyIGNyZWF0ZXMgYSBza2luIGFmdGVyIHBhcnNpbmcgdGhlIGdsVEYgcHJvcGVydGllcyBvZiB0aGUgc2tpbiBub2RlLlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vZmVhdHVyZXMvZmVhdHVyZXNEZWVwRGl2ZS9pbXBvcnRlcnMvZ2xURi9nbFRGU2tpbm5pbmcjaWdub3JpbmctdGhlLXRyYW5zZm9ybS1vZi10aGUtc2tpbm5lZC1tZXNoXG4gICAgICAgICAqIEBwYXJhbSBub2RlIC0gdGhlIHRyYW5zZm9ybSBub2RlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIG9yaWdpbmFsIGdsVEYgc2tpbiBub2RlIHVzZWQgZm9yIGFuaW1hdGlvbnNcbiAgICAgICAgICogQHBhcmFtIHNraW5uZWROb2RlIC0gdGhlIHRyYW5zZm9ybSBub2RlIHRoYXQgaXMgdGhlIHNraW5uZWQgbWVzaCBpdHNlbGYgb3IgdGhlIHBhcmVudCBvZiB0aGUgc2tpbm5lZCBtZXNoZXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Ta2luTG9hZGVkT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIHRoZSBsb2FkZXIgY3JlYXRlcyBhIHRleHR1cmUgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSB0ZXh0dXJlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vblRleHR1cmVMb2FkZWRPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9ic2VydmFibGUgcmFpc2VkIHdoZW4gdGhlIGxvYWRlciBjcmVhdGVzIGEgbWF0ZXJpYWwgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSBtYXRlcmlhbC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogT2JzZXJ2YWJsZSByYWlzZWQgd2hlbiB0aGUgbG9hZGVyIGNyZWF0ZXMgYSBjYW1lcmEgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSBjYW1lcmEuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQ2FtZXJhTG9hZGVkT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIHRoZSBhc3NldCBpcyBjb21wbGV0ZWx5IGxvYWRlZCwgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBsb2FkZXIgaXMgZGlzcG9zZWQuXG4gICAgICAgICAqIEZvciBhc3NldHMgd2l0aCBMT0RzLCByYWlzZWQgd2hlbiBhbGwgb2YgdGhlIExPRHMgYXJlIGNvbXBsZXRlLlxuICAgICAgICAgKiBGb3IgYXNzZXRzIHdpdGhvdXQgTE9EcywgcmFpc2VkIHdoZW4gdGhlIG1vZGVsIGlzIGNvbXBsZXRlLCBpbW1lZGlhdGVseSBhZnRlciB0aGUgbG9hZGVyIHJlc29sdmVzIHRoZSByZXR1cm5lZCBwcm9taXNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25FcnJvck9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogT2JzZXJ2YWJsZSByYWlzZWQgYWZ0ZXIgdGhlIGxvYWRlciBpcyBkaXNwb3NlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25EaXNwb3NlT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCBhZnRlciBhIGxvYWRlciBleHRlbnNpb24gaXMgY3JlYXRlZC5cbiAgICAgICAgICogU2V0IGFkZGl0aW9uYWwgb3B0aW9ucyBmb3IgYSBsb2FkZXIgZXh0ZW5zaW9uIGluIHRoaXMgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmVzIGlmIHRoZSBsb2FkZXIgc2hvdWxkIHZhbGlkYXRlIHRoZSBhc3NldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9ic2VydmFibGUgcmFpc2VkIGFmdGVyIHZhbGlkYXRpb24gd2hlbiB2YWxpZGF0ZSBpcyBzZXQgdG8gdHJ1ZS4gVGhlIGV2ZW50IGRhdGEgaXMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25WYWxpZGF0ZWRPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgdGhpcy5fbG9hZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTmFtZSBvZiB0aGUgbG9hZGVyIChcImdsdGZcIilcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IFwiZ2x0ZlwiO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHtcbiAgICAgICAgICAgIFwiLmdsdGZcIjogeyBpc0JpbmFyeTogZmFsc2UgfSxcbiAgICAgICAgICAgIFwiLmdsYlwiOiB7IGlzQmluYXJ5OiB0cnVlIH0sXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZhYmxlIHJhaXNlZCB3aGVuIHRoZSBsb2FkZXIgc3RhdGUgY2hhbmdlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25Mb2FkZXJTdGF0ZUNoYW5nZWRPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgdGhpcy5fbG9nSW5kZW50TGV2ZWwgPSAwO1xuICAgICAgICB0aGlzLl9sb2dnaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2xvZyA9IHRoaXMuX2xvZ0Rpc2FibGVkO1xuICAgICAgICB0aGlzLl9jYXB0dXJlUGVyZm9ybWFuY2VDb3VudGVycyA9IGZhbHNlO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyID0gdGhpcy5fc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXJEaXNhYmxlZDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9lbmRQZXJmb3JtYW5jZUNvdW50ZXIgPSB0aGlzLl9lbmRQZXJmb3JtYW5jZUNvdW50ZXJEaXNhYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmFpc2VkIHdoZW4gdGhlIGFzc2V0IGhhcyBiZWVuIHBhcnNlZFxuICAgICAqL1xuICAgIHNldCBvblBhcnNlZChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fb25QYXJzZWRPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5vblBhcnNlZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uUGFyc2VkT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uUGFyc2VkT2JzZXJ2ZXIgPSB0aGlzLm9uUGFyc2VkT2JzZXJ2YWJsZS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayByYWlzZWQgd2hlbiB0aGUgbG9hZGVyIGNyZWF0ZXMgYSBtZXNoIGFmdGVyIHBhcnNpbmcgdGhlIGdsVEYgcHJvcGVydGllcyBvZiB0aGUgbWVzaC5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBhcyBzb29uIGFzIHRoZSBtZXNoIG9iamVjdCBpcyBjcmVhdGVkLCBtZWFuaW5nIHNvbWUgZGF0YSBtYXkgbm90IGhhdmUgYmVlbiBzZXR1cCB5ZXQgZm9yIHRoaXMgbWVzaCAodmVydGV4IGRhdGEsIG1vcnBoIHRhcmdldHMsIG1hdGVyaWFsLCAuLi4pXG4gICAgICovXG4gICAgc2V0IG9uTWVzaExvYWRlZChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fb25NZXNoTG9hZGVkT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub25NZXNoTG9hZGVkT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25NZXNoTG9hZGVkT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uTWVzaExvYWRlZE9ic2VydmVyID0gdGhpcy5vbk1lc2hMb2FkZWRPYnNlcnZhYmxlLmFkZChjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIHJhaXNlZCB3aGVuIHRoZSBsb2FkZXIgY3JlYXRlcyBhIHRleHR1cmUgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSB0ZXh0dXJlLlxuICAgICAqL1xuICAgIHNldCBvblRleHR1cmVMb2FkZWQoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuX29uVGV4dHVyZUxvYWRlZE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9uVGV4dHVyZUxvYWRlZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uVGV4dHVyZUxvYWRlZE9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vblRleHR1cmVMb2FkZWRPYnNlcnZlciA9IHRoaXMub25UZXh0dXJlTG9hZGVkT2JzZXJ2YWJsZS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayByYWlzZWQgd2hlbiB0aGUgbG9hZGVyIGNyZWF0ZXMgYSBtYXRlcmlhbCBhZnRlciBwYXJzaW5nIHRoZSBnbFRGIHByb3BlcnRpZXMgb2YgdGhlIG1hdGVyaWFsLlxuICAgICAqL1xuICAgIHNldCBvbk1hdGVyaWFsTG9hZGVkKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbk1hdGVyaWFsTG9hZGVkT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uTWF0ZXJpYWxMb2FkZWRPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25NYXRlcmlhbExvYWRlZE9ic2VydmVyID0gdGhpcy5vbk1hdGVyaWFsTG9hZGVkT2JzZXJ2YWJsZS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayByYWlzZWQgd2hlbiB0aGUgbG9hZGVyIGNyZWF0ZXMgYSBjYW1lcmEgYWZ0ZXIgcGFyc2luZyB0aGUgZ2xURiBwcm9wZXJ0aWVzIG9mIHRoZSBjYW1lcmEuXG4gICAgICovXG4gICAgc2V0IG9uQ2FtZXJhTG9hZGVkKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbkNhbWVyYUxvYWRlZE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2FtZXJhTG9hZGVkT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25DYW1lcmFMb2FkZWRPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25DYW1lcmFMb2FkZWRPYnNlcnZlciA9IHRoaXMub25DYW1lcmFMb2FkZWRPYnNlcnZhYmxlLmFkZChjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIHJhaXNlZCB3aGVuIHRoZSBhc3NldCBpcyBjb21wbGV0ZWx5IGxvYWRlZCwgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBsb2FkZXIgaXMgZGlzcG9zZWQuXG4gICAgICogRm9yIGFzc2V0cyB3aXRoIExPRHMsIHJhaXNlZCB3aGVuIGFsbCBvZiB0aGUgTE9EcyBhcmUgY29tcGxldGUuXG4gICAgICogRm9yIGFzc2V0cyB3aXRob3V0IExPRHMsIHJhaXNlZCB3aGVuIHRoZSBtb2RlbCBpcyBjb21wbGV0ZSwgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGxvYWRlciByZXNvbHZlcyB0aGUgcmV0dXJuZWQgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBzZXQgb25Db21wbGV0ZShjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fb25Db21wbGV0ZU9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkNvbXBsZXRlT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uQ29tcGxldGVPYnNlcnZlciA9IHRoaXMub25Db21wbGV0ZU9ic2VydmFibGUuYWRkKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgcmFpc2VkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgICAqL1xuICAgIHNldCBvbkVycm9yKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbkVycm9yT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uRXJyb3JPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25FcnJvck9ic2VydmVyID0gdGhpcy5vbkVycm9yT2JzZXJ2YWJsZS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayByYWlzZWQgYWZ0ZXIgdGhlIGxvYWRlciBpcyBkaXNwb3NlZC5cbiAgICAgKi9cbiAgICBzZXQgb25EaXNwb3NlKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLl9vbkRpc3Bvc2VPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5vbkRpc3Bvc2VPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkRpc3Bvc2VPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb25EaXNwb3NlT2JzZXJ2ZXIgPSB0aGlzLm9uRGlzcG9zZU9ic2VydmFibGUuYWRkKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgcmFpc2VkIGFmdGVyIGEgbG9hZGVyIGV4dGVuc2lvbiBpcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHNldCBvbkV4dGVuc2lvbkxvYWRlZChjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5fb25FeHRlbnNpb25Mb2FkZWRPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5vbkV4dGVuc2lvbkxvYWRlZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX29uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2ZXIgPSB0aGlzLm9uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2YWJsZS5hZGQoY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIGlmIHRoZSBsb2FkZXIgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIGdldCBsb2dnaW5nRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ2dpbmdFbmFibGVkO1xuICAgIH1cbiAgICBzZXQgbG9nZ2luZ0VuYWJsZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvZ2dpbmdFbmFibGVkID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvZ2dpbmdFbmFibGVkID0gdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLl9sb2dnaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fbG9nID0gdGhpcy5fbG9nRW5hYmxlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZyA9IHRoaXMuX2xvZ0Rpc2FibGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgaWYgdGhlIGxvYWRlciBzaG91bGQgY2FwdHVyZSBwZXJmb3JtYW5jZSBjb3VudGVycy5cbiAgICAgKi9cbiAgICBnZXQgY2FwdHVyZVBlcmZvcm1hbmNlQ291bnRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0dXJlUGVyZm9ybWFuY2VDb3VudGVycztcbiAgICB9XG4gICAgc2V0IGNhcHR1cmVQZXJmb3JtYW5jZUNvdW50ZXJzKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYXB0dXJlUGVyZm9ybWFuY2VDb3VudGVycyA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYXB0dXJlUGVyZm9ybWFuY2VDb3VudGVycyA9IHZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fY2FwdHVyZVBlcmZvcm1hbmNlQ291bnRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyID0gdGhpcy5fc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXJFbmFibGVkO1xuICAgICAgICAgICAgdGhpcy5fZW5kUGVyZm9ybWFuY2VDb3VudGVyID0gdGhpcy5fZW5kUGVyZm9ybWFuY2VDb3VudGVyRW5hYmxlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyID0gdGhpcy5fc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXJEaXNhYmxlZDtcbiAgICAgICAgICAgIHRoaXMuX2VuZFBlcmZvcm1hbmNlQ291bnRlciA9IHRoaXMuX2VuZFBlcmZvcm1hbmNlQ291bnRlckRpc2FibGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIHJhaXNlZCBhZnRlciBhIGxvYWRlciBleHRlbnNpb24gaXMgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzZXQgb25WYWxpZGF0ZWQoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuX29uVmFsaWRhdGVkT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub25WYWxpZGF0ZWRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vblZhbGlkYXRlZE9ic2VydmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vblZhbGlkYXRlZE9ic2VydmVyID0gdGhpcy5vblZhbGlkYXRlZE9ic2VydmFibGUuYWRkKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgdGhlIGxvYWRlciwgcmVsZWFzZXMgcmVzb3VyY2VzIGR1cmluZyBsb2FkLCBhbmQgY2FuY2VscyBhbnkgb3V0c3RhbmRpbmcgcmVxdWVzdHMuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xvYWRlcikge1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCByZXF1ZXN0IG9mIHRoaXMuX3JlcXVlc3RzKSB7XG4gICAgICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3Byb2dyZXNzQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMucHJlcHJvY2Vzc1VybEFzeW5jID0gKHVybCkgPT4gUHJvbWlzZS5yZXNvbHZlKHVybCk7XG4gICAgICAgIHRoaXMub25NZXNoTG9hZGVkT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICB0aGlzLm9uU2tpbkxvYWRlZE9ic2VydmFibGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5vblRleHR1cmVMb2FkZWRPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5vbkNhbWVyYUxvYWRlZE9ic2VydmFibGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICB0aGlzLm9uRXh0ZW5zaW9uTG9hZGVkT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICB0aGlzLm9uRGlzcG9zZU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMub25EaXNwb3NlT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkRmlsZShzY2VuZSwgZmlsZU9yVXJsLCByb290VXJsLCBvblN1Y2Nlc3MsIG9uUHJvZ3Jlc3MsIHVzZUFycmF5QnVmZmVyLCBvbkVycm9yLCBuYW1lKSB7XG4gICAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZmlsZU9yVXJsKSkge1xuICAgICAgICAgICAgdGhpcy5fbG9hZEJpbmFyeShzY2VuZSwgZmlsZU9yVXJsLCByb290VXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIG5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDYWxsYmFjayA9IG9uUHJvZ3Jlc3M7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZU9yVXJsLm5hbWUgfHwgVG9vbHMuR2V0RmlsZW5hbWUoZmlsZU9yVXJsKTtcbiAgICAgICAgaWYgKHVzZUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51c2VSYW5nZVJlcXVlc3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLldhcm4oXCJnbFRGIHZhbGlkYXRpb24gaXMgbm90IHN1cHBvcnRlZCB3aGVuIHJhbmdlIHJlcXVlc3RzIGFyZSBlbmFibGVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZU9ic2VydmFibGU6IG5ldyBPYnNlcnZhYmxlKCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQnVmZmVyID0ge1xuICAgICAgICAgICAgICAgICAgICByZWFkQXN5bmM6IChieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRGaWxlKHNjZW5lLCBmaWxlT3JVcmwsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICh3ZWJSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIlJhbmdlXCIsIGBieXRlcz0ke2J5dGVPZmZzZXR9LSR7Ynl0ZU9mZnNldCArIGJ5dGVMZW5ndGggLSAxfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGg6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bnBhY2tCaW5hcnlBc3luYyhuZXcgRGF0YVJlYWRlcihkYXRhQnVmZmVyKSkudGhlbigobG9hZGVyRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmaWxlUmVxdWVzdC5vbkNvbXBsZXRlT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoZmlsZVJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3MobG9hZGVyRGF0YSk7XG4gICAgICAgICAgICAgICAgfSwgb25FcnJvciA/IChlcnJvcikgPT4gb25FcnJvcih1bmRlZmluZWQsIGVycm9yKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRGaWxlKHNjZW5lLCBmaWxlT3JVcmwsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGUoc2NlbmUsIG5ldyBVaW50OEFycmF5KGRhdGEsIDAsIGRhdGEuYnl0ZUxlbmd0aCksIHJvb3RVcmwsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bnBhY2tCaW5hcnlBc3luYyhuZXcgRGF0YVJlYWRlcih7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRBc3luYzogKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpID0+IHJlYWRBc3luYyhkYXRhLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZUxlbmd0aDogZGF0YS5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgICAgIH0pKS50aGVuKChsb2FkZXJEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2Vzcyhsb2FkZXJEYXRhKTtcbiAgICAgICAgICAgICAgICB9LCBvbkVycm9yID8gKGVycm9yKSA9PiBvbkVycm9yKHVuZGVmaW5lZCwgZXJyb3IpIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0sIHRydWUsIG9uRXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRGaWxlKHNjZW5lLCBmaWxlT3JVcmwsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGUoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3MoeyBqc29uOiB0aGlzLl9wYXJzZUpzb24oZGF0YSkgfSk7XG4gICAgICAgICAgICB9LCBmYWxzZSwgb25FcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2xvYWRCaW5hcnkoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uU3VjY2Vzcywgb25FcnJvciwgZmlsZU5hbWUpIHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGUoc2NlbmUsIG5ldyBVaW50OEFycmF5KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCksIHJvb3RVcmwsIGZpbGVOYW1lKTtcbiAgICAgICAgdGhpcy5fdW5wYWNrQmluYXJ5QXN5bmMobmV3IERhdGFSZWFkZXIoe1xuICAgICAgICAgICAgcmVhZEFzeW5jOiAoYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkgPT4gcmVhZFZpZXdBc3luYyhkYXRhLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgIGJ5dGVMZW5ndGg6IGRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgfSkpLnRoZW4oKGxvYWRlckRhdGEpID0+IHtcbiAgICAgICAgICAgIG9uU3VjY2Vzcyhsb2FkZXJEYXRhKTtcbiAgICAgICAgfSwgb25FcnJvciA/IChlcnJvcikgPT4gb25FcnJvcih1bmRlZmluZWQsIGVycm9yKSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGltcG9ydE1lc2hBc3luYyhtZXNoZXNOYW1lcywgc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uUHJvZ3Jlc3MsIGZpbGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25QYXJzZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhkYXRhKTtcbiAgICAgICAgICAgIHRoaXMub25QYXJzZWRPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLl9sb2coYExvYWRpbmcgJHtmaWxlTmFtZSB8fCBcIlwifWApO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyID0gdGhpcy5fZ2V0TG9hZGVyKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5pbXBvcnRNZXNoQXN5bmMobWVzaGVzTmFtZXMsIHNjZW5lLCBudWxsLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBsb2FkQXN5bmMoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uUHJvZ3Jlc3MsIGZpbGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25QYXJzZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhkYXRhKTtcbiAgICAgICAgICAgIHRoaXMub25QYXJzZWRPYnNlcnZhYmxlLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLl9sb2coYExvYWRpbmcgJHtmaWxlTmFtZSB8fCBcIlwifWApO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVyID0gdGhpcy5fZ2V0TG9hZGVyKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRlci5sb2FkQXN5bmMoc2NlbmUsIGRhdGEsIHJvb3RVcmwsIG9uUHJvZ3Jlc3MsIGZpbGVOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGxvYWRBc3NldENvbnRhaW5lckFzeW5jKHNjZW5lLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uUGFyc2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLm9uUGFyc2VkT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5fbG9nKGBMb2FkaW5nICR7ZmlsZU5hbWUgfHwgXCJcIn1gKTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlciA9IHRoaXMuX2dldExvYWRlcihkYXRhKTtcbiAgICAgICAgICAgIC8vIFByZXBhcmUgdGhlIGFzc2V0IGNvbnRhaW5lci5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBBc3NldENvbnRhaW5lcihzY2VuZSk7XG4gICAgICAgICAgICAvLyBHZXQgbWF0ZXJpYWxzL3RleHR1cmVzIHdoZW4gbG9hZGluZyB0byBhZGQgdG8gY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub25NYXRlcmlhbExvYWRlZE9ic2VydmFibGUuYWRkKChtYXRlcmlhbCkgPT4ge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKG1hdGVyaWFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdGV4dHVyZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub25UZXh0dXJlTG9hZGVkT2JzZXJ2YWJsZS5hZGQoKHRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjYW1lcmFzID0gW107XG4gICAgICAgICAgICB0aGlzLm9uQ2FtZXJhTG9hZGVkT2JzZXJ2YWJsZS5hZGQoKGNhbWVyYSkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbWVyYXMucHVzaChjYW1lcmEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBtb3JwaFRhcmdldE1hbmFnZXJzID0gW107XG4gICAgICAgICAgICB0aGlzLm9uTWVzaExvYWRlZE9ic2VydmFibGUuYWRkKChtZXNoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1lc2gubW9ycGhUYXJnZXRNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vcnBoVGFyZ2V0TWFuYWdlcnMucHVzaChtZXNoLm1vcnBoVGFyZ2V0TWFuYWdlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmltcG9ydE1lc2hBc3luYyhudWxsLCBzY2VuZSwgY29udGFpbmVyLCBkYXRhLCByb290VXJsLCBvblByb2dyZXNzLCBmaWxlTmFtZSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoY29udGFpbmVyLmdlb21ldHJpZXMsIHJlc3VsdC5nZW9tZXRyaWVzKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIubWVzaGVzLCByZXN1bHQubWVzaGVzKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIucGFydGljbGVTeXN0ZW1zLCByZXN1bHQucGFydGljbGVTeXN0ZW1zKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIuc2tlbGV0b25zLCByZXN1bHQuc2tlbGV0b25zKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIuYW5pbWF0aW9uR3JvdXBzLCByZXN1bHQuYW5pbWF0aW9uR3JvdXBzKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIubWF0ZXJpYWxzLCBtYXRlcmlhbHMpO1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGNvbnRhaW5lci50ZXh0dXJlcywgdGV4dHVyZXMpO1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGNvbnRhaW5lci5saWdodHMsIHJlc3VsdC5saWdodHMpO1xuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGNvbnRhaW5lci50cmFuc2Zvcm1Ob2RlcywgcmVzdWx0LnRyYW5zZm9ybU5vZGVzKTtcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjb250YWluZXIuY2FtZXJhcywgY2FtZXJhcyk7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoY29udGFpbmVyLm1vcnBoVGFyZ2V0TWFuYWdlcnMsIG1vcnBoVGFyZ2V0TWFuYWdlcnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNhbkRpcmVjdExvYWQoZGF0YSkge1xuICAgICAgICByZXR1cm4gKChkYXRhLmluZGV4T2YoXCJhc3NldFwiKSAhPT0gLTEgJiYgZGF0YS5pbmRleE9mKFwidmVyc2lvblwiKSAhPT0gLTEpIHx8XG4gICAgICAgICAgICBkYXRhLnN0YXJ0c1dpdGgoXCJkYXRhOmJhc2U2NCxcIiArIEdMVEZGaWxlTG9hZGVyLl9NYWdpY0Jhc2U2NEVuY29kZWQpIHx8IC8vIHRoaXMgaXMgdGVjaG5pY2FsbHkgaW5jb3JyZWN0LCBidXQgd2lsbCBjb250aW51ZSB0byBzdXBwb3J0IGZvciBiYWNrY29tcGF0LlxuICAgICAgICAgICAgZGF0YS5zdGFydHNXaXRoKFwiZGF0YTo7YmFzZTY0LFwiICsgR0xURkZpbGVMb2FkZXIuX01hZ2ljQmFzZTY0RW5jb2RlZCkgfHxcbiAgICAgICAgICAgIGRhdGEuc3RhcnRzV2l0aChcImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCxcIiArIEdMVEZGaWxlTG9hZGVyLl9NYWdpY0Jhc2U2NEVuY29kZWQpIHx8XG4gICAgICAgICAgICBkYXRhLnN0YXJ0c1dpdGgoXCJkYXRhOm1vZGVsL2dsdGYtYmluYXJ5O2Jhc2U2NCxcIiArIEdMVEZGaWxlTG9hZGVyLl9NYWdpY0Jhc2U2NEVuY29kZWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZGlyZWN0TG9hZChzY2VuZSwgZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5zdGFydHNXaXRoKFwiYmFzZTY0LFwiICsgR0xURkZpbGVMb2FkZXIuX01hZ2ljQmFzZTY0RW5jb2RlZCkgfHwgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBpbmNvcnJlY3QsIGJ1dCB3aWxsIGNvbnRpbnVlIHRvIHN1cHBvcnQgZm9yIGJhY2tjb21wYXQuXG4gICAgICAgICAgICBkYXRhLnN0YXJ0c1dpdGgoXCI7YmFzZTY0LFwiICsgR0xURkZpbGVMb2FkZXIuX01hZ2ljQmFzZTY0RW5jb2RlZCkgfHxcbiAgICAgICAgICAgIGRhdGEuc3RhcnRzV2l0aChcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsXCIgKyBHTFRGRmlsZUxvYWRlci5fTWFnaWNCYXNlNjRFbmNvZGVkKSB8fFxuICAgICAgICAgICAgZGF0YS5zdGFydHNXaXRoKFwibW9kZWwvZ2x0Zi1iaW5hcnk7YmFzZTY0LFwiICsgR0xURkZpbGVMb2FkZXIuX01hZ2ljQmFzZTY0RW5jb2RlZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gRGVjb2RlQmFzZTY0VXJsVG9CaW5hcnkoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0ZShzY2VuZSwgbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIDAsIGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bnBhY2tCaW5hcnlBc3luYyhuZXcgRGF0YVJlYWRlcih7XG4gICAgICAgICAgICAgICAgcmVhZEFzeW5jOiAoYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkgPT4gcmVhZEFzeW5jKGFycmF5QnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoOiBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlKHNjZW5lLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGpzb246IHRoaXMuX3BhcnNlSnNvbihkYXRhKSB9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNyZWF0ZVBsdWdpbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHTFRGRmlsZUxvYWRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9hZGVyIHN0YXRlIG9yIG51bGwgaWYgdGhlIGxvYWRlciBpcyBub3QgYWN0aXZlLlxuICAgICAqL1xuICAgIGdldCBsb2FkZXJTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGFzc2V0IGlzIGNvbXBsZXRlbHkgbG9hZGVkLlxuICAgICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGFzc2V0IGlzIGNvbXBsZXRlbHkgbG9hZGVkLlxuICAgICAqL1xuICAgIHdoZW5Db21wbGV0ZUFzeW5jKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlT2JzZXJ2YWJsZS5hZGRPbmNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvck9ic2VydmFibGUuYWRkT25jZSgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9zZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5vbkxvYWRlclN0YXRlQ2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMuX3N0YXRlKTtcbiAgICAgICAgdGhpcy5fbG9nKEdMVEZMb2FkZXJTdGF0ZVt0aGlzLl9zdGF0ZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfbG9hZEZpbGUoc2NlbmUsIGZpbGVPclVybCwgb25TdWNjZXNzLCB1c2VBcnJheUJ1ZmZlciwgb25FcnJvciwgb25PcGVuZWQpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNjZW5lLl9sb2FkRmlsZShmaWxlT3JVcmwsIG9uU3VjY2VzcywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vblByb2dyZXNzKGV2ZW50LCByZXF1ZXN0KTtcbiAgICAgICAgfSwgdHJ1ZSwgdXNlQXJyYXlCdWZmZXIsIG9uRXJyb3IsIG9uT3BlbmVkKTtcbiAgICAgICAgcmVxdWVzdC5vbkNvbXBsZXRlT2JzZXJ2YWJsZS5hZGQoKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3RzLnNwbGljZSh0aGlzLl9yZXF1ZXN0cy5pbmRleE9mKHJlcXVlc3QpLCAxKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3JlcXVlc3RzLnB1c2gocmVxdWVzdCk7XG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH1cbiAgICBfb25Qcm9ncmVzcyhldmVudCwgcmVxdWVzdCkge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Ll9sZW5ndGhDb21wdXRhYmxlID0gZXZlbnQubGVuZ3RoQ29tcHV0YWJsZTtcbiAgICAgICAgcmVxdWVzdC5fbG9hZGVkID0gZXZlbnQubG9hZGVkO1xuICAgICAgICByZXF1ZXN0Ll90b3RhbCA9IGV2ZW50LnRvdGFsO1xuICAgICAgICBsZXQgbGVuZ3RoQ29tcHV0YWJsZSA9IHRydWU7XG4gICAgICAgIGxldCBsb2FkZWQgPSAwO1xuICAgICAgICBsZXQgdG90YWwgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgdGhpcy5fcmVxdWVzdHMpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Ll9sZW5ndGhDb21wdXRhYmxlID09PSB1bmRlZmluZWQgfHwgcmVxdWVzdC5fbG9hZGVkID09PSB1bmRlZmluZWQgfHwgcmVxdWVzdC5fdG90YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbmd0aENvbXB1dGFibGUgPSBsZW5ndGhDb21wdXRhYmxlICYmIHJlcXVlc3QuX2xlbmd0aENvbXB1dGFibGU7XG4gICAgICAgICAgICBsb2FkZWQgKz0gcmVxdWVzdC5fbG9hZGVkO1xuICAgICAgICAgICAgdG90YWwgKz0gcmVxdWVzdC5fdG90YWw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDYWxsYmFjayh7XG4gICAgICAgICAgICBsZW5ndGhDb21wdXRhYmxlOiBsZW5ndGhDb21wdXRhYmxlLFxuICAgICAgICAgICAgbG9hZGVkOiBsb2FkZWQsXG4gICAgICAgICAgICB0b3RhbDogbGVuZ3RoQ29tcHV0YWJsZSA/IHRvdGFsIDogMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF92YWxpZGF0ZShzY2VuZSwgZGF0YSwgcm9vdFVybCA9IFwiXCIsIGZpbGVOYW1lID0gXCJcIikge1xuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdGFydFBlcmZvcm1hbmNlQ291bnRlcihcIlZhbGlkYXRlIEpTT05cIik7XG4gICAgICAgIEdMVEZWYWxpZGF0aW9uLlZhbGlkYXRlQXN5bmMoZGF0YSwgcm9vdFVybCwgZmlsZU5hbWUsICh1cmkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXByb2Nlc3NVcmxBc3luYyhyb290VXJsICsgdXJpKS50aGVuKCh1cmwpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmUuX2xvYWRGaWxlQXN5bmModXJsLCB1bmRlZmluZWQsIHRydWUsIHRydWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRhdGEsIDAsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9lbmRQZXJmb3JtYW5jZUNvdW50ZXIoXCJWYWxpZGF0ZSBKU09OXCIpO1xuICAgICAgICAgICAgdGhpcy5vblZhbGlkYXRlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLm9uVmFsaWRhdGVkT2JzZXJ2YWJsZS5jbGVhcigpO1xuICAgICAgICB9LCAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9lbmRQZXJmb3JtYW5jZUNvdW50ZXIoXCJWYWxpZGF0ZSBKU09OXCIpO1xuICAgICAgICAgICAgVG9vbHMuV2FybihgRmFpbGVkIHRvIHZhbGlkYXRlOiAke3JlYXNvbi5tZXNzYWdlfWApO1xuICAgICAgICAgICAgdGhpcy5vblZhbGlkYXRlZE9ic2VydmFibGUuY2xlYXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRMb2FkZXIobG9hZGVyRGF0YSkge1xuICAgICAgICBjb25zdCBhc3NldCA9IGxvYWRlckRhdGEuanNvbi5hc3NldCB8fCB7fTtcbiAgICAgICAgdGhpcy5fbG9nKGBBc3NldCB2ZXJzaW9uOiAke2Fzc2V0LnZlcnNpb259YCk7XG4gICAgICAgIGFzc2V0Lm1pblZlcnNpb24gJiYgdGhpcy5fbG9nKGBBc3NldCBtaW5pbXVtIHZlcnNpb246ICR7YXNzZXQubWluVmVyc2lvbn1gKTtcbiAgICAgICAgYXNzZXQuZ2VuZXJhdG9yICYmIHRoaXMuX2xvZyhgQXNzZXQgZ2VuZXJhdG9yOiAke2Fzc2V0LmdlbmVyYXRvcn1gKTtcbiAgICAgICAgY29uc3QgdmVyc2lvbiA9IEdMVEZGaWxlTG9hZGVyLl9wYXJzZVZlcnNpb24oYXNzZXQudmVyc2lvbik7XG4gICAgICAgIGlmICghdmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2ZXJzaW9uOiBcIiArIGFzc2V0LnZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhc3NldC5taW5WZXJzaW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1pblZlcnNpb24gPSBHTFRGRmlsZUxvYWRlci5fcGFyc2VWZXJzaW9uKGFzc2V0Lm1pblZlcnNpb24pO1xuICAgICAgICAgICAgaWYgKCFtaW5WZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtaW5pbXVtIHZlcnNpb246IFwiICsgYXNzZXQubWluVmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR0xURkZpbGVMb2FkZXIuX2NvbXBhcmVWZXJzaW9uKG1pblZlcnNpb24sIHsgbWFqb3I6IDIsIG1pbm9yOiAwIH0pID4gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29tcGF0aWJsZSBtaW5pbXVtIHZlcnNpb246IFwiICsgYXNzZXQubWluVmVyc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3JlYXRlTG9hZGVycyA9IHtcbiAgICAgICAgICAgIDE6IEdMVEZGaWxlTG9hZGVyLl9DcmVhdGVHTFRGMUxvYWRlcixcbiAgICAgICAgICAgIDI6IEdMVEZGaWxlTG9hZGVyLl9DcmVhdGVHTFRGMkxvYWRlcixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY3JlYXRlTG9hZGVyID0gY3JlYXRlTG9hZGVyc1t2ZXJzaW9uLm1ham9yXTtcbiAgICAgICAgaWYgKCFjcmVhdGVMb2FkZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZlcnNpb246IFwiICsgYXNzZXQudmVyc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUxvYWRlcih0aGlzKTtcbiAgICB9XG4gICAgX3BhcnNlSnNvbihqc29uKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyKFwiUGFyc2UgSlNPTlwiKTtcbiAgICAgICAgdGhpcy5fbG9nKGBKU09OIGxlbmd0aDogJHtqc29uLmxlbmd0aH1gKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5fZW5kUGVyZm9ybWFuY2VDb3VudGVyKFwiUGFyc2UgSlNPTlwiKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gICAgX3VucGFja0JpbmFyeUFzeW5jKGRhdGFSZWFkZXIpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRQZXJmb3JtYW5jZUNvdW50ZXIoXCJVbnBhY2sgQmluYXJ5XCIpO1xuICAgICAgICAvLyBSZWFkIG1hZ2ljICsgdmVyc2lvbiArIGxlbmd0aCArIGpzb24gbGVuZ3RoICsganNvbiBmb3JtYXRcbiAgICAgICAgcmV0dXJuIGRhdGFSZWFkZXIubG9hZEFzeW5jKDIwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IEJpbmFyeSA9IHtcbiAgICAgICAgICAgICAgICBNYWdpYzogMHg0NjU0NmM2NyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBtYWdpYyA9IGRhdGFSZWFkZXIucmVhZFVpbnQzMigpO1xuICAgICAgICAgICAgaWYgKG1hZ2ljICE9PSBCaW5hcnkuTWFnaWMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKFwiVW5leHBlY3RlZCBtYWdpYzogXCIgKyBtYWdpYywgRXJyb3JDb2Rlcy5HTFRGTG9hZGVyVW5leHBlY3RlZE1hZ2ljRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IGRhdGFSZWFkZXIucmVhZFVpbnQzMigpO1xuICAgICAgICAgICAgaWYgKHRoaXMubG9nZ2luZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2coYEJpbmFyeSB2ZXJzaW9uOiAke3ZlcnNpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBkYXRhUmVhZGVyLnJlYWRVaW50MzIoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy51c2VSYW5nZVJlcXVlc3RzICYmIGxlbmd0aCAhPT0gZGF0YVJlYWRlci5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIExvZ2dlci5XYXJuKGBMZW5ndGggaW4gaGVhZGVyIGRvZXMgbm90IG1hdGNoIGFjdHVhbCBkYXRhIGxlbmd0aDogJHtsZW5ndGh9ICE9ICR7ZGF0YVJlYWRlci5idWZmZXIuYnl0ZUxlbmd0aH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB1bnBhY2tlZDtcbiAgICAgICAgICAgIHN3aXRjaCAodmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMToge1xuICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZCA9IHRoaXMuX3VucGFja0JpbmFyeVYxQXN5bmMoZGF0YVJlYWRlciwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZCA9IHRoaXMuX3VucGFja0JpbmFyeVYyQXN5bmMoZGF0YVJlYWRlciwgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgdmVyc2lvbjogXCIgKyB2ZXJzaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9lbmRQZXJmb3JtYW5jZUNvdW50ZXIoXCJVbnBhY2sgQmluYXJ5XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHVucGFja2VkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3VucGFja0JpbmFyeVYxQXN5bmMoZGF0YVJlYWRlciwgbGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IENvbnRlbnRGb3JtYXQgPSB7XG4gICAgICAgICAgICBKU09OOiAwLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gZGF0YVJlYWRlci5yZWFkVWludDMyKCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRGb3JtYXQgPSBkYXRhUmVhZGVyLnJlYWRVaW50MzIoKTtcbiAgICAgICAgaWYgKGNvbnRlbnRGb3JtYXQgIT09IENvbnRlbnRGb3JtYXQuSlNPTikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGNvbnRlbnQgZm9ybWF0OiAke2NvbnRlbnRGb3JtYXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keUxlbmd0aCA9IGxlbmd0aCAtIGRhdGFSZWFkZXIuYnl0ZU9mZnNldDtcbiAgICAgICAgY29uc3QgZGF0YSA9IHsganNvbjogdGhpcy5fcGFyc2VKc29uKGRhdGFSZWFkZXIucmVhZFN0cmluZyhjb250ZW50TGVuZ3RoKSksIGJpbjogbnVsbCB9O1xuICAgICAgICBpZiAoYm9keUxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRCeXRlT2Zmc2V0ID0gZGF0YVJlYWRlci5ieXRlT2Zmc2V0O1xuICAgICAgICAgICAgZGF0YS5iaW4gPSB7XG4gICAgICAgICAgICAgICAgcmVhZEFzeW5jOiAoYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCkgPT4gZGF0YVJlYWRlci5idWZmZXIucmVhZEFzeW5jKHN0YXJ0Qnl0ZU9mZnNldCArIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgICAgIGJ5dGVMZW5ndGg6IGJvZHlMZW5ndGgsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgfVxuICAgIF91bnBhY2tCaW5hcnlWMkFzeW5jKGRhdGFSZWFkZXIsIGxlbmd0aCkge1xuICAgICAgICBjb25zdCBDaHVua0Zvcm1hdCA9IHtcbiAgICAgICAgICAgIEpTT046IDB4NGU0ZjUzNGEsXG4gICAgICAgICAgICBCSU46IDB4MDA0ZTQ5NDIsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlYWQgdGhlIEpTT04gY2h1bmsgaGVhZGVyLlxuICAgICAgICBjb25zdCBjaHVua0xlbmd0aCA9IGRhdGFSZWFkZXIucmVhZFVpbnQzMigpO1xuICAgICAgICBjb25zdCBjaHVua0Zvcm1hdCA9IGRhdGFSZWFkZXIucmVhZFVpbnQzMigpO1xuICAgICAgICBpZiAoY2h1bmtGb3JtYXQgIT09IENodW5rRm9ybWF0LkpTT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpcnN0IGNodW5rIGZvcm1hdCBpcyBub3QgSlNPTlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCYWlsIGlmIHRoZXJlIGFyZSBubyBvdGhlciBjaHVua3MuXG4gICAgICAgIGlmIChkYXRhUmVhZGVyLmJ5dGVPZmZzZXQgKyBjaHVua0xlbmd0aCA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YVJlYWRlci5sb2FkQXN5bmMoY2h1bmtMZW5ndGgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGpzb246IHRoaXMuX3BhcnNlSnNvbihkYXRhUmVhZGVyLnJlYWRTdHJpbmcoY2h1bmtMZW5ndGgpKSwgYmluOiBudWxsIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWFkIHRoZSBKU09OIGNodW5rIGFuZCB0aGUgbGVuZ3RoIGFuZCB0eXBlIG9mIHRoZSBuZXh0IGNodW5rLlxuICAgICAgICByZXR1cm4gZGF0YVJlYWRlci5sb2FkQXN5bmMoY2h1bmtMZW5ndGggKyA4KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IGpzb246IHRoaXMuX3BhcnNlSnNvbihkYXRhUmVhZGVyLnJlYWRTdHJpbmcoY2h1bmtMZW5ndGgpKSwgYmluOiBudWxsIH07XG4gICAgICAgICAgICBjb25zdCByZWFkQXN5bmMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtMZW5ndGggPSBkYXRhUmVhZGVyLnJlYWRVaW50MzIoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua0Zvcm1hdCA9IGRhdGFSZWFkZXIucmVhZFVpbnQzMigpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY2h1bmtGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDaHVua0Zvcm1hdC5KU09OOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIEpTT04gY2h1bmtcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDaHVua0Zvcm1hdC5CSU46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0Qnl0ZU9mZnNldCA9IGRhdGFSZWFkZXIuYnl0ZU9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYmluID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRBc3luYzogKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpID0+IGRhdGFSZWFkZXIuYnVmZmVyLnJlYWRBc3luYyhzdGFydEJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlTGVuZ3RoOiBjaHVua0xlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhUmVhZGVyLnNraXBCeXRlcyhjaHVua0xlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdW5yZWNvZ25pemVkIGNodW5rRm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhUmVhZGVyLnNraXBCeXRlcyhjaHVua0xlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YVJlYWRlci5ieXRlT2Zmc2V0ICE9PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFSZWFkZXIubG9hZEFzeW5jKDgpLnRoZW4ocmVhZEFzeW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmVhZEFzeW5jKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgX3BhcnNlVmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgICAgIGlmICh2ZXJzaW9uID09PSBcIjEuMFwiIHx8IHZlcnNpb24gPT09IFwiMS4wLjFcIikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtYWpvcjogMSxcbiAgICAgICAgICAgICAgICBtaW5vcjogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF0Y2ggPSAodmVyc2lvbiArIFwiXCIpLm1hdGNoKC9eKFxcZCspXFwuKFxcZCspLyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYWpvcjogcGFyc2VJbnQobWF0Y2hbMV0pLFxuICAgICAgICAgICAgbWlub3I6IHBhcnNlSW50KG1hdGNoWzJdKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIF9jb21wYXJlVmVyc2lvbihhLCBiKSB7XG4gICAgICAgIGlmIChhLm1ham9yID4gYi5tYWpvcikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEubWFqb3IgPCBiLm1ham9yKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEubWlub3IgPiBiLm1pbm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5taW5vciA8IGIubWlub3IpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX2xvZ09wZW4obWVzc2FnZSkge1xuICAgICAgICB0aGlzLl9sb2cobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuX2xvZ0luZGVudExldmVsKys7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfbG9nQ2xvc2UoKSB7XG4gICAgICAgIC0tdGhpcy5fbG9nSW5kZW50TGV2ZWw7XG4gICAgfVxuICAgIF9sb2dFbmFibGVkKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgc3BhY2VzID0gR0xURkZpbGVMb2FkZXIuX2xvZ1NwYWNlcy5zdWJzdHIoMCwgdGhpcy5fbG9nSW5kZW50TGV2ZWwgKiAyKTtcbiAgICAgICAgTG9nZ2VyLkxvZyhgJHtzcGFjZXN9JHttZXNzYWdlfWApO1xuICAgIH1cbiAgICBfbG9nRGlzYWJsZWQobWVzc2FnZSkgeyB9XG4gICAgX3N0YXJ0UGVyZm9ybWFuY2VDb3VudGVyRW5hYmxlZChjb3VudGVyTmFtZSkge1xuICAgICAgICBUb29scy5TdGFydFBlcmZvcm1hbmNlQ291bnRlcihjb3VudGVyTmFtZSk7XG4gICAgfVxuICAgIF9zdGFydFBlcmZvcm1hbmNlQ291bnRlckRpc2FibGVkKGNvdW50ZXJOYW1lKSB7IH1cbiAgICBfZW5kUGVyZm9ybWFuY2VDb3VudGVyRW5hYmxlZChjb3VudGVyTmFtZSkge1xuICAgICAgICBUb29scy5FbmRQZXJmb3JtYW5jZUNvdW50ZXIoY291bnRlck5hbWUpO1xuICAgIH1cbiAgICBfZW5kUGVyZm9ybWFuY2VDb3VudGVyRGlzYWJsZWQoY291bnRlck5hbWUpIHsgfVxufVxuLy8gLS0tLS0tLS0tLVxuLy8gVjEgb3B0aW9uc1xuLy8gLS0tLS0tLS0tLVxuLyoqXG4gKiBTZXQgdGhpcyBwcm9wZXJ0eSB0byBmYWxzZSB0byBkaXNhYmxlIGluY3JlbWVudGFsIGxvYWRpbmcgd2hpY2ggZGVsYXlzIHRoZSBsb2FkZXIgZnJvbSBjYWxsaW5nIHRoZSBzdWNjZXNzIGNhbGxiYWNrIHVudGlsIGFmdGVyIGxvYWRpbmcgdGhlIG1lc2hlcyBhbmQgc2hhZGVycy5cbiAqIFRleHR1cmVzIGFsd2F5cyBsb2FkcyBhc3luY2hyb25vdXNseS4gRm9yIGV4YW1wbGUsIHRoZSBzdWNjZXNzIGNhbGxiYWNrIGNhbiBjb21wdXRlIHRoZSBib3VuZGluZyBpbmZvcm1hdGlvbiBvZiB0aGUgbG9hZGVkIG1lc2hlcyB3aGVuIGluY3JlbWVudGFsIGxvYWRpbmcgaXMgZGlzYWJsZWQuXG4gKiBEZWZhdWx0cyB0byB0cnVlLlxuICogQGludGVybmFsXG4gKi9cbkdMVEZGaWxlTG9hZGVyLkluY3JlbWVudGFsTG9hZGluZyA9IHRydWU7XG4vKipcbiAqIFNldCB0aGlzIHByb3BlcnR5IHRvIHRydWUgaW4gb3JkZXIgdG8gd29yayB3aXRoIGhvbW9nZW5lb3VzIGNvb3JkaW5hdGVzLCBhdmFpbGFibGUgd2l0aCBzb21lIGNvbnZlcnRlcnMgYW5kIGV4cG9ydGVycy5cbiAqIERlZmF1bHRzIHRvIGZhbHNlLiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSG9tb2dlbmVvdXNfY29vcmRpbmF0ZXMuXG4gKiBAaW50ZXJuYWxcbiAqL1xuR0xURkZpbGVMb2FkZXIuSG9tb2dlbmVvdXNDb29yZGluYXRlcyA9IGZhbHNlO1xuR0xURkZpbGVMb2FkZXIuX01hZ2ljQmFzZTY0RW5jb2RlZCA9IFwiWjJ4VVJnXCI7IC8vIFwiZ2xURlwiIGJhc2U2NCBlbmNvZGVkICh3aXRob3V0IHRoZSBxdW90ZXMhKVxuR0xURkZpbGVMb2FkZXIuX2xvZ1NwYWNlcyA9IFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbmlmIChTY2VuZUxvYWRlcikge1xuICAgIFNjZW5lTG9hZGVyLlJlZ2lzdGVyUGx1Z2luKG5ldyBHTFRGRmlsZUxvYWRlcigpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsVEZGaWxlTG9hZGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/glTFValidation.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/glTFValidation.js ***!
  \****************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTFValidation: () => (/* binding */ GLTFValidation)\n/* harmony export */ });\n/* harmony import */ var _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babylonjs/core/Misc/tools.js */ \"@babylonjs/core/Misc/tools.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__]);\n_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction validateAsync(data, rootUrl, fileName, getExternalResource) {\n    const options = {\n        externalResourceFunction: getExternalResource,\n    };\n    if (fileName) {\n        options.uri = rootUrl === \"file:\" ? fileName : rootUrl + fileName;\n    }\n    return ArrayBuffer.isView(data) ? GLTFValidator.validateBytes(data, options) : GLTFValidator.validateString(data, options);\n}\n/**\n * The worker function that gets converted to a blob url to pass into a worker.\n */\nfunction workerFunc() {\n    const pendingExternalResources = [];\n    onmessage = (message) => {\n        const data = message.data;\n        switch (data.id) {\n            case \"init\": {\n                importScripts(data.url);\n                break;\n            }\n            case \"validate\": {\n                validateAsync(data.data, data.rootUrl, data.fileName, (uri) => new Promise((resolve, reject) => {\n                    const index = pendingExternalResources.length;\n                    pendingExternalResources.push({ resolve, reject });\n                    postMessage({ id: \"getExternalResource\", index: index, uri: uri });\n                })).then((value) => {\n                    postMessage({ id: \"validate.resolve\", value: value });\n                }, (reason) => {\n                    postMessage({ id: \"validate.reject\", reason: reason });\n                });\n                break;\n            }\n            case \"getExternalResource.resolve\": {\n                pendingExternalResources[data.index].resolve(data.value);\n                break;\n            }\n            case \"getExternalResource.reject\": {\n                pendingExternalResources[data.index].reject(data.reason);\n                break;\n            }\n        }\n    };\n}\n/**\n * glTF validation\n */\nclass GLTFValidation {\n    /**\n     * Validate a glTF asset using the glTF-Validator.\n     * @param data The JSON of a glTF or the array buffer of a binary glTF\n     * @param rootUrl The root url for the glTF\n     * @param fileName The file name for the glTF\n     * @param getExternalResource The callback to get external resources for the glTF validator\n     * @returns A promise that resolves with the glTF validation results once complete\n     */\n    static ValidateAsync(data, rootUrl, fileName, getExternalResource) {\n        if (typeof Worker === \"function\") {\n            return new Promise((resolve, reject) => {\n                const workerContent = `${validateAsync}(${workerFunc})()`;\n                const workerBlobUrl = URL.createObjectURL(new Blob([workerContent], { type: \"application/javascript\" }));\n                const worker = new Worker(workerBlobUrl);\n                const onError = (error) => {\n                    worker.removeEventListener(\"error\", onError);\n                    worker.removeEventListener(\"message\", onMessage);\n                    reject(error);\n                };\n                const onMessage = (message) => {\n                    const data = message.data;\n                    switch (data.id) {\n                        case \"getExternalResource\": {\n                            getExternalResource(data.uri).then((value) => {\n                                worker.postMessage({ id: \"getExternalResource.resolve\", index: data.index, value: value }, [value]);\n                            }, (reason) => {\n                                worker.postMessage({ id: \"getExternalResource.reject\", index: data.index, reason: reason });\n                            });\n                            break;\n                        }\n                        case \"validate.resolve\": {\n                            worker.removeEventListener(\"error\", onError);\n                            worker.removeEventListener(\"message\", onMessage);\n                            resolve(data.value);\n                            worker.terminate();\n                            break;\n                        }\n                        case \"validate.reject\": {\n                            worker.removeEventListener(\"error\", onError);\n                            worker.removeEventListener(\"message\", onMessage);\n                            reject(data.reason);\n                            worker.terminate();\n                        }\n                    }\n                };\n                worker.addEventListener(\"error\", onError);\n                worker.addEventListener(\"message\", onMessage);\n                worker.postMessage({ id: \"init\", url: _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__.Tools.GetBabylonScriptURL(this.Configuration.url) });\n                if (ArrayBuffer.isView(data)) {\n                    // Slice the data to avoid copying the whole array buffer.\n                    const slicedData = data.slice();\n                    worker.postMessage({ id: \"validate\", data: slicedData, rootUrl: rootUrl, fileName: fileName }, [slicedData.buffer]);\n                }\n                else {\n                    worker.postMessage({ id: \"validate\", data: data, rootUrl: rootUrl, fileName: fileName });\n                }\n            });\n        }\n        else {\n            if (!this._LoadScriptPromise) {\n                this._LoadScriptPromise = _babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__.Tools.LoadBabylonScriptAsync(this.Configuration.url);\n            }\n            return this._LoadScriptPromise.then(() => {\n                return validateAsync(data, rootUrl, fileName, getExternalResource);\n            });\n        }\n    }\n}\n/**\n * The configuration. Defaults to `{ url: \"https://cdn.babylonjs.com/gltf_validator.js\" }`.\n */\nGLTFValidation.Configuration = {\n    url: `${_babylonjs_core_Misc_tools_js__WEBPACK_IMPORTED_MODULE_0__.Tools._DefaultCdnUrl}/gltf_validator.js`,\n};\n//# sourceMappingURL=glTFValidation.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvZ2xURlZhbGlkYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGlCQUFpQjtBQUNyRSxrQ0FBa0MsbURBQW1EO0FBQ3JGLGlCQUFpQjtBQUNqQixrQ0FBa0Msc0NBQXNDO0FBQ3hFLGlCQUFpQjtBQUNqQixrQ0FBa0MsdUNBQXVDO0FBQ3pFLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxjQUFjLEdBQUcsV0FBVztBQUNyRSxzRkFBc0YsZ0NBQWdDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsb0VBQW9FO0FBQ3pILDZCQUE2QjtBQUM3QixxREFBcUQscUVBQXFFO0FBQzFILDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxpQkFBaUIsZ0VBQUssOENBQThDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx3RUFBd0U7QUFDakg7QUFDQTtBQUNBLHlDQUF5QyxrRUFBa0U7QUFDM0c7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFLO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxvREFBb0Q7QUFDekY7QUFDQTtBQUNBLFlBQVksZ0VBQUssZ0JBQWdCO0FBQ2pDO0FBQ0EsMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2dsVEZWYWxpZGF0aW9uLmpzP2M2MjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9vbHMgfSBmcm9tIFwiQGJhYnlsb25qcy9jb3JlL01pc2MvdG9vbHMuanNcIjtcbmZ1bmN0aW9uIHZhbGlkYXRlQXN5bmMoZGF0YSwgcm9vdFVybCwgZmlsZU5hbWUsIGdldEV4dGVybmFsUmVzb3VyY2UpIHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBleHRlcm5hbFJlc291cmNlRnVuY3Rpb246IGdldEV4dGVybmFsUmVzb3VyY2UsXG4gICAgfTtcbiAgICBpZiAoZmlsZU5hbWUpIHtcbiAgICAgICAgb3B0aW9ucy51cmkgPSByb290VXJsID09PSBcImZpbGU6XCIgPyBmaWxlTmFtZSA6IHJvb3RVcmwgKyBmaWxlTmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSA/IEdMVEZWYWxpZGF0b3IudmFsaWRhdGVCeXRlcyhkYXRhLCBvcHRpb25zKSA6IEdMVEZWYWxpZGF0b3IudmFsaWRhdGVTdHJpbmcoZGF0YSwgb3B0aW9ucyk7XG59XG4vKipcbiAqIFRoZSB3b3JrZXIgZnVuY3Rpb24gdGhhdCBnZXRzIGNvbnZlcnRlZCB0byBhIGJsb2IgdXJsIHRvIHBhc3MgaW50byBhIHdvcmtlci5cbiAqL1xuZnVuY3Rpb24gd29ya2VyRnVuYygpIHtcbiAgICBjb25zdCBwZW5kaW5nRXh0ZXJuYWxSZXNvdXJjZXMgPSBbXTtcbiAgICBvbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgICAgICBzd2l0Y2ggKGRhdGEuaWQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJpbml0XCI6IHtcbiAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKGRhdGEudXJsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ2YWxpZGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVBc3luYyhkYXRhLmRhdGEsIGRhdGEucm9vdFVybCwgZGF0YS5maWxlTmFtZSwgKHVyaSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBlbmRpbmdFeHRlcm5hbFJlc291cmNlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdFeHRlcm5hbFJlc291cmNlcy5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh7IGlkOiBcImdldEV4dGVybmFsUmVzb3VyY2VcIiwgaW5kZXg6IGluZGV4LCB1cmk6IHVyaSB9KTtcbiAgICAgICAgICAgICAgICB9KSkudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoeyBpZDogXCJ2YWxpZGF0ZS5yZXNvbHZlXCIsIHZhbHVlOiB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB9LCAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKHsgaWQ6IFwidmFsaWRhdGUucmVqZWN0XCIsIHJlYXNvbjogcmVhc29uIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImdldEV4dGVybmFsUmVzb3VyY2UucmVzb2x2ZVwiOiB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0V4dGVybmFsUmVzb3VyY2VzW2RhdGEuaW5kZXhdLnJlc29sdmUoZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiZ2V0RXh0ZXJuYWxSZXNvdXJjZS5yZWplY3RcIjoge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdFeHRlcm5hbFJlc291cmNlc1tkYXRhLmluZGV4XS5yZWplY3QoZGF0YS5yZWFzb24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogZ2xURiB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRGVmFsaWRhdGlvbiB7XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYSBnbFRGIGFzc2V0IHVzaW5nIHRoZSBnbFRGLVZhbGlkYXRvci5cbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgSlNPTiBvZiBhIGdsVEYgb3IgdGhlIGFycmF5IGJ1ZmZlciBvZiBhIGJpbmFyeSBnbFRGXG4gICAgICogQHBhcmFtIHJvb3RVcmwgVGhlIHJvb3QgdXJsIGZvciB0aGUgZ2xURlxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSBUaGUgZmlsZSBuYW1lIGZvciB0aGUgZ2xURlxuICAgICAqIEBwYXJhbSBnZXRFeHRlcm5hbFJlc291cmNlIFRoZSBjYWxsYmFjayB0byBnZXQgZXh0ZXJuYWwgcmVzb3VyY2VzIGZvciB0aGUgZ2xURiB2YWxpZGF0b3JcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBnbFRGIHZhbGlkYXRpb24gcmVzdWx0cyBvbmNlIGNvbXBsZXRlXG4gICAgICovXG4gICAgc3RhdGljIFZhbGlkYXRlQXN5bmMoZGF0YSwgcm9vdFVybCwgZmlsZU5hbWUsIGdldEV4dGVybmFsUmVzb3VyY2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBXb3JrZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXJDb250ZW50ID0gYCR7dmFsaWRhdGVBc3luY30oJHt3b3JrZXJGdW5jfSkoKWA7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya2VyQmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3dvcmtlckNvbnRlbnRdLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwiIH0pKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKHdvcmtlckJsb2JVcmwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9uRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBvbk1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnZXRFeHRlcm5hbFJlc291cmNlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRFeHRlcm5hbFJlc291cmNlKGRhdGEudXJpKS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZDogXCJnZXRFeHRlcm5hbFJlc291cmNlLnJlc29sdmVcIiwgaW5kZXg6IGRhdGEuaW5kZXgsIHZhbHVlOiB2YWx1ZSB9LCBbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkOiBcImdldEV4dGVybmFsUmVzb3VyY2UucmVqZWN0XCIsIGluZGV4OiBkYXRhLmluZGV4LCByZWFzb246IHJlYXNvbiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2YWxpZGF0ZS5yZXNvbHZlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZhbGlkYXRlLnJlamVjdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBvbkVycm9yKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZDogXCJpbml0XCIsIHVybDogVG9vbHMuR2V0QmFieWxvblNjcmlwdFVSTCh0aGlzLkNvbmZpZ3VyYXRpb24udXJsKSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNsaWNlIHRoZSBkYXRhIHRvIGF2b2lkIGNvcHlpbmcgdGhlIHdob2xlIGFycmF5IGJ1ZmZlci5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xpY2VkRGF0YSA9IGRhdGEuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IFwidmFsaWRhdGVcIiwgZGF0YTogc2xpY2VkRGF0YSwgcm9vdFVybDogcm9vdFVybCwgZmlsZU5hbWU6IGZpbGVOYW1lIH0sIFtzbGljZWREYXRhLmJ1ZmZlcl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IFwidmFsaWRhdGVcIiwgZGF0YTogZGF0YSwgcm9vdFVybDogcm9vdFVybCwgZmlsZU5hbWU6IGZpbGVOYW1lIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9Mb2FkU2NyaXB0UHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX0xvYWRTY3JpcHRQcm9taXNlID0gVG9vbHMuTG9hZEJhYnlsb25TY3JpcHRBc3luYyh0aGlzLkNvbmZpZ3VyYXRpb24udXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9Mb2FkU2NyaXB0UHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVBc3luYyhkYXRhLCByb290VXJsLCBmaWxlTmFtZSwgZ2V0RXh0ZXJuYWxSZXNvdXJjZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGhlIGNvbmZpZ3VyYXRpb24uIERlZmF1bHRzIHRvIGB7IHVybDogXCJodHRwczovL2Nkbi5iYWJ5bG9uanMuY29tL2dsdGZfdmFsaWRhdG9yLmpzXCIgfWAuXG4gKi9cbkdMVEZWYWxpZGF0aW9uLkNvbmZpZ3VyYXRpb24gPSB7XG4gICAgdXJsOiBgJHtUb29scy5fRGVmYXVsdENkblVybH0vZ2x0Zl92YWxpZGF0b3IuanNgLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsVEZWYWxpZGF0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/glTFValidation.js\n");

/***/ }),

/***/ "./node_modules/@babylonjs/loaders/glTF/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babylonjs/loaders/glTF/index.js ***!
  \*******************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLTF1: () => (/* reexport module object */ _1_0_index_js__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   GLTF2: () => (/* reexport module object */ _2_0_index_js__WEBPACK_IMPORTED_MODULE_3__)\n/* harmony export */ });\n/* harmony import */ var _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./glTFFileLoader.js */ \"./node_modules/@babylonjs/loaders/glTF/glTFFileLoader.js\");\n/* harmony import */ var _glTFValidation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glTFValidation.js */ \"./node_modules/@babylonjs/loaders/glTF/glTFValidation.js\");\n/* harmony import */ var _1_0_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./1.0/index.js */ \"./node_modules/@babylonjs/loaders/glTF/1.0/index.js\");\n/* harmony import */ var _2_0_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./2.0/index.js */ \"./node_modules/@babylonjs/loaders/glTF/2.0/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_0__, _glTFValidation_js__WEBPACK_IMPORTED_MODULE_1__, _1_0_index_js__WEBPACK_IMPORTED_MODULE_2__, _2_0_index_js__WEBPACK_IMPORTED_MODULE_3__]);\n([_glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_0__, _glTFValidation_js__WEBPACK_IMPORTED_MODULE_1__, _1_0_index_js__WEBPACK_IMPORTED_MODULE_2__, _2_0_index_js__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_0__) if([\"default\",\"GLTF1\",\"GLTF2\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFFileLoader_js__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _glTFValidation_js__WEBPACK_IMPORTED_MODULE_1__) if([\"default\",\"GLTF1\",\"GLTF2\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _glTFValidation_js__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* eslint-disable import/no-internal-modules */\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYnlsb25qcy9sb2FkZXJzL2dsVEYvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDb0M7QUFDQTtBQUNJO0FBQ0E7QUFDaEI7QUFDeEIsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8zZC1vZmZpY2Utdmlld2VyLy4vbm9kZV9tb2R1bGVzL0BiYWJ5bG9uanMvbG9hZGVycy9nbFRGL2luZGV4LmpzPzU3ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWludGVybmFsLW1vZHVsZXMgKi9cbmV4cG9ydCAqIGZyb20gXCIuL2dsVEZGaWxlTG9hZGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nbFRGVmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0ICogYXMgR0xURjEgZnJvbSBcIi4vMS4wL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBHTFRGMiBmcm9tIFwiLi8yLjAvaW5kZXguanNcIjtcbmV4cG9ydCB7IEdMVEYxLCBHTFRGMiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babylonjs/loaders/glTF/index.js\n");

/***/ })

};
;